{"version":3,"sources":["context/firebaseContext.js","utils/formatting.js","comps/lineChart.js","comps/barChart.js","comps/scores/scoreDataView.js","comps/scores/scoreList.js","utils/firestore/scores.js","comps/scores/addScore.js","comps/actionCancelModal.js","utils/firestore/wods.js","comps/scores/scoreView.js","utils/firestore/gymClass.js","comps/gymClasses/gymClassList.js","comps/searchSortTable.js","comps/boxes/boxView.js","utils/firestore/follows.js","comps/boxes/boxSearch.js","pages/boxSearchPage.js","comps/settings/resetPassword.js","comps/profile/deleteAccount.js","utils/firestore/users.js","comps/profile/usernamePanel.js","pages/settings.js","comps/profile/registerUser.js","comps/wods/editWod.js","utils/firestore/classAdmin.js","comps/gymClasses/inviteView.js","comps/gymClasses/inviteAdminView.js","utils/firestore/classMember.js","comps/gymClasses/inviteMemberView.js","comps/admins/classAdminList.js","comps/members/classMemberList.js","comps/wods/addWodClass.js","comps/gymClasses/gymClassView.js","utils/firestore/boxes.js","comps/boxes/ownerBoxes.js","comps/gymClasses/addGymClass.js","comps/wods/addWod.js","comps/boxes/addBox.js","comps/ownerControls.js","comps/followers/userFollows.js","comps/scores/userScoreList.js","comps/profile/athlete.js","comps/profile/adminInvites.js","comps/profile/memberInvites.js","comps/profile/classAdminView.js","comps/profile/classMemberView.js","comps/calendar/cells.js","comps/calendar/calendarView.js","pages/profile.js","utils/promises.js","comps/header.js","comps/profile/login.js","css/apptheme.js","css/applighttheme.js","app.js","index.js"],"names":["firebase","FirebaseAuthContext","React","createContext","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","cvtTimetoInt","x","split","mins","seconds","parseInt","cvtIntToTime","Math","floor","secs","database","LineChart","props","state","scoreType","data","values","stats","this","createChart","ctx","document","getElementById","grd","getContext","createLinearGradient","addColorStop","lineChart","destroy","Chart","type","label","datasets","barPercentage","barThickness","maxBarThickness","minBarLength","backgroundColor","options","scales","yAxes","ticks","callback","index","labels","tooltips","callbacks","title","tooltipItem","datasetIndex","yLabel","maintainAspectRatio","plugins","beforeInit","chart","console","log","Grid","item","xs","style","width","padding","id","Component","withTheme","BarChart","binData","barChart","update","parseFloat","_mean","sd","bins","i","binA","format","binB","unshift","push","standardDeviation","mean","createLabels","binnedData","diff","numSDAway","abs","getDescStats","vals","min","max","median","ScoreDataView","scores","graphData","rawScores","container","align","spacing","Paper","elevation","Typography","map","score","length","transformData","ScoreList","uid","Fragment","TableContainer","component","Table","aria-label","TableHead","TableRow","TableCell","TableBody","isCurUserScore","ScoreRow","key","info","onRemove","isUserScore","Card","variant","color","CardContent","gutterBottom","username","scoreID","selected","Button","size","onClick","fs","firestore","removeScore","Promise","res","rej","collection","doc","delete","then","catch","err","BorderlessTableCell","withStyles","root","borderBottom","AddScore","userMD","wodMD","obj","Array","from","Object","entries","entry","Map","s","search","userScore","value","isNumInSane","alert","isNaN","wodID","gymClassID","boxID","where","get","ss","empty","set","date","Date","now","forEach","setScore","margin","Accordion","AccordionSummary","background","theme","palette","primary","mainGrad","expandIcon","aria-controls","AccordionDetails","replace","toUpperCase","TextField","pattern","inputProps","placeholder","shrink","colSpan","handleAddScore","bind","ActionCancelModal","open","Modal","onClose","aria-labelledby","aria-describedby","position","top","left","transform","height","display","flexDirection","justifyContent","marginTop","modalText","cancelText","onAction","actionText","setWod","removeWod","wodInfo","promises","name","getSnapshot","collectionName","fieldName","fieldID","batch","cnt","ref","commit","all","RenderWodTextRaw","lines","wodText","line","ScoreView","curRemoveScoreID","showRemoveAlert","wodListener","onSnapshot","setState","scoreListener","isTime","sort","a","b","undefined","onAlert","message","DateTime","fromMillis","monthLong","day","year","keys","handleRemoveScore","handleModalClose","getGymClasses","removeGymClass","GymClass","ev","onRowClick","isOwner","EmptyClass","GymClassList","user","redirect","redirectTo","filteredGymClasses","gymClasses","removeClassID","removeClassTitle","openModal","gymClassListener","classes","keyCode","which","val","target","filter","gymClass","toLowerCase","includes","tagName","indexOf","closeModal","to","fullWidth","onKeyUp","onChange","InputProps","startAdornment","InputAdornment","stickyHeader","handleRemoveGymClass","TC","WodRow","main","borderRadius","Wod","onViewScores","overflowWrap","toLocaleDateString","alignItems","justify","showOwnerBtns","IconButton","handleEdit","handleRemove","EmptyWod","StyledTablePagination","overflow","actions","TablePagination","SearchSortTable","headers","rows","filteredRows","orderTableBy","orderTable","pageNum","rowsPerPage","pageStart","pageEnd","redirectUrl","wod","orderBy","order","descendingComparator","comparator","stabilizedThis","el","isAsc","newPage","start","end","url","header","sortable","TableSortLabel","active","direction","createSortHandler","stableSort","getComparator","slice","row","handleView","rowsPerPageOptions","count","page","onChangePage","handleChangePage","onChangeRowsPerPage","handleChangeRowsPerPage","BoxView","boxMD","boxListener","exists","getBoxListener","checkListeners","removeFollow","followID","setFollow","isFollowing","Box","isUserFollowing","handleUnfollow","handleFollow","fill","text","handleRemoveBox","EmptyBox","BoxSearch","allBoxes","filteredBoxes","userFollowing","listenForFollowing","followListener","following","box","boxInfo","handleBoxView","BoxSearchPage","allBoxesListener","boxes","y","isReadOnly","ResetPassword","currentPassword","newPassword","confirmPassword","creds","auth","EmailAuthProvider","credential","email","reauthenticateWithCredential","updatePassword","persist","InputLabelProps","handleSubmit","DeleteAccount","userConfirmText","confirmText","removeUser","error","UsernamePanel","usernameInput","exec","docs","setUsername","updateUsername","SettingsRow","openSetting","Settings","currentPage","settings","setting","handleBack","ArrowBackIos","RegisterUser","pass1","pass2","createUserWithEmailAndPassword","admin","accountType","StyledGrid","marginBottom","EditWod","userBoxes","hasBoxes","editWod","handleValChange","multiline","editWOD","sendAdminInvite","inviteRef","isClassAdmin","isAdmin","isNotificationSent","isSent","adminInviteID","classSS","classDoc","InviteView","filteredUsers","modalOpen","onModalClose","endAdornment","Select","native","onSelectChange","JSON","stringify","borderColor","sendInvite","InviteAdminView","gymClassMD","allUsers","selectedUser","listener","users","msg","senderUID","senderUsername","gymClassTitle","boxTitle","String","parse","sendMemberInvite","isClassMember","isMember","memberInviteID","InviteMemberView","AdminRow","handleRemoveAdmin","EmptyAdmin","ClassAdminList","filteredAdmins","admins","removeClassAdmin","classAdmin","classAdminID","fontSize","onRemoveAdmin","removeUsername","MemberRow","handleRemoveMember","EmptyMember","ClassMemberList","filteredMembers","members","classMember","member","classMemberID","onRemoveMember","SCORETYPES","AddWodClass","titleForm","scoreTypeForm","wodTextForm","gymClassIsPrivate","isPrivate","onScoreTypeSelectChange","onTitleChange","onWodTextChange","createWOD","GymClassView","wods","currentWodID","currentWodMD","showEditModal","editWodInfo","curRemovewodInfo","inviteModalOpen","inviteMemberModalOpen","adminUids","memberUids","showAdminList","showMemberList","showAddWod","getWodListener","userBoxesListener","adminListener","memberListener","getWods","getUserBoxListener","getAdminListener","getMemberListener","getGymClassListener","filteredWods","constructor","viewMemberBtnSize","isOnlyMember","closeDetailView","openAdminInvite","openViewAdmins","onInviteModalClose","openMemberInvite","openViewMembers","onInviteMemberModalClose","toggleShowAddWod","handleRemoveWod","deleteWod","curRemoveWodTitle","curRemoveWodID","handleEditModalClose","removeBox","batchDelete","batchUpdate","BoxListAccordion","currentBoxID","curRemoveBoxID","curRemoveBoxTitle","zeroMinWidth","noWrap","deleteBox","AddGymClass","createGymClass","result","owner","setGymClass","checked","Checkbox","handleCheckboxChange","AddWod","setGymClassListner","initClass","onBoxSelectChange","onClassSelectChange","AddBox","createBox","setBox","OwnerControls","addBoxProgress","tabs","0","1","2","3","listenForBoxes","AppBar","Tabs","selectionFollowsFocus","handleChange","Tab","minHeight","maxHeight","overflowY","className","isOwnerView","UserFollows","userFollows","follows","getFollowers","followingSS","extractData","docChanges","change","modData","follow","Link","UserScoreList","removeScoreID","hideRemoveAlert","onViewBox","handleViewBox","onViewWod","handleViewWod","onView","Athlete","Notification","gymClassBoxTitle","acceptInvite","Check","removeNotification","Close","AdminInvites","notifications","getListener","notificationsListener","notify","classTitle","shallow","setClassAdmin","onRemoveNotification","MemberInvites","setClassMember","ClassAdminView","userClassAdminsListener","ClassMemberView","userClassMembersListener","Cell","SuperCell","CellRow","RedCell","GreyCell","GreenCell","WhiteCell","BlueCell","PurpleCell","GoldCell","cellData","valid","isToday","CalendarScoreView","today","calendar","createCalendar","local","month","daysInMonth","getFirstOfMonth","getEndOfMonth","fullWeek1","fullWeek2","getFirstAndLast","first","last","firstWeek","fullWeek","lastWeek","weekday","startOffset","getOffsetDayOfMonthFromDate","endOffset","c","col","offset","week","scoreDate","fillCalendar","j","border","PageContentRaw","emailAlertOpen","cancelablePromise","cancel","listenForUserScores","emailVerifyPromise","sendEmailVerification","promise","hasCanceled_","resolve","reject","isCanceled","makeCancelable","Collapse","in","Alert","emailVerified","sendVerificationEmail","PageContent","ProfilePage","StyledMenuItem","common","white","MenuItem","StyledTypography","StyledPaper","UserAlert","severity","alertInfo","onCloseAlert","Header","menuRef","createRef","alertOpen","preventDefault","toolbar","Toolbar","disableGutters","marginLeft","marginRight","handleToggle","Menu","Popper","anchorEl","current","placement","transition","disablePortal","popper","TransitionProps","Fade","transformOrigin","ClickAwayListener","onClickAway","handleClose","MenuList","onKeyDown","handleListKeyDown","changeTheme","handleLogout","zIndex","Login","signInWithEmailAndPassword","onLogin","apptheme","borderBottomColor","applighttheme","darkTheme","createMuiTheme","responsiveFontSizes","lightTheme","lightapptheme","BackgroundGrid","paper","App","btmnav","currentUser","firebaseAuthListener","onAuthStateChanged","userMDListener","metadata","signOut","newTheme","Provider","ThemeProvider","paddingTop","exact","path","render","match","params","handleLogin","BottomNavigation","event","newValue","showLabels","BottomNavigationAction","icon","contextType","ReactDOM"],"mappings":"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","file":"static/js/main.4d603e03.chunk.js","sourcesContent":["import * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport React from \"react\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCGE8_j8cfIBmIzcvP6CVgG2yC6EE1Ep1U\",\n  authDomain: \"wodtrackrr.firebaseapp.com\",\n  databaseURL: \"https://wodtrackrr.firebaseio.com\",\n  projectId: \"wodtrackrr\",\n  storageBucket: \"wodtrackrr.appspot.com\",\n  messagingSenderId: \"743601990099\",\n  appId: \"1:743601990099:web:5937e9151eaad13e93a726\",\n  measurementId: \"G-39CF0BRPMH\"\n};\n\n\n\nexport default firebase\nexport const FirebaseAuthContext = React.createContext(firebase.initializeApp(firebaseConfig));","export default function cvtReps(x){\n\treturn parseInt(x)\n}\n\nexport function cvtTimetoInt(x){\n\tlet [mins, seconds] = x.split(\":\")\n\treturn (parseInt(mins) * 60) + parseInt(seconds)\n}\n\nexport function dupNewLine(text){\n\tconsole.log(\"\\n\".charCodeAt(0))\n\t\n\tlet newLinePattern = /\\\\n/\n\tlet newText = text.replace(newLinePattern, \"\\\\n\\\\n\")\n\t\n\tfor(let c of newText){\n\t\tconsole.log(c)\n\t\tconsole.log(c.charCodeAt(0))\n\t}\n\treturn newText\n}\n\nexport function cvtIntToTime(x){\n\tlet mins = Math.floor(x / 60)\n\tlet secs = Math.floor(x - (mins*60))\n\tif(secs < 10){\n\t\tsecs = `0${secs}`\n\t}\n\treturn `${mins}:${secs}`\n}\n\n\nexport function cvtTimetoIntList(rawScores){\n\treturn rawScores.map((score) => {\n\t\tcvtTimetoInt(score)\n\t})\n}\n\n\nexport function msToDate(ms){\n\treturn new Date(ms).toLocaleDateString(\"en-US\")\n}\n\n\nexport function formatDate(){\n  const [{ value: month },,{ value: day },,{ value: year }] \n    = new Intl.DateTimeFormat('en', \n      { year: 'numeric', month: 'numeric', day: '2-digit' })\n      .formatToParts(new Date())  \n  console.log(new Intl.DateTimeFormat('en', \n      { year: 'numeric', month: 'numeric', day: '2-digit' }))\n  return `${year}/${month}/${day}`\n}\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\nimport Chart from 'chart.js';\n\nimport {cvtTimetoInt, cvtIntToTime} from \"../utils/formatting\"\n// Stats\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport \"../styles.css\"\n\n\nvar db = firebase.database();\n\n\nclass LineChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscoreType: props.scoreType,\n\t\t\tdata: props.data, // x y values for chart\n\t\t\tvalues: props.values, // raw score values\n\t\t\tstats: props.stats // mean, median, SD\n\t\t}\n\t}\n\t\n\tcomponentDidMount(){\n\t\tthis.createChart()\n\t}\n\n\tcreateChart(){\n\t\tthis.ctx = document.getElementById('lineChart');\n\t\t\n\t\tlet context = this.ctx.getContext('2d')\n\t\tlet grd = context.createLinearGradient(200,0,200,400);\n\t\tgrd.addColorStop(0,\"#01d3fe\");\n\t\t\n\t\tgrd.addColorStop(1,\"#0890fd\");\n\n\t\tif(this.lineChart){\n\t\t\tthis.lineChart.destroy()\n\t\t}\n\t\t\n\t\tthis.lineChart = new Chart(this.ctx, {\n\t\t    type: 'line',\n\t\t    \n\t\t    data:  {\n\t\t    \tlabel: \"Scores\",\n\t\t\t    datasets: [{\n\t\t\t    \tlabel: \"Score\",\n\t\t\t        barPercentage: 0.5,\n\t\t\t        barThickness: 6,\n\t\t\t        maxBarThickness: 8,\n\t\t\t        minBarLength: 2,\n\t\t\t        backgroundColor: grd,\n\t\t\t        data: this.state.data\n\t\t\t    }]\n\t\t\t},\n\t\t\toptions:{\n\t\t\t\tscales: {\n\t\t            yAxes: [{\n\t\t                ticks:{\n\t\t                \tcallback: (label, index, labels) => {\n\t\t\t                \tif(this.state.scoreType === \"time\"){\n\t\t\t                \t\treturn cvtIntToTime(label)\n\t\t\t                \t}else if(this.state.scoreType === \"reps\"){\n\t\t\t                \t\treturn label\n\t\t\t                \t}\n\t\t\t                }\n\t\t\t             }\n\t\t            }]\n\t\t\t    },\n\t\t\t    tooltips: {\n\t\t\t        callbacks: {\n\t\t\t        \ttitle: (tooltipItem, data) => {\n\n\t\t\t        \t},\n\t\t\t            label: (tooltipItem, data) => {\n\t\t\t                var label = data.datasets[tooltipItem.datasetIndex].label || '';\n\n\t\t\t                if (label) {\n\t\t\t                    label += ': ';\n\t\t\t                }\n\n\t\t\t                if(this.state.scoreType === \"time\"){\n\t\t                \t\tlabel += cvtIntToTime(tooltipItem.yLabel)\n\t\t                \t}else if(this.state.scoreType === \"reps\"){\n\t\t                \t\tlabel += tooltipItem.yLabel\n\t\t                \t}\n\t\t\t                \n\t\t\t                \n\t\t\t                return label;\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t},\n\t\t\tplugins: [{\n\t\t\t\tbeforeInit: function(chart) {\n\t\t\t\t\tvar chartData = chart.data.datasets[0].data\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.createChart()\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log(\"Component will unmount\")\n\t}\n\n  render(){\n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<div style={{width: \"92vw\", padding: \"8px\"}}>\n\t\t\t\t\t<canvas id=\"lineChart\" ></canvas>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\n\n\n\n  \nexport default LineChart = withTheme(LineChart);\n\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// Stats\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport {cvtTimetoInt, cvtIntToTime} from \"../utils/formatting\"\nimport \"../styles.css\"\n\nimport Chart from 'chart.js';\n\n\n\nvar db = firebase.database();\n\nclass BarChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscoreType: props.scoreType,\n\t\t\tdata: props.data, // x y values for chart\n\t\t\tvalues: props.values, // raw score values\n\t\t\tstats: {} // mean, median, SD\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\tconsole.log(props)\n\t\tconsole.log(state)\n\t\treturn props\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.createChart(this.binData(this.state.values))\n\t}\n\n\tcomponentDidUpdate(){\n\t\tconsole.log(this.state)\n\t\tthis.createChart(this.binData(this.state.values))\n\t}\n\n\tcreateChart([labels, data]){\n\t\tthis.ctx = document.getElementById('barChart');\n\t\tlet context = this.ctx.getContext('2d')\n\t\tlet grd = context.createLinearGradient(200,0,200,400);\n\t\tgrd.addColorStop(0,\"#01d3fe\");\n\t\tgrd.addColorStop(1,\"#0890fd\");\n\n\t\tif(this.barChart){\n\t\t\tthis.barChart.destroy()\n\t\t}\n\t\tthis.barChart = new Chart(this.ctx, {\n\t\t    type: 'bar',\n\t\t    data:  {\n\t\t    \tlabels: labels,\n\t\t\t    datasets: [{\n\t\t\t    \t'label': \"Scores (Standard Deviation)\",\n\t\t\t        minBarLength: 1,\n\t\t\t        backgroundColor: grd,\n\t\t\t        data: data\n\t\t\t    }]\n\t\t\t},\n\t\t\toptions:{\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t}\n\t\t});\n\t\tthis.barChart.update()\n\t}\n\n\tformat(x){\n\t\tif(this.state.scoreType === \"time\"){\n\t\t\treturn x <= 0 ? 0 : cvtIntToTime(x)\n\t\t}else if(this.state.scoreType === \"reps\"){\n\t\t\treturn parseFloat(x)\n\t\t}\n\t}\n\n\tcreateLabels(_mean, sd){\n\t\tlet bins = []\n\n\t\tfor(let i=0; i<3; i++){\n\t\t\tlet binA = `${this.format(_mean - (sd * (i + 1)))} - ${this.format(_mean - (sd * i))}`\n\t\t\tlet binB = `${this.format(_mean + (sd * i))} - ${this.format(_mean + (sd * (i + 1)))}`\t\n\t\t\tbins.unshift(binA)\n\t\t\tbins.push(binB)\n\t\t}\n\t\treturn bins\n\t}\n\n\tbinData(values){\n\t\t/*\n\t\t\t{x: binValue, y: countOfbin}\n\t\t\t6 bins 1,2,3 SD from Mean each way\n\t*/\n\t\tlet sd = standardDeviation(values)\n\t\tlet _mean = mean(values)\n\t\tlet labels = this.createLabels(_mean, sd)\n\t\tlet binnedData = [0, 0, 0, 0, 0, 0]\n\t\tfor(let x of values){\n\t \t\tlet diff = (x - _mean)\n\t \t\tlet numSDAway = Math.floor(diff / sd)\t \t\t\n\t \t\tif(Math.abs(numSDAway) <= 1){\n\t \t\t\tif(diff > 0){\n\t \t\t\t\tbinnedData[3]++\n\t \t\t\t}else{\n\t \t\t\t\tbinnedData[2]++\n\t \t\t\t}\n\t \t\t}else if(Math.abs(numSDAway) <= 2){\n\t \t\t\tif(diff > 0){\n\t \t\t\t\tbinnedData[4]++\n\t \t\t\t}else{\n\t \t\t\t\tbinnedData[1]++\n\t \t\t\t}\n\t \t\t} else{\n\t \t\t\tif(diff > 0){\n\t \t\t\t\tbinnedData[5]++\n\t \t\t\t}else{\n\t \t\t\t\tbinnedData[0]++\n\t \t\t\t}\n\t \t\t}\n\t\t}\n\t\treturn [labels, binnedData]\n\t}\n\n  render(){\n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<div style={{width: \"92vw\", padding: \"8px\"}}>\n\t\t\t\t\t<canvas id=\"barChart\"></canvas>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\nexport default BarChart = withTheme(BarChart);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport LineChart from \"../lineChart\"\nimport BarChart from \"../barChart\"\n\nimport {cvtTimetoInt, cvtIntToTime, cvtTimetoIntList} from \"../../utils/formatting\"\nimport \"../../styles.css\"\n\nfunction transformData(scores){\n\t/*\n\t\tcreate two arrays\n\t\tOne for data display in graph, \n\t\t\t\t[ {\"category\": \"A\", \"amount\": 28}, ... ]\n\t\tSecond to crunch data, raw values\n\t\t\tkey\t=> uid\n\t\t\t\tboxID: \t\t\"-MMVcVjihF2bXFc6qIEp\"\n\t\t\t\tscore:  \t\"321\"\n\t\t\t\tusername:  \t\"TestOwner\"\n\t\t\t\twodID:  \t\"-MMjP1_MQH23dnFQOfjR\"\n\t*/\n\tlet graphData = []\n\tlet scoreType = \"\"\n\tlet values = scores.map(score => {\n\t\tscoreType = score.scoreType\n\t\treturn (score.scoreType === \"time\") ? cvtTimetoInt(score.score)\n\t\t\t: parseFloat(score.score)\n\t})\n\t\n\t// create data list for chart \n\tfor(let i =0; i < values.length; i++){\n\t\t graphData.push({\"x\": i, \"y\": values[i], \"c\": 0})\n\t}\n\treturn [graphData, values, scoreType, getDescStats(values)]\n}\n\nfunction getDescStats(vals){\n\t console.log(vals)\n\treturn {\n\t\t'min': Math.min(...vals),\n\t\t'max': Math.max(...vals),\n\t\t'mean': mean(vals),\n\t\t'median': median(vals),\n\t\t'sd': standardDeviation(vals)\n\t}\n}\n\nclass ScoreDataView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores, // array of objects\n\t\t\tgraphData: [],\n\t\t\trawScores: [],\n\t\t\tscoreType: \"\",\n\t\t\tstats: {}\n\t\t}\t\t\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\t\t\n\t\tlet data = transformData(props.scores)\n\t\tlet [graphData, rawScores, scoreType, stats] = data\n\n\t\treturn {...props,\n\t\t\tgraphData: graphData, \n\t\t\trawScores: rawScores, \n\t\t\tscoreType: scoreType, \n\t\t\tstats: stats\n\t\t}\n\t}\n\n\tcomponentDidUpdate(){\n\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log(\"Component will unmount\")\n\t}\n\n\t\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12}>\n\t\t\t<Grid item container align=\"center\" spacing={1} xs={12}>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\tLow: {this.state.scoreType === \"time\" ? \n\t\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"min\"])\n\t\t\t\t\t\t\t\t: this.state.stats[\"min\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\tHigh: {this.state.scoreType === \"time\" ?\n\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"max\"])\n\t\t\t\t\t\t\t: this.state.stats[\"max\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography >\n\t\t\t\t\t\t\tAvg: {this.state.scoreType === \"time\" ?\n\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"mean\"])\n\t\t\t\t\t\t\t: this.state.stats[\"mean\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t</Grid> \n\n\t\t\t\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<LineChart \n\t\t\t\t\t\tdata = {this.state.graphData}\n\t\t\t\t\t\tvalues={this.state.rawScores}\n\t\t\t\t\t\tscoreType={this.state.scoreType}\n\t\t\t\t\t\tstats={this.state.stats} />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<BarChart \n\t\t\t\t\t\tdata = {this.state.graphData}\n\t\t\t\t\t\tvalues={this.state.rawScores}\n\t\t\t\t\t\tscoreType={this.state.scoreType}\n\t\t\t\t\t\tstats={this.state.stats} />\n\t\t\t\t</Grid>\n\n\n\n\t\t</Grid>\n\t)\n  }\n}\nexport default ScoreDataView = withTheme(ScoreDataView);\n\n","import React, { Component } from 'react'\n\nimport \n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tCardActions, Card, CardContent, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\nimport Delete from '@material-ui/icons/Delete'\n\n\n\nimport \"../../styles.css\"\n\nclass ScoreList extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores,\n\t\t\tuid: props.uid\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\t\n  render(){\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t{this.state.scores.length > 0?\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t<Table aria-label=\"score table\">\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Username</TableCell>\n\t\t\t\t\t\t<TableCell>Score</TableCell>\n\t\t\t\t\t\t<TableCell></TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.scores.map((score, i) => {\n\t\t\t\t\t\tlet isCurUserScore = \n\t\t\t\t\t\t\t(this.state.uid == score[\"uid\"])? true : false\n\t\t\t\t\t\treturn <ScoreRow key={i}\n\t\t\t\t\t\t\tinfo={score}\n\t\t\t\t\t\t\tonRemove = {this.props.onRemove}\n\t\t\t\t\t\t\tisUserScore={isCurUserScore} \n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t    </TableBody>\n\t\t\t    </Table>\n\t\t\t</TableContainer>\n\t\t\t:\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Card variant=\"outlined\" color=\"primary\">\n\t\t\t\t  <CardContent>\n\t\t\t\t    <Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t   \tNo Scores!\n\t\t\t\t    </Typography>\n\t\t\t\t   </CardContent>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t\t}\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n  \nexport default ScoreList = withTheme(ScoreList);\n\n\n/*\nShow details of Box and its WODS\n*/\nfunction ScoreRowRaw(props){\n\tlet score = props.info[\"score\"]\n\tlet username = props.info[\"username\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet uid = props.info[\"uid\"]\n\tlet scoreID = props.info[\"scoreID\"]\n\tlet rowStyle = (props.isUserScore)? \"\": \"\"\n\treturn(\n\t\t<TableRow selected={props.isUserScore}>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{username}\n\t\t\t\t</TableCell>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{score} \n\t\t\t\t</TableCell>\n\t\t\t\t{\n\t\t  \t\t\tprops.isUserScore\n\t\t  \t\t\t?\n\t\t\t  \t\t<TableCell align=\"right\">\n\t\t\t\t\t    <Button size=\"small\" \n\t\t\t\t\t    \t\n\t\t\t\t\t    \tonClick={() => props.onRemove(scoreID)}>\n\t\t\t\t\t    \t<Delete color=\"error\"  />\n\t\t\t\t\t    </Button>\n\t\t\t  \t\t</TableCell>\n\t\t\t  \t\t:\n\t\t\t  \t\t<TableCell></TableCell>\n\n\t\t  \t\t}\n\t\t</TableRow>\n\t)\n}\nlet ScoreRow =  withTheme(ScoreRowRaw)","/*\n\tScores\n*/\n\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\n\nexport function setScore(title, username, uid, userScore, wodID, gymClassID, boxID,\n\t\t\t\t\t\tscoreType){\n\treturn new Promise((res, rej) => {\n\t\tlet data = {\n\t\t\t\tuid: uid,\n\t\t\t\twodID: wodID,\n\t\t\t\tgymClassID: gymClassID,\n\t\t\t\tboxID: boxID,\n\t\t\t\tusername: username,\n\t\t\t\ttitle: title,\n\t\t\t\tscore: userScore,\n\t\t\t\tscoreType: scoreType\n\t\t\t}\n\t\tfs.collection(\"scores\")\n\t\t.where(\"uid\", \"==\", uid)\n\t\t.where(\"wodID\", \"==\", wodID)\n\t\t.get().then(ss => {\n\t\t\tlet key = \"\"\n\t\t\tconsole.log(ss)\n\t\t\tif(!ss.empty){\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tkey = doc.data().scoreID\n\t\t\t\t})\n\n\t\t\t\tfs.collection(\"scores\")\n\t\t\t\t.doc(key)\n\t\t\t\t.update({\n\t\t\t\t\t...data,\n\t\t\t\t\tscoreID: key\n\t\t\t\t})\n\t\t\t\t.then(() => {res(\"Updated score.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t}else{\n\t\t\t\tlet doc = fs.collection(\"scores\").doc()\n\t\t\t\tdoc.set({\n\t\t\t\t\t...data,\n\t\t\t\t\tdate: Date.now(),\n\t\t\t\t\tscoreID: doc.id\n\t\t\t\t})\n\t\t\t\t.then(() => {res(\"Added new score.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t\t// Create score\n\t\t\t}\n\t\t},\n\t\t\terr => {\n\t\t\t\trej(err)\n\t\t})\n\t})\n}\n\nexport function removeScore(scoreID){\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"scores\").doc(scoreID).delete()\n\t\t.then(()=>{res(`Successfully removed score: ${scoreID}`)})\n\t\t.catch((err) => {rej(`Failed to remove score: ${scoreID}`)})\n\t})\n}\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableBody, Table, Modal, TableCell\n} \nfrom '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\n\n\nimport { setScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\n\n\nconst BorderlessTableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TableCell)\n\n\nvar db = firebase.database();\n\nclass AddScore extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\twodMD: props.wodMD\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tobjListToArray(obj){\n\t\t// let key = Object.keys(obj)[0]\n\t\treturn Array.from(Object.entries(obj), entry => {\n\t\t\t return new Map(Object.entries(entry[1]));\n\t\t})\n\t}\n\n\tisNumInSane(s){\n\t\tlet hasNonDigitRegex = /\\D/\n\t\tlet res = s.search(hasNonDigitRegex) \n\t\tlet isSane = (res === -1) ? true: false\n\t\treturn isSane \n\t}\n\n\thandleAddScore(){\n\t\tif(!this.state.userMD){return}\n\n\t\tlet userScore = \"\"\n\t\tif(this.state.wodMD['scoreType'] === \"time\"){\n\t\t\tlet mins =  document.getElementById(\"scoreViewUserScoreMins\").value\n\t\t\tlet secs =  document.getElementById(\"scoreViewUserScoreSecs\").value\n\t\t\tif(!this.isNumInSane(mins) || !this.isNumInSane(secs)){\n\t\t\t\talert(`Time must only contain numbers, entered: ${mins}:${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(parseInt(secs) > 59){\n\t\t\t\talert(`Seconds must be 59 or below, entered: ${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(parseInt(secs) < 10 && secs.length === 1){\n\t\t\t\tsecs = `0${secs}`\n\t\t\t}\n\t\t\tif(isNaN(parseInt(secs)) ||  isNaN(parseInt(mins))){\n\t\t\t\talert(`Missing field, entered: ${mins}:${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(mins.length > 2){\n\t\t\t\talert(`Minutes must be 99 or below, entered: ${mins}`)\t\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(mins.length === 0){\n\t\t\t\tmins = \"0\"\n\t\t\t}\n\t\t\tif(secs.length === 0){\n\t\t\t\tsecs = \"0\"\n\t\t\t}\n\t\t\tuserScore = `${mins}:${secs}`\n\t\t}else{\n\t\t\t// reps or rounds\n\t\t\tuserScore =  document.getElementById(\"scoreViewUserScore\").value\n\t\t\tif(userScore.length > 3){\n\t\t\t\talert(`Score must be 3 digits or less, entered: ${userScore}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(!userScore){\n\t\t\t\talert(\"Must enter score.\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(!this.isNumInSane(userScore)){\n\t\t\t\talert(`Score must be digits only, entered: ${userScore}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tlet username = this.state.userMD.username\n\t\tlet uid = this.state.userMD.uid\n\t\tlet wodID = this.state.wodMD[\"wodID\"]\n\t\tlet gymClassID = this.state.wodMD[\"gymClassID\"]\n\t\tlet boxID = this.state.wodMD[\"boxID\"]\n\t\tlet title = this.state.wodMD[\"title\"]\n\t\tlet scoreType = this.state.wodMD[\"scoreType\"]\n\t\t\n\t\tsetScore(title, username, uid, userScore, wodID, gymClassID, boxID, scoreType)\n\t\t.then((res) => console.log(res))\n\t\t.catch((err) => console.log(err))\n\t}\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n\t\t\t<Accordion>\n\t\t\t\t<AccordionSummary\n\t\t\t\t\tstyle={{background: this.props.theme.palette.primary.mainGrad}}\n\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\taria-label=\"Expand\"\n\t\t\t\t\taria-controls=\"additional-actions2-content\"\n\t\t\t\t\tid=\"additional-actions2-header\">\n\t\t\t\t\t<Typography >\n\t\t\t\t\t\tAdd Score\n\t\t\t\t\t</Typography>\t        \n\t\t\t\t</AccordionSummary>\n\t\t\t\t<AccordionDetails>\n\t\t\t\t\t<Grid item container xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\t{this.state.wodMD['scoreType']\n\t\t\t\t\t\t\t\t.replace(\n\t\t\t\t\t\t\t\t\tthis.state.wodMD['scoreType'][0],\n\t\t\t\t\t\t\t\t\tthis.state.wodMD['scoreType'][0].toUpperCase())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TableContainer>\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t{this.state.wodMD.scoreType === \"time\" ?\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<BorderlessTableCell align=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"scoreViewUserScoreMins\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\t\t\t\tpattern=\"[0-9]{3}\"\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Numbers only, max length 3\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Minutes\"\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\n\t\t\t\t\t\t\t\t\t\t<BorderlessTableCell align=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"scoreViewUserScoreSecs\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\t\t\t\tpattern=\"[0-9]{2}\"\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Numbers only, max length 2\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Seconds\"\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t:\t\n\t\t\t\t\t\t\t\t\t\t<BorderlessTableCell align=\"center\" colSpan={2}>\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tid=\"scoreViewUserScore\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\t\t\tpattern=\"[0-9]{4}\"\n\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Numbers only, max length 4\",\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Score\"\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t<BorderlessTableCell colSpan={3} align=\"center\">\n\t\t\t\t\t\t\t\t\t\t<Button  color=\"primary\" style={{width: \"100%\"}} variant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleAddScore.bind(this)}>\n\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</TableContainer>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</AccordionDetails>\n\t\t\t</Accordion>\t\t\n\t\t</Grid>\n\t)\n  }\n}\n\n  \nexport default AddScore = withTheme(AddScore);\n\n","import React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\n\n\n\nclass ActionCancelModal extends Component{\n\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\topen: props.open\n\t\t}\n\t\t/*\n\t\topen\n\t\tactionText\n\t\tcancelText\n\t\tmodalText\n\t\tonAction\n\t\tonClose\n\t\t*/\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal\n\t\t\t    open={this.state.open}\n\t\t\t    onClose={this.props.onClose}\n\t\t\t    aria-labelledby=\"simple-modal-title\"\n\t\t\t    aria-describedby=\"simple-modal-description\">\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: \"50%\",\n\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\twidth: \"80vw\",\n\t\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t\t}}>\n\t\t\t\t\t<Grid \n\t\t\t\t\t\titem \n\t\t\t\t\t\talign=\"center\" \n\t\t\t\t\t\txs={12}\n\t\t\t\t\t>\n\t\t\t\t\t<Paper style={{height:\"25vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\t\t\t\t\t\t<Grid item container xs={12}>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<Typography style={{marginTop: \"32px\"}}>\n\t\t\t\t\t\t\t\t\t{this.props.modalText}\n\t\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\tvariant=\"outlined\" \n\t\t\t\t\t\t\t\t\tonClick={()=>{ this.props.onClose()}}>\n\t\t\t\t\t\t\t\t\t{this.props.cancelText}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\" \n\t\t\t\t\t\t\t\t\tonClick={()=>{ this.props.onAction()}}>\n\t\t\t\t\t\t\t\t\t{this.props.actionText}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\n\t\t)\n\t}\n\n}\n\nexport default ActionCancelModal = withTheme(ActionCancelModal);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\n\n\nexport default function mTea(){}\n\n/*\n\tWods\n*/\nlet fs = firebase.firestore();\n\nexport function getWods(gymClassMD){\n\tlet doc = fs.collection(\"wods\").doc(gymClassMD.gymClassID)\n\t.collection(\"wods\").where(\"isPrivate\", \"==\", gymClassMD.isPrivate)\n\tconsole.log(doc)\n\treturn doc\n}\n\nexport function getWod(gymClassID, wodID){\n\treturn fs.collection(\"wods\").doc(gymClassID).collection(\"wods\").doc(wodID)\n\n}\n\nexport function setWod(data){\n\n\tlet doc = fs.collection(\"wods\").doc(data.gymClassID).collection(\"wods\").doc()\n\treturn doc.set({ ...data, date: Date.now(), wodID: doc.id })\n}\n\nexport function editWod(data){\n\tlet fs = firebase.firestore()\n\tconsole.log(\"Edit wod\")\n\tconsole.log(data)\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"wods\").doc(data.gymClassID)\n\t\t.collection(\"wods\").doc(data.wodID)\n\t\t.update(data)\n\t\t.then(()=> {res(\"Finished updating.\")})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\n\n\nfunction getSnapshot(collectionName, fieldName, fieldID, res, rej){\n\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\tif(ss.size == 0) res(1)\n\n\t\tss.forEach(doc => {\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)\n\t\t\t\tgetSnapshot(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeWod(wodInfo){\n\n\tlet collectionNames = [`wods/${wodInfo.gymClassID}/wods`, \"scores\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tgetSnapshot(name, \"wodID\", wodInfo.wodID, res, rej)\n\t\t})\n\t})\n\n\treturn Promise.all(promises)\n}\n\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{   Grid, Paper, Button, Typography, Collapse, TextField, Select,\n  Accordion, AccordionSummary, AccordionDetails, FormControlLabel,\n  CircularProgress, LinearProgress, CardActions, Card, CardContent,\n  ListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n  TableCell, TableBody, Table, Modal, GridListTileBar\n}\nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { DateTime } from 'luxon'\n\nimport ScoreDataView from \"./scoreDataView\"\nimport ScoreList from \"./scoreList\"\nimport AddScore from \"./addScore\"\nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport { removeScore } from \"../../utils/firestore/scores\"\nimport { getWod } from \"../../utils/firestore/wods\"\nimport { dupNewLine } from \"../../utils/formatting\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nfunction RenderWodTextRaw(props){\n  let lines = props.wodText.split(\"\\n\")\n  return(\n    <Grid item xs={12}>\n      {\n        lines.map((line, i) => {\n          return(\n            <Grid item xs={12} key={i}>\n              <Typography>\n                {line? line: <br/>}\n              </Typography>\n            </Grid>\n          )\n        })\n      }\n    </Grid>\n  )\n}\n\nconst RenderWodText = withTheme(RenderWodTextRaw)\n\nclass ScoreView extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD,\n      gymClassID: props.gymClassID,\n      wodID: props.wodID,\n      wodMD: {},\n      scores: [],\n      userScore: {},\n      curRemoveScoreID: \"\",\n      showRemoveAlert: false\n    }\n  }\n\n  componentDidMount(){\n    console.log(this.state.userMD)\n    console.log(this.state.gymClassID, this.state.wodID)\n\n    let fs = firebase.firestore()\n    this.wodListener = getWod(this.state.gymClassID, this.state.wodID)\n    .onSnapshot(ss => {\n      this.setState({wodMD: ss.data()})\n    },\n      err => {console.log(err)})\n\n    this.scoreListener = fs.collection(\"scores\")\n    .where(\"wodID\", \"==\", this.state.wodID)\n    .onSnapshot(ss => {\n      if(!ss.empty){\n        let scores = []\n        let userScore = {}\n        let scoreType = \"\"\n        ss.forEach(doc => {\n          let data = doc.data()\n          scores.push(data)\n          scoreType = data.scoreType\n          if(data.uid === this.state.uid)\n            userScore = data\n        })\n        let isTime = (scoreType && scoreType === \"time\") ? 1 : 0\n        scores.sort((a,b) => {\n          return isTime\n          ?\n              parseFloat(a[\"score\"]) < parseFloat(b[\"score\"]) ? -1 : 1\n          :\n             parseFloat(a[\"score\"]) > parseFloat(b[\"score\"]) ? 1 : -1\n        })\n        this.setState({\n          scores: scores,\n          userScore: userScore\n        })\n      }else{\n        this.setState({\n          scores: [],\n          userScore: {}\n        })\n      }\n    },\n      err => {})\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  componentWillUnmount(){\n    if(this.scoreListener !== undefined)\n      this.scoreListener()\n    if(this.wodListener !== undefined)\n      this.wodListener()\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert:false})\n  }\n\n  handleRemoveScore(scoreID){\n    this.setState({curRemoveScoreID: scoreID, showRemoveAlert: true})\n  }\n\n  removeScore(){\n    let scoreID = this.state.curRemoveScoreID\n    if(scoreID === \"\" || scoreID.length <=0){\n      this.props.onAlert({\n        type: \"warning\",\n        message: \"Invalid scoreID!\"\n      })\n      return\n    }\n\n\n    this.setState({showRemoveAlert: false})\n    removeScore(scoreID)\n    .then((res)=>{\n      this.props.onAlert({\n        type: \"success\",\n        message: res\n      })\n    })\n    .catch((err)=>{\n      this.props.onAlert({\n        type: \"error\",\n        message: err\n      })\n    })\n  }\n\n  render(){\n\n   let date = this.state.wodMD && this.state.wodMD.date?  DateTime.fromMillis(this.state.wodMD.date) : {monthLong: \"\", day: \"\", year:\"\"}\n\n\n  return(\n    <React.Fragment>\n      {Object.keys(this.state.wodMD).length > 0 ?\n        <Grid item xs={12}>\n          <Grid item align=\"center\" xs={12}>\n            <Paper elevation={6}>\n            <Typography>{this.state.wodMD[\"boxTitle\"]}</Typography>\n            <Typography>{this.state.wodMD[\"gymClassTitle\"]}</Typography>\n              <Typography>{this.state.wodMD[\"title\"]}</Typography>\n              <Typography\n                variant=\"subtitle1\"\n                color=\"primary\">\n                  For {this.state.wodMD[\"scoreType\"]}\n              </Typography>\n              <Typography\n                variant=\"caption\"\n                color=\"secondary\">\n                  {date.monthLong} {date.day}, {date.year}\n              </Typography>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Paper elevation={6} style={{\n                margin: \"8px 0px 8px 0px\",\n                padding: \"8px\"\n            }}>\n            <Grid item xs={12} align=\"center\">\n            <Typography\n                variant=\"subtitle2\"\n                color=\"primary\">\n                  Workout\n              </Typography>\n            </Grid>\n            <Grid item container xs={12}>\n              <RenderWodTextRaw\n                wodText={this.state.wodMD[\"wodText\"]}\n              />\n              </Grid>\n            </Paper>\n          </Grid>\n\n          {Object.keys(this.state.userMD).length > 0?\n            <AddScore\n              userMD={this.state.userMD}\n              wodMD={this.state.wodMD}\n            />\n          :\n            <React.Fragment></React.Fragment>\n          }\n          <Grid item xs={12} margin={{marginTop: \"16px\"}}>\n              {this.state.scores && this.state.scores.length > 0?\n                <ScoreDataView\n                  scores={this.state.scores}\n                />\n              :\n                <React.Fragment></React.Fragment>\n              }\n          </Grid>\n          <Grid item xs={12}>\n            <Paper elevation={6}>\n            <ScoreList\n              scores={this.state.scores}\n              uid={this.state.userMD.uid}\n              onRemove={this.handleRemoveScore.bind(this)}\n            />\n            </Paper>\n          </Grid>\n          <ActionCancelModal\n            open={this.state.showRemoveAlert}\n                onClose={this.handleModalClose.bind(this)}\n                onAction={this.removeScore.bind(this)}\n                modalText={`Remove score?`}\n                actionText={`Remove`}\n                cancelText={`Cancel`}\n            />\n          </Grid>\n        :\n          <Grid item xs={12}>\n            <Paper elevation={6}>\n              <Typography>\n                Wod not found!\n              </Typography>\n            </Paper>\n          </Grid>\n      }\n    </React.Fragment>\n  )\n  }\n}\n\nexport default ScoreView = withTheme(ScoreView);\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\nconst GYM_CLASSES = \"gymClasses\"\nconst CLASSES = \"classes\"\nconst CLASS_OWNERS =\"classOwners\"\n/*\n\tGymClasses\n*/\n\nexport function getGymClasses(boxID){\n\treturn fs.collection(\"gymClasses\").doc(boxID).collection(\"classes\")\n}\n\nexport function setGymClass(title, uid, boxID, boxTitle, isPrivate){\n  \treturn new Promise((res, rej) => {\n  \t\tfs.collection(GYM_CLASSES)\n\t\t.doc(boxID)\n\t\t.collection(CLASSES)\n\t\t.where(\"title\", \"==\", title)\n  \t\t.get().then(result => {\n  \t\t\tif(result.empty){\n\t\t\t\tlet doc = fs\n\t\t\t\t.collection(GYM_CLASSES)\n\t\t\t\t.doc(boxID)\n\t\t\t\t.collection(CLASSES)\n\t\t\t\t.doc()\n\n\t\t\t\tfs.collection(CLASS_OWNERS)\n\t\t\t\t.doc(doc.id).set({\n\t\t\t\t\towner: uid,\n\t\t\t\t\tboxID: boxID,\n\t\t\t\t\tgymClassID: doc.id,\n\t\t\t\t\tisPrivate: isPrivate,\n\t\t\t\t})\n\n\t\t  \t\tdoc.set({\n\t\t  \t\t\tgymClassID: doc.id,\n\t\t  \t\t\tboxID: boxID,\n\t\t  \t\t\tboxTitle: boxTitle,\n\t\t  \t\t\ttitle: title,\n\t\t  \t\t\tuid, uid,\n\t\t\t\t\tisPrivate: isPrivate,\n\t\t  \t\t\tdate: Date.now()\n\t\t  \t\t})\n\t\t  \t\t.then(()=>{\n\t\t  \t\t\tres(\"Added gymClass\")\n\t\t  \t\t})\n\t\t\t\t  .catch(err => { rej(err) })\n  \t\t\t}else{\n  \t\t\t\tres(\"Name Taken\")\n  \t\t\t}\n  \t\t})\n\t\t.catch(err => {rej(err)})\n  \t})\n }\n\n\nfunction getSnapshot(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tlet snapshotSize = 0\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\tsnapshotSize = ss.size\n\n\t\tss.forEach(doc => {\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)\n\t\t\t\tgetSnapshot(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeGymClass(boxID, gymClassID){\n\t// let collectionNames = ['classMembers', 'classAdmins']\n\tlet collectionNames = [\n\t\t`scores`,\n\t\t`wods/${gymClassID}/wods`,\n\t\t`classAdmins`, `classMembers`,\n\t\t\"notifications/admins/invites\", \"notifications/members/invites\",\n\t\t`classAdminsShallow/${gymClassID}/users`,\n\t\t`classMembersShallow/${gymClassID}/users`,\n\t\t`gymClasses/${boxID}/classes`, \"classOwners\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tgetSnapshot(name, \"gymClassID\", gymClassID, res, rej)\n\t\t})\n\t})\n\n\treturn Promise.all(promises)\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport \n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport Delete from '@material-ui/icons/Delete'\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { getGymClasses, removeGymClass } from '../../utils/firestore/gymClass'\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction GymClassRaw(props){\n  let title = props.info[\"title\"]\n  let boxID = props.info[\"boxID\"]\n  let gymClassID = props.info[\"gymClassID\"]\n  // TODO redirect to wods whhoch is what boxView is\n  return(\n    <TableRow id={`class/${gymClassID}`} name=\"GymClassRow\" \n          onClick={(ev) => {props.onRowClick(ev, `/class/${boxID}/${gymClassID}`)} }> \n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { title }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.onRemove(props.info)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n}\n\nconst GymClass = withTheme(GymClassRaw)\n\n\nfunction EmptyClassRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Classes!\n        </Typography>\n      </TableCell>  \n    </TableRow>\n  )\n}\nconst EmptyClass = withTheme(EmptyClassRaw)\n\n\n\nclass GymClassList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      isOwner: props.isOwner,\n      boxID: props.boxID,\n      redirect: false,\n      redirectTo: \"\",\n      filteredGymClasses:[],\n      gymClasses: [],\n      removeClassID: \"\",\n      removeClassTitle: \"\",\n      openModal: false\n    }\n  }\n\n  componentDidMount(){\n    console.log(this.state)\n    this.getGymClasses(this.state.boxID)\n  }\n\n  getGymClasses(boxID){\n    if(boxID && ! this.gymClassListener){\n      this.gymClassListener = getGymClasses(this.state.boxID)\n      .onSnapshot(ss => {\n        console.log(ss)\n        if(!ss.empty){\n          let classes = []\n          ss.forEach(doc => {\n            classes.push(doc.data())\n          })\n          this.setState({gymClasses: classes, filteredGymClasses: classes})\n        }else{\n          this.setState({gymClasses: [], filteredGymClasses: []})\n        }\n      },\n      err => {console.log(err)})\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  componentDidUpdate(){\n    this.getGymClasses(this.state.boxID)\n  }\n\n  componentWillUnmount(){\n    if(this.gymClassListener){\n      this.gymClassListener()\n    }\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){   \n    }\n  }\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredGymClasses = this.state.gymClasses.filter(gymClass =>{\n      return gymClass[\"title\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredGymClasses: filteredGymClasses})\n  }\n\n  onRowClick(ev, id){\n    let tagName = ev.target.tagName\n    if([\"span\", \"svg\", \"path\"].indexOf(tagName) < 0){\n      this.setState({redirect: true, redirectTo: id})\n    }\n  }\n\n  handleRemoveGymClass(){\n    this.closeModal()\n    if(!this.state.boxID && !this.state.removeClassID){\n      this.props.onAlert({type: \"error\", message: \"Class info missing!\"})\n      return\n    }\n    removeGymClass(this.state.boxID, this.state.removeClassID)\n    .then((res) => {\n      console.log(res)\n      this.props.onAlert({type: \"success\", message: \"Deleted class!\"})\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  onRemove(gymClass){\n    this.setState({openModal: true, removeClassID: gymClass.gymClassID, removeClassTitle: gymClass.title})\n  }\n\n  closeModal(){\n    this.setState({openModal: false})\n  }\n\n  render () {\n    console.log(this.state.gymClasses)\n    return (\n      <Grid item xs={12}>\n        {this.state.redirect ?\n          <Redirect to={this.state.redirectTo} />\n        :\n          <React.Fragment></React.Fragment>\n        }\n\n        <Grid item xs={12}>\n\n          <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n            <Paper elevation={2} component=\"form\">\n              <TextField\n                fullWidth\n                  variant=\"outlined\"\n                  onKeyUp={this.onKeyUp.bind(this)}\n                  onChange={this.onChange.bind(this)}\n                  placeholder=\"Search Classes\"\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <SearchIcon color=\"primary\" />\n                      </InputAdornment>\n                    )\n                  }}\n              />\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12}>\n            <TableContainer>\n              <Table stickyHeader>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Classes</TableCell>\n                    <TableCell></TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                {this.state.filteredGymClasses.length > 0?\n                  this.state.filteredGymClasses.map((gymClass, i) => {\n                    return <GymClass \n                            key={i} \n                            info={gymClass} \n                            onRemove={this.onRemove.bind(this)}\n                            isOwner={this.props.isOwner}\n                            onRowClick={this.onRowClick.bind(this)}\n                            />\n                  })\n                :\n                  <EmptyClass />\n                }\n                \n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Grid>\n        </Grid>\n        <ActionCancelModal\n          open={this.state.openModal}\n          actionText=\"Remove\"\n          cancelText=\"Cancel\"\n          modalText={`Remove Class (${this.state.removeClassTitle})?`}\n          onAction={this.handleRemoveGymClass.bind(this)}\n          onClose={this.closeModal.bind(this)}\n        />\n      </Grid>\n    )\n  }\n}\n\n\n\nexport default GymClassList = withTheme(GymClassList)\n","// Firebase\nimport firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n// React\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport ReactMarkdown from 'react-markdown'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, IconButton, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableContainer,\n\tTableHead, TableRow, TablePagination, TableSortLabel\n} from '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport Delete from '@material-ui/icons/Delete'\nimport Edit from '@material-ui/icons/Edit'\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport {msToDate} from \"../utils/formatting\"\n\n\n\nconst TableCell = withStyles({root:{\n\tpadding: \"4px 0px 4px 4px\"\n}})(TC)\n\n\nconst WodRow = withStyles(theme => ({root:{\n\tmargin: \"8px 0px 8px 0px\",\n\tpadding: \"4px 0px 4px 4px\",\n\tbackgroundColor: theme.palette.primary.main,\n\tborderRadius: \"8px\"\n}}))(Grid)\n\n\nfunction WodRaw(props){\n\tlet title = props.info[\"title\"]\n\tlet scoreType = props.info[\"scoreType\"]\n\tlet wodText = props.info[\"wodText\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet gymClassID = props.info[\"gymClassID\"]\n\tlet date = props.info[\"date\"]\n\treturn(\n\t\t<WodRow container item xs={12} style={{margin: \"8px 0px 8px 0px\"}}\n\t\t\tonClick={(ev) => {\n\t\t\tlet tagName = ev.target.tagName\n\t\t\tif([\"path\", \"svg\"].indexOf(tagName) > -1)\n\t\t\t\treturn\n\t\t\tprops.onViewScores(`/wod/${gymClassID}/${wodID}`)\n\t\t}}>\n\n\t\t\t<Grid item xs={10} align=\"left\">\n\t\t\t\t<Typography variant=\"subtitle2\" component=\"h2\" gutterBottom style={{overflowWrap: \"break-word\"}} >\n\t\t\t\t{title}\n\t\t\t\t</Typography>\n\t\t\t\t<Typography variant=\"caption\" component=\"h2\"gutterBottom>\n\t\t\t\t\t{msToDate(date)}\n\t\t\t\t</Typography>\n\t\t\t</Grid>\n\n\n\t\t\t<Grid item alignItems=\"center\" container xs={2} align=\"right\" justify=\"center\">\n\n\t\t\t\t{ props.showOwnerBtns ?\n\t\t\t\t\t\t<Grid item container xs={12}>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<IconButton size=\"small\"\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tonClick={() => props.handleEdit(props.info)}>\n\t\t\t\t\t\t\t\t\t<Edit />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<IconButton size=\"small\"\n\t\t\t\t\t\t\t\t\tonClick={() => props.handleRemove(props.info)}>\n\t\t\t\t\t\t\t\t\t<Delete color=\"error\"/>\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t:\n\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t}\n\t\t\t</Grid>\n\t\t</WodRow>\n\t)\n}\nconst Wod = withTheme(WodRaw)\n\nfunction EmptyWodRaw(props){\n\treturn(\n\t  <Grid item xs={12} align=\"center\">\n\t\t<Typography variant=\"subtitle1\" color=\"primary\">\n\t\tNo Workouts!\n\t\t</Typography>\n\t  </Grid>\n\t)\n  }\nconst EmptyWod = withTheme(EmptyWodRaw)\n\nconst StyledTablePagination = withStyles({\n\troot:{\n\t\toverflow: \"hidden\"\n\t},\n\tactions:{\n\t\tmargin: \"0px\"\n\t}\n})(TablePagination)\n\nclass SearchSortTable extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\theaders: props.headers,\n\t\t\trows: props.rows,\n\t\t\tfilteredRows: props.filteredRows,\n\t\t\torderTableBy: \"date\",\n\t\t\torderTable: \"asc\",\n\t\t\tpageNum: 0,\n\t\t\trowsPerPage:5,\n\t\t\tpageStart: 0,\n\t\t\tpageEnd: 5,\n\t\t\tredirectUrl: \"\",\n\t\t\tredirect: false\n\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn state.rows.length > 0? state: props\n\t}\n\n\t/*\n\t\tSearch Table\n\t*/\n\tonKeyUp(data){\n\t\tif((data.keyCode || data.which) == 13){\n\n\t\t}\n\t}\n\n\tonChange(ev){\n\t\tlet val = ev.target.value\n\t\tconsole.log(val)\n\t\tlet filteredRows = this.state.rows.filter(wod =>{\n\t\t  return wod[\"title\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\n\t\tthis.setState({filteredRows: filteredRows})\n\t}\n\n\tdescendingComparator(a, b, orderBy) {\n\t\tif(b[orderBy] < a[orderBy]){\n\t\t\treturn -1;\n\t\t}\n\t\tif(b[orderBy] > a[orderBy]){\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetComparator(order, orderBy) {\n\t\treturn order === 'desc'\n\t\t? (a, b) => this.descendingComparator(a, b, orderBy)\n\t\t: (a, b) => -this.descendingComparator(a, b, orderBy);\n\t}\n\n\tstableSort(comparator) {\n\t\tlet arr = this.state.filteredRows\n\t\tconst stabilizedThis = arr.map((el, index) => [el, index]);\n\n\t\tstabilizedThis.sort((a, b) => {\n\t\t\tconst order = comparator(a[0], b[0]);\n\n\t\t\tif (order !== 0) return order;\n\t\t\treturn a[1] - b[1];\n\t\t});\n\t\treturn stabilizedThis.map((el) => el[0]);\n\t}\n\n\tcreateSortHandler(orderBy){\n\t\tlet isAsc =\n\t\t\tthis.state.orderTableBy === orderBy &&\n\t\t\tthis.state.orderTable === \"asc\"\n\t\tthis.setState({\n\t\t\torderTableBy: orderBy,\n\t\t\torderTable: isAsc? \"desc\" : \"asc\"\n\t\t})\n\t}\n\n\thandleChangePage(ev, newPage){\n\t\tlet start = newPage * this.state.rowsPerPage\n\t\tlet end = (newPage * this.state.rowsPerPage) + this.state.rowsPerPage\n\t\tthis.setState({\n\t\t\tpageNum: newPage,\n\t\t\tpageStart: start,\n\t\t\tpageEnd: end\n\t\t})\n\t}\n\n\thandleChangeRowsPerPage(ev){\n\t\tlet rowsPerPage = parseInt(ev.target.value)\n\t\tconsole.log(rowsPerPage)\n\t\tthis.setState({\n\t\t\tpageNum: 0,\n\t\t\trowsPerPage: rowsPerPage,\n\t\t\tpageStart: 0,\n\t\t\tpageEnd: rowsPerPage\n\t\t})\n\t}\n\n\n\tonViewScores(url){\n\n\t\tthis.setState({redirectUrl: url, redirect: true})\n\t}\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12} align=\"center\">\n\t\t\t{this.state.redirect?\n\t\t\t\t<Redirect to={this.state.redirectUrl} />\n\t\t\t:\n\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t}\n\n\t\t    <Paper style={{margin: \"16px 0px 0px 0px\"}} component=\"form\">\n\t\t\t<TextField\n\t\t\tfullWidth\n\t\t\tvariant=\"outlined\"\n\t\t\tonKeyUp={this.onKeyUp.bind(this)}\n\t\t\tonChange={this.onChange.bind(this)}\n\t\t\tplaceholder=\"Search\"\n\t\t\tInputProps={{\n\t\t\t  startAdornment: (\n\t\t\t    <InputAdornment position=\"start\">\n\t\t\t      <SearchIcon color=\"primary\" />\n\t\t\t    </InputAdornment>\n\t\t\t  ),\n\t\t\t}}\n\t\t\t/>\n\t\t\t</Paper>\n\n\t\t\t<Grid container item xs={12}>\n\t\t\t<TableContainer style={{margin: \"8px 0px 0px 0px\"}}>\n  \t\t\t<Table>\n\t\t\t<TableHead>\n\t\t    \t<TableRow>\n\t\t    \t{\n\t\t    \t\tthis.state.headers.map((header, i)=>{\n\t\t\t        \treturn (\n\t\t\t        \t<TableCell key={i}>\n\t\t\t        \t\t{\n\t\t\t        \t\t\theader.sortable?\n\t\t\t\t\t        \t\t<TableSortLabel\n\t\t\t\t\t\t              active={header.id === this.state.orderTableBy}\n\t\t\t\t\t\t              direction={header.id === this.state.orderTableBy?  this.state.orderTable: \"asc\"}\n\t\t\t\t\t\t              onClick={()=>{ this.createSortHandler(header.id)}}\n\t\t\t\t\t\t            >\n\t\t\t\t\t        \t\t\t{header.label}\n\t\t\t\t\t\t\t        </TableSortLabel>\n\t\t\t\t\t\t\t    :\n\t\t\t\t\t\t\t    \t<React.Fragment>{header.label}</React.Fragment>\n\t\t\t        \t\t}\n\t\t\t        \t</TableCell>)\n\t\t    \t\t})\n\t\t    \t}\n\t\t    \t</TableRow>\n\t\t    </TableHead>\n\t\t\t</Table>\n\t\t\t</TableContainer>\n\n\t\t\t{this.state.filteredRows.length > 0\n\t\t\t?\n\t\t\t\tthis.stableSort(\n\t\t\t\t\tthis.getComparator(\n\t\t\t\t\t\tthis.state.orderTable,\n\t\t\t\t\t\tthis.state.orderTableBy\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.slice(this.state.pageStart, this.state.pageEnd)\n\t\t\t\t.map((row, i) => {\n\t\t\t\t\treturn <Wod key={i}\n\t\t\t\t\t\thandleView={this.props.handleView}\n\t\t\t\t\t\thandleRemove={this.props.handleRemove}\n\t\t\t\t\t\thandleEdit={this.props.handleEdit}\n\t\t\t\t\t\tinfo={row}\n\t\t\t\t\t\tshowOwnerBtns={this.props.showOwnerBtns}\n\t\t\t\t\t\tonViewScores={this.onViewScores.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t})\n\t\t\t:\n\n\t\t\t\t<EmptyWod />\n\n\t\t\t}\n\n\t\t\t<StyledTablePagination\n\t\t\trowsPerPageOptions={[5, 10, 25]}\n\t\t\tcomponent={Grid}\n\t\t\tcount={this.state.filteredRows.length}\n\t\t\trowsPerPage={this.state.rowsPerPage}\n\t\t\tpage={this.state.pageNum}\n\t\t\tonChangePage={this.handleChangePage.bind(this)}\n\t\t\tonChangeRowsPerPage={this.handleChangeRowsPerPage.bind(this)}\n\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid item xs ={12}>\n\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n  }\n}\n\nexport default SearchSortTable = withTheme(SearchSortTable)\n\n","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// WodTrackrr\nimport ScoreView from \"../scores/scoreView\"\nimport GymClassList from \"../gymClasses/gymClassList\"\n\nimport { removeWod } from \"../../utils/firestore/wods\"\nimport SearchSortTable from \"../searchSortTable\"\nimport ActionCancelModal from \"../actionCancelModal\"\nimport \"../../styles.css\"\n\n\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass BoxView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tconsole.log(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\tboxID: props.boxID,\n\t\t\tboxMD: {}\n\t\t}\n\t}\n\n\n\tgetBoxListener(){\n\t\tif(!this.boxListener){\n\t\t\tthis.boxListener = fs.collection(\"boxes\").doc(this.state.boxID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tconsole.log(ss)\n\t\t\t\tconsole.log(this.state.boxID)\n\t\t\t\tconsole.log(ss.data())\n\n\t\t\t\tif(ss.exists){\n\n\t\t\t\t\tthis.setState({boxMD: ss.data()})\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({boxMD: {}})\n\t\t\t\t}\n\t\t\t}, err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t}\n\t}\n\n\t\n\tcheckListeners(){\n\t\tif(this.boxListener === undefined)\n\t\t\tthis.getBoxListener()\t\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.checkListeners()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\t\n\tcomponentDidUpdate(){\n\t\tthis.checkListeners()\n\t}\n\n\tcomponentWillUnmount(){\t\n\t\tif(this.boxListener)\n\t\t\tthis.boxListener()\n\t}\n\n\trender(){\n\t\tlet uid = this.state.userMD.uid\n\t\tlet boxOwnerUid = this.state.boxMD[\"uid\"]\n\t\tlet showOwnerBtns = uid === boxOwnerUid\n\n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t\t{Object.keys(this.state.boxMD).length > 0 ?\n\t\t\t\t\t<GymClassList \n\t\t\t\t\t\tuser={this.state.user}\n\t\t\t\t\t\tuserMD={this.state.userMD}\n\t\t\t\t\t\tboxID={this.state.boxID}\n\t\t\t\t\t\tisOwner={showOwnerBtns}\n\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t}\n\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\nexport default BoxView = withTheme(BoxView);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nexport default function mTea(){}\n\n\n\n\nexport function removeFollow(followID){\n\tconst fs = firebase.firestore()\n\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"following\").doc(followID).delete()\n\t\t.then(() => {\n\t\t\tres(\"Finished delete.\")\n\t\t})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\nexport function getFollowers(uid){\n\tlet fs = firebase.firestore()\n\treturn fs.collection(\"following\").where(\"uid\", \"==\", uid)\n}\n\nexport function setFollow(uid, username, boxID, title){\n\tlet fs = firebase.firestore()\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"following\").where(\"uid\", \"==\", uid).get()\n\t\t.then(ss => {\n\t\t\tlet isFollowing = false\n\t\t\tif(!ss.empty){\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tif(doc.data().boxID === boxID)\n\t\t\t\t\t\tisFollowing = true\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif(!isFollowing){\n\t\t\t\tlet doc = fs.collection(\"following\").doc()\n\t\t\t\tlet data = {\n\t\t\t\t\tfollowID: doc.id,\n\t\t\t\t\tuid: uid,\n\t\t\t\t\tusername: username,\n\t\t\t\t\tboxID: boxID,\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tdate: Date.now()\n\t\t\t\t}\n\t\t\t\tdoc.set(data).then(() => {res(\"Followed.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t}\n\t\t})\n\t})\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport\n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport { Alert } from '@material-ui/lab'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport Delete from '@material-ui/icons/Delete'\nimport Waves from '@material-ui/icons/Waves'\nimport Whatshot from '@material-ui/icons/Whatshot'\n\nimport BoxView from \"./boxView\"\n\nimport { setFollow, removeFollow } from \"../../utils/firestore/follows\"\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction BoxRaw(props){\n  let title = props.info[\"title\"]\n  let boxID = props.info[\"boxID\"]\n\n  return(\n    <TableRow id={`box/${boxID}`} onClick={(ev) => props.onRowClick(ev, `box/${boxID}`)}>\n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { title }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isUserFollowing ?\n          <IconButton variant=\"outlined\"\n              onClick={()=>{props.handleUnfollow(boxID)}}>\n            <Whatshot color=\"primary\" />\n          </IconButton>\n        :\n          <IconButton\n            onClick={()=>{props.handleFollow(props.info)}}>\n            <Whatshot style={{fill: props.theme.palette.text.primary}}/>\n          </IconButton>\n        }\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.handleRemoveBox(boxID, title)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n\n}\nconst Box = withTheme(BoxRaw)\n\n\nfunction EmptyBoxRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Gyms!\n        </Typography>\n      </TableCell>\n    </TableRow>\n  )\n}\nconst EmptyBox = withTheme(EmptyBoxRaw)\n\nclass BoxSearch extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD,\n      isOwner: props.isOwner,\n      allBoxes: props.allBoxes,\n      filteredBoxes: props.filteredBoxes,\n      userFollowing: {},\n      redirect: false,\n      redirectTo: \"\"\n    }\n  }\n\n  componentDidMount(){\n    this.listenForFollowing()\n  }\n\n  componentWillUnmount(){\n    if(this.followListener){\n      this.followListener()\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state.userMD? state: props\n  }\n\n  componentDidUpdate(){\n    this.listenForFollowing()\n  }\n\n  listenForFollowing(){\n    if(this.state.userMD && !this.followListener){\n      this.followListener = fs.collection(\"following\").where(\"uid\", \"==\", this.state.userMD.uid)\n      .onSnapshot(ss => {\n        let following = {}\n        if(!ss.empty){\n\n          ss.forEach(doc =>{\n            let data = doc.data()\n            following[data.boxID] = data.followID\n          })\n        }\n\n        this.setState({userFollowing: following})\n      },\n      err => console.log(err))\n    }\n  }\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredBoxes = this.state.allBoxes.filter(box =>{\n      return box[\"title\"].toLowerCase().includes(val.toLowerCase())\n    })\n    console.log(\"filteredBoxes\")\n    console.log(filteredBoxes)\n    this.setState({filteredBoxes: filteredBoxes})\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n    }\n  }\n\n  isUserFollowing(boxID){\n    return (this.state.userFollowing[boxID])? true: false\n  }\n\n  handleFollow(boxInfo){\n    setFollow(this.state.userMD.uid, this.state.userMD.username, boxInfo.boxID,\n              boxInfo.title)\n    .then(res => {console.log(\"Succefully followed.\")})\n    .catch(err => {console.log(err)})\n  }\n\n  handleUnfollow(boxID){\n    let followID = this.state.userFollowing[boxID]\n\n    removeFollow(followID)\n    .then(res => {\n      if(res){\n        console.log(\"Succefully unfollowed.\")\n      }\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  onRowClick(ev, id){\n    let tagName = ev.target.tagName\n    if([\"span\", \"svg\", \"path\", \"BUTTON\", \"SPAN\"].indexOf(tagName) < 0){\n      this.setState({redirect: true, redirectTo: id})\n    }\n  }\n\n  render () {\n    return (\n      <Grid item xs={12} style={{marginTop: \"3vh\"}}>\n        {this.state.redirect ?\n          <Redirect to={this.state.redirectTo} />\n        :\n          <React.Fragment></React.Fragment>\n        }\n        <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n        <Paper elevation={2} component=\"form\">\n           <TextField\n             fullWidth\n              variant=\"outlined\"\n              onKeyUp={this.onKeyUp.bind(this)}\n              onChange={this.onChange.bind(this)}\n              placeholder=\"Search Boxes\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon color=\"primary\" />\n                  </InputAdornment>\n                )\n              }}\n          />\n        </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <TableContainer>\n            <Table stickyHeader>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Boxes</TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n    { this.state.filteredBoxes.length > 0?\n      this.state.filteredBoxes.map((box, i) => {\n        return <Box\n                key={i}\n                theme={this.props.theme}\n                info={box}\n                color={this.props.theme.palette.primary.mainGrad}\n                handleBoxView={this.props.handleBoxView}\n                handleRemoveBox={this.props.handleRemoveBox}\n                isOwner={this.props.isOwner}\n                isUserFollowing={this.isUserFollowing(box[\"boxID\"])}\n                handleFollow={this.handleFollow.bind(this)}\n                handleUnfollow={this.handleUnfollow.bind(this)}\n                onRowClick={this.onRowClick.bind(this)}\n                />\n      })\n    :\n      <EmptyBox />\n    }\n\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\n\n\nexport default BoxSearch = withTheme(BoxSearch)\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment }\nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nimport BoxView from \"../comps/boxes/boxView\"\nimport BoxSearch from \"../comps/boxes/boxSearch\"\n\nimport \"../styles.css\"\n\nlet fs = firebase.firestore()\n\nclass BoxSearchPage extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      allBoxes: []\n    }\n  }\n\n  componentDidMount(){\n    this.allBoxesListener = fs.collection(\"boxes\")\n    .onSnapshot(ss => {\n      if(!ss.empty){\n        let boxes = []\n        ss.forEach(doc => {\n          boxes.push(doc.data())\n        })\n        boxes.sort((x, y) => {\n          return x[\"title\"].toLowerCase() > y[\"title\"].toLowerCase() ? -1 : 1\n        })\n        this.setState({\n          allBoxes: boxes\n        })\n      }\n    })\n  }\n\n  componentWillUnmount(){\n    if(this.allBoxesListener){\n      this.allBoxesListener()\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} >\n        {\n          this.state.allBoxes.length > 0?\n          <BoxSearch\n              user={this.state.user}\n              userMD={this.state.userMD}\n              allBoxes={this.state.allBoxes}\n              filteredBoxes={this.state.allBoxes}\n              isOwner={false}\n              isReadOnly={false}\n              handleRemoveBox={this.props.handleRemoveBox}\n          />\n          :\n          <Grid item xs={12}>\n            <Paper elevation={2}>\n              No boxes!\n            </Paper>\n          </Grid>\n        }\n  \t\t</Grid>\n    )\n  }\n}\n\nexport default BoxSearchPage = withTheme(BoxSearchPage);\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \n\nimport React, { Component } from 'react'\nimport {\n  Grid, TextField, Button, Paper, Typography , Collapse, IconButton\n} from '@material-ui/core';\n\nimport { withTheme } from '@material-ui/core/styles';\n\n\n\nclass ResetPassword extends Component {\n   constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\"\n    }\n   }\n\n\n  static getDerivedStateFromProps(props, state){\n    return state.user? state: props\n  }\n\n  handleSubmit(ev){\n\n    let currentPassword = this.state.currentPassword\n    let newPassword = this.state.newPassword\n    let confirmPassword = this.state.confirmPassword\n    \n    console.log(this.state)\n    console.log(currentPassword, newPassword, confirmPassword)\n    \n    if(newPassword === confirmPassword){\n\n      let creds = firebase.auth.EmailAuthProvider.credential(\n          this.state.user.email,\n          currentPassword\n      );\n\n      this.state.user.reauthenticateWithCredential(creds)\n      .then(() => {\n          this.state.user.updatePassword(newPassword)\n          .then((res) => {\n            console.log(\"Changed password.\")\n\n          }).catch((err) => {\n            console.log(err)\n          })\n\n      }).catch((err) => {\n          console.log(err)\n          console.log(\"Incorrect password.\")\n      })\n    }else{\n       console.log(`New passwords do not match.`)\n    }\n  }\n\n\n  onChange(ev){\n    console.log(ev)\n    ev.persist()\n    const  { name, value } = ev.target\n    this.setState({[name]: value})\n  }\n\n\n  render () {\n    return (\n      <React.Fragment>\n      {\n        this.state.user?\n          <Paper elevation={6}>\n          <Grid container item xs={12}>\n            <Grid item xs={12} align=\"center\">\n              <Typography variant=\"h3\">\n                Change Password\n              </Typography>\n            </Grid>\n            \n            <Grid item xs={12} align=\"center\">\n              <TextField\n                  id=\"currentPassword\"\n                  type=\"password\"\n                  name=\"currentPassword\"\n                  onChange={this.onChange.bind(this)}\n                  style={{ margin: 8 }}\n                  placeholder=\"Current Password\"\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n            \n              <TextField\n                  id=\"password\"\n                  type=\"password\"\n                  name=\"newPassword\"\n                  color=\"primary\"\n                  onChange={this.onChange.bind(this)}\n                  style={{ margin: 8 }}\n                  placeholder=\"New Password\"\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12} align=\"center\">\n                  <TextField\n                  id=\"passwordConfirm\"\n                  name=\"confirmPassword\"\n                  onChange={this.onChange.bind(this)}\n                  type=\"password\"\n                  style={{ margin: 8 }}\n                  placeholder=\"Confirm Password\"\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                /> \n              </Grid>\n\n              <Grid item xs={12} align=\"center\" style={{margin: \"16px 0px 16px 0px\"}}>\n                <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n                  Change Password\n                </Button>\n              </Grid>\n          </Grid>\n          </Paper>\n        :\n          <h1>Loading</h1>\n      }\n      </React.Fragment>\n    );\n  }\n}\n\n\n\nexport default ResetPassword = withTheme(ResetPassword)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\nimport { Redirect } from \"react-router\";\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\n\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport \"../../styles.css\"\n\n\n\nconst fs = firebase.firestore();\n\nclass DeleteAccount extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            user: props.user,\n            userConfirmText: \"\",\n            redirectUrl: \"\",\n            redirect: false\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n       \n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn state.user? state: props\n\t}\n\n    componentWillUnmount(){\n    }\n\n    confirmText(){\n        return this.state.user.uid.slice(-5)\n    }\n\n    onChange(ev){\n        let value = ev.target.value\n        this.setState({userConfirmText: value})\n    }\n\n    removeUser(){\n        if(this.state.userConfirmText === this.confirmText()){\n            console.log(\"Deleting user, actual code commented out.\")\n            // this.state.user.delete()\n            // .then(() => {\n            //     console.log(\"User deleted.\")\n            // })\n            // .catch(err => {\n            //     console.log(\"Error deleting user.\")\n            // })\n            this.setState({redirect: true, redirectUrl: \"/boxSearch\"})\n\n        }else{\n            console.log(\"User entered incorrect confirmation.\")\n        }\n    }\n\n\t\n  render(){\n\t\treturn( \n            <Paper elevation={6}>\n                {this.state.redirect?\n                    <Redirect to={this.state.redirectUrl} /> : <React.Fragment></React.Fragment>\n                }\n                <Grid item container align=\"center\" xs={12} style={{marginTop: \"16px\"}}>\n                    <Grid item xs={12}>\n                        <Typography>Type to Confirm Delete: {this.confirmText()}</Typography>\n                    </Grid>\n                    <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                        <TextField\n                            type=\"text\"\n                            placeholder=\"Type username to confirm delete\"\n                            onChange={this.onChange.bind(this)}\n                        />\n                    </Grid>\n                    <Grid item xs={12} style={{marginTop: \"32px\"}}>\n                        <Button size=\"small\" fullWidth variant=\"outlined\"\n                            onClick={this.removeUser.bind(this)}\n                            style={{color: this.props.theme.palette.error.main}}>\n                                Confirm Remove\n                        </Button>\n                    </Grid>\n                </Grid>\n            </Paper>\n    )}\n}\n\nexport default DeleteAccount = withTheme(DeleteAccount)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n\nexport function setUsername(uid, username){\n\tlet data = {username: username}\n\tlet promises = [fs.collection(\"users\").doc(uid).update(data)]\n\n\tfs.collection(\"scores\").where(\"uid\", \"==\", uid)\n\t.get().then(ss => {\n\t\tlet promises = ss.docs.map(doc => {\n\t\t\tconsole.log(doc.data())\n\t\t\treturn fs.collection(\"scores\").doc(doc.data().scoreID).update(data)\n\t\t})\n\t})\n\n\tfs.collection(\"following\").where(\"uid\", \"==\", uid)\n\t.get().then(ss => {\n\t\tlet promises = ss.docs.map(doc => {\n\t\t\tconsole.log(doc.data())\n\t\t\treturn fs.collection(\"following\").doc(doc.data().followID).update(data)\n\t\t})\n\t})\n\t\n\treturn new Promise((res, rej) => {\n\t\tPromise.all(promises)\n\t\t.then(() => {res(\"Updated!\")})\n\t\t.catch(err => {rej(err)})\n\t})\n}","import React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, TableBody, Table, TableContainer,\n          TableHead, TableRow }\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\nimport { withTheme, withStyles } from '@material-ui/core/styles'\n\nimport Edit from '@material-ui/icons/Edit'\nimport { setUsername } from '../../utils/firestore/users'\nimport \"../../styles.css\"\n\n\nconst TableCell = withStyles({root:{\n  borderBottom: \"none\"\n}})(TC)\nconst USERNAME_MAX_LEN = 12\nconst USERNAME_MAX_LENGTH_ERR_MSG = \"Username cannot be longer than 12 characters\"\nconst USERNAME_ERR_MSG = \"Username can only contain letters & numbers\"\n\nclass UsernamePanel extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n\n    return props\n  }\n\n  updateUsername(ev){\n    let usernameInput = document.getElementById('updateUsernameInput')\n\n    if(usernameInput.style.display === \"none\"){\n      usernameInput.style.display = \"block\"\n    }else{\n      let re = /\\W/g  // match non word characters ^[A-Za-z0-9]\n\n      if(usernameInput.value.length > USERNAME_MAX_LEN){\n        this.props.onAlert({\n          type: \"warning\",\n          message: USERNAME_MAX_LENGTH_ERR_MSG\n        })\n        return\n      }\n      if(re.exec(usernameInput.value) !== null ){\n        this.props.onAlert({\n          type: \"warning\",\n          message: USERNAME_ERR_MSG\n        })\n        return\n      }\n      if(usernameInput.value.length <= 0){\n        return\n      }\n\n      setUsername(this.state.userMD.uid, usernameInput.value)\n      .then((res) => {\n        console.log(res)\n      })\n      .catch(err => { console.log(err) })\n    }\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n        this.updateUsername()\n    }\n  }\n\n\n\n  render () {\n    return (\n    <Grid container id=\"usernamePanel\" >\n    {\n      !this.state.userMD\n      ?\n        <h1> Loading </h1>\n      :\n        <TableContainer>\n            <Table>\n              <TableBody>\n              <TableRow>\n                <TableCell align=\"left\">\n                  Username\n                </TableCell>\n                <TableCell colSpan={2} align=\"left\">\n                  <Typography gutterBottom variant=\"h5\">\n                    {this.state.userMD.username}\n                  </Typography>\n                </TableCell>\n              </TableRow>\n\n                <TableRow>\n                  <TableCell>\n                    <TextField\n                      id=\"updateUsernameInput\"\n                      type=\"text\"\n\n                      pattern=\"[A-Za-z]{12}\"\n                      inputProps={{\n                        title: \"Letters only, max length 12\",\n                        placeholder: \"New username\"\n                      }}\n                      onKeyUp={this.onKeyUp.bind(this) }\n                      margin=\"normal\"\n                      color=\"primary\"\n                      InputLabelProps={{\n                        shrink: true,\n                      }}\n                    />\n                  </TableCell>\n\n                  <TableCell align=\"left\">\n                    <Typography gutterBottom variant=\"h5\">\n                      <Button size=\"small\" variant=\"outlined\" color=\"primary\"\n                          onClick={this.updateUsername.bind(this)}>\n                          Update\n                      </Button>\n                    </Typography>\n                  </TableCell>\n                </TableRow>\n\n              </TableBody>\n            </Table>\n        </TableContainer>\n    }\n    </Grid>\n    );\n  }\n}\n\nexport default UsernamePanel = withTheme(UsernamePanel)","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tTableRow, TableHead, TableContainer,\n\tTableBody, Table, TableCell, IconButton\n}\nfrom '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\nimport { ArrowBackIos } from '@material-ui/icons';\n\nimport ResetPassword from \"../comps/settings/resetPassword\"\nimport DeleteAccount from \"../comps/profile/deleteAccount\"\nimport UsernamePanel from \"../comps/profile/usernamePanel\"\n\n\nlet fs = firebase.firestore();\n\nconst HOME = \"home\"\nconst CHANGE_USERNAME = \"change username\"\nconst CHANGE_PASSWORD = \"change password\"\nconst DELETE_ACCOUNT = \"delete account\"\n\n\nfunction SettingsRowRaw(props){\n    return(\n        <TableRow onClick={() => { props.openSetting(props.info.id) }}>\n            <TableCell align=\"left\" colSpan={2}>\n                {props.info.title}\n            </TableCell>\n        </TableRow>\n    )\n}\n\nconst SettingsRow = withTheme(SettingsRowRaw)\n\n\n\n\nclass Settings extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n        user: props.user,\n        userMD: props.userMD,\n        currentPage: HOME\n    }\n\n    this.settings = [\n        {\n            id: CHANGE_USERNAME,\n            title: \"Change Username\",\n\n        },\n        {\n            id: CHANGE_PASSWORD,\n            title: \"Change Password\",\n\n        },\n        {\n            id: DELETE_ACCOUNT,\n            title: \"Delete Account\",\n\n        },\n    ]\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n    let pageChange = props.userMD.currentPage !== state.userMD.currentPage\n\n\treturn pageChange || state.user? state: props\n  }\n\n  openSetting(id){\n      console.log(\"clicked \", id)\n    this.setState({\n        currentPage: id\n    })\n  }\n\n  handleBack(){\n      this.setState({currentPage: HOME})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12}>\n            {this.state.currentPage === HOME?\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                                <TableCell align=\"center\" colSpan={2}>\n                                    <Typography gutterBottom variant=\"h3\">\n                                        Settings\n                                    </Typography>\n                                </TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {this.settings.map((setting, i) => {\n                            return(\n                                <SettingsRow key={i}\n                                    info={setting}\n                                    openSetting={this.openSetting.bind(this)}\n                                />\n                            )\n                        })}\n                    </TableBody>\n                </Table>\n\n            : this.state.currentPage === CHANGE_PASSWORD?\n                <Grid container item xs={12}>\n                    <Grid item xs={12}>\n                        <IconButton style={{color: this.props.theme.palette.text.primary}} onClick={this.handleBack.bind(this)}>\n                            <ArrowBackIos />\n                        </IconButton>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <ResetPassword user={this.state.user} />\n                    </Grid>\n\n                </Grid>\n            : this.state.currentPage == DELETE_ACCOUNT?\n                <Grid container item xs={12}>\n                    <Grid item xs={12}>\n                        <IconButton style={{color: this.props.theme.palette.text.primary}} onClick={this.handleBack.bind(this)}>\n                            <ArrowBackIos />\n                        </IconButton>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <DeleteAccount user={this.state.user} />\n                    </Grid>\n\n                </Grid>\n            : this.state.currentPage === CHANGE_USERNAME?\n                <Grid container item xs={12}>\n                    <Grid item xs={12}>\n                        <IconButton style={{color: this.props.theme.palette.text.primary}} onClick={this.handleBack.bind(this)}>\n                            <ArrowBackIos />\n                        </IconButton>\n                    </Grid>\n                    <Grid item xs={12}>\n                    <UsernamePanel\n                        userMD={this.state.userMD}\n                        onAlert={this.props.onAlert}\n                    />\n                    </Grid>\n                </Grid>\n            :\n                <span>Default</span>\n            }\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default Settings = withTheme(Settings);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"; \n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Paper } from '@material-ui/core';\nimport { Redirect } from 'react-router-dom';\nimport { withTheme } from '@material-ui/core/styles';\n\nclass RegisterUser extends Component {\n  constructor(props){\n    super(props)\n    this.state = {redirect: false}\n  }\n\n  componentDidMount(){\n  }\n\n  handleSubmit(ev){\n    let email = document.getElementById('email')\n\n    let pass1 = document.getElementById('password')\n    let pass2 = document.getElementById('passwordConfirm')\n    \n    console.log(email.value, pass1.value)\n    \n\n    if(pass1.value === pass2.value){\n      firebase.auth().createUserWithEmailAndPassword(email.value, pass1.value)\n      .then(res => {\n        console.log(res)\n        let fs = firebase.firestore();\n        let data = {\n          username: \"\",\n          admin: false,\n          uid: res.user.uid,\n          accountType: \"athlete\"\n        }\n\n        fs.collection('users').doc(res.user.uid).set(data)\n      })\n      .catch(err => {\n        console.log(err)\n      });\n    }else{\n      alert(\"Passwords do not match\")\n    }\n  }\n\n  render () {\n    return (\n      <React.Fragment>\n      {this.state.redirect ?\n      \t<Redirect to=\"/\" />\n\t\t\t:\n\t\t\t\t<Grid container xs={12} id=\"login\" align=\"center\" justify=\"center\">\n\t\t\t\t\t<Paper elevation={2}>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Grid item xs={12} ><h1>Register</h1></Grid>\n\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\tstyle={{ margin: 8 }}\n\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t  shrink: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/><br /><br />\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t  id=\"password\"\n\t\t\t\t\t\t\t  type=\"password\"\n\t\t\t\t\t\t\t  style={{ margin: 8 }}\n\t\t\t\t\t\t\t  placeholder=\"Password\"\n\t\t\t\t\t\t\t  margin=\"normal\"\n\t\t\t\t\t\t\t  InputLabelProps={{\n\t\t\t\t\t\t\t    shrink: true,\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t <br/><br/>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t  id=\"passwordConfirm\"\n\t\t\t\t\t\t\t  type=\"password\"\n\t\t\t\t\t\t\t  style={{ margin: 8 }}\n\t\t\t\t\t\t\t  placeholder=\"Confirm Password\"\n\t\t\t\t\t\t\t  margin=\"normal\"\n\t\t\t\t\t\t\t  InputLabelProps={{\n\t\t\t\t\t\t\t    shrink: true,\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t/> <br/><br/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t  <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n\t\t\t\t\t\t    Submit\n\t\t\t\t\t\t  </Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n        }\n        </React.Fragment>\n    );\n  }\n}\n\n\n\nexport default RegisterUser = withTheme(RegisterUser);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, Modal\n}\nfrom '@material-ui/core';\n\nimport {editWod} from \"../../utils/firestore/wods\"\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nvar db = firebase.database();\n\nconst StyledGrid = withStyles((theme) => ({\n\troot: {\n\t\tmarginTop: \"2.5vh\",\n\t\tmarginBottom: \"2.5vh\"\n\t},\n}))(Grid);\n\n\nclass EditWod extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\topen: props.open,\n\t\t\twodInfo: props.wodInfo,\n\t\t\tuserBoxes: props.userBoxes,\n\t\t\thasBoxes: props.hasBoxes,\n\t\t\topen: props.open,\n\t\t\tonClose: props.onClose\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\teditWOD(){\n\t\tthis.props.onClose()\n\n\t  \teditWod(this.state.wodInfo)\n\t  \t.then((res)=> {\n\t\t\tthis.props.onAlert({\n\t\t\ttype: \"success\",\n\t\t\tmessage: res\n\t\t})\n\t  \t})\n\t  \t.catch((err)=>{\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err.message\n\t\t\t})\n\t\t})\n\t  }\n\n\thandleValChange(ev){\n\t    let wodInfo = this.state.wodInfo\n\t\tconst {name, value} = ev.target\n\t\twodInfo[name] = value\n\t\tthis.setState({\n\t      wodInfo: wodInfo\n\t  \t})\n\t}\n\n\n\trender(){\n\t\tlet scoreTypes = [\"time\", \"reps\"]\n\t\treturn(\n\n\t\t\t<Modal\n\t\t\t    open={this.state.open}\n\t\t\t    onClose={this.props.onClose}\n\t\t\t    aria-labelledby=\"edit-wod-modal\"\n\t\t\t    aria-describedby=\"edit-wod\">\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: \"50%\",\n\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\twidth: \"80vw\",\n\t\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t\t}}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\titem\n\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\txs={12}>\n\t\t\t\t\t\t<Paper style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\n\t\t\t\t\t\t\t\tEdit Wod ({this.state.wodInfo[\"wodID\"]})\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t<StyledGrid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\tvalue= {this.state.wodInfo['title']}\n\t\t\t\t\t\t\t\t\tonChange={this.handleValChange.bind(this)}\n\t\t\t\t\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\t\t\t\t\tplaceholder: \"Title\"\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StyledGrid>\n\t\t\t\t\t\t\t<StyledGrid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"wodText\"\n\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\tvalue= {this.state.wodInfo['wodText']}\n\t\t\t\t\t\t\t\tonChange={this.handleValChange.bind(this)}\n\t\t\t\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\t\t\t\tplaceholder: \"Workout here\"\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\trows={5}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StyledGrid>\n\n\t\t\t\t\t\t<StyledGrid container item xs={12}>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={this.props.onClose}>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={this.editWOD.bind(this)}>\n\t\t\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</StyledGrid>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n\nexport default EditWod = withTheme(EditWod);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore()\n\nconst CLASS_ADMIN = \"classAdmins\"\nconst CLASS_ADMIN_SHALLOW = \"classAdminsShallow\"\nconst ADMINS = \"admins\"\nconst USERS = \"users\"\nconst NOTIFICATIONS = \"notifications\"\nconst INVITES = \"invites\"\n\n\n\nexport default function mTea(){}\n\n\n\nexport function sendAdminInvite(uid, data){\n\n    let inviteRef = fs.collection(NOTIFICATIONS)\n           .doc(ADMINS)\n           .collection(INVITES)\n\n\n\n    return new Promise((res, rej) => {\n        console.log(\"idAdmin?\")\n        isClassAdmin(uid, data.gymClassID).then(isAdmin => {\n            if(!isAdmin){\n                console.log(\"isSent?\")\n                isNotificationSent(uid, data.gymClassID)\n                .then(isSent => {\n                    if(isSent){\n                        res(\"Admin notified already.\")\n                    }else{\n\n                        console.log(\"Setting adminf notify data\")\n                        let doc = inviteRef.doc()\n\n                        doc.set({ ...data, adminInviteID: doc.id })\n                        .then(() => { res(\"Sent admin invite.\") })\n                        .catch(err => { rej(err) })\n                    }\n                })\n                .catch(err => {\n                    rej(err)\n                })\n            }else{\n                res(\"Already an admin.\")\n            }\n        })\n\n    })\n}\n\nfunction isNotificationSent(uid, gymClassID){\n    /* Checks if notifications has been sent to the user for a class invite.\n\n    Queries \"notifications/admins/invites/\" for uid and gymClassID.\n    Returns true if found, otherwise false\n\n    Args:\n        uid A string autogenerated for the user.\n        gymClassID A string autogenerated for the document.\n     */\n    return new Promise((res, rej) => {\n        console.log(\"isSent: start\")\n        fs.collection(NOTIFICATIONS)\n        .doc(ADMINS)\n        .collection(INVITES)\n        .where(\"uid\", \"==\", uid)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(ss => {\n            console.log(\"isSent: snapshot\")\n            if(ss.empty){\n                res(false)\n            }else{\n                res(true)\n            }\n        },\n        err => { rej(err) })\n    })\n}\n\nexport function getUserAdminInvites(uid){\n    return fs.collection(NOTIFICATIONS).doc(ADMINS)\n        .collection(INVITES).where(\"uid\", \"==\", uid)\n}\n\n\nexport function removeNotification(notify){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS).doc(ADMINS)\n        .collection(INVITES).where(\"uid\", \"==\", notify.uid)\n        .get().then(ss => {\n            if(!ss.empty){\n                ss.docs.forEach(doc => {\n                    if(doc.data().gymClassID === notify.gymClassID){\n                        doc.ref.delete()\n                    }\n                })\n            res(\"Removed notifications.\")\n            }\n            res(\"No notifications found.\")\n        },\n        err => { rej(err) })\n    })\n}\n\n\n\nexport function getClassAdmins(gymClassID){\n    return fs.collection(CLASS_ADMIN)\n    .where(\"gymClassID\", \"==\", gymClassID)\n}\n\nexport function getUserClassAdmins(uid){\n    return fs.collection(CLASS_ADMIN)\n    .where(\"uid\", \"==\", uid)\n}\n\nexport function isClassAdmin (uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(CLASS_ADMIN)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(classSS => {\n            if(!classSS.empty){\n                classSS.forEach(classDoc => {\n                    if(classDoc.data().uid == uid){\n                        res(true)\n                    }\n                })\n            }\n            res(false)\n        },\n        err => {\n            rej(err)\n        })\n    })\n}\n\nexport function setClassAdmin(uid, gymClassID, data){\n    return new Promise((res, rej) => {\n        isClassAdmin(uid, gymClassID)\n        .then(isMember => {\n            if(!isMember){\n                let doc = fs.collection(CLASS_ADMIN).doc()\n                let shallow = fs.collection(CLASS_ADMIN_SHALLOW)\n                .doc(data.gymClassID).collection(\"users\").doc(data.uid)\n\n                Promise.all([\n                    doc.set({ ...data, classAdminID: doc.id }),\n                    shallow.set({uid: data.uid, gymClassID: data.gymClassID, classAdminID: doc.id})\n                ])\n                .then( () => {\n                    res(\"Added user as an admin.\")\n                })\n\n\n\n\n\n                .catch(err => { rej(err) })\n            }else{\n                res(\"User is an admin.\")\n            }\n        })\n        .catch(err => {\n            rej(err)\n        })\n    })\n}\n\nexport function removeAdmin(classAdmin){\n\n    return Promise.all([\n        fs.collection(CLASS_ADMIN)\n        .doc(classAdmin.classAdminID)\n        .delete(),\n\n        fs.collection(CLASS_ADMIN_SHALLOW).doc(classAdmin.gymClassID)\n        .collection(\"users\").doc(classAdmin.uid)\n        .delete()\n\n    ])\n}","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { sendAdminInvite } from \"../../utils/firestore/classAdmin\"\n\nimport \"../../styles.css\"\n\n\n\nconst fs = firebase.firestore();\n\nclass InviteView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            filteredUsers: props.filteredUsers,\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n       \n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n        \n\t\treturn props\n\t}\n\n    componentWillUnmount(){\n    }\n\n\t\n  render(){\n\t\treturn( \n\t\t\t<Modal\n                open={this.props.modalOpen}\n                onClose={this.props.onModalClose}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\">\n                <div style={{\n                    position: 'absolute',\n                    top: \"50%\",\n                    left: \"50%\",\n                    width: \"90vw\",\n                    transform: \"translate(-50%, -50%)\",\n                }}>\n                    <Paper style={{ padding: \"8px\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\n                        <Grid item container align=\"center\" xs={12}>\n                            <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                                <Typography variant=\"h6\">\n                                    {this.props.title}\n                                </Typography>\n                            </Grid>\n                            <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                                <TextField\n                                    fullWidth\n                                    variant=\"outlined\"\n                                    onChange={this.props.onChange.bind(this)}\n                                    placeholder=\"Search Users\"\n                                    style={{margin: \"0px 0px 8px 0px\"}}\n                                    InputProps={{\n                                        endAdornment: (\n                                        <InputAdornment position=\"end\">\n                                            <SearchIcon color=\"primary\" />\n                                        </InputAdornment>\n                                        )\n                                    }}\n                                />\n                            </Grid>\n                            <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                                <Select native style={{\n                                        width: \"100%\",\n                                        margin: \"0px 0px 8px 0px\",\n                                        padding: \"4px\"\n                                    }}\n                                    color=\"primary\"\n                                    onChange={this.props.onSelectChange.bind(this)}>\n                                    {this.state.filteredUsers ?\n                                        this.state.filteredUsers.map((user, i) => {\n                                            return (<option key={i} \n                                                            value={JSON.stringify(user)} >\n                                                            {user[\"username\"]}\n                                                    </option>)\n                                        })\n                                    :\n                                        <option aria-label=\"None\" value=\"\" >No users!</option>\n                                    }\n                                </Select>\n                            </Grid>\n                            \n                                <Grid item xs={6} style={{margin: \"16px 0px 16px 0px\"}}>\n                                    <Button fullWidth\n                                        style={{\n                                            borderColor: this.props.theme.palette.text.primary                                        }}\n                                        size=\"small\"\n                                        onClick={this.props.onModalClose}>\n                                        Cancel\n                                    </Button>\n                                </Grid>\n                                <Grid item xs={6} style={{marginTop: \"16px\"}}>\n                                    <Button fullWidth\n                                        color=\"primary\"\n                                        size=\"small\"\n                                        onClick={this.props.sendInvite.bind(this)}>\n                                        Invite\n                                    </Button>\n                                </Grid>\n                            \n                        </Grid>\n                    </Paper>\n                </div>\n            </Modal>\n    )}\n}\n\nexport default InviteView = withTheme(InviteView)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { sendAdminInvite } from \"../../utils/firestore/classAdmin\"\nimport InviteView from \"./inviteView\"\nimport \"../../styles.css\"\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass InviteAdminView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            gymClassMD: props.gymClassMD,\n\t\t\tallUsers: [],\n            filteredUsers: [],\n            selectedUser: {}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.listener = fs.collection(\"users\")\n        .onSnapshot(ss => {\n            let users = []\n            if(!ss.empty){\n                ss.forEach(doc => {\n                    users.push(doc.data())\n                })\n                users.sort((a, b) => {\n                    return (a.username > b.username)? 1 : -1\n                })\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: users[0]\n                })\n            }else{\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: {}\n                })\n            }\n        })\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentWillUnmount(){\n        if(this.listener)\n            this.listener()\n    }\n\n\tonChange(ev){\n        let val = ev.target.value\n        console.log(val)\n\t\tlet filteredUsers = this.state.allUsers.filter(user =>{\n\t\t  return user[\"username\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredUsers: filteredUsers, selectedUser: filteredUsers[0]})\n\t}\n\n    sendInvite(){\n        if(!this.state.selectedUser)\n            return\n\n        console.log(`Send invite to ${this.state.selectedUser.uid} from ${this.state.userMD.uid}`)\n        let data = {\n            msg: \"Accept invite?\",\n            gymClassID: this.state.gymClassMD.gymClassID,\n            senderUID: this.state.userMD.uid,\n            senderUsername: this.state.userMD.username,\n            gymClassTitle: this.state.gymClassMD.title,\n            boxTitle: this.state.gymClassMD.boxTitle,\n            boxID: this.state.gymClassMD.boxID,\n            uid: this.state.selectedUser.uid,\n            date: Date.now()\n        }\n\n        this.props.onModalClose()\n        console.log(\"Sending data\")\n        console.log(data)\n        sendAdminInvite(this.state.selectedUser.uid, data)\n        .then((res) => {\n            this.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: String(res)\n\t\t\t})\n        })\n        .catch(err => {\n            this.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err.message\n\t\t\t})\n        })\n    }\n\n    onSelectChange(ev){\n        let user = JSON.parse(ev.target.value)\n        this.setState({selectedUser: user})\n    }\n\n  render(){\n\t\treturn(\n\n            <InviteView\n                modalOpen={this.state.open}\n                title=\"Invite Admin\"\n                onChange={this.onChange.bind(this)}\n                onSelectChange={this.onSelectChange.bind(this)}\n                onModalClose={this.props.onModalClose}\n                sendInvite={this.sendInvite.bind(this)}\n                filteredUsers={this.state.filteredUsers}\n                modalOpen={this.props.modalOpen}\n            />\n    )}\n}\n\nexport default InviteAdminView = withTheme(InviteAdminView)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore()\n\nconst CLASS_MEMBER = \"classMembers\"\nconst CLASS_MEMBER_SHALLOW = \"classMembersShallow\"\nconst MEMBERS = \"members\"\nconst USERS = \"users\"\nconst NOTIFICATIONS = \"notifications\"\nconst INVITES = \"invites\"\n\nexport default function mTea(){}\n\n\nexport function sendMemberInvite(uid, data){\n\n    let inviteRef = fs.collection(NOTIFICATIONS)\n           .doc(MEMBERS)\n           .collection(INVITES)\n\n\n\n    return new Promise((res, rej) => {\n        console.log(\"isMember\")\n        isClassMember(uid, data.gymClassID).then(isMember => {\n            if(!isMember){\n                console.log(\"isSent\")\n                isNotificationSent(uid, data.gymClassID)\n                .then(isSent => {\n                    if(isSent){\n                        res(\"Member notified already.\")\n                    }else{\n                        console.log(\"Creating notification\")\n                        let doc = inviteRef.doc()\n                        doc.set({ ...data, memberInviteID: doc.id })\n                        .then(() => { res(\"Sent member invite.\") })\n                        .catch(err => { rej(err) })\n                    }\n                })\n                .catch(err => {\n                    rej(err)\n                })\n            }else{\n                res(\"Already a member.\")\n            }\n        })\n\n    })\n}\n\nfunction isNotificationSent(uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS)\n        .doc(MEMBERS)\n        .collection(INVITES)\n        .where(\"uid\", \"==\", uid)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(ss => {\n            console.log(uid, gymClassID)\n            console.log(ss.docs)\n            if(ss.empty){\n                res(false)\n            }else{\n                res(true)\n            }\n        },\n        err => { rej(err) })\n    })\n}\n\nexport function getUserMemberInvites(uid){\n    return fs.collection(NOTIFICATIONS).doc(MEMBERS)\n        .collection(INVITES).where(\"uid\", \"==\", uid)\n}\n\n\nexport function removeNotification(notify){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS).doc(MEMBERS)\n        .collection(INVITES).where(\"uid\", \"==\", notify.uid).where(\"gymClassID\", \"==\", notify.gymClassID)\n        .get().then(ss => {\n            if(!ss.empty){\n                ss.docs.forEach(doc => {\n                    doc.ref.delete()\n                })\n            res(\"Removed notifications.\")\n            }\n            res(\"No notifications found.\")\n        })\n        .catch(err => { rej(err) })\n    })\n}\n\n\n\n\n\nexport function getClassMembers(gymClassID){\n    return fs.collection(CLASS_MEMBER).where(\"gymClassID\", \"==\", gymClassID)\n}\n\nexport function getUserClassMembers(uid){\n    return fs.collection(CLASS_MEMBER).where(\"uid\", \"==\", uid)\n}\n\n\nexport function isClassMember (uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(CLASS_MEMBER)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(classSS => {\n            console.log(classSS)\n            if(!classSS.empty){\n                classSS.forEach(classDoc => {\n                    if(classDoc.data().uid == uid){\n                        res(true)\n                    }\n                })\n            }\n            res(false)\n        },\n        err => {\n            rej(err)\n        })\n    })\n}\n\nexport function setClassMember(uid, gymClassID, data){\n    return new Promise((res, rej) => {\n        isClassMember(uid, gymClassID)\n        .then(isMember => {\n            if(!isMember){\n                let doc = fs.collection(CLASS_MEMBER)\n                .doc()\n\n                let shallow = fs.collection(CLASS_MEMBER_SHALLOW)\n                .doc(data.gymClassID).collection(\"users\").doc(data.uid)\n\n                Promise.all([\n                    doc.set({ ...data, classMemberID: doc.id }),\n                    shallow.set({uid: data.uid, gymClassID: data.gymClassID, classMemberID: doc.id})\n                ])\n                .then(result => {\n                    res(\"Added user as a member.\")\n                })\n            }else{\n                rej(\"User is a member.\")\n            }\n        })\n        .catch(err => {\n            rej(err)\n        })\n    })\n}\n\n\n\nexport function removeMember(classMember){\n\n    return Promise.all([\n        fs.collection(CLASS_MEMBER)\n        .doc(classMember.classMemberID)\n        .delete(),\n        fs.collection(CLASS_MEMBER_SHALLOW).doc(classMember.gymClassID)\n        .collection(\"users\").doc(classMember.uid)\n        .delete()\n\n    ])\n}","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { sendMemberInvite } from \"../../utils/firestore/classMember\"\nimport InviteView from \"./inviteView\"\n\nimport \"../../styles.css\"\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass InviteMemberView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            gymClassMD: props.gymClassMD,\n\t\t\tallUsers: [],\n            filteredUsers: [],\n            selectedUser: {}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        fs.collection(\"users\")\n        .onSnapshot(ss => {\n            let users = []\n            if(!ss.empty){\n                ss.forEach(doc => {\n                    users.push(doc.data())\n                })\n                users.sort((a, b) => {\n                    return (a.username > b.username)? 1 : -1\n                })\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: users[0]\n                })\n            }else{\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: {}\n                })\n            }\n        })\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tonKeyUp(data){\n\t\tif((data.keyCode || data.which) == 13){\n\n\t\t}\n\t}\n\n\tonChange(ev){\n\t\t/*\n\t\t\tSearch bar, filter by name\n\t\t*/\n\t\tlet val = ev.target.value\n\t\tlet filteredUsers = this.state.allUsers.filter(user =>{\n\t\t  return user[\"username\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredUsers: filteredUsers, selectedUser: filteredUsers[0]})\n\t}\n\n    sendInvite(){\n        if(!this.state.selectedUser)\n            return\n\n        let data = {\n            msg: \"Accept invite?\",\n            gymClassID: this.state.gymClassMD.gymClassID,\n            senderUID: this.state.userMD.uid,\n            senderUsername: this.state.userMD.username,\n            gymClassTitle: this.state.gymClassMD.title,\n            boxTitle: this.state.gymClassMD.boxTitle,\n            boxID: this.state.gymClassMD.boxID,\n            uid: this.state.selectedUser.uid,\n            date: Date.now()\n        }\n        this.props.onModalClose()\n        console.log(`Send invite to ${this.state.selectedUser.uid} from ${this.state.userMD.uid}`)\n\n        sendMemberInvite(this.state.selectedUser.uid, data)\n        .then((res) => {\n            this.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: res\n\t\t\t})\n        })\n        .catch(err => {\n            this.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err.message\n\t\t\t})\n        })\n    }\n\n    onSelectChange(ev){\n        let user = JSON.parse(ev.target.value)\n        console.log(user)\n        this.setState({selectedUser: user})\n    }\n\n  render(){\n\t\treturn(\n            <InviteView\n            modalOpen={this.state.open}\n            title=\"Invite Member\"\n            onChange={this.onChange.bind(this)}\n            onSelectChange={this.onSelectChange.bind(this)}\n            onModalClose={this.props.onModalClose}\n            sendInvite={this.sendInvite.bind(this)}\n            filteredUsers={this.state.filteredUsers}\n            modalOpen={this.props.modalOpen}\n        />\n    )}\n}\n\nexport default InviteMemberView = withTheme(InviteMemberView)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport\n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport Delete from '@material-ui/icons/Delete'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeAdmin } from '../../utils/firestore/classAdmin'\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction AdminRowRaw(props){\n  console.log(props)\n  // TODO redirect to wods whhoch is what boxView is\n  return(\n    <TableRow>\n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { props.info.username }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.handleRemoveAdmin(props.info)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n}\nconst AdminRow = withTheme(AdminRowRaw)\n\nfunction EmptyAdminRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Admins!\n        </Typography>\n      </TableCell>\n    </TableRow>\n  )\n}\nconst EmptyAdmin = withTheme(EmptyAdminRaw)\n\nclass ClassAdminList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n        gymClassID: props.gymClassID,\n        isOwner: props.isOwner,\n        filteredAdmins: props.filteredAdmins,\n        admins: props.admins,\n        showRemoveAlert: false,\n        removeClassAdmin: {}\n    }\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state.admins.length > 0? state : props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n    }\n  }\n\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredAdmins = this.state.admins.filter(admin =>{\n        return admin[\"username\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredAdmins: filteredAdmins})\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert: false})\n  }\n\n  handleRemoveAdmin(removeClassAdmin){\n    console.log(\"remove admin w/ data: \", removeClassAdmin)\n    this.setState({removeClassAdmin: removeClassAdmin, showRemoveAlert: true})\n  }\n\n  onRemoveAdmin(){\n    this.setState({showRemoveAlert: false})\n    removeAdmin(this.state.removeClassAdmin)\n    .then((res) => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Removed admin!\"\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err.message\n\t\t\t})\n\t\t})\n\n  }\n\n\n\n  render () {\n    return (\n      <Grid item xs={12}>\n        <Grid item xs={12}>\n          <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n          <Paper elevation={2} component=\"form\">\n            <TextField\n                fullWidth\n                variant=\"outlined\"\n                inputProps={{style: {fontSize: \"0.8em\"}}}\n                onKeyUp={this.onKeyUp.bind(this)}\n                onChange={this.onChange.bind(this)}\n                placeholder=\"Search Admins\"\n                InputProps={{\n                    startAdornment: (\n                    <InputAdornment position=\"start\">\n                        <SearchIcon color=\"primary\" />\n                    </InputAdornment>\n                    )\n                }}\n            />\n            <TableContainer>\n                <Table stickyHeader size=\"small\">\n                <TableHead>\n                    <TableRow>\n                    <TableCell>Admin Username</TableCell>\n                    <TableCell></TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {this.state.filteredAdmins.length > 0 ?\n                  this.state.filteredAdmins.map((admin, i) => {\n                      return (\n                          <AdminRow\n                              key={i}\n                              info={admin}\n                              handleRemoveAdmin={this.handleRemoveAdmin.bind(this)}\n                              isOwner={this.props.isOwner}\n                          />\n                      )\n                  })\n                :\n                  <EmptyAdmin />\n                }\n                </TableBody>\n                </Table>\n            </TableContainer>\n          </Paper>\n          </Grid>\n        </Grid>\n        <ActionCancelModal\n\t\t\t\t  open={this.state.showRemoveAlert}\n          onClose={this.handleModalClose.bind(this)}\n          onAction={this.onRemoveAdmin.bind(this)}\n          modalText={ `Remove admin, ${this.state.removeUsername}?`}\n          actionText={\"Remove\"}\n          cancelText={\"Cancel\"}\n\t\t\t/>\n      </Grid>\n    );\n  }\n}\n\n\n\nexport default ClassAdminList = withTheme(ClassAdminList)\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport\n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport Delete from '@material-ui/icons/Delete'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeMember } from '../../utils/firestore/classMember'\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction MemberRowRaw(props){\n\n  // TODO redirect to wods whhoch is what boxView is\n  return(\n    <TableRow>\n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { props.info.username }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.handleRemoveMember(props.info)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n}\nconst MemberRow = withTheme(MemberRowRaw)\n\nfunction EmptyMemberRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Members!\n        </Typography>\n      </TableCell>\n    </TableRow>\n  )\n}\nconst EmptyMember = withTheme(EmptyMemberRaw)\n\nclass ClassMemberList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n        gymClassID: props.gymClassID,\n        isOwner: props.isOwner,\n        filteredMembers: props.filteredMembers,\n        members: props.members,\n        showRemoveAlert: false,\n        classMember: \"\"\n    }\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state.members.length > 0? state : props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n    }\n  }\n\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredMembers = this.state.members.filter(member =>{\n        return member[\"username\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredMembers: filteredMembers})\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert: false})\n  }\n\n  handleRemoveMember(classMember){\n    this.setState({classMember: classMember, showRemoveAlert: true})\n  }\n\n  onRemoveMember(){\n    this.setState({showRemoveAlert: false})\n    console.log(\"Remvoing\")\n    console.log(this.state.classMember)\n    removeMember(this.state.classMember)\n    .then((res) => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Removed member!\"\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n\t\t})\n\n  }\n\n  render () {\n    return (\n      <Grid item xs={12}>\n        <Grid item xs={12}>\n          <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n          <Paper elevation={2} component=\"form\">\n            <TextField\n                fullWidth\n                variant=\"outlined\"\n                inputProps={{style: {fontSize: \"0.8em\"}}}\n                onKeyUp={this.onKeyUp.bind(this)}\n                onChange={this.onChange.bind(this)}\n                placeholder=\"Search Members\"\n                InputProps={{\n                    startAdornment: (\n                    <InputAdornment position=\"start\">\n                        <SearchIcon color=\"primary\" />\n                    </InputAdornment>\n                    )\n                }}\n            />\n            <TableContainer>\n                <Table stickyHeader size=\"small\">\n                <TableHead>\n                    <TableRow>\n                    <TableCell>Member Username</TableCell>\n                    <TableCell></TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {this.state.filteredMembers.length > 0 ?\n                  this.state.filteredMembers.map((member, i) => {\n                      return (\n                          <MemberRow\n                              key={i}\n                              info={member}\n                              handleRemoveMember={this.handleRemoveMember.bind(this)}\n                              isOwner={this.props.isOwner}\n                          />\n                      )\n                  })\n                :\n                  <EmptyMember />\n                }\n                </TableBody>\n                </Table>\n            </TableContainer>\n          </Paper>\n          </Grid>\n        </Grid>\n        <ActionCancelModal\n\t\t\t\t  open={this.state.showRemoveAlert}\n          onClose={this.handleModalClose.bind(this)}\n          onAction={this.onRemoveMember.bind(this)}\n          modalText={ `Remove member, ${this.state.classMember.username}?`}\n          actionText={\"Remove\"}\n          cancelText={\"Cancel\"}\n\t\t\t/>\n      </Grid>\n    );\n  }\n}\n\n\n\nexport default ClassMemberList = withTheme(ClassMemberList)\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, TableRow, TableHead, TableContainer,\n  \tTableBody, Table\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles'\n\nimport { setWod } from \"../../utils/firestore/wods\"\nimport { getGymClasses } from \"../../utils/firestore/gymClass\"\n\nlet fs = firebase.firestore()\nconst SCORETYPES = [\"reps\", \"rounds\", \"time\", \"total\"]\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddWodClass extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            gymClassMD: props.gymClassMD,\n\t\t\ttitleForm: \"\",\n\t\t\tscoreTypeForm: SCORETYPES[0],\n\t\t\twodTextForm: \"\"\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\n\n\n\n\n\n\tonTitleChange(ev){\n\t\tconsole.log(ev.target.value)\n\t\tlet title = ev.target.value\n\t\tthis.setState({titleForm: title})\n\t}\n\n\tonScoreTypeSelectChange(ev){\n\t\tconsole.log(ev.target.value)\n\t\tlet scoreType = ev.target.value\n\t\tthis.setState({scoreTypeForm: scoreType})\n\t}\n\n\tonWodTextChange(ev){\n\n\t\tlet wodText = ev.target.value\n\t\tthis.setState({wodTextForm: wodText})\n\t}\n\n\tcreateWOD(){\n\t  \tlet boxID = this.state.gymClassMD.boxID\n\t\tlet boxTitle = this.state.gymClassMD.boxTitle\n\t  \tlet gymClassID = this.state.gymClassMD.gymClassID\n\t\tlet gymClassTitle = this.state.gymClassMD.title\n\t\tlet gymClassIsPrivate = this.state.gymClassMD.isPrivate\n\t  \tlet title = this.state.titleForm\n\t  \tlet scoreType = this.state.scoreTypeForm\n\t  \tlet wodText = this.state.wodTextForm\n\n\n\t\tconsole.log(\"Creating Wod\")\n\t\tconsole.log(boxID, gymClassID, title, scoreType, wodText)\n\t  \tif(!boxID || !gymClassID || !title || !scoreType || !wodText){\n\t  \t\tconsole.log(\"Error with input createWod\")\n\t  \t\tconsole.log(boxID, gymClassID, title, scoreType, wodText)\n\t  \t\treturn\n\n\t  \t}\n\n\t\tlet data = {\n\t\t\tboxID: boxID,\n\t\t\tgymClassID: gymClassID,\n\t\t\ttitle: title,\n\t\t\tscoreType: scoreType,\n\t\t\twodText: wodText,\n\t\t\tboxTitle: boxTitle,\n\t\t\tgymClassTitle: gymClassTitle,\n\t\t\tisPrivate: gymClassIsPrivate\n\t\t}\n\t  \tsetWod(data)\n\t  \t.then((res)=>{\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Added workout!\"\n\t\t\t})\n\t\t})\n\t\t.catch((err)=>{\n\t\t  this.props.onAlert({\n\t\t\t  type: \"error\",\n\t\t\t  message: err.message\n\t\t  })\n\t \t })\n\n\t  }\n\n\n\n\trender(){\n\t\treturn(\n\t\t\t<Grid item container xs={12}>\n\t\t\t\t<TableContainer>\n\n\t\t\t\t\t<Table>\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n                                Add Workout\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tScore Type\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onScoreTypeSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Score Type',\n\t\t\t\t\t\t\t\t\t\tid: 'ownerBoxAddWodScoreType',\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tSCORETYPES.map((scoreType, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn <option key={i} value={scoreType}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ scoreType.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscoreType[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscoreType[0].toUpperCase()) }\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t              id=\"ownerBoxAddWodTitle\"\n\t\t\t\t\t              type=\"text\"\n\t\t\t\t\t\t\t\t  onChange={this.onTitleChange.bind(this)}\n\t\t\t\t\t              style={{width: \"100%\"}}\n\t\t\t\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t              inputProps={{\n\t\t\t\t\t                title: \"Letters only, max length 35\",\n\t\t\t\t\t                placeholder: \"Title\"\n\t\t\t\t\t              }}\n\t\t\t\t\t              margin=\"normal\"\n\t\t\t\t\t              color=\"primary\"\n\t\t\t\t\t              InputLabelProps={{\n\t\t\t\t\t                shrink: true,\n\t\t\t\t\t              }}\n\t\t\t\t\t            />\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tWorkout\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t              id=\"wodText\"\n\t\t\t\t\t              type=\"text\"\n\t\t\t\t\t              style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t  onChange={this.onWodTextChange.bind(this)}\n\t\t\t\t\t              inputProps={{\n\t\t\t\t\t                title: \"Enter workout\",\n\t\t\t\t\t                placeholder: \"workout\"\n\t\t\t\t\t              }}\n\t\t\t\t\t              margin=\"normal\"\n\t\t\t\t\t              color=\"primary\"\n\t\t\t\t\t              InputLabelProps={{\n\t\t\t\t\t                shrink: true,\n\t\t\t\t\t              }}\n\t\t\t\t\t\t\t\t  multiline={true}\n\t\t\t\t\t\t\t\t  rows={12}\n\t\t\t\t\t            />\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tonClick={this.createWOD.bind(this)}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\nexport default AddWodClass = withTheme(AddWodClass)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel, IconButton\n} from '@material-ui/core';\n\nimport { ArrowBackIos } from '@material-ui/icons';\n\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// WodTrackrr\n\nimport EditWod from \"../wods/editWod\"\nimport SearchSortTable from \"../searchSortTable\"\nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport InviteAdminView from \"./inviteAdminView\"\nimport InviteMemberView from \"./inviteMemberView\"\n\nimport ClassAdminList from \"../admins/classAdminList\"\nimport ClassMemberList from \"../members/classMemberList\"\n\nimport AddWodClass from \"../wods/addWodClass\"\n\nimport { getWods, removeWod } from \"../../utils/firestore/wods\"\nimport { getClassAdmins } from \"../../utils/firestore/classAdmin\"\nimport { getClassMembers } from \"../../utils/firestore/classMember\"\n\nimport \"../../styles.css\"\n\n\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass GymClassView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\tboxID: props.boxID,\n\t\t\tgymClassID: props.gymClassID,\n\t\t\tgymClassMD: {},\n\t\t\tgymClasses:[],\n\t\t\tuserBoxes: [],\n\t\t\thasBoxes: false,\n\t\t\twods: [],\n\t\t\tcurrentWodID: \"\",\n\t\t\tcurrentWodMD: {},\n\t\t\tshowRemoveAlert: false,\n\t\t\tshowEditModal: false,\n\t\t\teditWodInfo: {},\n\t\t\tcurRemovewodInfo: {},\n\t\t\tinviteModalOpen: false,\n\t\t\tinviteMemberModalOpen: false,\n\t\t\tadmins: [],\n\t\t\tadminUids: [],\n\t\t\tmembers: [],\n\t\t\tmemberUids: [],\n\t\t\tshowAdminList:false,\n\t\t\tshowMemberList: false,\n\t\t\tisAdmin: false,\n\t\t\tisMember: false,\n\t\t\tshowAddWod: false\n\n\t\t}\n\t}\n\n\tgetGymClassListener(){\n\t\tif(!this.gymClassListener){\n\t\t\tthis.gymClassListener = fs.collection(\"gymClasses\")\n\t\t\t.doc(this.state.boxID)\n\t\t\t.collection(\"classes\")\n\t\t\t.doc(this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tif(ss.exists){\n\t\t\t\t\tlet gymClassMD = ss.data()\n\t\t\t\t\tthis.setState({ gymClassMD: gymClassMD })\n\t\t\t\t\tthis.getWodListener(gymClassMD)\n\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tgetUserBoxListener(){\n\t\tif(this.state.userMD.uid && !this.userBoxesListener ){\n\t\t\tthis.userBoxesListener = fs.collection(\"boxes\")\n\t\t\t.where(\"uid\", \"==\", this.state.userMD.uid)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet boxes = []\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.forEach(doc => {\n\t\t\t\t\t\tboxes.push(doc.data())\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.setState({userBoxes: boxes, hasBoxes: boxes.length? true: false})\n\t\t\t})\n\t\t}\n\t}\n\n\tgetAdminListener(){\n\t\tif(this.state.userMD.uid && !this.adminListener){\n\t\t\tthis.adminListener =\n\t\t\tgetClassAdmins(this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet admins = []\n\t\t\t\tlet adminUids = []\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.docs.forEach(doc => {\n\t\t\t\t\t\tadmins.push(doc.data())\n\t\t\t\t\t\tadminUids.push(doc.data().uid)\n\t\t\t\t\t})\n\t\t\t\t\tlet isAdmin = adminUids.indexOf(this.state.userMD.uid) >= 0\n\t\t\t\t\tthis.setState({admins: admins, adminUids: adminUids, isAdmin: isAdmin})\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({admins: admins, adminUids: adminUids, isAdmin: false})\n\t\t\t\t}\n\t\t\t},\n\t\t\terr => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t}\n\t}\n\n\tgetMemberListener(){\n\t\tif(this.state.userMD.uid && !this.memberListener){\n\t\t\tthis.memberListener = getClassMembers(this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet members = []\n\t\t\t\tlet memberUids = []\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.docs.forEach(doc => {\n\t\t\t\t\t\tmembers.push(doc.data())\n\t\t\t\t\t\tmemberUids.push(doc.data().uid)\n\t\t\t\t\t})\n\t\t\t\t\tlet isMember = memberUids.indexOf(this.state.userMD.uid) >= 0\n\t\t\t\t\tthis.setState({members: members, memberUids: memberUids, isMember: isMember})\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({members: members, memberUids: memberUids, isMember: false})\n\t\t\t\t}\n\t\t\t},\n\t\t\terr => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t}\n\t}\n\n\tgetWodListener(gymClassMD){\n\t\tconsole.log(`Getting wods for user: ${gymClassMD}`)\n\t\tif(!this.wodListener){\n\t\t\tthis.wodListener = getWods(gymClassMD)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tconsole.log(ss)\n\n\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tlet wods = []\n\t\t\t\t\tss.forEach(doc => {\n\t\t\t\t\t\twods.push(doc.data())\n\t\t\t\t\t})\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twods: wods\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twods: []\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}, err => {\n\t\t\t\tconsole.log(err)\n\t\t\t\tthis.wodListener()\n\t\t\t\tthis.wodListener = undefined\n\t\t\t})\n\t\t}\n\n\t}\n\n\tcheckListeners(){\n\t\tif(!this.userBoxesListener)\n\t\t\tthis.getUserBoxListener()\n\t\tif(!this.adminListener)\n\t\t\tthis.getAdminListener()\n\t\tif(!this.memberListener)\n\t\t\tthis.getMemberListener()\n\n\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.checkListeners()\n\t\tthis.getGymClassListener()\n\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn state.userMD? state: props\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.checkListeners()\n\t}\n\n\tcomponentWillUnmount(){\n\t\tif(this.adminListener)\n\t\t\tthis.adminListener()\n\t\tif(this.memberListener)\n\t\t\tthis.memberListener()\n\t\tif(this.userBoxesListener)\n\t\t\tthis.userBoxesListener()\n\t\tif(this.wodListener)\n\t\t\tthis.wodListener()\n\t\tif(this.gymClassListener){\n\t\t\tthis.gymClassListener()\n\t\t}\n\t}\n\n\thandleModalClose(){\n\t  \tthis.setState({showRemoveAlert:false})\n\t  }\n\n\thandleRemoveWod(wodInfo){\n\t\tthis.setState({\n\t\t\tshowRemoveAlert: true,\n\t\t\tcurRemovewodInfo: wodInfo\n\t\t})\n\t}\n\n\tdeleteWod(){\n\t\tthis.setState({showRemoveAlert: false})\n\n\t\tremoveWod(this.state.curRemovewodInfo)\n\t\t.then((res) => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Deleted workout!\"\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err.message\n\t\t\t})\n\t\t})\n\t}\n\n\n\n\tonChange(ev){\n\t\tlet val = ev.target.value\n\t\tlet filteredWods = this.state.wods.filter(wod =>{\n\t\t  return wod[\"title\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredWods: filteredWods})\n\t}\n\n\thandleEdit(info){\n\t\tif(!this.userBoxesListener)\n\t\t\tthis.getUserBoxListener()\n\t\tthis.setState({\n\t\t\teditWodInfo: info,\n\t\t\tshowEditModal: true\n\t\t})\n\t}\n\n\thandleEditModalClose(){\n\t\tthis.setState({showEditModal: false})\n\t}\n\n\tisOwner(){\n\t\treturn this.state.gymClassMD[\"uid\"] === this.state.userMD['uid']\n\t}\n\n\topenAdminInvite(){\n\t\tthis.setState({inviteModalOpen: true})\n\t}\n\n\topenMemberInvite(){\n\t\tthis.setState({inviteMemberModalOpen: true})\n\t}\n\n\tonInviteModalClose(){\n\t\tthis.setState({inviteModalOpen: false})\n\t}\n\n\tonInviteMemberModalClose(){\n\t\tthis.setState({inviteMemberModalOpen: false})\n\t}\n\n\tempty(obj){\n\t\treturn (obj\n\t\t&& Object.keys(obj).length === 0\n\t\t&& obj.constructor === Object)\n\t}\n\n\topenViewAdmins(){\n\t\tthis.setState({showAdminList: true})\n\t}\n\n\topenViewMembers(){\n\t\tthis.setState({showMemberList: true})\n\t}\n\n\tcloseDetailView(){\n\t\tthis.setState({showAdminList: false,\n\t\t\tshowMemberList: false,\n\t\t\tshowAddWod: false\n\t\t})\n\t}\n\n\tisAdmin(){\n\t\treturn (this.state.isAdmin || this.isOwner()) && this.state.userMD\n\t}\n\n\tisMember(){\n\t\treturn (this.state.isMember || this.isAdmin()) && this.state.userMD\n\t}\n\t isOnlyMember(){\n\t\t return this.state.isMember && this.state.userMD && !this.isAdmin()\n\t }\n\n\n\t toggleShowAddWod(){\n\t\t this.setState({showAddWod: true})\n\t }\n\n  \trender(){\n\t \tlet sortableHeadersOwner = [\n\t \t\t{id:\"date\", sortable:true, label:\"Date\"},\n\t \t\t{id:\"title\", sortable:true, label:\"Title\"},\n\t\t\t{id:\"title2\", sortable:true, label:\"\"},\n\t \t\t{id:\"btns\", sortable:false, label:\"\"}\n\t \t]\n\t \tlet sortableHeadersUser = [\n\t \t\t{id:\"date\", sortable:true, label:\"Date\"},\n\t \t\t{id:\"title\", sortable:true, label:\"Title\"},\n\t\t\t{id:\"title2\", sortable:true, label:\"\"},\n\t \t\t{id:\"btns\", sortable:false, label:\"\"}\n\t \t]\n\t\t let viewMemberBtnSize = this.isOnlyMember()? 12: 6\n\n\t\treturn this.empty(this.state.userMD) || this.empty(this.state.gymClassMD)\n\t\t\t?\n\t\t\t\t<React.Fragment>Loading</React.Fragment>\n\t\t\t:\n\t\t \t\tthis.state.gymClassMD.isPrivate && !this.isMember()\n\t\t\t\t?<Grid item xs={12} align=\"center\">\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>This is a Private Class</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t:\n\t\t\t\tthis.state.showAdminList && this.isAdmin() ?\n\t\t \t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<IconButton onClick={this.closeDetailView.bind(this)}\n\t\t\t\t\t\t\t\tstyle={{color: this.props.theme.palette.text.primary}}>\n\t\t\t\t\t\t\t\t<ArrowBackIos />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<ClassAdminList\n\t\t\t\t\t\t\t\tgymClassID={this.state.gymClassID}\n\t\t\t\t\t\t\t\tfilteredAdmins={this.state.admins}\n\t\t\t\t\t\t\t\tadmins={this.state.admins}\n\t\t\t\t\t\t\t\tisOwner={this.isAdmin()}\n\t\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t </Grid>\n\t\t\t\t:\n\t\t\t\tthis.state.showMemberList && this.isMember()?\n\t\t \t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<IconButton onClick={this.closeDetailView.bind(this)}\n\t\t\t\t\t\t\t\tstyle={{color: this.props.theme.palette.text.primary}}>\n\t\t\t\t\t\t\t\t <ArrowBackIos />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<ClassMemberList\n\t\t\t\t\t\t\tgymClassID={this.state.gymClassID}\n\t\t\t\t\t\t\tfilteredMembers={this.state.members}\n\t\t\t\t\t\t\tmembers={this.state.members}\n\t\t\t\t\t\t\tisOwner={this.isAdmin()}\n\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t:\n\t\t\t\tthis.state.showAddWod?\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<IconButton onClick={this.closeDetailView.bind(this)}\n\t\t\t\t\t\t\t\tstyle={{color: this.props.theme.palette.text.primary}}>\n\t\t\t\t\t\t\t\t <ArrowBackIos />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<AddWodClass\n\t\t\t\t\t\t\tgymClassMD={this.state.gymClassMD}\n\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t:\n\t\t\t(\n\t\t\t<Grid item xs={12}>\n\n\t\t\t\t<Grid item align=\"center\" xs={12}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography align=\"center\" variant=\"h3\">\n\t\t\t\t\t\t\t{this.state.gymClassMD['title']}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography align=\"center\" variant=\"h6\">\n\t\t\t\t\t\t\t{this.state.gymClassMD['boxTitle']}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\n\n\t\t\t\t<Grid item container spacing={1} xs={12}\n\t\t\t\t\tstyle={{marginTop: \"16px\"}}>\n\t\t\t\t\t{this.isAdmin()?\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button color=\"primary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonClick={ this.openAdminInvite.bind(this) }>\n\t\t\t\t\t\t\t\t\tInvite Admin\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button color=\"primary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonClick={ this.openViewAdmins.bind(this) }>\n\t\t\t\t\t\t\t\t\tView Admins\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<InviteAdminView\n\t\t\t\t\t\t\t\t\tuserMD={this.state.userMD}\n\t\t\t\t\t\t\t\t\tgymClassMD={this.state.gymClassMD}\n\t\t\t\t\t\t\t\t\tonModalClose={this.onInviteModalClose.bind(this)}\n\t\t\t\t\t\t\t\t\tmodalOpen={this.state.inviteModalOpen}\n\t\t\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</React.Fragment>\n\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ this.isMember() ?\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t{!this.isOnlyMember()?\n\n\t\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button color=\"secondary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\tonClick={ this.openMemberInvite.bind(this) }>\n\t\t\t\t\t\t\t\t\t\t\tInvite Member\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<Grid item xs={viewMemberBtnSize}>\n\t\t\t\t\t\t\t\t\t<Button color=\"secondary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\tonClick={ this.openViewMembers.bind(this) }>\n\t\t\t\t\t\t\t\t\t\tView Members\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<InviteMemberView\n\t\t\t\t\t\t\t\t\tuserMD={this.state.userMD}\n\t\t\t\t\t\t\t\t\tgymClassMD={this.state.gymClassMD}\n\t\t\t\t\t\t\t\t\tonModalClose={this.onInviteMemberModalClose.bind(this)}\n\t\t\t\t\t\t\t\t\tmodalOpen={this.state.inviteMemberModalOpen}\n\t\t\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\n\t\t\t\t\t{this.isAdmin() && this.state.gymClassMD?\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t color=\"primary\"\n\t\t\t\t\t\t variant=\"outlined\"\n\t\t\t\t\t\t fullWidth\n\t\t\t\t\t\t onClick={this.toggleShowAddWod.bind(this)}>\n\t\t\t\t\t\t\tAdd Workout\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t</Grid>\n\t\t\t\t<Paper elevation={6} style={{padding: \"8px\"}}>\n\t\t\t\t\t<SearchSortTable\n\t\t\t\t\t\trows = {this.state.wods}\n\t\t\t\t\t\tfilteredRows={this.state.wods}\n\t\t\t\t\t\theaders={this.isOwner()? sortableHeadersOwner: sortableHeadersUser}\n\t\t\t\t\t\thandleRemove={this.handleRemoveWod.bind(this)}\n\t\t\t\t\t\thandleEdit={this.handleEdit.bind(this)}\n\t\t\t\t\t\tshowOwnerBtns={this.isAdmin()}\n\t\t\t\t\t/>\n\t\t\t\t</Paper>\n\n\t\t\t\t<ActionCancelModal\n\t\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\t\tonClose={this.handleModalClose.bind(this)}\n\t\t\t\t\tonAction={this.deleteWod.bind(this)}\n\t\t\t\t\tmodalText={ `Remove ${this.state.curRemoveWodTitle} (${this.state.curRemoveWodID})?`}\n\t\t\t\t\tactionText={\"Delete\"}\n\t\t\t\t\tcancelText={\"Cancel\"}\n\t\t\t\t/>\n\n\t\t\t\t<EditWod\n\t\t\t\t\topen={this.state.showEditModal}\n\t\t\t\t\tonClose={this.handleEditModalClose.bind(this)}\n\t\t\t\t\tuserBoxes={this.state.userBoxes}\n\t\t\t\t\thasBoxes={this.state.hasBoxes}\n\t\t\t\t\twodInfo={this.state.editWodInfo}\n\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t/>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\nexport default GymClassView = withTheme(GymClassView);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n/*\n\tBoxes\n*/\n\nexport function setBox(title, uid){\n\n  \treturn new Promise((res, rej) => {\n  \t\tfs.collection(\"boxes\").where(\"title\", \"==\", title)\n  \t\t.get().then(result => {\n  \t\t\tif(result.empty){\n\t\t\t\t\tlet doc = fs.collection(\"boxes\").doc()\n\t\t  \t\tdoc.set({\n\t\t  \t\t\tboxID: doc.id,\n\t\t  \t\t\ttitle: title,\n\t\t  \t\t\tuid, uid,\n\t\t  \t\t\tdate: Date.now()\n\t\t  \t\t})\n\t\t  \t\t.then(()=>{\n\t\t  \t\t\tres(\"Added box\")\n\t\t  \t\t})\n\n  \t\t\t}else{\n  \t\t\t\trej(\"Name Taken\")\n  \t\t\t}\n  \t\t})\n  \t})\n }\n\n\nfunction batchDelete(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\n\t\tss.forEach(doc => {\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)  // bacth limits to 500 changes\n\t\t\tbatchDelete(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nfunction batchUpdate(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\n\t\tss.forEach(doc => {\n\t\t\tbatch.update(doc.ref, {\n\t\t\t\tboxID: \"\"\n\t\t\t})\n\t\t\tcnt++\n\t\t})\n\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)  // bacth limits to 500 changes\n\t\t\tbatchUpdate(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeBox(boxID){\n\t/*\n\t\tboxes\n\t\tclassAdmin\n\t\tclassMember\n\t\tfollowing\n\t\t - remove boxID\n\t\t - allows user to see their follows after box is deleted\n\t\t - once user unfollows, it will no longer appear\n\t\tgymClasses\n\t\tscores\n\t\twods\n\t\tusers\n\t\t\t-uid/\n\t*/\n\n\tlet collectionNames = [\"notifications/admins/invites\",\n\t\t\t\t\t\t  \"notifications/members/invites\",\n\t\t\t\t\t\t  \"classAdmins\", \"classMembers\",\n\t\t\t\t\t\t  \"classAdminsShallow\", \"classMembersShallow\",\n\t\t\t\t\t\t   `gymClasses/${boxID}/classes`, \"classOwners\",\n\t\t\t\t\t\t  \"wods\",\n\t\t\t\t\t\t  \"scores\",\n\t\t\t\t\t\t  \"boxes\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tbatchDelete(name, \"boxID\", boxID, res, rej)\n\t\t})\n\t})\n\n\tpromises.push(new Promise((res, rej) => {\n\t\tbatchUpdate(\"following\", \"boxID\", boxID, res, rej)\n\t}))\n\n\treturn Promise.all(promises)\n}","import React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, Modal\n}\nfrom '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport BoxView from \"./boxView\"\nimport BoxSearch from \"./boxSearch\"\nimport { removeBox } from \"../../utils/firestore/boxes\"\nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport \"../../styles.css\"\n\nclass BoxListAccordion extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD,\n      userBoxes: props.userBoxes,\n      hasBoxes: props.hasBoxes,\n      currentBoxID: \"\",\n      showRemoveAlert: false,\n      curRemoveBoxID: \"\",\n      curRemoveBoxTitle: \"\"\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n\t  console.log(props)\n    return props\n  }\n\n  componentWillUnmount(){\n  \tconsole.log(\"Component will unmount\")\n  }\n\n  handleRemoveBox(boxID, boxTitle){\n  \tthis.setState({\n  \t\tshowRemoveAlert: true,\n  \t\tcurRemoveBoxID: boxID,\n  \t\tcurRemoveBoxTitle: boxTitle\n  \t})\n  }\n\n  handleModalClose(){\n  \tthis.setState({showRemoveAlert:false})\n  }\n\n  deleteBox(){\n\tthis.handleModalClose()\n  \tremoveBox(this.state.curRemoveBoxID)\n  \t.then((res)=>{\n  \t\tthis.props.onAlert({\n\t\t\t  type: \"success\",\n\t\t\t  message: \"Removed gym!\"\n\t\t  })\n  \t})\n  \t.catch((err)=>{\n\t\tthis.props.onAlert({\n\t\t\ttype: \"error\",\n\t\t\tmessage: err\n\t\t})\n\t})\n  }\n\n  render(){\n\treturn(\n\t\t<Grid item xs ={12}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t{\n\t\t\t\t\tthis.state.userBoxes.length > 0\n\t\t\t\t?\n\t\t\t\t\t<BoxSearch\n\t\t\t\t\t\tuserMD = {this.state.userMD}\n\t\t\t\t\t\tallBoxes = {this.state.userBoxes}\n\t\t\t\t\t\tfilteredBoxes={this.state.userBoxes}\n\t\t\t\t\t\thandleRemoveBox={this.handleRemoveBox.bind(this)}\n\t\t\t\t\t\tisOwner = {true}\n\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t\t<Grid item zeroMinWidth xs={12}>\n\t\t\t\t\t\t<Paper elevation={4} style={{padding: \"1vw\"}}>\n\t\t\t\t\t\t\t<Typography noWrap align=\"left\">No gyms Found!</Typography>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t}\n\t\t\t</Grid>\n\t\t\t<ActionCancelModal\n\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\tonClose={this.handleModalClose.bind(this)}\n\t\t\t\tonAction={this.deleteBox.bind(this)}\n\t\t\t\tmodalText={ `Remove ${this.state.curRemoveBoxTitle} (${this.state.curRemoveBoxID})`}\n\t\t\t\tactionText={\"Remove\"}\n\t\t\t\tcancelText={\"Cancel\"}\n\t\t\t/>\n\t\t</Grid>\n\t)\n  }\n}\n\nexport default BoxListAccordion = withTheme(BoxListAccordion);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nimport React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tTableRow, TableHead, TableContainer,\n\tTableBody, Table, Checkbox\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { setGymClass } from \"../../utils/firestore/gymClass\"\n\nlet fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddGymClass extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD,\n      userBoxes: props.userBoxes,\n      hasBoxes: props.hasBoxes,\n\t  title: \"\",\n\t  box: props.userBoxes[0],\n\t  isPrivate: false\n    }\n  }\n\n  componentDidMount(){\n  }\n\n\n  static getDerivedStateFromProps(props, state){\n\treturn props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n      this.createGymClass()\n    }\n  }\n\n  createGymClass(){\n\tlet title = this.state.title\n\tlet box = this.state.box\n\tlet isPrivate = this.state.isPrivate\n\n\tconsole.log(\"Creating class\")\n\tconsole.log(title, box, isPrivate)\n\tif(!title || !box || isPrivate === null)\n\t\treturn\n\n\tsetGymClass(title, this.props.userMD.uid, box.boxID, box.title, isPrivate)\n\t.then((res)=>{\n\t\tthis.props.onAlert({\n\t\t\ttype: \"success\",\n\t\t\tmessage: \"Added class!\"\n\t\t})\n\t})\n\t.catch((err)=>{\n\t  this.props.onAlert({\n\t\t  type: \"error\",\n\t\t  message: err\n\t  })\n\t})\n  }\n\n  handleCheckboxChange(ev){\n\t  let checked = ev.target.checked\n\t  this.setState({isPrivate: checked})\n  }\n\n  onTitleChange(ev){\n\t  console.log(ev.target.value)\n\tthis.setState({title: ev.target.value})\n  }\n\n  onSelectChange(ev){\n\tconsole.log(ev.target.value)\n\tthis.setState({box: JSON.parse(ev.target.value)})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12}>\n\t\t\t<Table>\n\t\t\t\t<TableBody>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\tGym\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\tonChange={this.onSelectChange.bind(this)}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\tname: 'Box',\n\t\t\t\t\t\t\t\t\tid: 'addGymClassBox'\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{this.state.hasBoxes ?\n\t\t\t\t\t\t\t\t\tthis.state.userBoxes.map((box, i) => {\n\t\t\t\t\t\t\t\t\t\treturn (<option key={i} value={JSON.stringify(box)} >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{box[\"title\"]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Title</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"addGymClassTitle\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t\t\t\tonChange={this.onTitleChange.bind(this)}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\t\t\tplaceholder: \"Name of class\"\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonKeyUp={this.onKeyUp.bind(this) }\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Private</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tchecked={this.state.isPrivate}\n\t\t\t\t\t\t\tonChange={this.handleCheckboxChange.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell align=\"center\" colSpan={2}>\n\t\t\t\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" color=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={ () => { this.createGymClass()} } >\n\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n  \t\t</Grid>\n    )\n  }\n}\n\nexport default AddGymClass = withTheme(AddGymClass);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, TableRow, TableHead, TableContainer,\n  \tTableBody, Table\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles'\n\nimport { setWod } from \"../../utils/firestore/wods\"\nimport { getGymClasses } from \"../../utils/firestore/gymClass\"\n\nlet fs = firebase.firestore()\nconst SCORETYPES = [\"reps\", \"rounds\", \"time\", \"total\"]\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddWod extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserBoxes: props.userBoxes,\n\t\t\thasBoxes: props.hasBoxes,\n\t\t\tgymClasses: [],\n\t\t\tbox: props.userBoxes[0],\n\t\t\tgymClass: {},\n\t\t\ttitleForm: \"\",\n\t\t\tscoreTypeForm: SCORETYPES[0],\n\t\t\twodTextForm: \"\"\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(!this.gymClassListener && this.state.userBoxes && this.state.userBoxes.length > 0){\n\t\t\tthis.setGymClassListner(this.state.userBoxes[0].boxID)\n\t\t}\n\t}\n\n\tsetGymClassListner(boxID){\n\t\tthis.gymClassListener = getGymClasses(boxID)\n\t\t.onSnapshot(ss => {\n\t\t\tif(!ss.empty){\n\t\t\t\tlet classes = []\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tclasses.push(doc.data())\n\t\t\t\t})\n\t\t\t\tlet initClass = classes[0]\n\t\t\t\tthis.setState({\n\t\t\t\t\tgymClasses: classes,\n\t\t\t\t\tgymClass: initClass\n\t\t\t\t})\n\n\t\t\t}else{\n\t\t\t\tthis.setState({gymClasses: []})\n\t\t\t}\n\t\t},\n\t\terr => {console.log(err)})\n\t}\n\n\tcomponentWillUnmount(){\n\t\tif(this.gymClassListener){\n\t\t\tthis.gymClassListener()\n\t\t}\n\t}\n\n\tonBoxSelectChange(ev){\n\t\tlet box = JSON.parse(ev.target.value)\n\t\tif(this.gymClassListener){\n\t\t\tthis.gymClassListener()\n\t\t}\n\t\tthis.setGymClassListner(box.boxID)\n\t\tthis.setState({box: box})\n\t}\n\n\tonClassSelectChange(ev){\n\t\tlet gymClass = JSON.parse(ev.target.value)\n\t\tthis.setState({gymClass: gymClass})\n\t}\n\n\tonTitleChange(ev){\n\t\tlet title = ev.target.value\n\t\tthis.setState({titleForm: title})\n\t}\n\n\tonScoreTypeSelectChange(ev){\n\t\tlet scoreType = ev.target.value\n\t\tthis.setState({scoreTypeForm: scoreType})\n\t}\n\n\tonWodTextChange(ev){\n\n\t\tlet wodText = ev.target.value\n\t\tthis.setState({wodTextForm: wodText})\n\t}\n\n\tcreateWOD(){\n\n\t\tif(!this.state.box || !this.state.gymClass)\n\t\t\treturn\n\t  \tlet boxID = this.state.box.boxID\n\t\tlet boxTitle = this.state.box.title\n\t  \tlet gymClassID = this.state.gymClass.gymClassID\n\t\tlet isPrivate = this.state.gymClass.isPrivate\n\t\tlet gymClassTitle = this.state.gymClass.title\n\t  \tlet title = this.state.titleForm\n\t  \tlet scoreType = this.state.scoreTypeForm\n\t  \tlet wodText = this.state.wodTextForm\n\n\t  \tif(!boxID || !gymClassID || !title || !scoreType || !wodText){\n\t  \t\tconsole.log(\"Error with input createWod\")\n\t  \t\tconsole.log(boxID, gymClassID, title, scoreType, wodText)\n\t  \t\treturn\n\n\t  \t}\n\n\t\tlet data = {\n\t\t\tboxID: boxID,\n\t\t\tgymClassID: gymClassID,\n\t\t\ttitle: title,\n\t\t\tscoreType: scoreType,\n\t\t\twodText: wodText,\n\t\t\tboxTitle: boxTitle,\n\t\t\tgymClassTitle: gymClassTitle,\n\t\t\tisPrivate: isPrivate\n\t\t}\n\t  \tsetWod(data)\n\t  \t.then((res)=>{\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Added workout!\"\n\t\t\t})\n\t\t})\n\t\t.catch((err)=>{\n\t\t  this.props.onAlert({\n\t\t\t  type: \"error\",\n\t\t\t  message: err.message\n\t\t  })\n\t \t })\n\n\t  }\n\n\n\n\trender(){\n\t\treturn(\n\t\t\t<Grid item container xs={12}>\n\t\t\t\t<TableContainer>\n\n\t\t\t\t\t<Table>\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tBox\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onBoxSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Box',\n\t\t\t\t\t\t\t\t\t\tid: 'ownerBoxAddWodBoxID'}}>\n\t\t\t\t\t\t          \t{this.state.hasBoxes ?\n\t\t\t\t\t\t\t          \tthis.state.userBoxes.map((box, i) => {\n\t\t\t\t\t\t        \t\t\treturn (<option key={i} value={JSON.stringify(box)} >\n\t\t\t\t\t\t        \t\t\t\t\t\t\t\t{box[\"title\"]}\n\t\t\t\t\t\t        \t\t\t\t\t\t\t</option>)\n\t\t\t\t\t\t        \t\t})\n\t\t\t\t\t\t        \t:\n\t\t\t\t\t\t        \t\t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t\t\t\t          }\n\t\t\t\t      \t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tClass\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onClassSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'gymClass',\n\t\t\t\t\t\t\t\t\t\tid: 'AddWodGymClassID'}}>\n\t\t\t\t\t\t          \t{this.state.gymClasses.length > 0 ?\n\t\t\t\t\t\t\t          \tthis.state.gymClasses.map((gymClass, i) => {\n\t\t\t\t\t\t        \t\t\treturn (<option key={i} value={JSON.stringify(gymClass)} >\n\t\t\t\t\t\t        \t\t\t\t\t\t\t\t{gymClass[\"title\"]}\n\t\t\t\t\t\t        \t\t\t\t\t\t\t</option>)\n\t\t\t\t\t\t        \t\t})\n\t\t\t\t\t\t        \t:\n\t\t\t\t\t\t        \t\t<option aria-label=\"None\" value=\"\" >No Classes!</option>\n\t\t\t\t\t\t          }\n\t\t\t\t      \t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tScore Type\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onScoreTypeSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Score Type',\n\t\t\t\t\t\t\t\t\t\tid: 'ownerBoxAddWodScoreType',\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tSCORETYPES.map((scoreType, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn <option key={i} value={scoreType}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ scoreType.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscoreType[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscoreType[0].toUpperCase()) }\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t              id=\"ownerBoxAddWodTitle\"\n\t\t\t\t\t              type=\"text\"\n\t\t\t\t\t\t\t\t  onChange={this.onTitleChange.bind(this)}\n\t\t\t\t\t              style={{width: \"100%\"}}\n\t\t\t\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t              inputProps={{\n\t\t\t\t\t                title: \"Letters only, max length 35\",\n\t\t\t\t\t                placeholder: \"Title\"\n\t\t\t\t\t              }}\n\t\t\t\t\t              margin=\"normal\"\n\t\t\t\t\t              color=\"primary\"\n\t\t\t\t\t              InputLabelProps={{\n\t\t\t\t\t                shrink: true,\n\t\t\t\t\t              }}\n\t\t\t\t\t            />\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tWorkout\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t              id=\"wodText\"\n\t\t\t\t\t              type=\"text\"\n\t\t\t\t\t              style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t  onChange={this.onWodTextChange.bind(this)}\n\t\t\t\t\t              inputProps={{\n\t\t\t\t\t                title: \"Enter workout\",\n\t\t\t\t\t                placeholder: \"workout\"\n\t\t\t\t\t              }}\n\t\t\t\t\t              margin=\"normal\"\n\t\t\t\t\t              color=\"primary\"\n\t\t\t\t\t              InputLabelProps={{\n\t\t\t\t\t                shrink: true,\n\t\t\t\t\t              }}\n\t\t\t\t\t\t\t\t  multiline={true}\n\t\t\t\t\t\t\t\t  rows={12}\n\t\t\t\t\t            />\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tonClick={this.createWOD.bind(this)}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\nexport default AddWod = withTheme(AddWod)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nimport React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tTableRow, TableHead, TableContainer,\n\tTableBody, Table\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { setBox } from \"../../utils/firestore/boxes\"\n\nlet fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddBox extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD\n    }\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n\treturn props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n      let a = document.getElementById(\"ownerBoxAddBoxTitle\")\n      let title = a.value\n      this.createBox(title)\n    }\n  }\n\n  createBox(title){\n\t  if(!title)\n\t  \treturn\n\tsetBox(title, this.props.userMD.uid)\n\t.then((res)=>{\n\t\tthis.props.onAlert({\n\t\t\ttype: \"success\",\n\t\t\tmessage: \"Added gym!\"\n\t\t})\n\t})\n\t.catch((err)=>{\n\t  this.props.onAlert({\n\t\t  type: \"error\",\n\t\t  message: err\n\t  })\n\t})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12}>\n\t\t\t<Table>\n\t\t\t\t<TableBody>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>Title</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\tid=\"ownerBoxAddBoxTitle\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\tplaceholder: \"Name of gym\"\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyUp={this.onKeyUp.bind(this) }\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell align=\"center\" colSpan={2}>\n\t\t\t\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" color=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={ () =>{\n\t\t\t\t\t\t\t\t\t\tlet el = document.getElementById(\"ownerBoxAddBoxTitle\")\n\t\t\t\t\t\t\t\t\t\tthis.createBox(el.value)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default AddBox = withTheme(AddBox);","import firebase from \"../context/firebaseContext\"\nimport \"firebase/firestore\"\n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, TableBody, Table, TableCell, TableContainer,\n          TableHead, TableRow, Tabs, Tab, AppBar }\nfrom '@material-ui/core';\nimport SwipeableViews from 'react-swipeable-views';\n\nimport { withTheme } from '@material-ui/core/styles'\nimport OwnerBoxes from \"./boxes/ownerBoxes\"\nimport AddGymClass from \"./gymClasses/addGymClass\"\nimport AddWod from \"./wods/addWod\"\nimport AddBox from \"./boxes/addBox\"\n\nlet fs = firebase.firestore()\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Grid item xs={12}\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Grid item xs={12}>\n          {children}\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nclass OwnerControls extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userBoxes: [],\n      hasBoxes: false,\n      addBoxProgress: true,\n      index: 0,\n      tabs: {\n        0: \"show\",\n        1: \"hide\",\n        2: \"hide\",\n        3: \"hide\"\n      }\n    }\n    console.log(props)\n  }\n\n  componentDidMount(){\n  \tthis.listenForBoxes()\n  }\n\n  static getDerivedStateFromProps(props, state){\n\t  return props\n  }\n\n  componentDidUpdate(){\n    if(this.state.userMD.accountType === \"owner\"){\n      this.listenForBoxes()\n    }\n\n  }\n\n  componentWillUnmount(){\n    if(this.boxListener){\n      this.boxListener()\n    }\n  }\n\n  listenForBoxes(){\n  \tif(!this.state.user || this.boxListener)\n  \t\treturn\n\n\t\tthis.boxListener = fs.collection(\"boxes\").where(\"uid\", \"==\", this.state.user.uid)\n\t\t.onSnapshot(ss => {\n\t\t\tlet data = []\n\t\t\tss.forEach(doc => {\n\t\t\t\tdata.push(doc.data())\n\t\t\t})\n      console.log(\"Setting new state for userBoxes\")\n\t\t\tthis.setState({\n\t\t\t\thasBoxes: true,\n\t\t\t\tuserBoxes: data\n\t\t\t})\n\t\t},\n\t\terr => {\n  \t\tthis.setState({\n\t\t\t\thasBoxes: false,\n\t\t\t\tuserBoxes: []\n\t\t\t})\n\t\t})\n  }\n\n\n  handleChange(ev, index){\n    console.log(index)\n    this.state.tabs[this.state.index] = \"hide\"\n    this.state.tabs[index] = \"show\"\n  \tthis.setState({index: index, tabs: this.state.tabs})\n  }\n  handleChangeIndex(index){\n  \tthis.setState({index: index})\n  }\n\n  render () {\n    console.log(this.state)\n    return (\n    \t<Grid item xs={12} id=\"ownerBox\" >\n    \t<AppBar position=\"static\">\n        <Tabs value={this.state.index} variant=\"fullWidth\" selectionFollowsFocus\n        \t\tonChange={this.handleChange.bind(this)} aria-label=\"simple tabs example\">\n          <Tab label=\"View Gyms\"/>\n          <Tab label=\"Add Workout\" />\n          <Tab label=\"Add Class\" />\n          <Tab label=\"Add Gym\" />\n        </Tabs>\n      </AppBar>\n      <Grid item xs={12} style={{minHeight: \"50vh\", maxHeight: \"150vh\", overflowY: \"scroll\"}}>\n          {this.state.hasBoxes?\n            <React.Fragment>\n              <Grid item xs={12} className={`${this.state.tabs[0]} slide-left`}>\n                <OwnerBoxes\n                  user = {this.state.user}\n                  userMD = {this.state.userMD}\n                  userBoxes = {this.state.userBoxes}\n                  hasBoxes = {this.state.hasBoxes}\n                  onAlert={this.props.onAlert}\n                />\n              </Grid>\n              <Grid item xs={12} className={`slide-left ${this.state.tabs[1]}`}>\n                  <AddWod\n                    isOwnerView={true}\n                    userMD={this.state.userMD}\n                    userBoxes = {this.state.userBoxes}\n                    hasBoxes = {this.state.hasBoxes}\n                    onAlert={this.props.onAlert}\n                  />\n              </Grid>\n              <Grid item xs={12} className={`slide-right ${this.state.tabs[2]}`}>\n                  <AddGymClass\n                    userMD = {this.state.userMD}\n                    userBoxes = {this.state.userBoxes}\n                    hasBoxes = {this.state.hasBoxes}\n                    onAlert={this.props.onAlert}\n                  />\n              </Grid>\n            </React.Fragment>\n          :\n            <React.Fragment></React.Fragment>\n          }\n\t      <Grid item xs={12} className={`slide-right ${this.state.tabs[3]}`}>\n\t\t\t\t  \t<AddBox\n\t\t\t\t\t\t\tuserMD = {this.state.userMD}\n              onAlert={this.props.onAlert}\n              />\n\t      </Grid>\n      </Grid>\n\n  \t\t</Grid>\n    )\n  }\n}\n\n\n\n\nexport default withTheme(OwnerControls);","\nimport React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { Grid, Paper, Button, Typography, IconButton,\n        TableBody, Table, TableCell, TableContainer, TableRow }\nfrom '@material-ui/core';\n\nimport Whatshot from '@material-ui/icons/Whatshot'\nimport { Alert } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport { getFollowers, setFollow, removeFollow } from \"../../utils/firestore/follows\"\n\n\nclass UserFollows extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userFollows: [],\n      userFollowing: {}\n    }\n  }\n\n  extractData(ss){\n    let follows = []\n    let following = {}\n\n    ss.forEach(doc => {\n      let data = doc.data()\n      follows.push(data)\n      following[data.boxID] = data.followID\n    })\n    return [follows, following]\n  }\n\n  componentDidMount(){\n   this.getFollowers = getFollowers(this.state.user.uid)\n    .onSnapshot(followingSS => {\n      let [follows, following] = this.extractData(followingSS)\n      followingSS.docChanges().forEach(change => {\n        switch(change.type){\n          case \"added\":\n            this.setState({\n              userFollows: follows,\n              userFollowing: following\n            })\n\n            break\n          case \"modified\":\n            let modData = change.doc.data()\n            console.log(modData)\n\n            this.setState({\n              userFollows: follows,\n              userFollowing: following\n            })\n\n\n            break\n          case \"removed\":\n            let data = change.doc.data()\n            let userFollowing = this.state.userFollowing\n            userFollowing[data.boxID] = undefined\n            this.setState({userFollowing: userFollowing})\n\n\n            break\n          default:\n            console.log(\"Uncaught change.\")\n        }\n      })\n    })\n  }\n\n  componentWillUnmount(){\n    if(this.getFollowers){\n      this.getFollowers()\n    }\n  }\n\n  handleFollow(follow){\n    console.log(follow)\n    if(follow.boxID === \"\"){\n      return\n    }\n\n    setFollow(this.state.user.uid, this.state.userMD.username, follow.boxID,\n              follow.title)\n    .then(res => {console.log(\"Succefully followed.\")})\n    .catch(err => {console.log(err)})\n  }\n\n  handleUnfollow(boxID){\n    let followID = this.state.userFollowing[boxID]\n\n    removeFollow(followID)\n    .then(res => {\n      if(res){\n        let userFollowing = this.state.userFollowing\n        userFollowing[boxID] = undefined\n        this.setState({userFollowing: userFollowing})\n        console.log(\"Succefully unfollowed.\")\n      }\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  isUserFollowing(boxID){\n    return (this.state.userFollowing[boxID])? true: false\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render(){\n    return(\n      <Grid item xs={12}>\n          <Paper elevation={6}>\n            <Grid item xs={12}>\n              <Typography>Following</Typography>\n            </Grid>\n            <Grid item xs={12}>\n                {this.state.userFollows.length > 0 ?\n                  <TableContainer>\n                    <Table>\n                      <TableBody>\n                        {this.state.userFollows.map((follow, i) => {\n                          return (\n                            <TableRow key={i}>\n                              <TableCell>\n                                {follow.boxID === \"\" ?\n                                  <Button>\n                                    {follow.title} <Typography variant=\"caption\" component=\"span\">&nbsp;(deleted)</Typography>\n                                  </Button>\n                                :\n                                  <Button\n                                    to={`box/${follow.boxID}`}\n                                    component={Link}\n                                  >\n                                    {follow.title}\n                                  </Button>\n                              }\n                              </TableCell>\n                                <TableCell align=\"right\">\n                                { this.isUserFollowing(follow.boxID) ?\n                                    <IconButton\n                                      onClick={()=>{\n                                        this.handleUnfollow(follow.boxID)}\n                                      }>\n                                      <Whatshot color=\"primary\" />\n                                    </IconButton>\n                                  :\n                                    <IconButton\n                                      onClick={()=>{\n                                        this.handleFollow(follow)\n                                      }}>\n                                      <Whatshot style={{fill: this.props.theme.palette.text.primary}}/>\n                                    </IconButton>\n                                }\n                              </TableCell>\n                            </TableRow>\n                          )\n                        })\n                        }\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n                :\n                  <React.Fragment>Not following anyone!</React.Fragment>\n                }\n          </Grid>\n\n          </Paper>\n      </Grid>\n    )\n  }\n}\n\nexport default UserFollows = withTheme(UserFollows);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n}\nfrom '@material-ui/core';\nimport { Delete, LooksOneOutlined, AddBoxOutlined } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nclass UserScoreList extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores,\n\t\t\tuid: props.uid,\n\t\t\tshowRemoveAlert: false,\n\t\t\tremoveScoreID: \"\",\n\t\t\tredirectUrl: \"\",\n\t\t\tredirect: false\n\t\t}\n\t}\n\n\thandleViewWod(wodID){\n\t\tconsole.log(`Go to wodID: ${wodID}`)\n\t}\n\n\thandleViewBox(boxID){\n\t\tconsole.log(`Go to boxID: ${boxID}`)\n\t}\n\n\tshowRemoveAlert(scoreID){\n\t\tthis.setState({showRemoveAlert: true, removeScoreID: scoreID})\n\t}\n\n\tonRemove(){\n\t\tthis.hideRemoveAlert()\n\t\tremoveScore(this.state.removeScoreID)\n\t\t.then((res) => {\n            this.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: res\n\t\t\t})\n        })\n        .catch(err => {\n            this.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err.message\n\t\t\t})\n        })\n\t}\n\n\thideRemoveAlert(){\n\t\tthis.setState({showRemoveAlert: false})\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tonView(url){\n\t\tthis.setState({redirectUrl: url, redirect: true})\n\t}\n\n  \trender(){\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t{this.state.scores.length > 0?\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t{this.state.redirect?\n\t\t\t\t\t<Redirect to={this.state.redirectUrl} />\n\t\t\t\t:\n\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t}\n\t\t\t\t<Table aria-label=\"score table\">\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Title</TableCell>\n\t\t\t\t\t\t<TableCell>Score</TableCell>\n\t\t\t\t\t\t<TableCell></TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.scores.map((score, i) => {\n\t\t\t\t\t\treturn <ScoreRow key={i}\n\t\t\t\t\t\t\tinfo={score}\n\t\t\t\t\t\t\tonViewBox={this.handleViewBox.bind(this)}\n\t\t\t\t\t\t\tonViewWod={this.handleViewWod.bind(this)}\n\t\t\t\t\t\t\tonRemove = {this.showRemoveAlert.bind(this)}\n\t\t\t\t\t\t\tonView={this.onView.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t    </TableBody>\n\t\t\t    </Table>\n\t\t\t</TableContainer>\n\t\t\t:\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Card variant=\"outlined\" color=\"primary\">\n\t\t\t\t  <CardContent>\n\t\t\t\t    <Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t   \tNo Scores!\n\t\t\t\t    </Typography>\n\t\t\t\t   </CardContent>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t\t}\n\t\t\t<ActionCancelModal\n\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\tactionText=\"Remove\"\n\t\t\t\tcancelText=\"Cancel\"\n\t\t\t\tmodalText=\"Remove score?\"\n\t\t\t\tonAction={this.onRemove.bind(this)}\n\t\t\t\tonClose={this.hideRemoveAlert.bind(this)}\n\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n\nexport default UserScoreList = withTheme(UserScoreList);\n\nfunction ScoreRow(props){\n\tlet score = props.info[\"score\"]\n\tlet title = props.info[\"title\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet uid = props.info[\"uid\"]\n\tlet scoreID = props.info[\"scoreID\"]\n\n\tlet gymClassID = props.info[\"gymClassID\"]\n\treturn(\n\t\t<TableRow onClick={(ev) => {\n\t\t\tlet tagName = ev.target.tagName\n\t\t\tif([\"path\", \"svg\"].indexOf(tagName) > -1)\n\t\t\t\treturn\n\t\t\tprops.onView(`wod/${gymClassID}/${wodID}`)\n\t\t}}>\n\t\t\t<TableCell>\n\t\t\t\t{title}\n\t\t\t</TableCell>\n\t\t\t<TableCell>\n\t\t\t\t{score}\n\t\t\t</TableCell>\n\t\t\t<TableCell align=\"right\">\n\t\t\t\t<Button size=\"small\"\n\t\t\t    \tonClick={() => props.onRemove(scoreID)}>\n\t\t\t    \t<Delete color=\"error\" />\n\t\t\t    </Button>\n\t  \t\t</TableCell>\n\t\t</TableRow>\n\t)\n}\n","import React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport UserScoreList from '../scores/userScoreList'\n\n\nclass Athlete extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      scores: props.scores\n    }\n  }\n\n\n\n\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render(){\n    return(\n\n      <Grid item xs={12}>\n        <Paper elevation={6}>\n          <Grid item xs={12}>\n            <Grid item xs={12}>\n                <Typography>Scores</Typography>\n            </Grid>\n            <Grid item xs={12}>\n              <UserScoreList\n                uid={this.state.user.uid}\n                scores={this.state.scores}\n                onAlert={this.props.onAlert}\n              />\n            </Grid>\n          </Grid>\n        </Paper>\n      </Grid>\n    )\n  }\n}\n\nexport default Athlete = withTheme(Athlete);","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport { Check, Close } from '@material-ui/icons'\nimport\n{ \tGrid, Paper, Button, Typography, IconButton, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { setClassAdmin, getUserAdminInvites, removeNotification } from \"../../utils/firestore/classAdmin\"\n\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore();\n\n\nfunction NotificationRaw(props){\n    let senderUsername = props.info.senderUsername\n    let adminInviteID = props.info.adminInviteID\n    let gymClassTitle = props.info.gymClassTitle\n    let gymClassBoxTitle = props.info.boxTitle\n\n    return(\n        <Grid container item xs={12}>\n            <Grid item xs={8}>\n                <Typography variant=\"caption\">\n                {senderUsername} wants you to be an Admin of {gymClassTitle} at {gymClassBoxTitle}\n                </Typography>\n            </Grid>\n            <Grid item xs={2}>\n                <IconButton size=\"small\" onClick={() => { props.acceptInvite(props.info) }} color=\"secondary\">\n                    <Check />\n                </IconButton>\n            </Grid>\n            <Grid item xs={2}>\n                <IconButton size=\"small\" onClick={() => { props.removeNotification(props.info) }} >\n                    <Close color=\"error\"/>\n                </IconButton>\n            </Grid>\n        </Grid>\n    )\n}\nconst Notification = withTheme(NotificationRaw)\n\n\n\nclass AdminInvites extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            notifications: []\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n    componentWillUnmount(){\n        if(this.notificationsListener)\n            this.notificationsListener()\n    }\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    getListener(){\n        if(this.state.userMD && !this.notificationsListener){\n            this.notificationsListener = getUserAdminInvites(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let notifications = []\n                if(!ss.empty){\n                    ss.docs.forEach(doc => {\n                        notifications.push(doc.data())\n                    })\n\n                    notifications.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n                    this.setState({ notifications: notifications })\n                }else{\n                    this.setState({ notifications: notifications })\n                }\n            })\n        }\n    }\n\n    onRemoveNotification(notify){\n        removeNotification(notify)\n        .then( res => { console.log(res) })\n        .catch( err => { console.log(err) })\n    }\n\n    acceptInvite(notify){\n        let gymClassID = notify.gymClassID\n        let classTitle = notify.gymClassTitle\n        let boxTitle = notify.boxTitle\n        let boxID = notify.boxID\n        let notifyID = notify.adminInviteID\n\n        let data = {\n            gymClassID: gymClassID,\n            gymClassTitle: classTitle,\n            boxTitle: boxTitle,\n            boxID: boxID,\n            uid: this.state.userMD.uid,\n            username: this.state.userMD.username,\n            date: Date.now()\n        }\n        setClassAdmin(this.state.userMD.uid, gymClassID, data)\n        .then(res => {\n            console.log(res)\n            this.onRemoveNotification(notify)\n        })\n        .catch(err => {\n            console.log(err)\n        })\n\n\n    }\n\n  render(){\n\t\treturn(\n            <Grid item xs={12}>\n            {this.state.notifications.length > 0?\n                <Paper style={{margin: \"16px 0px 0px 0px \"}}>\n                    <Grid item xs={12}>\n                        <Typography variant=\"subtitle2\">\n                            Admin Notifications\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                    {this.state.notifications.map((notify, i) => {\n                        return (\n                            <Notification key={i}\n                                info={notify}\n                                removeNotification={this.onRemoveNotification.bind(this)}\n                                acceptInvite={this.acceptInvite.bind(this)}\n                            />)\n                    })}\n                    </Grid>\n                </Paper>\n            :\n                <React.Fragment></React.Fragment>\n            }\n            </Grid>\n    )}\n}\n\nexport default AdminInvites = withTheme(AdminInvites)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, IconButton, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\nimport { Check, Close } from '@material-ui/icons'\n\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { setClassMember, getUserMemberInvites, removeNotification } from \"../../utils/firestore/classMember\"\n\nimport \"../../styles.css\"\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\n\nfunction NotificationRaw(props){\n    let senderUsername = props.info.senderUsername\n    let memberInviteID = props.info.memberInviteID\n    let gymClassTitle = props.info.gymClassTitle\n    let gymClassBoxTitle = props.info.boxTitle\n\n    return(\n        <Grid container item xs={12}>\n            <Grid item xs={8}>\n                <Typography variant=\"caption\">\n                {senderUsername} wants you to be a Member of {gymClassTitle} at {gymClassBoxTitle}\n                </Typography>\n            </Grid>\n            <Grid item xs={2}>\n               <IconButton size=\"small\" onClick={() => { props.acceptInvite(props.info) }} color=\"secondary\">\n                    <Check />\n                </IconButton>\n            </Grid>\n            <Grid item xs={2}>\n                <IconButton size=\"small\" onClick={() => { props.removeNotification(props.info) }} >\n                    <Close color=\"error\"/>\n                </IconButton>\n            </Grid>\n        </Grid>\n    )\n}\nconst Notification = withTheme(NotificationRaw)\n\nclass MemberInvites extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            notifications: []\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n    componentWillUnmount(){\n        if(this.notificationsListener)\n            this.notificationsListener()\n    }\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    getListener(){\n        if(this.state.userMD.uid && !this.notificationsListener){\n            this.notificationsListener = getUserMemberInvites(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let notifications = []\n                if(!ss.empty){\n                    ss.docs.forEach(doc => {\n                        notifications.push(doc.data())\n                    })\n\n                    notifications.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n\n                    this.setState({ notifications: notifications })\n                }else{\n                    this.setState({ notifications: notifications })\n                }\n            })\n        }\n    }\n\n    onRemoveNotification(notify){\n        removeNotification(notify)\n        .then( res => { console.log(res) })\n        .catch( err => { console.log(err) })\n    }\n\n    acceptInvite(notify){\n        let gymClassID = notify.gymClassID\n        let classTitle = notify.gymClassTitle\n        let boxTitle = notify.boxTitle\n        let boxID = notify.boxID\n        let notifyID = notify.memberInviteID\n\n        let data = {\n            gymClassID: gymClassID,\n            gymClassTitle: classTitle,\n            boxTitle: boxTitle,\n            uid: this.state.userMD.uid,\n            boxID: boxID,\n            username: this.state.userMD.username,\n            date: Date.now()\n        }\n\n        setClassMember(this.state.userMD.uid, gymClassID, data)\n        .then(res => {\n            console.log(res)\n            this.onRemoveNotification(notify)\n        })\n        .catch(err => {\n            console.log(err)\n        })\n\n\n\n    }\n\n  render(){\n\t\treturn(\n            <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n            {this.state.notifications.length > 0?\n                <Paper  elevation={6}>\n                    <Grid item xs={12}>\n                        <Typography variant=\"subtitle2\">\n                            Member Notifications\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                    {this.state.notifications.map((notify, i) => {\n                        return (\n                            <Notification key={i}\n                                info={notify}\n                                removeNotification={this.onRemoveNotification.bind(this)}\n                                acceptInvite={this.acceptInvite.bind(this)}\n                            />)\n                    })}\n                    </Grid>\n                </Paper>\n            :\n                <React.Fragment></React.Fragment>\n            }\n            </Grid>\n    )}\n}\n\nexport default MemberInvites = withTheme(MemberInvites)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\nimport { Redirect } from \"react-router\";\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { getUserClassAdmins } from \"../../utils/firestore/classAdmin\"\n\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\n\nfunction AdminRowRaw(props){\n    let gymClassTitle = props.info.gymClassTitle\n    let boxTitle = props.info.boxTitle\n    let boxID = props.info.boxID\n    let redirectUrl = `class/${boxID}/${props.info.gymClassID}`\n\n    return(\n        <TableRow onClick={ (ev) => props.onView(redirectUrl)}>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {boxTitle}\n                </Typography>\n            </TableCell>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {gymClassTitle}\n                </Typography>\n            </TableCell>\n        </TableRow>\n    )\n}\nconst AdminRow = withTheme(AdminRowRaw)\n\nclass ClassAdminView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            classes: [],\n            redirect: false, \n            redirectUrl: \"\"\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    getListener(){\n        if(this.state.userMD.uid && !this.userClassAdminsListener){\n            this.userClassAdminsListener = getUserClassAdmins(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let classes = []\n                if(!ss.empty){\n                    ss.forEach(doc => {\n                        classes.push(doc.data())\n                    })\n                    classes.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n                    this.setState({ classes: classes })\n                }else{\n                    this.setState({ classes: classes })\n                }\n            })\n        }\n    }\n\n    componentWillUnmount(){\n        if(this.userClassAdminsListener)\n        this.userClassAdminsListener()\n    }\n\n    onView(redirectUrl){\n        this.setState({redirect: true, redirectUrl: redirectUrl})\n    }\n\n  render(){\n\t\treturn( \n            <React.Fragment>\n                {this.state.redirect?\n                    <Redirect to={this.state.redirectUrl}/>\n                :\n                    <React.Fragment></React.Fragment>\n                }\n                {this.state.classes.length > 0?\n                    <Grid item xs={12} style={{margin: \"16px 0px 0px 0px\"}}>\n                        <Paper elevation={6}>\n                            <Typography variant=\"subtitle1\">Admin Roles</Typography>\n                            <Table size=\"small\">\n                                <TableHead>\n                                    <TableRow>\n                                        <TableCell align=\"center\">Gym</TableCell>\n                                        <TableCell align=\"center\">Class</TableCell>\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {this.state.classes.map((classAdmin, i) => {\n                                        return (\n                                            <AdminRow key={i}\n                                                info={classAdmin} \n                                                onView={this.onView.bind(this)}\n                                            />)\n                                    })}\n                                </TableBody>\n                            </Table>\n                        </Paper>      \n                    </Grid>    \n                :\n                    <React.Fragment></React.Fragment>\n                }\n            </React.Fragment>\n    )}\n}\n\nexport default ClassAdminView = withTheme(ClassAdminView)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { getUserClassMembers } from \"../../utils/firestore/classMember\"\n\nimport \"../../styles.css\"\nimport { Redirect } from \"react-router\";\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\n\nfunction MemberRowRaw(props){\n    let gymClassTitle = props.info.gymClassTitle\n    let boxTitle = props.info.boxTitle\n    let boxID = props.info.boxID\n    let redirectUrl = `class/${boxID}/${props.info.gymClassID}`\n\n    return(\n        <TableRow onClick={ (ev) => props.onView(redirectUrl)}>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {boxTitle}\n                </Typography>\n            </TableCell>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {gymClassTitle}\n                </Typography>\n            </TableCell>\n        </TableRow>\n    )\n}\nconst MemberRow = withTheme(MemberRowRaw)\n\nclass ClassMemberView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            classes: [],\n            redirect: false, \n            redirectUrl: \"\"\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    componentWillUnmount(){\n        if(this.userClassMembersListener)\n            this.userClassMembersListener()\n    }\n\n\n    getListener(){\n        if(this.state.userMD && !this.userClassMembersListener){\n            this.userClassMembersListener = getUserClassMembers(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let classes = []\n                if(!ss.empty){\n                    ss.forEach(doc => {\n                        classes.push(doc.data())\n                    })\n                    classes.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n                    this.setState({ classes: classes })\n                }else{\n                    this.setState({ classes: classes })\n                }\n            })\n        }\n    }\n\n    onView(redirectUrl){\n        this.setState({redirect: true, redirectUrl: redirectUrl})\n    }\n\n  render(){\n\t\treturn( \n            <React.Fragment>\n                {this.state.redirect?\n                    <Redirect key={\"redirectClassMemberView\"} to={this.state.redirectUrl}/>\n                :\n                    <React.Fragment></React.Fragment>\n                }\n                {this.state.classes.length > 0?\n                    <Grid item xs={12} style={{margin: \"16px 0px 0px 0px\"}}>\n                        <Paper elevation={6}>\n                            <Typography variant=\"subtitle1\">Membership</Typography>\n                            <Table size=\"small\">\n                                <TableHead>\n                                    <TableRow>\n                                        <TableCell align=\"center\">Gym</TableCell>\n                                        <TableCell align=\"center\">Class</TableCell>\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {this.state.classes.map((classMember, i) => {\n                                        return (\n                                            <MemberRow key={i}\n                                                info={classMember} \n                                                onView={this.onView.bind(this)}\n                                            />)\n                                    })}\n                                </TableBody>\n                            </Table>\n                        </Paper>      \n                    </Grid>    \n                :\n                    <React.Fragment></React.Fragment>\n                }\n            </React.Fragment>\n    )}\n}\n\nexport default ClassMemberView = withTheme(ClassMemberView)","import { Grid, Paper, Box } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\nexport default function mTea(){}\n\nconst Cell = withStyles(theme => ({\n    root:{\n        borderRadius: \"4px\",\n        height:\"5px\"\n    }\n}))(Paper)\n\nexport const SuperCell = withStyles(theme => ({\n    root:{\n        background: `transparent`,\n        display: \"block\",\n        borderRadius: \"4px\",\n        padding: \"0px 0px 0px 2px\",\n        margin: \"1px auto\",\n        width: \"12%\",\n        height: \"6px\"\n\n    }\n}))(Box)\n\n\nexport const CellRow = withStyles(theme => ({\n    root:{\n        display: \"flex\"\n    }\n}))(Grid)\n\nexport const RedCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, transparent, #ff0b0b, transparent)`,\n    }\n}))(Cell)\n\nexport const GreyCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, transparent, grey, transparent)`,\n    }\n}))(Cell)\n\nexport const GreenCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, transparent, #00fb42, #00fb42, ${theme.palette.primary.main})`,\n    }\n}))(Cell)\n\nexport const WhiteCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, transparent,  white, ${theme.palette.primary.main})`,\n    }\n}))(Cell)\n\nexport const BlueCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, transparent,  ${theme.palette.primary.main}, #6700c5)`,\n    }\n}))(Cell)\n\n\nexport const PurpleCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, white, #1118f3, #1118f3, white)`,\n    }\n}))(Cell)\n\n\nexport const GoldCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, white, #ffeb00, #ffeb00, white)`,\n    }\n}))(Cell)\n","import React, { Component } from 'react'\n\nimport\n{ \tGrid, Typography\n}\nfrom '@material-ui/core';\n\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport {CellRow, SuperCell, RedCell, GreenCell, WhiteCell, GreyCell, BlueCell, PurpleCell, GoldCell} from \"./cells\"\nimport \"../../styles.css\"\n\nimport { DateTime } from 'luxon'\n\n\nfunction cellData(color=\"grey\", valid=false, isToday=false){\n    return {\n        color: color,\n        valid: valid,\n        isToday: isToday,\n        count: 1\n    }\n}\n\n\nclass CalendarScoreView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n        let today = DateTime.now()\n        this.calendar = this.createCalendar(today)\n        console.log(today)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n            scores: props.scores,\n            today: today\n\t\t}\n\t}\n\n    componentDidUpdate(){\n\n    }\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    getFirstOfMonth(today){\n        return DateTime.local(today.year, today.month, 1, 0, 0, 0, 0)\n    }\n\n    getEndOfMonth(today){\n        return DateTime.local(today.year, today.month, today.daysInMonth, 0, 0, 0, 0)\n    }\n\n\n    getFirstAndLast(today){\n        let first = this.getFirstOfMonth(today)\n        let last = this.getEndOfMonth(today)\n        return [first, last]\n    }\n\n\n    // Creates base calendar, with invalid days, passed days, and future days\n    createCalendar(today){\n\n        // First and last day of the month.\n        let [first, last] = this.getFirstAndLast(today)\n\n        // First week may contain invalid days from previous month\n        // Middle weeks that have valid days\n        // Last week may contain invalid days from next month\n        let firstWeek = []\n        let fullWeek  = []\n        let fullWeek1 = []\n        let fullWeek2 = []\n        let lastWeek  = []\n\n        for(let i=0; i<7; i++){\n            fullWeek.push(cellData(\"white\", true, false))\n        }\n\n        fullWeek1 = [...fullWeek]\n        fullWeek2 = [...fullWeek]\n\n        for(let i=0; i<first.weekday; i++){\n            firstWeek.push(cellData())\n        }\n\n        for(let i=first.weekday; i<7; i++){\n            firstWeek[i] = cellData(\"white\", true, false)\n        }\n\n        for(let i=0; i<=last.weekday; i++){\n            lastWeek.push(cellData(\"white\", true, false))\n        }\n        for(let i=last.weekday + 1; i<7; i++){\n            lastWeek[i] = cellData()\n        }\n\n        let calendar = [[...firstWeek], [...fullWeek], [...fullWeek1], [...fullWeek2], [...lastWeek]]\n\n        // Fill in passed days w/ red\n        // Start and end days' offset corresponding to 2d array\n        let startOffset = this.getOffsetDayOfMonthFromDate(first)\n        let endOffset = this.getOffsetDayOfMonthFromDate(today)\n\n        // convert to 1d array start and end position\n        let start = (startOffset[0] * 7) + startOffset[1]\n\n        let end = (endOffset[0] * 7) + endOffset[1]\n\n        for(let i=start; i<end; i++){\n            // convert back to 2d array offsets\n            let r = parseInt(i/7)\n            let c = i%7\n\n            calendar[r][c] = cellData(\"red\", true, false)\n        }\n\n        // Mark cell as today\n        let row = parseInt(end/7)\n        let col = end%7\n\n\n        calendar[row][col] = cellData(\"white\", true, true)\n\n        // console.log(\"Base calendar\")\n        // console.log(startOffset, endOffset)\n        // console.log(start, end)\n        // console.log(\"tdoay\", row, col)\n        // console.log(calendar)\n\n        return calendar\n    }\n\n    // Returns [row, col] of calendar from a timestamp\n    getOffsetDayOfMonthFromDate(date){\n\n        let firstDayOfMonth = this.getFirstOfMonth(date)\n\n        let offset = firstDayOfMonth.weekday + date.day - 1\n        let offsetWeek = parseInt(offset / 7)\n        let offsetDay = offset %  7\n        return [offsetWeek, offsetDay]\n    }\n\n    // Fill calendar with user's scores.\n    fillCalendar(){\n        let calendar = []\n        for(let week of this.calendar){\n            calendar.push([...week])\n        }\n\n\n        for(let score of this.state.scores){\n            let scoreDate = DateTime.fromMillis(score.date)\n            let [row, col] = this.getOffsetDayOfMonthFromDate(scoreDate)\n            let isToday = (scoreDate.day === this.state.today.day\n                && scoreDate.month === this.state.today.month\n                && scoreDate.year === this.state.today.year)\n\n            if(calendar[row][col].color !== \"green\"){\n                calendar[row][col] = cellData(\"green\", true, isToday)\n            }else{\n                calendar[row][col].count += 1\n            }\n        }\n        return calendar\n    }\n\n\n  \trender(){\n\t\treturn(\n\t\t\t<Grid item container xs={12}>\n                <Grid item xs={12}>\n                    <Typography gutterBottom variant=\"subtitle2\">\n                        {this.state.today.monthLong}\n                    </Typography>\n                    </Grid>\n                <Grid item xs={3}></Grid>\n                <Grid item container xs={6}>\n\n                    {\n                    this.fillCalendar().map((week, i) => {\n\n\n                        return <CellRow className=\"appearSlow\"\n                                item xs={12}\n                                key={i}>\n\n                                {week.map((day, j) => {\n                                    let border = day.isToday? \"whiteBorder\": \"\"\n                                    if(day.color === 'green'){\n                                        let Cell = null\n                                        if(day.count == 1)\n                                            Cell = BlueCell\n                                        if(day.count == 2)\n                                            Cell = PurpleCell\n                                        if(day.count == 3)\n                                            Cell = GreenCell\n                                        if(day.count > 3)\n                                            Cell = GoldCell\n                                        return <SuperCell key={j} className=\"appearFast\">\n                                            <Cell className={border}/>\n                                        </SuperCell>\n                                    }else if(day.color === 'white'){\n                                        return <SuperCell key={j}>\n                                            <WhiteCell  className={border}/>\n                                        </SuperCell>\n                                    }else if(day.color === 'red'){\n                                        return <SuperCell key={j}>\n                                            <RedCell className={border}/>\n                                        </SuperCell>\n                                    }\n                                    return <SuperCell key={j}>\n                                        <GreyCell className={border} />\n                                    </SuperCell>\n                                })}\n                        </CellRow>\n                    })\n                    }\n                </Grid>\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\n\nexport default CalendarScoreView = withTheme(CalendarScoreView);\n\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/firestore\"\n\nimport React, { Component } from 'react'\n\nimport { Grid, Paper, Button, Typography, Collapse,\n        Accordion, AccordionSummary, AccordionDetails }\nfrom '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport OwnerControls from \"../comps/ownerControls\"\nimport UserFollows from '../comps/followers/userFollows'\nimport Athlete from '../comps/profile/athlete'\nimport AdminInvites from \"../comps/profile/adminInvites\"\nimport MemberInvites from \"../comps/profile/memberInvites\"\nimport ClassAdminView from \"../comps/profile/classAdminView\"\nimport ClassMemberView from \"../comps/profile/classMemberView\"\nimport CalendarScoreView from \"../comps/calendar/calendarView\"\nimport makeCancelable from \"../utils/promises\"\n\nlet fs = firebase.firestore()\n\nclass PageContentRaw extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      emailAlertOpen: false,\n      scores: []\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n\n    return props\n  }\n\n  componentWillUnmount(){\n    if(this.cancelablePromise){\n      console.log(\"email cancelled\")\n      this.cancelablePromise.cancel()\n    }\n    if(this.listener)\n      this.listener()\n  }\n\n  componentDidMount(){\n    this.listenForUserScores()\n  }\n\n  listenForUserScores(){\n    if(!this.listener){\n      this.listener = fs.collection(\"scores\").where(\"uid\", \"==\", this.state.user.uid)\n      .onSnapshot(ss => {\n        if(!ss.empty){\n          let scores = []\n          ss.forEach(doc => {\n            scores.push(doc.data())\n          })\n          scores.sort((a, b) => {\n           return (a.date > b.date)? 1 : -1\n          })\n          this.setState({scores: scores })\n        }else{\n          this.setState({scores: [] })\n        }\n      },\n      err => {console.log(err)})\n    }\n  }\n\n  sendVerificationEmail(){\n    let emailVerifyPromise = new Promise(\n      (res, rej) => {\n      this.state.user.sendEmailVerification()\n      .then(() => this.setState({ emailAlertOpen: true }))\n      .catch( err => { rej(err) })\n    })\n\n    this.cancelablePromise = makeCancelable(emailVerifyPromise)\n  }\n\n  render(){\n    return (\n      <Grid item container align=\"center\">\n        <Grid item xs={12}>\n          <Collapse in={this.state.emailAlertOpen}>\n            <Alert onClose={() => {this.setState({emailAlertOpen: false})}}>\n              Email sent!\n            </Alert>\n          </Collapse>\n        </Grid>\n        <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n          <Paper elevation={4}>\n            <Typography gutterBottom variant=\"h5\" >\n              { this.state.userMD.username }\n            </Typography>\n          </Paper>\n        </Grid>\n        <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n          <Paper elevation={4}>\n            <CalendarScoreView\n              userMD={this.state.userMD}\n              scores={this.state.scores}\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n          <Paper elevation={4}>\n\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid item container xs={12}>\n              {!this.state.user.emailVerified ?\n                <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n                  <Paper elevation={4}>\n                    <Typography >\n                      Verification\n                    </Typography>\n\n                    <Button color=\"secondary\" style={{margin: \"0px 0px 4px 0px \"}}\n                      onClick={this.sendVerificationEmail.bind(this)} >\n                      <Typography  variant=\"subtitle2\">\n                        Send Verification Email\n                      </Typography>\n                    </Button>\n                  </Paper>\n                </Grid>\n              :\n                <React.Fragment></React.Fragment>\n              }\n\n              <AdminInvites userMD={this.state.userMD}/>\n              <MemberInvites userMD={this.state.userMD}/>\n              <ClassAdminView userMD={this.state.userMD}/>\n              <ClassMemberView userMD={this.state.userMD}/>\n\n             <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n               <Paper elevation={4}>\n                <UserFollows\n                  user={this.state.user}\n                  userMD={this.state.userMD}\n                 />\n               </Paper>\n              </Grid>\n        </Grid>\n\n        <Paper elevation={2} style={{margin: \"16px 0px 0px 0px\"}}>\n          {this.state.userMD.accountType === \"owner\" ?\n            <OwnerControls\n              user={this.state.user}\n              userMD={this.state.userMD}\n              onAlert={this.props.onAlert}\n              />\n          :\n            <Athlete\n              user={this.state.user}\n              userMD={this.state.userMD}\n              onAlert={this.props.onAlert}\n              scores={this.state.scores}\n            />\n          }\n          </Paper>\n        </Grid>\n    </Grid>\n    )\n  }\n}\n\nconst PageContent = withTheme(PageContentRaw)\n\nclass ProfilePage extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD\n    }\n  }\n\n  /*\n    login.js has the form and does the login, calls this with the user obj\n  */\n  handleLogIn(user){\n      this.setState({user: user} )\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} id=\"profilepage\">\n           <PageContent\n                user= {this.state.user}\n                userMD={this.state.userMD}\n                onAlert={this.props.onAlert}\n            />\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default ProfilePage = withTheme(ProfilePage)\n","\nexport default function makeCancelable(promise){\n    let hasCanceled_ = false;\n  \n    const wrappedPromise = new Promise((resolve, reject) => {\n      promise.then(\n        val => hasCanceled_ ? reject({isCanceled: true}) : resolve(val),\n        error => hasCanceled_ ? reject({isCanceled: true}) : reject(error)\n      );\n    });\n  \n    return {\n      promise: wrappedPromise,\n      cancel() {\n        hasCanceled_ = true;\n      },\n    };\n  };","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\"\n\nimport { Link } from 'react-router-dom';\n\n\nimport React, { Component, createRef } from \"react\";\n\nimport {\n\t AppBar, Toolbar, IconButton, Button, Typography, Paper, Collapse,\n\t Popper, MenuList, MenuItem, ClickAwayListener, Grow, Fade\n\n} \nfrom '@material-ui/core';\nimport { Menu } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab'\nimport { withTheme, withStyles, makeStyles } from '@material-ui/core/styles';\n\nconst StyledMenuItem = withStyles((theme) => ({\n\troot: {\n\t  '&:hover': {\n\t\tbackgroundColor: theme.palette.primary.main,\n\t\t'& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n\t\t  color: theme.palette.common.white,\n\t\t},\n\t  },\n\t},\n  }))(MenuItem);\n\nconst StyledTypography = withStyles((theme) => ({\n\troot: {\n\t\tcolor: theme.palette.text.primary\t\n\t},\n}))(Typography);\n\nconst StyledPaper = withStyles((theme) => ({\n\troot: {\n\t\t'border': '1px solid',\n\t  'borderColor': theme.palette.text.primary,\n\t},\n}))(Paper);\n\n\nconst styles = theme => ({\n  popper: {\n\t  zIndex: 100,\n  }\n});\n\n\nfunction UserAlertRaw(props){\n\treturn(\n\t\t<Alert severity={props.alertInfo.type} onClose={props.onCloseAlert}>\n\t\t\t{props.alertInfo.message}\n\t\t</Alert>\n\t)\n}\n\nconst UserAlert = withTheme(UserAlertRaw)\n\nclass Header extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.menuRef = createRef()\n\t\tthis.state = {\n\t\t\tuser: props.user,\n\t\t\tuserMD: props.userMD,\n\t\t\topen: false,\n\t\t\talertOpen: props.alertOpen,\n\t\t\talertInfo: props.alertInfo\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n  \t}\n\t  \n\thandleToggle(){\n\t\tthis.setState({open: !this.state.open})\n\t};\n\t\n\thandleClose(ev){\n\t\tconsole.log(\"Should close\")\n\t\tthis.setState({open: false})\n\t}\n\n\thandleListKeyDown(ev) {\n\t\tif (ev.key === 'Tab') {\n\t\t\tev.preventDefault();\n\t\t\tthis.setState({open: false})\n\t\t}\n\t}\n\n\trender(){\n\t\tconst { classes } = this.props\n\t\treturn(\n\t\t\t<AppBar position=\"sticky\" ref={this.menuRef} \n\t\t\t\t\tstyle={{background:this.props.theme.palette.background.toolbar}}>\n\t\t\t<Toolbar disableGutters={false}>\n\t\t\t    <StyledTypography  variant=\"h3\" >\n\t\t            WodTrackrr\n\t\t          </StyledTypography>\n\t\t\t\t  \n\t\t          <section style={{marginLeft: \"auto\", marginRight: -12}}>\n\t\t\t\t\t<IconButton color=\"primary\" onClick={this.handleToggle.bind(this)}>\n\t\t\t\t\t\t<Menu   />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Popper open={this.state.open} anchorEl={this.menuRef.current}\n\t\t\t\t\t\t\t  placement=\"bottom-end\" transition disablePortal\n\t\t\t\t\t\t\t className={classes.popper}>\n\t\t\t\t\t\t{({ TransitionProps, placement }) => (\n\t\t\t\t\t\t\t<Fade\n\t\t\t\t\t\t\t{...TransitionProps}\n\t\t\t\t\t\t\tstyle={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledPaper>\n\t\t\t\t\t\t\t\t<ClickAwayListener onClickAway={this.handleClose.bind(this)}>\n\t\t\t\t\t\t\t\t<MenuList  id=\"menu-list-grow\" onKeyDown={this.handleListKeyDown.bind(this)}>\n\t\t\t\t\t\t\t\t\t<StyledMenuItem onClick={this.props.changeTheme}>\n\t\t\t\t\t\t\t\t\t\tChange Theme\n\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\n\t\t\t\t\t\t\t\t\t<StyledMenuItem onClick={this.handleClose.bind(this)} component={Link} to=\"/settings/\">\n\t\t\t\t\t\t\t\t\t\tSettings \n\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t{this.state.user?\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<StyledMenuItem onClick={(ev) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.handleClose.bind(this)(ev)\n\t\t\t\t\t\t\t\t\t\t\tthis.props.handleLogout()\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<StyledMenuItem component={Link} to=\"/login\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ this.handleClose.bind(this) }>\n\t\t\t\t\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</MenuList>\n\t\t\t\t\t\t\t\t</ClickAwayListener>\n\t\t\t\t\t\t\t</StyledPaper>\n\t\t\t\t\t\t\t</Fade>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Popper>\n\t\t          \t</section>\n\t\t        </Toolbar>\n\t\t\t\t<Collapse in={this.props.alertOpen}>\n\t\t\t\t\t{this.state.alertInfo ?\n\t\t\t\t\t\t<UserAlert  alertInfo={this.state.alertInfo} \n\t\t\t\t\t\t\tonCloseAlert={this.props.onCloseAlert}\n\t\t\t\t\t\t/>\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\n\t\t\t\t</Collapse>\n\t\t\t</AppBar>\n\t\t)\n\t}\n}\n\n\n\nexport default withStyles(styles, { withTheme: true })(Header);\n","import firebase from \"../../context/firebaseContext\"\n// import * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, Paper } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\n\nimport \"../../styles.css\"\n\n\nexport default class Login extends Component {\n\n  handleSubmit(ev){\n    let email = document.getElementById('email')\n\n    let pass1 = document.getElementById('password')\n    let pass2 = document.getElementById('passwordConfirm')\n\n    console.log(email.value, pass1)\n\n    firebase.auth().signInWithEmailAndPassword(email.value, pass1.value)\n    .then(res=>{\n      this.props.onLogin(res.user)\n    })\n    .catch((error) => {\n\n      this.props.onAlert({\n        type: \"warning\",\n        message: error.message\n      })\n    });\n  }\n\n  render () {\n    return (\n      <Grid container id=\"login\" align=\"center\" justify=\"center\">\n        <br />\n        <Grid item xs={12} >\n          <Paper elevation={2}>\n            <Typography variant=\"h4\">\n              Login\n            </Typography>\n\n            <br />\n\n            <TextField\n            id=\"email\"\n            style={{ margin: 8 }}\n            placeholder=\"Email\"\n            margin=\"normal\"\n            InputLabelProps={{\n            shrink: true,\n            }}\n            /><br /><br />\n            <TextField\n            id=\"password\"\n            type=\"password\"\n            style={{ margin: 8 }}\n            placeholder=\"Password\"\n            margin=\"normal\"\n            InputLabelProps={{\n            shrink: true,\n            }}\n            />\n            <br/><br/>\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} >\n          <Paper elevation={2}>\n            <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n              Login\n            </Button>\n            <Link to=\"/register\" className=\"no-line\" style={{'paddingLeft': '10px'}}>\n              <Button variant=\"outlined\" color=\"secondary\" >\n                Register\n              </Button>\n            </Link>\n          </Paper>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\n\n\n","let apptheme = {\n   \"overrides\": {\n      \"MuiContainer\": {\n         \"root\":{\n            \"background-color\": \"#212121\"\n         }\n      },\n      \"MuiSelect\": {\n         \"icon\": {\n            \"color\": \"white\"\n         }\n      },\n      \"MuiInputBase\":{\n         \"root\": {\n\n         }\n      },\n      \"PrivateTabIndicator\":{\n         \"colorSecondary\":\n          {\n            \"backgroundColor\": \"white\"\n         }\n      },\n      \"MuiInput\":{\n         \"underline\":{\n            '&:before': {\n               borderBottomColor: \"white\"\n           }\n         }\n      },\n      \"MuiBottomNavigation\": {\n         \"root\": {\n            \"zIndex\": 100\n         }\n      }\n   },\n   \"palette\":{\n      \"common\":{\n         \"black\":\"#000\",\n         \"white\":\"#fff\"\n      },\n      \"appBackground\":{\n         \"main\": \"black\"\n        },\n      \"background\":{\n         \"paper\":\"#212121\",\n         \"toolbar\": \"#333333\",\n         \"tableHeader\": \"#2e3134\",\n         \"default\":\"rgba(48, 48, 48, 1)\"\n      },\n      \"primary\":{\n         \"main1\":\"#0072fff7\",\n         \"main\":\"#4ec5ff\",\n         \"mainGrad\": 'linear-gradient(90deg,#0890fd,#01d3fe)',\n         \"contrastText\":\"rgba(255, 255, 255, 1)\"\n      },\n      \"secondary\":{\n         \"light\":\"#14eac3\",\n         \"main\":\"#14eac3\",\n         \"dark\":\"#14eac3\",\n         \"contrastText\":\"#fff\"\n      },\n      \"error\":{\n         \"light\":\"#ea4331\",\n         \"main\":\"#c43627\",\n         \"dark\":\"#2d0d0b\",\n         \"contrastText\":\"rgba(255, 255, 255, 1)\"\n      },\n      \"text\":{\n         \"primary\":\"#ffffff\",\n         \"secondary\":\"#e0dfdf\",\n         \"disabled\":\"#bdbdbd\",\n         \"hint\":\"#afafaf\"\n      }\n   }\n};\n\nexport default apptheme = apptheme;","let applighttheme = {\n   \"overrides\": {\n      \"MuiContainer\": {\n         \"root\":{\n            \"background-color\": \"#ffffff\"\n         }\n      },\n      \"MuiSelect\": {\n         \"icon\": {\n            \"color\": \"black\"\n         }\n      },\n      \"PrivateTabIndicator\":{\n         \"colorSecondary\":\n          {\n            \"backgroundColor\": \"white\"\n         }\n      },\n      \"MuiBottomNavigation\": {\n         \"root\": {\n            \"zIndex\": 100\n         }\n      }\n   },\n    \"palette\":{\n       \"common\":{\n          \"black\":\"#000\",\n          \"white\":\"#fff\"\n       },\n       \"background\":{\n          \"paper\":\"#ffffff\",\n          \"toolbar\": \"#fffffff5\",\n          \"tableHeader\": \"#f1f1f1\",\n          \"default\":\"#f1f1f1\"\n       },\n       \"primary\":{\n          \"main1\":\"#0072fff7\",\n          \"main\":\"#4ec5ff\",\n          \"mainGrad\": 'linear-gradient(90deg,#0890fd,#01d3fe)',\n          \"contrastText\":\"rgba(255, 255, 255, 1)\"\n       },\n       \"secondary\":{\n          \"light\":\"#14eac3\",\n          \"main\":\"#14eac3\",\n          \"dark\":\"#14eac3\",\n          \"contrastText\":\"#fff\"\n       },\n       \"error\":{\n          \"light\":\"#ea4331\",\n          \"main\":\"#c43627\",\n          \"dark\":\"#2d0d0b\",\n          \"contrastText\":\"rgba(255, 255, 255, 1)\"\n       },\n       \"follow\":{\n          \"main\": \"#09e073\"\n       },\n       \"unfollow\": {\n          \"main\": \"#e07609\"\n       },\n       \"text\":{\n          \"primary\":\"#000000\",\n          \"secondary\":\"#e0dfdf\",\n          \"disabled\":\"#bdbdbd\",\n          \"hint\":\"#afafaf\"\n       }\n    }\n };\n\n export default applighttheme = applighttheme;","import firebase, { FirebaseAuthContext } from \"./context/firebaseContext\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\n\nimport React from \"react\";\nimport { HashRouter, Switch, Route, Link, Redirect, Router, BrowserRouter } from 'react-router-dom';\n\nimport { Paper, Button, BottomNavigation, BottomNavigationAction,\n        Grid, Container, Box }\nfrom '@material-ui/core';\nimport { createMuiTheme, withStyles, ThemeProvider, responsiveFontSizes } from '@material-ui/core/styles';\n\nimport HomeIcon from '@material-ui/icons/Home';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\nimport PanoramaIcon from '@material-ui/icons/Panorama';\n\nimport \"./styles.css\";\n\n\nimport BoxSearchPage from \"./pages/boxSearchPage\"\nimport Settings from \"./pages/settings\"\nimport BoxView from \"./comps/boxes/boxView\"\nimport RegisterUser from \"./comps/profile/registerUser\"\nimport GymClassView from \"./comps/gymClasses/gymClassView\"\nimport ScoreView from \"./comps/scores/scoreView\"\nimport Profile from \"./pages/profile\"\nimport Header from \"./comps/header\"\nimport Login from \"./comps/profile/login\"\n\n\nimport apptheme from \"./css/apptheme\"\nimport lightapptheme from \"./css/applighttheme\"\nimport \"./styles.css\"\n\nlet darkTheme = createMuiTheme(apptheme)\ndarkTheme = responsiveFontSizes(darkTheme)\n\n\nlet lightTheme = createMuiTheme(lightapptheme)\nlightTheme = responsiveFontSizes(lightTheme)\n\nconst BackgroundGrid = withStyles(theme =>({\n  root:{\n    backgroundColor: theme.palette.background.paper\n  }\n}))(Grid)\n\n\nexport default class App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state={\n      btmnav: 0,\n      user: firebase.auth().currentUser,\n      userMD: false,\n      theme: darkTheme,\n      darkTheme: true,\n      alertOpen: false,\n      alertInfo: false\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state\n  }\n\n\n  componentDidMount(){\n    this.firebaseAuthListener = firebase.auth()\n    .onAuthStateChanged(user => {\n      let fs = firebase.firestore()\n      if(user){\n        let doc = fs.collection(\"users\").doc(user.uid)\n        this.userMDListener = doc.onSnapshot(metadata => {\n          if(metadata.exists){\n            this.setState({ user: user, userMD: metadata.data() })\n          }else{\n            this.setState({ user: user, userMD: false })\n          }\n        }, err => {console.log(err)})\n\n      }else{\n        this.setState({ user: null, userMD: false })\n      }\n    })\n\n  }\n\n  handleLogin(user){\n    this.setState({user: user})\n  }\n\n  handleLogout(){\n    firebase.auth().signOut().then(() => {\n      this.setState({user: null})\n    }, (error) => {\n      console.error('Sign Out Error', error )\n    });\n  }\n\n  componentWillUnmount(){\n    if(this.firebaseAuthListener !== undefined)\n      this.firebaseAuthListener && this.firebaseAuthListener()\n    if(this.userMDListener !== null)\n      this.userMDListener && this.userMDListener()\n  }\n\n  changeTheme(){\n    let newTheme  = this.state.darkTheme? lightTheme: darkTheme\n    this.setState({theme: newTheme, darkTheme: !this.state.darkTheme})\n  }\n\n  onAlert(alert){\n    console.log(alert)\n    this.setState({alertInfo: alert, alertOpen: true})\n  }\n\n  onCloseAlert(){\n    this.setState({alertOpen: false, alertInfo: false})\n  }\n\n\n\n  render(){\n    return(\n    <FirebaseAuthContext.Provider>\n    <BrowserRouter >\n    <ThemeProvider theme={this.state.theme}>\n    <Header className=\"header\" user={this.state.user}\n      userMD={this.state.userMD}\n      changeTheme={this.changeTheme.bind(this)}\n      handleLogout={this.handleLogout.bind(this)}\n      alertOpen={this.state.alertOpen}\n      alertInfo={this.state.alertInfo}\n      onCloseAlert={this.onCloseAlert.bind(this)}\n      />\n\n      <BackgroundGrid container id=\"testCont\">\n        <Grid item container xs={12}\n          style={{\"minHeight\": \"100vh\", paddingTop: \"8px\"}}>\n          <Switch>\n            <Route exact path=\"/boxSearch\">\n              <BoxSearchPage user={this.state.user}\n                userMD={this.state.userMD}\n                onAlert={this.onAlert.bind(this)}\n                />\n            </Route>\n            <Route exact path=\"/profile\">\n              {this.state.user?\n                <Profile user={this.state.user}\n                  userMD={this.state.userMD}\n                  onAlert={this.onAlert.bind(this)}\n                  />\n              :\n                <Redirect to=\"/login\" />\n              }\n            </Route>\n\n            <Route path=\"/box/:boxID\"\n              render= { props =>(\n                <BoxView\n                  userMD={this.state.userMD}\n                  boxID={props.match.params.boxID}\n                  onAlert={this.onAlert.bind(this)}/>\n              )}\n            />\n            <Route path=\"/class/:boxID/:gymClassID\"\n              render= { props =>(\n                <GymClassView\n                  userMD={this.state.userMD}\n                  gymClassID={props.match.params.gymClassID}\n                  boxID={props.match.params.boxID}\n                  onAlert={this.onAlert.bind(this)}/>\n              )}\n            />\n           <Route path=\"/wod/:gymClassID/:wodID\"\n            render= { props =>(\n                <ScoreView userMD={this.state.userMD}\n                  gymClassID={props.match.params.gymClassID}\n                  wodID={props.match.params.wodID}\n                  isReadOnly={true}\n                  onAlert={this.onAlert.bind(this)}/>\n              )\n            }\n          />\n          <Route exact path=\"/register\"\n            render= { props =>(\n              this.state.user?\n                <Redirect to=\"/profile\" />\n              :\n                <RegisterUser onAlert={this.onAlert.bind(this)}/>\n              )\n            }\n          />\n\n          <Route exact path=\"/settings\"\n            render= { props =>(\n                <Settings\n                  user={this.state.user}\n                  userMD={this.state.userMD}\n                  onAlert={this.onAlert.bind(this)}\n                />\n            )}\n          />\n\n          <Route exact path=\"/login\">\n            {!this.state.user?\n              <Login\n                onLogin={this.handleLogin.bind(this)}\n                onAlert={this.onAlert.bind(this)}/>\n            :\n              <Redirect to=\"/boxSearch\" />\n            }\n            </Route>\n          </Switch>\n          <div style={{\"margin\": \"5vh\"}}></div>\n        </Grid>\n      </BackgroundGrid>\n\n      <BottomNavigation className=\"footer\"\n        value = {this.state.btmnav}\n        onChange = {(event, newValue) => {\n            this.setState({btmnav: newValue})\n          }}\n          style={{background: this.state.theme.palette.primary.mainGrad}}\n        showLabels\n      >\n        <BottomNavigationAction label=\"Search\" component={Link} to=\"/boxSearch\" icon={<PersonIcon />}  />\n        <BottomNavigationAction label=\"Profile\" component={Link} to=\"/profile\" icon={<PersonIcon />}  />\n      </BottomNavigation>\n      </ThemeProvider>\n      </BrowserRouter>\n      </FirebaseAuthContext.Provider>\n\n    );\n  }\n}\nApp.contextType = FirebaseAuthContext;\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app\";\n\n\n\n\n\nReactDOM.render( <App />, document.getElementById('root'));"],"sourceRoot":""}