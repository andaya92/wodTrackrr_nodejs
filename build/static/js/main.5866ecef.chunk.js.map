{"version":3,"sources":["context/firebaseContext.js","utils/formatting.js","comps/lineChart.js","comps/barChart.js","comps/scores/scoreDataView.js","comps/scores/scoreList.js","utils/firestore/scores.js","comps/scores/addScore.js","comps/actionCancelModal.js","comps/scores/scoreView.js","utils/firestore/gymClass.js","comps/gymClasses/gymClassList.js","utils/firestore/wods.js","comps/searchSortTable.js","comps/boxes/boxView.js","utils/firestore/follows.js","comps/boxes/boxSearch.js","pages/boxSearchPage.js","comps/settings/resetPassword.js","comps/profile/deleteAccount.js","utils/firestore/users.js","comps/profile/usernamePanel.js","pages/settings.js","comps/profile/registerUser.js","comps/wods/editWod.js","utils/firestore/classAdmin.js","comps/gymClasses/inviteView.js","comps/gymClasses/inviteAdminView.js","utils/firestore/classMember.js","comps/gymClasses/inviteMemberView.js","comps/admins/classAdminList.js","comps/members/classMemberList.js","comps/gymClasses/gymClassView.js","utils/firestore/boxes.js","comps/boxes/ownerBoxes.js","comps/gymClasses/addGymClass.js","comps/wods/addWod.js","comps/boxes/addBox.js","comps/ownerControls.js","comps/followers/userFollows.js","comps/scores/userScoreList.js","comps/profile/athlete.js","comps/profile/adminInvites.js","comps/profile/memberInvites.js","comps/profile/classAdminView.js","comps/profile/classMemberView.js","comps/scores/calendarView.js","pages/profile.js","utils/promises.js","comps/header.js","comps/profile/login.js","history.js","css/apptheme.js","css/applighttheme.js","app.js","index.js"],"names":["firebase","FirebaseAuthContext","React","createContext","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","cvtTimetoInt","x","split","mins","seconds","parseInt","cvtIntToTime","Math","floor","secs","database","LineChart","props","state","scoreType","data","values","stats","this","createChart","ctx","document","getElementById","grd","getContext","createLinearGradient","addColorStop","lineChart","destroy","Chart","type","label","datasets","barPercentage","barThickness","maxBarThickness","minBarLength","backgroundColor","options","scales","yAxes","ticks","callback","index","labels","tooltips","callbacks","title","tooltipItem","datasetIndex","yLabel","maintainAspectRatio","plugins","beforeInit","chart","console","log","Grid","item","xs","style","width","padding","id","Component","withTheme","BarChart","binData","barChart","update","parseFloat","_mean","sd","bins","i","binA","format","binB","unshift","push","standardDeviation","mean","createLabels","binnedData","diff","numSDAway","abs","getDescStats","vals","min","max","median","ScoreDataView","scores","graphData","rawScores","container","align","spacing","Paper","elevation","Typography","map","score","length","transformData","ScoreList","uid","Fragment","TableContainer","component","Table","aria-label","TableHead","TableRow","TableCell","TableBody","isCurUserScore","ScoreRow","key","info","onRemove","isUserScore","Card","variant","color","CardContent","gutterBottom","username","scoreID","selected","Button","size","onClick","fs","firestore","removeScore","Promise","res","rej","collection","doc","delete","then","catch","err","BorderlessTableCell","withStyles","root","borderBottom","AddScore","userMD","wodMD","obj","Array","from","Object","entries","entry","Map","s","search","userScore","value","isNumInSane","alert","isNaN","wodID","gymClassID","boxID","date","Date","now","where","get","ss","empty","set","forEach","setScore","margin","Accordion","AccordionSummary","background","theme","palette","primary","mainGrad","expandIcon","aria-controls","AccordionDetails","replace","toUpperCase","TextField","pattern","inputProps","placeholder","shrink","colSpan","handleAddScore","bind","ActionCancelModal","open","Modal","onClose","aria-labelledby","aria-describedby","position","top","left","transform","height","display","flexDirection","justifyContent","marginTop","modalText","cancelText","onAction","actionText","RenderWodTextRaw","lines","wodText","line","ScoreView","curRemoveScoreID","showRemoveAlert","wodListener","onSnapshot","setState","scoreListener","isTime","sort","a","b","undefined","onAlert","message","keys","handleRemoveScore","handleModalClose","getGymClasses","removeGymClass","promises","name","getSnapshot","collectionName","fieldName","fieldID","batch","cnt","ref","commit","all","GymClass","ev","onRowClick","isOwner","EmptyClass","GymClassList","user","redirect","redirectTo","filteredGymClasses","gymClasses","removeClassID","removeClassTitle","openModal","gymClassListener","classes","keyCode","which","val","target","filter","gymClass","toLowerCase","includes","tagName","indexOf","closeModal","to","fullWidth","onKeyUp","onChange","InputProps","startAdornment","InputAdornment","stickyHeader","handleRemoveGymClass","removeWod","TC","Wod","onViewScores","toLocaleDateString","showOwnerBtns","handleEdit","handleRemove","EmptyWod","StyledTablePagination","overflow","actions","TablePagination","SearchSortTable","headers","rows","filteredRows","orderTableBy","orderTable","pageNum","rowsPerPage","pageStart","pageEnd","redirectUrl","wod","orderBy","order","descendingComparator","comparator","stabilizedThis","el","isAsc","newPage","start","end","url","header","sortable","TableSortLabel","active","direction","createSortHandler","stableSort","getComparator","slice","row","handleView","rowsPerPageOptions","count","page","onChangePage","handleChangePage","onChangeRowsPerPage","handleChangeRowsPerPage","BoxView","boxMD","boxListener","exists","getBoxListener","checkListeners","removeFollow","followID","setFollow","isFollowing","Box","isUserFollowing","IconButton","handleUnfollow","handleFollow","fill","text","handleRemoveBox","EmptyBox","BoxSearch","allBoxes","filteredBoxes","userFollowing","listenForFollowing","followListener","following","box","boxInfo","handleBoxView","BoxSearchPage","allBoxesListener","boxes","y","isReadOnly","ResetPassword","currentPassword","newPassword","confirmPassword","creds","auth","EmailAuthProvider","credential","email","reauthenticateWithCredential","updatePassword","persist","InputLabelProps","handleSubmit","DeleteAccount","userConfirmText","confirmText","removeUser","error","main","UsernamePanel","usernameInput","exec","docs","setUsername","updateUsername","SettingsRow","openSetting","Settings","currentPage","settings","setting","handleBack","ArrowBackIos","RegisterUser","pass1","pass2","createUserWithEmailAndPassword","admin","accountType","justify","StyledGrid","marginBottom","EditWod","wodInfo","userBoxes","hasBoxes","editWod","Select","native","handleValChange","multiline","editWOD","sendAdminInvite","inviteRef","isClassAdmin","isAdmin","isNotificationSent","isSent","adminInviteID","classSS","classDoc","InviteView","filteredUsers","modalOpen","onModalClose","endAdornment","onSelectChange","JSON","stringify","borderColor","sendInvite","InviteAdminView","gymClassMD","allUsers","selectedUser","listener","users","msg","senderUID","senderUsername","gymClassTitle","boxTitle","parse","sendMemberInvite","isClassMember","isMember","memberInviteID","InviteMemberView","AdminRow","handleRemoveAdmin","classAdminID","EmptyAdmin","ClassAdminList","filteredAdmins","admins","removeUsername","removeClassAdminID","fontSize","onRemoveAdmin","MemberRow","handleRemoveMember","classMemberID","EmptyMember","ClassMemberList","filteredMembers","members","member","onRemoveMember","GymClassView","wods","currentWodID","currentWodMD","showEditModal","editWodInfo","curRemoveWodBoxID","curRemoveWodID","curRemoveWodTitle","inviteModalOpen","inviteMemberModalOpen","adminUids","memberUids","showAdminList","showMemberList","userBoxesListener","adminListener","memberListener","getUserBoxListener","getAdminListener","getMemberListener","getGymClassListener","getWodListener","filteredWods","constructor","isPrivate","closeViewLists","openAdminInvite","openViewAdmins","onInviteModalClose","openMemberInvite","openViewMembers","onInviteMemberModalClose","handleRemoveWod","deleteWod","handleEditModalClose","removeBox","batchDelete","batchUpdate","BoxListAccordion","currentBoxID","curRemoveBoxID","curRemoveBoxTitle","zeroMinWidth","noWrap","deleteBox","AddGymClass","createGymClass","result","setGymClass","checked","onTitleChange","Checkbox","handleCheckboxChange","SCORETYPES","AddWod","boxIDForm","gymClassIDForm","titleForm","scoreTypeForm","wodTextForm","setGymClassListner","initClass","setWod","onBoxSelectChange","onClassSelectChange","onScoreTypeSelectChange","onWodTextChange","createWOD","AddBox","createBox","setBox","TabPanel","children","other","role","hidden","OwnerControls","addBoxProgress","listenForBoxes","AppBar","Tabs","selectionFollowsFocus","handleChange","Tab","a11yProps","axis","onChangeIndex","handleChangeIndex","UserFollows","userFollows","follows","getFollowers","followingSS","extractData","docChanges","change","modData","follow","Link","UserScoreList","removeScoreID","hideRemoveAlert","onViewBox","handleViewBox","onViewWod","handleViewWod","onView","Athlete","Notification","gymClassBoxTitle","acceptInvite","Check","removeNotification","Close","AdminInvites","notifications","getListener","notificationsListener","notifyID","notify","classTitle","setClassAdmin","onRemoveNotification","MemberInvites","setClassMember","ClassAdminView","userClassAdminsListener","classAdmin","ClassMemberView","userClassMembersListener","classMember","cellData","valid","SuperCell","borderRadius","Cell","CellRow","RedCell","GreyCell","GreenCell","WhiteCell","CalendarScoreView","today","DateTime","calendar","createCalendar","fakeScores","local","year","month","daysInMonth","first","getFirstOfMonth","last","getEndOfMonth","fullWeek1","fullWeek2","getFirstAndLast","firstWeek","fullWeek","lastWeek","weekday","startOffset","getOffsetDayOfMonthFromTs","ts","endOffset","c","day","fromMillis","offset","col","monthLong","fillCalendar","week","flipDir","className","j","PageContentRaw","emailAlertOpen","cancelablePromise","cancel","listenForUserScores","emailVerifyPromise","sendEmailVerification","promise","hasCanceled_","resolve","reject","isCanceled","makeCancelable","Collapse","in","Alert","emailVerified","sendVerificationEmail","PageContent","ProfilePage","StyledMenuItem","common","white","MenuItem","StyledTypography","StyledPaper","UserAlert","severity","alertInfo","onCloseAlert","Header","menuRef","createRef","alertOpen","preventDefault","toolbar","Toolbar","disableGutters","marginLeft","marginRight","handleToggle","Menu","Popper","anchorEl","current","placement","transition","disablePortal","popper","TransitionProps","Fade","transformOrigin","ClickAwayListener","onClickAway","handleClose","MenuList","onKeyDown","handleListKeyDown","changeTheme","handleLogout","zIndex","Login","signInWithEmailAndPassword","onLogin","code","createBrowserHistory","apptheme","borderBottomColor","applighttheme","darkTheme","createMuiTheme","responsiveFontSizes","lightTheme","lightapptheme","BackgroundGrid","paper","App","btmnav","currentUser","firebaseAuthListener","onAuthStateChanged","userMDListener","metadata","signOut","newTheme","Provider","history","ThemeProvider","paddingTop","exact","path","render","match","params","handleLogin","BottomNavigation","event","newValue","showLabels","BottomNavigationAction","icon","contextType","ReactDOM"],"mappings":"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","file":"static/js/main.5866ecef.chunk.js","sourcesContent":["import * as firebase from \"firebase/app\";\nimport \"firebase/auth\"; \nimport React from \"react\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCGE8_j8cfIBmIzcvP6CVgG2yC6EE1Ep1U\",\n  authDomain: \"wodtrackrr.firebaseapp.com\",\n  databaseURL: \"https://wodtrackrr.firebaseio.com\",\n  projectId: \"wodtrackrr\",\n  storageBucket: \"wodtrackrr.appspot.com\",\n  messagingSenderId: \"743601990099\",\n  appId: \"1:743601990099:web:5937e9151eaad13e93a726\",\n  measurementId: \"G-39CF0BRPMH\"\n};\n\n\n\nexport default firebase\nexport const FirebaseAuthContext = React.createContext(firebase.initializeApp(firebaseConfig));","export default function cvtReps(x){\n\treturn parseInt(x)\n}\n\nexport function cvtTimetoInt(x){\n\tlet [mins, seconds] = x.split(\":\")\n\treturn (parseInt(mins) * 60) + parseInt(seconds)\n}\n\nexport function dupNewLine(text){\n\tconsole.log(\"\\n\".charCodeAt(0))\n\t\n\tlet newLinePattern = /\\\\n/\n\tlet newText = text.replace(newLinePattern, \"\\\\n\\\\n\")\n\t\n\tfor(let c of newText){\n\t\tconsole.log(c)\n\t\tconsole.log(c.charCodeAt(0))\n\t}\n\treturn newText\n}\n\nexport function cvtIntToTime(x){\n\tlet mins = Math.floor(x / 60)\n\tlet secs = Math.floor(x - (mins*60))\n\tif(secs < 10){\n\t\tsecs = `0${secs}`\n\t}\n\treturn `${mins}:${secs}`\n}\n\n\nexport function cvtTimetoIntList(rawScores){\n\treturn rawScores.map((score) => {\n\t\tcvtTimetoInt(score)\n\t})\n}\n\n\nexport function msToDate(ms){\n\treturn new Date(ms).toLocaleDateString(\"en-US\")\n}\n\n\nexport function formatDate(){\n  const [{ value: month },,{ value: day },,{ value: year }] \n    = new Intl.DateTimeFormat('en', \n      { year: 'numeric', month: 'numeric', day: '2-digit' })\n      .formatToParts(new Date())  \n  console.log(new Intl.DateTimeFormat('en', \n      { year: 'numeric', month: 'numeric', day: '2-digit' }))\n  return `${year}/${month}/${day}`\n}\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\nimport Chart from 'chart.js';\n\nimport {cvtTimetoInt, cvtIntToTime} from \"../utils/formatting\"\n// Stats\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport \"../styles.css\"\n\n\nvar db = firebase.database();\n\n\nclass LineChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscoreType: props.scoreType,\n\t\t\tdata: props.data, // x y values for chart\n\t\t\tvalues: props.values, // raw score values\n\t\t\tstats: props.stats // mean, median, SD\n\t\t}\n\t}\n\t\n\tcomponentDidMount(){\n\t\tthis.createChart()\n\t}\n\n\tcreateChart(){\n\t\tthis.ctx = document.getElementById('lineChart');\n\t\t\n\t\tlet context = this.ctx.getContext('2d')\n\t\tlet grd = context.createLinearGradient(200,0,200,400);\n\t\tgrd.addColorStop(0,\"#01d3fe\");\n\t\t\n\t\tgrd.addColorStop(1,\"#0890fd\");\n\n\t\tif(this.lineChart){\n\t\t\tthis.lineChart.destroy()\n\t\t}\n\t\t\n\t\tthis.lineChart = new Chart(this.ctx, {\n\t\t    type: 'line',\n\t\t    \n\t\t    data:  {\n\t\t    \tlabel: \"Scores\",\n\t\t\t    datasets: [{\n\t\t\t    \tlabel: \"Score\",\n\t\t\t        barPercentage: 0.5,\n\t\t\t        barThickness: 6,\n\t\t\t        maxBarThickness: 8,\n\t\t\t        minBarLength: 2,\n\t\t\t        backgroundColor: grd,\n\t\t\t        data: this.state.data\n\t\t\t    }]\n\t\t\t},\n\t\t\toptions:{\n\t\t\t\tscales: {\n\t\t            yAxes: [{\n\t\t                ticks:{\n\t\t                \tcallback: (label, index, labels) => {\n\t\t\t                \tif(this.state.scoreType === \"time\"){\n\t\t\t                \t\treturn cvtIntToTime(label)\n\t\t\t                \t}else if(this.state.scoreType === \"reps\"){\n\t\t\t                \t\treturn label\n\t\t\t                \t}\n\t\t\t                }\n\t\t\t             }\n\t\t            }]\n\t\t\t    },\n\t\t\t    tooltips: {\n\t\t\t        callbacks: {\n\t\t\t        \ttitle: (tooltipItem, data) => {\n\n\t\t\t        \t},\n\t\t\t            label: (tooltipItem, data) => {\n\t\t\t                var label = data.datasets[tooltipItem.datasetIndex].label || '';\n\n\t\t\t                if (label) {\n\t\t\t                    label += ': ';\n\t\t\t                }\n\n\t\t\t                if(this.state.scoreType === \"time\"){\n\t\t                \t\tlabel += cvtIntToTime(tooltipItem.yLabel)\n\t\t                \t}else if(this.state.scoreType === \"reps\"){\n\t\t                \t\tlabel += tooltipItem.yLabel\n\t\t                \t}\n\t\t\t                \n\t\t\t                \n\t\t\t                return label;\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t},\n\t\t\tplugins: [{\n\t\t\t\tbeforeInit: function(chart) {\n\t\t\t\t\tvar chartData = chart.data.datasets[0].data\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.createChart()\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log(\"Component will unmount\")\n\t}\n\n  render(){\n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<div style={{width: \"92vw\", padding: \"8px\"}}>\n\t\t\t\t\t<canvas id=\"lineChart\" ></canvas>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\n\n\n\n  \nexport default LineChart = withTheme(LineChart);\n\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// Stats\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport {cvtTimetoInt, cvtIntToTime} from \"../utils/formatting\"\nimport \"../styles.css\"\n\nimport Chart from 'chart.js';\n\n\n\nvar db = firebase.database();\n\nclass BarChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscoreType: props.scoreType,\n\t\t\tdata: props.data, // x y values for chart\n\t\t\tvalues: props.values, // raw score values\n\t\t\tstats: {} // mean, median, SD\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\tconsole.log(props)\n\t\tconsole.log(state)\n\t\treturn props\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.createChart(this.binData(this.state.values))\n\t}\n\n\tcomponentDidUpdate(){\n\t\tconsole.log(this.state)\n\t\tthis.createChart(this.binData(this.state.values))\n\t}\n\n\tcreateChart([labels, data]){\n\t\tthis.ctx = document.getElementById('barChart');\n\t\tlet context = this.ctx.getContext('2d')\n\t\tlet grd = context.createLinearGradient(200,0,200,400);\n\t\tgrd.addColorStop(0,\"#01d3fe\");\n\t\tgrd.addColorStop(1,\"#0890fd\");\n\n\t\tif(this.barChart){\n\t\t\tthis.barChart.destroy()\n\t\t}\n\t\tthis.barChart = new Chart(this.ctx, {\n\t\t    type: 'bar',\n\t\t    data:  {\n\t\t    \tlabels: labels,\n\t\t\t    datasets: [{\n\t\t\t    \t'label': \"Scores (Standard Deviation)\",\n\t\t\t        minBarLength: 1,\n\t\t\t        backgroundColor: grd,\n\t\t\t        data: data\n\t\t\t    }]\n\t\t\t},\n\t\t\toptions:{\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t}\n\t\t});\n\t\tthis.barChart.update()\n\t}\n\n\tformat(x){\n\t\tif(this.state.scoreType === \"time\"){\n\t\t\treturn x <= 0 ? 0 : cvtIntToTime(x)\n\t\t}else if(this.state.scoreType === \"reps\"){\n\t\t\treturn parseFloat(x)\n\t\t}\n\t}\n\n\tcreateLabels(_mean, sd){\n\t\tlet bins = []\n\n\t\tfor(let i=0; i<3; i++){\n\t\t\tlet binA = `${this.format(_mean - (sd * (i + 1)))} - ${this.format(_mean - (sd * i))}`\n\t\t\tlet binB = `${this.format(_mean + (sd * i))} - ${this.format(_mean + (sd * (i + 1)))}`\t\n\t\t\tbins.unshift(binA)\n\t\t\tbins.push(binB)\n\t\t}\n\t\treturn bins\n\t}\n\n\tbinData(values){\n\t\t/*\n\t\t\t{x: binValue, y: countOfbin}\n\t\t\t6 bins 1,2,3 SD from Mean each way\n\t*/\n\t\tlet sd = standardDeviation(values)\n\t\tlet _mean = mean(values)\n\t\tlet labels = this.createLabels(_mean, sd)\n\t\tlet binnedData = [0, 0, 0, 0, 0, 0]\n\t\tfor(let x of values){\n\t \t\tlet diff = (x - _mean)\n\t \t\tlet numSDAway = Math.floor(diff / sd)\t \t\t\n\t \t\tif(Math.abs(numSDAway) <= 1){\n\t \t\t\tif(diff > 0){\n\t \t\t\t\tbinnedData[3]++\n\t \t\t\t}else{\n\t \t\t\t\tbinnedData[2]++\n\t \t\t\t}\n\t \t\t}else if(Math.abs(numSDAway) <= 2){\n\t \t\t\tif(diff > 0){\n\t \t\t\t\tbinnedData[4]++\n\t \t\t\t}else{\n\t \t\t\t\tbinnedData[1]++\n\t \t\t\t}\n\t \t\t} else{\n\t \t\t\tif(diff > 0){\n\t \t\t\t\tbinnedData[5]++\n\t \t\t\t}else{\n\t \t\t\t\tbinnedData[0]++\n\t \t\t\t}\n\t \t\t}\n\t\t}\n\t\treturn [labels, binnedData]\n\t}\n\n  render(){\n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<div style={{width: \"92vw\", padding: \"8px\"}}>\n\t\t\t\t\t<canvas id=\"barChart\"></canvas>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\nexport default BarChart = withTheme(BarChart);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport LineChart from \"../lineChart\"\nimport BarChart from \"../barChart\"\n\nimport {cvtTimetoInt, cvtIntToTime, cvtTimetoIntList} from \"../../utils/formatting\"\nimport \"../../styles.css\"\n\nfunction transformData(scores){\n\t/*\n\t\tcreate two arrays\n\t\tOne for data display in graph, \n\t\t\t\t[ {\"category\": \"A\", \"amount\": 28}, ... ]\n\t\tSecond to crunch data, raw values\n\t\t\tkey\t=> uid\n\t\t\t\tboxID: \t\t\"-MMVcVjihF2bXFc6qIEp\"\n\t\t\t\tscore:  \t\"321\"\n\t\t\t\tusername:  \t\"TestOwner\"\n\t\t\t\twodID:  \t\"-MMjP1_MQH23dnFQOfjR\"\n\t*/\n\tlet graphData = []\n\tlet scoreType = \"\"\n\tlet values = scores.map(score => {\n\t\tscoreType = score.scoreType\n\t\treturn (score.scoreType === \"time\") ? cvtTimetoInt(score.score)\n\t\t\t: parseFloat(score.score)\n\t})\n\t\n\t// create data list for chart \n\tfor(let i =0; i < values.length; i++){\n\t\t graphData.push({\"x\": i, \"y\": values[i], \"c\": 0})\n\t}\n\treturn [graphData, values, scoreType, getDescStats(values)]\n}\n\nfunction getDescStats(vals){\n\t console.log(vals)\n\treturn {\n\t\t'min': Math.min(...vals),\n\t\t'max': Math.max(...vals),\n\t\t'mean': mean(vals),\n\t\t'median': median(vals),\n\t\t'sd': standardDeviation(vals)\n\t}\n}\n\nclass ScoreDataView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores, // array of objects\n\t\t\tgraphData: [],\n\t\t\trawScores: [],\n\t\t\tscoreType: \"\",\n\t\t\tstats: {}\n\t\t}\t\t\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\t\t\n\t\tlet data = transformData(props.scores)\n\t\tlet [graphData, rawScores, scoreType, stats] = data\n\n\t\treturn {...props,\n\t\t\tgraphData: graphData, \n\t\t\trawScores: rawScores, \n\t\t\tscoreType: scoreType, \n\t\t\tstats: stats\n\t\t}\n\t}\n\n\tcomponentDidUpdate(){\n\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log(\"Component will unmount\")\n\t}\n\n\t\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12}>\n\t\t\t<Grid item container align=\"center\" spacing={1} xs={12}>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\tLow: {this.state.scoreType === \"time\" ? \n\t\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"min\"])\n\t\t\t\t\t\t\t\t: this.state.stats[\"min\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\tHigh: {this.state.scoreType === \"time\" ?\n\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"max\"])\n\t\t\t\t\t\t\t: this.state.stats[\"max\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography >\n\t\t\t\t\t\t\tAvg: {this.state.scoreType === \"time\" ?\n\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"mean\"])\n\t\t\t\t\t\t\t: this.state.stats[\"mean\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t</Grid> \n\n\t\t\t\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<LineChart \n\t\t\t\t\t\tdata = {this.state.graphData}\n\t\t\t\t\t\tvalues={this.state.rawScores}\n\t\t\t\t\t\tscoreType={this.state.scoreType}\n\t\t\t\t\t\tstats={this.state.stats} />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<BarChart \n\t\t\t\t\t\tdata = {this.state.graphData}\n\t\t\t\t\t\tvalues={this.state.rawScores}\n\t\t\t\t\t\tscoreType={this.state.scoreType}\n\t\t\t\t\t\tstats={this.state.stats} />\n\t\t\t\t</Grid>\n\n\n\n\t\t</Grid>\n\t)\n  }\n}\nexport default ScoreDataView = withTheme(ScoreDataView);\n\n","import React, { Component } from 'react'\n\nimport \n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tCardActions, Card, CardContent, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\nimport Delete from '@material-ui/icons/Delete'\n\n\n\nimport \"../../styles.css\"\n\nclass ScoreList extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores,\n\t\t\tuid: props.uid\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\t\n  render(){\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t{this.state.scores.length > 0?\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t<Table aria-label=\"score table\">\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Username</TableCell>\n\t\t\t\t\t\t<TableCell>Score</TableCell>\n\t\t\t\t\t\t<TableCell></TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.scores.map((score, i) => {\n\t\t\t\t\t\tlet isCurUserScore = \n\t\t\t\t\t\t\t(this.state.uid == score[\"uid\"])? true : false\n\t\t\t\t\t\treturn <ScoreRow key={i}\n\t\t\t\t\t\t\tinfo={score}\n\t\t\t\t\t\t\tonRemove = {this.props.onRemove}\n\t\t\t\t\t\t\tisUserScore={isCurUserScore} \n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t    </TableBody>\n\t\t\t    </Table>\n\t\t\t</TableContainer>\n\t\t\t:\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Card variant=\"outlined\" color=\"primary\">\n\t\t\t\t  <CardContent>\n\t\t\t\t    <Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t   \tNo Scores!\n\t\t\t\t    </Typography>\n\t\t\t\t   </CardContent>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t\t}\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n  \nexport default ScoreList = withTheme(ScoreList);\n\n\n/*\nShow details of Box and its WODS\n*/\nfunction ScoreRowRaw(props){\n\tlet score = props.info[\"score\"]\n\tlet username = props.info[\"username\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet uid = props.info[\"uid\"]\n\tlet scoreID = props.info[\"scoreID\"]\n\tlet rowStyle = (props.isUserScore)? \"\": \"\"\n\treturn(\n\t\t<TableRow selected={props.isUserScore}>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{username}\n\t\t\t\t</TableCell>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{score} \n\t\t\t\t</TableCell>\n\t\t\t\t{\n\t\t  \t\t\tprops.isUserScore\n\t\t  \t\t\t?\n\t\t\t  \t\t<TableCell align=\"right\">\n\t\t\t\t\t    <Button size=\"small\" \n\t\t\t\t\t    \t\n\t\t\t\t\t    \tonClick={() => props.onRemove(scoreID)}>\n\t\t\t\t\t    \t<Delete color=\"error\"  />\n\t\t\t\t\t    </Button>\n\t\t\t  \t\t</TableCell>\n\t\t\t  \t\t:\n\t\t\t  \t\t<TableCell></TableCell>\n\n\t\t  \t\t}\n\t\t</TableRow>\n\t)\n}\nlet ScoreRow =  withTheme(ScoreRowRaw)","/*\n\tScores\n*/\n\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\"; \n\nlet fs = firebase.firestore();\n\n\nexport function setScore(title, username, uid, userScore, wodID, gymClassID, boxID,\n\t\t\t\t\t\tscoreType){\n\treturn new Promise((res, rej) => {\n\t\tlet data = {\n\t\t\t\tuid: uid,\n\t\t\t\twodID: wodID,\n\t\t\t\tgymClassID: gymClassID,\n\t\t\t\tboxID: boxID,\n\t\t\t\tusername: username,\n\t\t\t\ttitle: title,\n\t\t\t\tscore: userScore,\n\t\t\t\tscoreType: scoreType,\n\t\t\t\tdate: Date.now()\n\t\t\t}\n\t\tfs.collection(\"scores\")\n\t\t.where(\"uid\", \"==\", uid)\n\t\t.where(\"wodID\", \"==\", wodID)\n\t\t.get().then(ss => {\n\t\t\tlet key = \"\"\n\t\t\tconsole.log(ss)\n\t\t\tif(!ss.empty){\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tkey = doc.data().scoreID\n\t\t\t\t})\n\t\t\t\tdata['scoreID'] = key\n\t\t\t\tfs.collection(\"scores\").doc(key).set(data)\n\t\t\t\t.then(() => {res(\"Updated score.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t}else{\n\t\t\t\tlet doc = fs.collection(\"scores\").doc()\n\t\t\t\tdata['scoreID'] = doc.id\n\t\t\t\tdoc.set(data)\n\t\t\t\t.then(() => {res(\"Added new score.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t\t// Create score \n\t\t\t}\n\t\t},\n\t\t\terr => {\n\t\t\t\trej(err)\n\t\t})\n\t})\n}\n\nexport function removeScore(scoreID){\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"scores\").doc(scoreID).delete()\n\t\t.then(()=>{res(`Successfully removed score: ${scoreID}`)})\n\t\t.catch((err) => {rej(`Failed to remove score: ${scoreID}`)})\n\t})\t\n}\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableBody, Table, Modal, TableCell\n} \nfrom '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\n\n\nimport { setScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\n\n\nconst BorderlessTableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TableCell)\n\n\nvar db = firebase.database();\n\nclass AddScore extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\twodMD: props.wodMD\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tobjListToArray(obj){\n\t\t// let key = Object.keys(obj)[0]\n\t\treturn Array.from(Object.entries(obj), entry => {\n\t\t\t return new Map(Object.entries(entry[1]));\n\t\t})\n\t}\n\n\tisNumInSane(s){\n\t\tlet hasNonDigitRegex = /\\D/\n\t\tlet res = s.search(hasNonDigitRegex) \n\t\tlet isSane = (res === -1) ? true: false\n\t\treturn isSane \n\t}\n\n\thandleAddScore(){\n\t\tif(!this.state.userMD){return}\n\n\t\tlet userScore = \"\"\n\t\tif(this.state.wodMD['scoreType'] === \"time\"){\n\t\t\tlet mins =  document.getElementById(\"scoreViewUserScoreMins\").value\n\t\t\tlet secs =  document.getElementById(\"scoreViewUserScoreSecs\").value\n\t\t\tif(!this.isNumInSane(mins) || !this.isNumInSane(secs)){\n\t\t\t\talert(`Time must only contain numbers, entered: ${mins}:${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(parseInt(secs) > 59){\n\t\t\t\talert(`Seconds must be 59 or below, entered: ${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(parseInt(secs) < 10 && secs.length === 1){\n\t\t\t\tsecs = `0${secs}`\n\t\t\t}\n\t\t\tif(isNaN(parseInt(secs)) ||  isNaN(parseInt(mins))){\n\t\t\t\talert(`Missing field, entered: ${mins}:${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(mins.length > 2){\n\t\t\t\talert(`Minutes must be 99 or below, entered: ${mins}`)\t\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(mins.length === 0){\n\t\t\t\tmins = \"0\"\n\t\t\t}\n\t\t\tif(secs.length === 0){\n\t\t\t\tsecs = \"0\"\n\t\t\t}\n\t\t\tuserScore = `${mins}:${secs}`\n\t\t}else{\n\t\t\t// reps or rounds\n\t\t\tuserScore =  document.getElementById(\"scoreViewUserScore\").value\n\t\t\tif(userScore.length > 3){\n\t\t\t\talert(`Score must be 3 digits or less, entered: ${userScore}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(!userScore){\n\t\t\t\talert(\"Must enter score.\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(!this.isNumInSane(userScore)){\n\t\t\t\talert(`Score must be digits only, entered: ${userScore}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tlet username = this.state.userMD.username\n\t\tlet uid = this.state.userMD.uid\n\t\tlet wodID = this.state.wodMD[\"wodID\"]\n\t\tlet gymClassID = this.state.wodMD[\"gymClassID\"]\n\t\tlet boxID = this.state.wodMD[\"boxID\"]\n\t\tlet title = this.state.wodMD[\"title\"]\n\t\tlet scoreType = this.state.wodMD[\"scoreType\"]\n\t\t\n\t\tsetScore(title, username, uid, userScore, wodID, gymClassID, boxID, scoreType)\n\t\t.then((res) => console.log(res))\n\t\t.catch((err) => console.log(err))\n\t}\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n\t\t\t<Accordion>\n\t\t\t\t<AccordionSummary\n\t\t\t\t\tstyle={{background: this.props.theme.palette.primary.mainGrad}}\n\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\taria-label=\"Expand\"\n\t\t\t\t\taria-controls=\"additional-actions2-content\"\n\t\t\t\t\tid=\"additional-actions2-header\">\n\t\t\t\t\t<Typography >\n\t\t\t\t\t\tAdd Score\n\t\t\t\t\t</Typography>\t        \n\t\t\t\t</AccordionSummary>\n\t\t\t\t<AccordionDetails>\n\t\t\t\t\t<Grid item container xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\t{this.state.wodMD['scoreType']\n\t\t\t\t\t\t\t\t.replace(\n\t\t\t\t\t\t\t\t\tthis.state.wodMD['scoreType'][0],\n\t\t\t\t\t\t\t\t\tthis.state.wodMD['scoreType'][0].toUpperCase())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TableContainer>\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t{this.state.wodMD.scoreType === \"time\" ?\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t<BorderlessTableCell align=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"scoreViewUserScoreMins\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\t\t\t\tpattern=\"[0-9]{3}\"\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Numbers only, max length 3\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Minutes\"\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\n\t\t\t\t\t\t\t\t\t\t<BorderlessTableCell align=\"center\">\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"scoreViewUserScoreSecs\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\t\t\t\tpattern=\"[0-9]{2}\"\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Numbers only, max length 2\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Seconds\"\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t:\t\n\t\t\t\t\t\t\t\t\t\t<BorderlessTableCell align=\"center\" colSpan={2}>\n\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tid=\"scoreViewUserScore\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\t\t\tpattern=\"[0-9]{4}\"\n\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"Numbers only, max length 4\",\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: \"Score\"\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t<BorderlessTableCell colSpan={3} align=\"center\">\n\t\t\t\t\t\t\t\t\t\t<Button  color=\"primary\" style={{width: \"100%\"}} variant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleAddScore.bind(this)}>\n\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</BorderlessTableCell>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</TableContainer>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</AccordionDetails>\n\t\t\t</Accordion>\t\t\n\t\t</Grid>\n\t)\n  }\n}\n\n  \nexport default AddScore = withTheme(AddScore);\n\n","import React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\n\n\n\nclass ActionCancelModal extends Component{\n\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\topen: props.open\n\t\t}\n\t\t/*\n\t\topen\n\t\tactionText\n\t\tcancelText\n\t\tmodalText\n\t\tonAction\n\t\tonClose\n\t\t*/\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal\n\t\t\t    open={this.state.open}\n\t\t\t    onClose={this.props.onClose}\n\t\t\t    aria-labelledby=\"simple-modal-title\"\n\t\t\t    aria-describedby=\"simple-modal-description\">\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: \"50%\",\n\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\twidth: \"80vw\",\n\t\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t\t}}>\n\t\t\t\t\t<Grid \n\t\t\t\t\t\titem \n\t\t\t\t\t\talign=\"center\" \n\t\t\t\t\t\txs={12}\n\t\t\t\t\t>\n\t\t\t\t\t<Paper style={{height:\"25vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\t\t\t\t\t\t<Grid item container xs={12}>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<Typography style={{marginTop: \"32px\"}}>\n\t\t\t\t\t\t\t\t\t{this.props.modalText}\n\t\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\tvariant=\"outlined\" \n\t\t\t\t\t\t\t\t\tonClick={()=>{ this.props.onClose()}}>\n\t\t\t\t\t\t\t\t\t{this.props.cancelText}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\" \n\t\t\t\t\t\t\t\t\tonClick={()=>{ this.props.onAction()}}>\n\t\t\t\t\t\t\t\t\t{this.props.actionText}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\n\t\t)\n\t}\n\n}\n\nexport default ActionCancelModal = withTheme(ActionCancelModal);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{   Grid, Paper, Button, Typography, Collapse, TextField, Select,\n  Accordion, AccordionSummary, AccordionDetails, FormControlLabel,\n  CircularProgress, LinearProgress, CardActions, Card, CardContent,\n  ListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n  TableCell, TableBody, Table, Modal, GridListTileBar\n}\nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport ScoreDataView from \"./scoreDataView\"\nimport ScoreList from \"./scoreList\"\nimport AddScore from \"./addScore\"\nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport { removeScore } from \"../../utils/firestore/scores\"\nimport { dupNewLine } from \"../../utils/formatting\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nfunction RenderWodTextRaw(props){\n  let lines = props.wodText.split(\"\\n\")\n  return(\n    <Grid item xs={12}>\n      {\n        lines.map((line, i) => {\n          return(\n            <Grid item xs={12} key={i}>\n              <Typography>\n                {line? line: <br/>}\n              </Typography>\n            </Grid>\n          )\n        })\n      }\n    </Grid>\n  )\n}\n\nconst RenderWodText = withTheme(RenderWodTextRaw)\n\nclass ScoreView extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD,\n      boxID: props.boxID,\n      wodID: props.wodID,\n      wodMD: {},\n      scores: [],\n      userScore: {},\n      curRemoveScoreID: \"\",\n      showRemoveAlert: false\n    }\n  }\n\n  componentDidMount(){\n    let fs = firebase.firestore()\n    this.wodListener = fs.collection(\"wods\").doc(this.state.wodID)\n    .onSnapshot(ss => {\n      this.setState({wodMD: ss.data()})\n    },\n      err => {console.log(err)})\n\n    this.scoreListener = fs.collection(\"scores\")\n    .where(\"wodID\", \"==\", this.state.wodID)\n    .onSnapshot(ss => {\n      if(!ss.empty){\n        let scores = []\n        let userScore = {}\n        let scoreType = \"\"\n        ss.forEach(doc => {\n          let data = doc.data()\n          scores.push(data)\n          scoreType = data.scoreType\n          if(data.uid === this.state.uid)\n            userScore = data\n        })\n        let isTime = (scoreType && scoreType === \"time\") ? 1 : 0\n        scores.sort((a,b) => {\n          return isTime\n          ?\n              parseFloat(a[\"score\"]) < parseFloat(b[\"score\"]) ? -1 : 1\n          :\n             parseFloat(a[\"score\"]) > parseFloat(b[\"score\"]) ? 1 : -1\n        })\n        this.setState({\n          scores: scores,\n          userScore: userScore\n        })\n      }else{\n        this.setState({\n          scores: [],\n          userScore: {}\n        })\n      }\n    },\n      err => {})\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  componentWillUnmount(){\n    if(this.scoreListener !== undefined)\n      this.scoreListener()\n    if(this.wodListener !== undefined)\n      this.wodListener()\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert:false})\n  }\n\n  handleRemoveScore(scoreID){\n    this.setState({curRemoveScoreID: scoreID, showRemoveAlert: true})\n  }\n\n  removeScore(){\n    let scoreID = this.state.curRemoveScoreID\n    if(scoreID === \"\" || scoreID.length <=0){\n      this.props.onAlert({\n        type: \"warning\",\n        message: \"Invalid scoreID!\"\n      })\n      return\n    }\n\n\n    this.setState({showRemoveAlert: false})\n    removeScore(scoreID)\n    .then((res)=>{\n      this.props.onAlert({\n        type: \"success\",\n        message: res\n      })\n    })\n    .catch((err)=>{\n      this.props.onAlert({\n        type: \"error\",\n        message: err\n      })\n    })\n  }\n\n  render(){\n\n  return(\n    <React.Fragment>\n      {Object.keys(this.state.wodMD).length > 0 ?\n        <Grid item xs={12}>\n          <Grid item align=\"center\" xs={12}>\n            <Paper elevation={6}>\n              <Typography>{this.state.wodMD[\"title\"]}</Typography>\n              <Typography\n                variant=\"subtitle1\"\n                color=\"primary\">\n                  For {this.state.wodMD[\"scoreType\"]}\n              </Typography>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Paper elevation={6} style={{\n                margin: \"8px 0px 8px 0px\",\n                padding: \"8px\"\n            }}>\n            <Grid item xs={12} align=\"center\">\n            <Typography\n                variant=\"subtitle2\"\n                color=\"primary\">\n                  Workout\n              </Typography>\n            </Grid>\n            <Grid item container xs={12}>\n              <RenderWodTextRaw\n                wodText={this.state.wodMD[\"wodText\"]}\n              />\n              </Grid>\n            </Paper>\n          </Grid>\n\n          {Object.keys(this.state.userMD).length > 0?\n            <AddScore\n              userMD={this.state.userMD}\n              wodMD={this.state.wodMD}\n            />\n          :\n            <React.Fragment></React.Fragment>\n          }\n          <Grid item xs={12} margin={{marginTop: \"16px\"}}>\n              {this.state.scores && this.state.scores.length > 0?\n                <ScoreDataView\n                  scores={this.state.scores}\n                />\n              :\n                <React.Fragment></React.Fragment>\n              }\n          </Grid>\n          <Grid item xs={12}>\n            <Paper elevation={6}>\n            <ScoreList\n              scores={this.state.scores}\n              uid={this.state.userMD.uid}\n              onRemove={this.handleRemoveScore.bind(this)}\n            />\n            </Paper>\n          </Grid>\n          <ActionCancelModal\n            open={this.state.showRemoveAlert}\n                onClose={this.handleModalClose.bind(this)}\n                onAction={this.removeScore.bind(this)}\n                modalText={`Remove score?`}\n                actionText={`Remove`}\n                cancelText={`Cancel`}\n            />\n          </Grid>\n        :\n          <React.Fragment>\n            Wod not found!\n          </React.Fragment>\n      }\n    </React.Fragment>\n  )\n  }\n}\n\nexport default ScoreView = withTheme(ScoreView);\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n/*\n\tGymClasses\n*/\n\nexport function getGymClasses(boxID){\n\treturn fs.collection(\"gymClasses\").doc(boxID).collection(\"classes\")\n}\n\nexport function setGymClass(title, uid, boxID, boxTitle, isPrivate){\n  \treturn new Promise((res, rej) => {\n  \t\tfs.collection(\"gymClasses\")\n\t\t.doc(boxID)\n\t\t.collection(\"classes\")\n\t\t.where(\"title\", \"==\", title)\n  \t\t.get().then(result => {\n\t\t\tconsole.log(result)\n  \t\t\tif(result.empty){\n\t\t\t\tlet doc = fs\n\t\t\t\t.collection(\"gymClasses\")\n\t\t\t\t.doc(boxID)\n\t\t\t\t.collection(\"classes\")\n\t\t\t\t.doc()\n\n\t\t  \t\tdoc.set({\n\t\t  \t\t\tgymClassID: doc.id,\n\t\t  \t\t\tboxID: boxID,\n\t\t  \t\t\tboxTitle: boxTitle,\n\t\t  \t\t\ttitle: title,\n\t\t  \t\t\tuid, uid,\n\t\t\t\t\tisPrivate: isPrivate,\n\t\t  \t\t\tdate: Date.now()\n\t\t  \t\t})\n\t\t  \t\t.then(()=>{\n\t\t  \t\t\tres(\"Added gymClass\")\n\t\t  \t\t})\n\t\t\t\t  .catch(err => { rej(err) })\n  \t\t\t}else{\n  \t\t\t\tres(\"Name Taken\")\n  \t\t\t}\n  \t\t})\n\t\t.catch(err => {rej(err)})\n  \t})\n }\n\n\nfunction getSnapshot(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tlet snapshotSize = 0\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\tsnapshotSize = ss.size\n\t\t\n\t\tss.forEach(doc => {\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\t\t\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)\n\t\t\t\tgetSnapshot(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeGymClass(boxID, gymClassID){\n\tlet collectionNames = [\"wods\", \"scores\", `gymClasses/${boxID}/classes`, 'classMembers', 'classAdmins']\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tgetSnapshot(name, \"gymClassID\", gymClassID, res, rej)\n\t\t})\n\t})\n\t\n\treturn Promise.all(promises)\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport \n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport Delete from '@material-ui/icons/Delete'\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { getGymClasses, removeGymClass } from '../../utils/firestore/gymClass'\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction GymClassRaw(props){\n  let title = props.info[\"title\"]\n  let boxID = props.info[\"boxID\"]\n  let gymClassID = props.info[\"gymClassID\"]\n  // TODO redirect to wods whhoch is what boxView is\n  return(\n    <TableRow id={`class/${gymClassID}`} name=\"GymClassRow\" \n          onClick={(ev) => {props.onRowClick(ev, `/class/${boxID}/${gymClassID}`)} }> \n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { title }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.onRemove(props.info)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n}\n\nconst GymClass = withTheme(GymClassRaw)\n\n\nfunction EmptyClassRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Classes!\n        </Typography>\n      </TableCell>  \n    </TableRow>\n  )\n}\nconst EmptyClass = withTheme(EmptyClassRaw)\n\n\n\nclass GymClassList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      isOwner: props.isOwner,\n      boxID: props.boxID,\n      redirect: false,\n      redirectTo: \"\",\n      filteredGymClasses:[],\n      gymClasses: [],\n      removeClassID: \"\",\n      removeClassTitle: \"\",\n      openModal: false\n    }\n  }\n\n  componentDidMount(){\n    console.log(this.state)\n    this.getGymClasses(this.state.boxID)\n  }\n\n  getGymClasses(boxID){\n    if(boxID && ! this.gymClassListener){\n      this.gymClassListener = getGymClasses(this.state.boxID)\n      .onSnapshot(ss => {\n        console.log(ss)\n        if(!ss.empty){\n          let classes = []\n          ss.forEach(doc => {\n            classes.push(doc.data())\n          })\n          this.setState({gymClasses: classes, filteredGymClasses: classes})\n        }else{\n          this.setState({gymClasses: [], filteredGymClasses: []})\n        }\n      },\n      err => {console.log(err)})\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  componentDidUpdate(){\n    this.getGymClasses(this.state.boxID)\n  }\n\n  componentWillUnmount(){\n    if(this.gymClassListener){\n      this.gymClassListener()\n    }\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){   \n    }\n  }\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredGymClasses = this.state.gymClasses.filter(gymClass =>{\n      return gymClass[\"title\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredGymClasses: filteredGymClasses})\n  }\n\n  onRowClick(ev, id){\n    let tagName = ev.target.tagName\n    if([\"span\", \"svg\", \"path\"].indexOf(tagName) < 0){\n      this.setState({redirect: true, redirectTo: id})\n    }\n  }\n\n  handleRemoveGymClass(){\n    this.closeModal()\n    if(!this.state.boxID && !this.state.removeClassID){\n      this.props.onAlert({type: \"error\", message: \"Class info missing!\"})\n      return\n    }\n    removeGymClass(this.state.boxID, this.state.removeClassID)\n    .then((res) => {\n      console.log(res)\n      this.props.onAlert({type: \"success\", message: \"Deleted class!\"})\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  onRemove(gymClass){\n    this.setState({openModal: true, removeClassID: gymClass.gymClassID, removeClassTitle: gymClass.title})\n  }\n\n  closeModal(){\n    this.setState({openModal: false})\n  }\n\n  render () {\n    console.log(this.state.gymClasses)\n    return (\n      <Grid item xs={12}>\n        {this.state.redirect ?\n          <Redirect to={this.state.redirectTo} />\n        :\n          <React.Fragment></React.Fragment>\n        }\n\n        <Grid item xs={12}>\n\n          <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n            <Paper elevation={2} component=\"form\">\n              <TextField\n                fullWidth\n                  variant=\"outlined\"\n                  onKeyUp={this.onKeyUp.bind(this)}\n                  onChange={this.onChange.bind(this)}\n                  placeholder=\"Search Classes\"\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">\n                        <SearchIcon color=\"primary\" />\n                      </InputAdornment>\n                    )\n                  }}\n              />\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12}>\n            <TableContainer>\n              <Table stickyHeader>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Classes</TableCell>\n                    <TableCell></TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                {this.state.filteredGymClasses.length > 0?\n                  this.state.filteredGymClasses.map((gymClass, i) => {\n                    return <GymClass \n                            key={i} \n                            info={gymClass} \n                            onRemove={this.onRemove.bind(this)}\n                            isOwner={this.props.isOwner}\n                            onRowClick={this.onRowClick.bind(this)}\n                            />\n                  })\n                :\n                  <EmptyClass />\n                }\n                \n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Grid>\n        </Grid>\n        <ActionCancelModal\n          open={this.state.openModal}\n          actionText=\"Remove\"\n          cancelText=\"Cancel\"\n          modalText={`Remove Class (${this.state.removeClassTitle})?`}\n          onAction={this.handleRemoveGymClass.bind(this)}\n          onClose={this.closeModal.bind(this)}\n        />\n      </Grid>\n    )\n  }\n}\n\n\n\nexport default GymClassList = withTheme(GymClassList)\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\n\n\nexport default function mTea(){}\n\n/*\n\tWods\n*/\n\nexport function setWod(boxID, gymClassID, title, wodText, scoreType){\n\tlet fs = firebase.firestore();\n\tlet doc = fs.collection(\"wods\").doc()\n\tlet data = {\n\t\twodID: doc.id,\n\t\tboxID: boxID,\n\t\tgymClassID: gymClassID,\n\t\ttitle: title,\n\t\tscoreType: scoreType,\n\t\twodText: wodText,\n\t\tdate: Date.now()\n\t}\n\treturn doc.set(data)\n}\n\nexport function editWod(boxID, wodID, title, wodText, scoreType){\n\tlet fs = firebase.firestore()\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"wods\").doc(wodID).update({\n\t\t\tboxID: boxID,\n\t\t\ttitle: title,\n\t\t\twodText: wodText,\n\t\t\tscoreType: scoreType\n\t\t})\n\t\t.then(()=> {res(\"Finished updating.\")})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\n\n\nfunction getSnapshot(collectionName, fieldName, fieldID, res, rej){\n\tlet fs = firebase.firestore();\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\tif(ss.size == 0) res(1)\n\t\t\n\t\tss.forEach(doc => {\n\t\t\tconsole.log(\"delete\")\n\t\t\tconsole.log(doc.data())\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\t\t\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)\n\t\t\t\tgetSnapshot(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeWod(wodID){\n\n\tlet collectionNames = [\"wods\", \"scores\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tgetSnapshot(name, \"wodID\", wodID, res, rej)\n\t\t})\n\t})\n\t\n\treturn Promise.all(promises)\n}\n\n\n\n","// Firebase\nimport firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n// React\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport ReactMarkdown from 'react-markdown'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableContainer,\n\tTableHead, TableRow, TablePagination, TableSortLabel\n} from '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport Delete from '@material-ui/icons/Delete'\nimport Edit from '@material-ui/icons/Edit'\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport {msToDate} from \"../utils/formatting\"\n\n\n\nconst TableCell = withStyles({root:{\n\tpadding: \"4px 0px 4px 4px\"\n}})(TC)\n\n\nfunction WodRaw(props){\n\tlet title = props.info[\"title\"]\n\tlet scoreType = props.info[\"scoreType\"]\n\tlet wodText = props.info[\"wodText\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet boxID = props.info[\"boxID\"]\n\tlet date = props.info[\"date\"]\n\treturn(\n\t\t<TableRow onClick={(ev) => {\n\t\t\tlet tagName = ev.target.tagName\n\t\t\tconsole.log(\"Clcick\")\n\t\t\tif([\"path\", \"svg\"].indexOf(tagName) > -1)\n\t\t\t\treturn\n\t\t\tprops.onViewScores(`/wod/${boxID}/${wodID}`)\n\t\t}}>\n\t\t\t<TableCell>\n\t\t\t\t<Typography variant=\"subtitle2\" component=\"h2\"gutterBottom>\n\t\t\t\t\t{msToDate(date)}\n\t\t\t\t</Typography>\n\t\t\t</TableCell>\n\t\t\t<TableCell colSpan={2}>\n\t\t\t\t<Typography variant=\"subtitle2\" component=\"h2\"gutterBottom>\n\t\t\t\t\t{title}\n\t\t\t\t</Typography>\n\t\t\t</TableCell>\n\t\t\t<TableCell align=\"right\">\n\t\t\t{ props.showOwnerBtns ?\n\t\t\t    <React.Fragment>\n\t\t\t\t    <Button size=\"small\"\n\t\t\t\t    \tcolor=\"secondary\"\n\t\t\t\t    \tonClick={() => props.handleEdit(props.info)}>\n\t\t\t\t    \t<Edit />\n\t\t\t\t    </Button>\n\t\t\t\t    <Button size=\"small\"\n\t\t\t\t    \tonClick={() => props.handleRemove(props.info)}>\n\t\t\t\t    \t<Delete color=\"error\"/>\n\t\t\t    \t</Button>\n\t\t\t    </React.Fragment>\n\t\t  \t\t:\n\t\t  \t\t<React.Fragment></React.Fragment>\n\t  \t\t}\n\t\t\t</TableCell>\n\t\t</TableRow>\n\t)\n}\nconst Wod = withTheme(WodRaw)\n\nfunction EmptyWodRaw(props){\n\treturn(\n\t  <TableRow>\n\t\t<TableCell colSpan={3} align=\"center\">\n\t\t  <Typography variant=\"subtitle1\" color=\"primary\">\n\t\t\tNo Workouts!\n\t\t  </Typography>\n\t\t</TableCell>\n\t  </TableRow>\n\t)\n  }\nconst EmptyWod = withTheme(EmptyWodRaw)\n\nconst StyledTablePagination = withStyles({\n\troot:{\n\t\toverflow: \"hidden\"\n\t},\n\tactions:{\n\t\tmargin: \"0px\"\n\t}\n})(TablePagination)\n\nclass SearchSortTable extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\theaders: props.headers,\n\t\t\trows: props.rows,\n\t\t\tfilteredRows: props.filteredRows,\n\t\t\torderTableBy: \"date\",\n\t\t\torderTable: \"asc\",\n\t\t\tpageNum: 0,\n\t\t\trowsPerPage:5,\n\t\t\tpageStart: 0,\n\t\t\tpageEnd: 5,\n\t\t\tredirectUrl: \"\",\n\t\t\tredirect: false\n\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn state.rows.length > 0? state: props\n\t}\n\n\t/*\n\t\tSearch Table\n\t*/\n\tonKeyUp(data){\n\t\tif((data.keyCode || data.which) == 13){\n\n\t\t}\n\t}\n\n\tonChange(ev){\n\t\tlet val = ev.target.value\n\t\tconsole.log(val)\n\t\tlet filteredRows = this.state.rows.filter(wod =>{\n\t\t  return wod[\"title\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\n\t\tthis.setState({filteredRows: filteredRows})\n\t}\n\n\tdescendingComparator(a, b, orderBy) {\n\t\tif(b[orderBy] < a[orderBy]){\n\t\t\treturn -1;\n\t\t}\n\t\tif(b[orderBy] > a[orderBy]){\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetComparator(order, orderBy) {\n\t\treturn order === 'desc'\n\t\t? (a, b) => this.descendingComparator(a, b, orderBy)\n\t\t: (a, b) => -this.descendingComparator(a, b, orderBy);\n\t}\n\n\tstableSort(comparator) {\n\t\tlet arr = this.state.filteredRows\n\t\tconst stabilizedThis = arr.map((el, index) => [el, index]);\n\n\t\tstabilizedThis.sort((a, b) => {\n\t\t\tconst order = comparator(a[0], b[0]);\n\n\t\t\tif (order !== 0) return order;\n\t\t\treturn a[1] - b[1];\n\t\t});\n\t\treturn stabilizedThis.map((el) => el[0]);\n\t}\n\n\tcreateSortHandler(orderBy){\n\t\tlet isAsc =\n\t\t\tthis.state.orderTableBy === orderBy &&\n\t\t\tthis.state.orderTable === \"asc\"\n\t\tthis.setState({\n\t\t\torderTableBy: orderBy,\n\t\t\torderTable: isAsc? \"desc\" : \"asc\"\n\t\t})\n\t}\n\n\thandleChangePage(ev, newPage){\n\t\tlet start = newPage * this.state.rowsPerPage\n\t\tlet end = (newPage * this.state.rowsPerPage) + this.state.rowsPerPage\n\t\tthis.setState({\n\t\t\tpageNum: newPage,\n\t\t\tpageStart: start,\n\t\t\tpageEnd: end\n\t\t})\n\t}\n\n\thandleChangeRowsPerPage(ev){\n\t\tlet rowsPerPage = parseInt(ev.target.value)\n\t\tconsole.log(rowsPerPage)\n\t\tthis.setState({\n\t\t\tpageNum: 0,\n\t\t\trowsPerPage: rowsPerPage,\n\t\t\tpageStart: 0,\n\t\t\tpageEnd: rowsPerPage\n\t\t})\n\t}\n\n\n\tonViewScores(url){\n\n\t\tthis.setState({redirectUrl: url, redirect: true})\n\t}\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12} align=\"center\">\n\t\t\t{this.state.redirect?\n\t\t\t\t<Redirect to={this.state.redirectUrl} />\n\t\t\t:\n\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t}\n\n\t\t    <Paper style={{margin: \"16px 0px 0px 0px\"}} component=\"form\">\n\t\t\t<TextField\n\t\t\tfullWidth\n\t\t\tvariant=\"outlined\"\n\t\t\tonKeyUp={this.onKeyUp.bind(this)}\n\t\t\tonChange={this.onChange.bind(this)}\n\t\t\tplaceholder=\"Search\"\n\t\t\tInputProps={{\n\t\t\t  startAdornment: (\n\t\t\t    <InputAdornment position=\"start\">\n\t\t\t      <SearchIcon color=\"primary\" />\n\t\t\t    </InputAdornment>\n\t\t\t  ),\n\t\t\t}}\n\t\t\t/>\n\t\t\t</Paper>\n\n\t\t\t<Grid container item xs={12}>\n\t\t\t<TableContainer style={{margin: \"8px 0px 0px 0px\"}}>\n  \t\t\t<Table>\n\t\t\t<TableHead>\n\t\t    \t<TableRow>\n\t\t    \t{\n\t\t    \t\tthis.state.headers.map((header, i)=>{\n\t\t\t        \treturn (\n\t\t\t        \t<TableCell key={i}>\n\t\t\t        \t\t{\n\t\t\t        \t\t\theader.sortable?\n\t\t\t\t\t        \t\t<TableSortLabel\n\t\t\t\t\t\t              active={header.id === this.state.orderTableBy}\n\t\t\t\t\t\t              direction={header.id === this.state.orderTableBy?  this.state.orderTable: \"asc\"}\n\t\t\t\t\t\t              onClick={()=>{ this.createSortHandler(header.id)}}\n\t\t\t\t\t\t            >\n\t\t\t\t\t        \t\t\t{header.label}\n\t\t\t\t\t\t\t        </TableSortLabel>\n\t\t\t\t\t\t\t    :\n\t\t\t\t\t\t\t    \t<React.Fragment>{header.label}</React.Fragment>\n\t\t\t        \t\t}\n\t\t\t        \t</TableCell>)\n\t\t    \t\t})\n\t\t    \t}\n\t\t    \t</TableRow>\n\t\t    </TableHead>\n\n\t\t    <TableBody>\n\t\t\t\t{this.state.filteredRows.length > 0\n\t\t\t\t?\n\t\t\t\t\tthis.stableSort(\n\t\t\t\t\t\tthis.getComparator(\n\t\t\t\t\t\t\tthis.state.orderTable,\n\t\t\t\t\t\t\tthis.state.orderTableBy\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.slice(this.state.pageStart, this.state.pageEnd)\n\t\t\t\t\t.map((row, i) => {\n\t\t\t\t\t\treturn <Wod key={i}\n\t\t\t\t\t\t\thandleView={this.props.handleView}\n\t\t\t\t\t\t\thandleRemove={this.props.handleRemove}\n\t\t\t\t\t\t\thandleEdit={this.props.handleEdit}\n\t\t\t\t\t\t\tinfo={row}\n\t\t\t\t\t\t\tshowOwnerBtns={this.props.showOwnerBtns}\n\t\t\t\t\t\t\tonViewScores={this.onViewScores.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t:\n\n\t\t\t\t\t<EmptyWod />\n\n\t\t\t\t}\n\t\t    </TableBody>\n  \t\t\t</Table>\n\t\t\t\t<StyledTablePagination\n\t\t\t\trowsPerPageOptions={[5, 10, 25]}\n\t\t\t\tcomponent={Grid}\n\t\t\t\tcount={this.state.filteredRows.length}\n\t\t\t\trowsPerPage={this.state.rowsPerPage}\n\t\t\t\tpage={this.state.pageNum}\n\t\t\t\tonChangePage={this.handleChangePage.bind(this)}\n\t\t\t\tonChangeRowsPerPage={this.handleChangeRowsPerPage.bind(this)}\n\t\t\t\t/>\n\t\t    </TableContainer>\n\t\t\t</Grid>\n\t\t\t<Grid item xs ={12}>\n\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n  }\n}\n\nexport default SearchSortTable = withTheme(SearchSortTable)\n\n","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// WodTrackrr\nimport ScoreView from \"../scores/scoreView\"\nimport GymClassList from \"../gymClasses/gymClassList\"\n\nimport { removeWod } from \"../../utils/firestore/wods\"\nimport SearchSortTable from \"../searchSortTable\"\nimport ActionCancelModal from \"../actionCancelModal\"\nimport \"../../styles.css\"\n\n\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass BoxView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tconsole.log(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\tboxID: props.boxID,\n\t\t\tboxMD: {}\n\t\t}\n\t}\n\n\n\tgetBoxListener(){\n\t\tif(!this.boxListener){\n\t\t\tthis.boxListener = fs.collection(\"boxes\").doc(this.state.boxID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tconsole.log(ss)\n\t\t\t\tconsole.log(this.state.boxID)\n\t\t\t\tconsole.log(ss.data())\n\n\t\t\t\tif(ss.exists){\n\n\t\t\t\t\tthis.setState({boxMD: ss.data()})\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({boxMD: {}})\n\t\t\t\t}\n\t\t\t}, err => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t}\n\t}\n\n\t\n\tcheckListeners(){\n\t\tif(this.boxListener === undefined)\n\t\t\tthis.getBoxListener()\t\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.checkListeners()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\t\n\tcomponentDidUpdate(){\n\t\tthis.checkListeners()\n\t}\n\n\tcomponentWillUnmount(){\t\n\t\tif(this.boxListener)\n\t\t\tthis.boxListener()\n\t}\n\n\trender(){\n\t\tlet uid = this.state.userMD.uid\n\t\tlet boxOwnerUid = this.state.boxMD[\"uid\"]\n\t\tlet showOwnerBtns = uid === boxOwnerUid\n\n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t\t{Object.keys(this.state.boxMD).length > 0 ?\n\t\t\t\t\t<GymClassList \n\t\t\t\t\t\tuser={this.state.user}\n\t\t\t\t\t\tuserMD={this.state.userMD}\n\t\t\t\t\t\tboxID={this.state.boxID}\n\t\t\t\t\t\tisOwner={showOwnerBtns}\n\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t}\n\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\nexport default BoxView = withTheme(BoxView);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nexport default function mTea(){}\n\n\n\n\nexport function removeFollow(followID){\n\tconst fs = firebase.firestore()\n\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"following\").doc(followID).delete()\n\t\t.then(() => {\n\t\t\tres(\"Finished delete.\")\n\t\t})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\nexport function getFollowers(uid){\n\tlet fs = firebase.firestore()\n\treturn fs.collection(\"following\").where(\"uid\", \"==\", uid)\n}\n\nexport function setFollow(uid, username, boxID, title){\n\tlet fs = firebase.firestore()\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"following\").where(\"uid\", \"==\", uid).get()\n\t\t.then(ss => {\n\t\t\tlet isFollowing = false\n\t\t\tif(!ss.empty){\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tif(doc.data().boxID === boxID)\n\t\t\t\t\t\tisFollowing = true\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif(!isFollowing){\n\t\t\t\tlet doc = fs.collection(\"following\").doc()\n\t\t\t\tlet data = {\n\t\t\t\t\tfollowID: doc.id,\n\t\t\t\t\tuid: uid,\n\t\t\t\t\tusername: username,\n\t\t\t\t\tboxID: boxID,\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tdate: Date.now()\n\t\t\t\t}\n\t\t\t\tdoc.set(data).then(() => {res(\"Followed.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t}\n\t\t})\n\t})\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport \n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport { Alert } from '@material-ui/lab'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport Delete from '@material-ui/icons/Delete'\nimport Waves from '@material-ui/icons/Waves'\nimport Whatshot from '@material-ui/icons/Whatshot'\n\nimport BoxView from \"./boxView\" \n\nimport { setFollow, removeFollow } from \"../../utils/firestore/follows\"\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction BoxRaw(props){\n  let title = props.info[\"title\"]\n  let boxID = props.info[\"boxID\"]\n\n  return(\n    <TableRow id={`box/${boxID}`} onClick={(ev) => props.onRowClick(ev, `box/${boxID}`)}>\n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { title }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isUserFollowing ?\n          <IconButton variant=\"outlined\"\n              onClick={()=>{props.handleUnfollow(boxID)}}>\n            <Whatshot color=\"primary\" />\n          </IconButton>\n        :\n          <IconButton\n            onClick={()=>{props.handleFollow(props.info)}}>\n            <Whatshot style={{fill: props.theme.palette.text.primary}}/>\n          </IconButton>\n        }\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.handleRemoveBox(boxID, title)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n \n}\nconst Box = withTheme(BoxRaw)\n\n\nfunction EmptyBoxRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Gyms!\n        </Typography>\n      </TableCell>  \n    </TableRow>\n  )\n}\nconst EmptyBox = withTheme(EmptyBoxRaw)\n\nclass BoxSearch extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      isOwner: props.isOwner,\n      allBoxes: props.allBoxes,\n      filteredBoxes: props.filteredBoxes,\n      userFollowing: {},\n      redirect: false,\n      redirectTo: \"\"\n    }\n  }\n\n  componentDidMount(){\n    this.listenForFollowing()\n  }\n\n  componentWillUnmount(){\n    if(this.followListener){\n      this.followListener()\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state.user? state: props\n  }\n\n  componentDidUpdate(){\n    this.listenForFollowing()\n  }\n  \n  listenForFollowing(){\n    if(this.state.user && !this.followListener){\n      this.followListener = fs.collection(\"following\").where(\"uid\", \"==\", this.state.user.uid)\n      .onSnapshot(ss => {\n        let following = {}\n        if(!ss.empty){\n          \n          ss.forEach(doc =>{\n            let data = doc.data()\n            following[data.boxID] = data.followID\n          })\n        }\n        \n        this.setState({userFollowing: following})\n      }, \n      err => console.log(err))\n    }\n  }\n  \n  onChange(ev){\n    let val = ev.target.value\n    let filteredBoxes = this.state.allBoxes.filter(box =>{\n      return box[\"title\"].toLowerCase().includes(val.toLowerCase())\n    })\n    console.log(\"filteredBoxes\")\n    console.log(filteredBoxes)\n    this.setState({filteredBoxes: filteredBoxes})\n  }\n  \n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){   \n    }\n  }\n  \n  isUserFollowing(boxID){\n    return (this.state.userFollowing[boxID])? true: false\n  }\n  \n  handleFollow(boxInfo){\n    setFollow(this.state.user.uid, this.state.userMD.username, boxInfo.boxID,\n              boxInfo.title)\n    .then(res => {console.log(\"Succefully followed.\")})\n    .catch(err => {console.log(err)})\n  }\n\n  handleUnfollow(boxID){\n    let followID = this.state.userFollowing[boxID]\n\n    removeFollow(followID)\n    .then(res => {\n      if(res){\n        console.log(\"Succefully unfollowed.\")\n      }\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  onRowClick(ev, id){\n    let tagName = ev.target.tagName\n    if([\"span\", \"svg\", \"path\", \"BUTTON\", \"SPAN\"].indexOf(tagName) < 0){\n      this.setState({redirect: true, redirectTo: id})\n    }\n  }\n\n  render () {\n    return (\n      <Grid item xs={12} style={{marginTop: \"3vh\"}}>\n        {this.state.redirect ?\n          <Redirect to={this.state.redirectTo} />\n        :\n          <React.Fragment></React.Fragment>\n        }\n        <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n        <Paper elevation={2} component=\"form\">\n           <TextField\n             fullWidth\n              variant=\"outlined\"\n              onKeyUp={this.onKeyUp.bind(this)}\n              onChange={this.onChange.bind(this)}\n              placeholder=\"Search Boxes\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <SearchIcon color=\"primary\" />\n                  </InputAdornment>\n                )\n              }}\n          />\n        </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <TableContainer>\n            <Table stickyHeader>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Boxes</TableCell>\n                  <TableCell></TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n    { this.state.filteredBoxes.length > 0?\n      this.state.filteredBoxes.map((box, i) => {\n        return <Box \n                key={i} \n                theme={this.props.theme}\n                info={box} \n                color={this.props.theme.palette.primary.mainGrad}\n                handleBoxView={this.props.handleBoxView}\n                handleRemoveBox={this.props.handleRemoveBox}\n                isOwner={this.props.isOwner}\n                isUserFollowing={this.isUserFollowing(box[\"boxID\"])}\n                handleFollow={this.handleFollow.bind(this)}\n                handleUnfollow={this.handleUnfollow.bind(this)}\n                onRowClick={this.onRowClick.bind(this)}\n                />\n      })\n    :\n      <EmptyBox />\n    }\n\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\n\n\nexport default BoxSearch = withTheme(BoxSearch)\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment }\nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nimport BoxView from \"../comps/boxes/boxView\"\nimport BoxSearch from \"../comps/boxes/boxSearch\"\n\nimport \"../styles.css\"\n\nlet fs = firebase.firestore()\n\nclass BoxSearchPage extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      allBoxes: []\n    }\n  }\n\n  componentDidMount(){\n    this.allBoxesListener = fs.collection(\"boxes\")\n    .onSnapshot(ss => {\n      if(!ss.empty){\n        let boxes = []\n        ss.forEach(doc => {\n          boxes.push(doc.data())\n        })\n        boxes.sort((x, y) => {\n          return x[\"title\"].toLowerCase() > y[\"title\"].toLowerCase() ? -1 : 1\n        })\n        this.setState({\n          allBoxes: boxes\n        })\n      }\n    })\n  }\n\n  componentWillUnmount(){\n    if(this.allBoxesListener){\n      this.allBoxesListener()\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} >\n        {\n          this.state.allBoxes.length > 0?\n          <BoxSearch\n              user={this.state.user}\n              userMD={this.state.userMD}\n              allBoxes={this.state.allBoxes}\n              filteredBoxes={this.state.allBoxes}\n              isOwner={false}\n              isReadOnly={false}\n              handleRemoveBox={this.props.handleRemoveBox}\n          />\n          :\n          <Grid item xs={12}>\n            <Paper elevation={2}>\n              No boxes!\n            </Paper>\n          </Grid>\n        }\n  \t\t</Grid>\n    )\n  }\n}\n\nexport default BoxSearchPage = withTheme(BoxSearchPage);\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \n\nimport React, { Component } from 'react'\nimport {\n  Grid, TextField, Button, Paper, Typography , Collapse, IconButton\n} from '@material-ui/core';\n\nimport { withTheme } from '@material-ui/core/styles';\n\n\n\nclass ResetPassword extends Component {\n   constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\"\n    }\n   }\n\n\n  static getDerivedStateFromProps(props, state){\n    return state.user? state: props\n  }\n\n  handleSubmit(ev){\n\n    let currentPassword = this.state.currentPassword\n    let newPassword = this.state.newPassword\n    let confirmPassword = this.state.confirmPassword\n    \n    console.log(this.state)\n    console.log(currentPassword, newPassword, confirmPassword)\n    \n    if(newPassword === confirmPassword){\n\n      let creds = firebase.auth.EmailAuthProvider.credential(\n          this.state.user.email,\n          currentPassword\n      );\n\n      this.state.user.reauthenticateWithCredential(creds)\n      .then(() => {\n          this.state.user.updatePassword(newPassword)\n          .then((res) => {\n            console.log(\"Changed password.\")\n\n          }).catch((err) => {\n            console.log(err)\n          })\n\n      }).catch((err) => {\n          console.log(err)\n          console.log(\"Incorrect password.\")\n      })\n    }else{\n       console.log(`New passwords do not match.`)\n    }\n  }\n\n\n  onChange(ev){\n    console.log(ev)\n    ev.persist()\n    const  { name, value } = ev.target\n    this.setState({[name]: value})\n  }\n\n\n  render () {\n    return (\n      <React.Fragment>\n      {\n        this.state.user?\n          <Paper elevation={6}>\n          <Grid container item xs={12}>\n            <Grid item xs={12} align=\"center\">\n              <Typography variant=\"h3\">\n                Change Password\n              </Typography>\n            </Grid>\n            \n            <Grid item xs={12} align=\"center\">\n              <TextField\n                  id=\"currentPassword\"\n                  type=\"password\"\n                  name=\"currentPassword\"\n                  onChange={this.onChange.bind(this)}\n                  style={{ margin: 8 }}\n                  placeholder=\"Current Password\"\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n            \n              <TextField\n                  id=\"password\"\n                  type=\"password\"\n                  name=\"newPassword\"\n                  color=\"primary\"\n                  onChange={this.onChange.bind(this)}\n                  style={{ margin: 8 }}\n                  placeholder=\"New Password\"\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n              </Grid>\n\n              <Grid item xs={12} align=\"center\">\n                  <TextField\n                  id=\"passwordConfirm\"\n                  name=\"confirmPassword\"\n                  onChange={this.onChange.bind(this)}\n                  type=\"password\"\n                  style={{ margin: 8 }}\n                  placeholder=\"Confirm Password\"\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                /> \n              </Grid>\n\n              <Grid item xs={12} align=\"center\" style={{margin: \"16px 0px 16px 0px\"}}>\n                <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n                  Change Password\n                </Button>\n              </Grid>\n          </Grid>\n          </Paper>\n        :\n          <h1>Loading</h1>\n      }\n      </React.Fragment>\n    );\n  }\n}\n\n\n\nexport default ResetPassword = withTheme(ResetPassword)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\nimport { Redirect } from \"react-router\";\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\n\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport \"../../styles.css\"\n\n\n\nconst fs = firebase.firestore();\n\nclass DeleteAccount extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            user: props.user,\n            userConfirmText: \"\",\n            redirectUrl: \"\",\n            redirect: false\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n       \n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn state.user? state: props\n\t}\n\n    componentWillUnmount(){\n    }\n\n    confirmText(){\n        return this.state.user.uid.slice(-5)\n    }\n\n    onChange(ev){\n        let value = ev.target.value\n        this.setState({userConfirmText: value})\n    }\n\n    removeUser(){\n        if(this.state.userConfirmText === this.confirmText()){\n            console.log(\"Deleting user, actual code commented out.\")\n            // this.state.user.delete()\n            // .then(() => {\n            //     console.log(\"User deleted.\")\n            // })\n            // .catch(err => {\n            //     console.log(\"Error deleting user.\")\n            // })\n            this.setState({redirect: true, redirectUrl: \"/boxSearch\"})\n\n        }else{\n            console.log(\"User entered incorrect confirmation.\")\n        }\n    }\n\n\t\n  render(){\n\t\treturn( \n            <Paper elevation={6}>\n                {this.state.redirect?\n                    <Redirect to={this.state.redirectUrl} /> : <React.Fragment></React.Fragment>\n                }\n                <Grid item container align=\"center\" xs={12} style={{marginTop: \"16px\"}}>\n                    <Grid item xs={12}>\n                        <Typography>Type to Confirm Delete: {this.confirmText()}</Typography>\n                    </Grid>\n                    <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                        <TextField\n                            type=\"text\"\n                            placeholder=\"Type username to confirm delete\"\n                            onChange={this.onChange.bind(this)}\n                        />\n                    </Grid>\n                    <Grid item xs={12} style={{marginTop: \"32px\"}}>\n                        <Button size=\"small\" fullWidth variant=\"outlined\"\n                            onClick={this.removeUser.bind(this)}\n                            style={{color: this.props.theme.palette.error.main}}>\n                                Confirm Remove\n                        </Button>\n                    </Grid>\n                </Grid>\n            </Paper>\n    )}\n}\n\nexport default DeleteAccount = withTheme(DeleteAccount)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n\nexport function setUsername(uid, username){\n\tlet data = {username: username}\n\tlet promises = [fs.collection(\"users\").doc(uid).update(data)]\n\n\tfs.collection(\"scores\").where(\"uid\", \"==\", uid)\n\t.get().then(ss => {\n\t\tlet promises = ss.docs.map(doc => {\n\t\t\tconsole.log(doc.data())\n\t\t\treturn fs.collection(\"scores\").doc(doc.data().scoreID).update(data)\n\t\t})\n\t})\n\n\tfs.collection(\"following\").where(\"uid\", \"==\", uid)\n\t.get().then(ss => {\n\t\tlet promises = ss.docs.map(doc => {\n\t\t\tconsole.log(doc.data())\n\t\t\treturn fs.collection(\"following\").doc(doc.data().followID).update(data)\n\t\t})\n\t})\n\t\n\treturn new Promise((res, rej) => {\n\t\tPromise.all(promises)\n\t\t.then(() => {res(\"Updated!\")})\n\t\t.catch(err => {rej(err)})\n\t})\n}","import React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, TableBody, Table, TableContainer,\n          TableHead, TableRow }\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\nimport { withTheme, withStyles } from '@material-ui/core/styles'\n\nimport Edit from '@material-ui/icons/Edit'\nimport { setUsername } from '../../utils/firestore/users'\nimport \"../../styles.css\"\n\n\nconst TableCell = withStyles({root:{\n  borderBottom: \"none\"\n}})(TC)\nconst USERNAME_MAX_LEN = 12\nconst USERNAME_MAX_LENGTH_ERR_MSG = \"Username cannot be longer than 12 characters\"\nconst USERNAME_ERR_MSG = \"Username can only contain letters & numbers\"\n\nclass UsernamePanel extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n\n    return props\n  }\n\n  updateUsername(ev){\n    let usernameInput = document.getElementById('updateUsernameInput')\n\n    if(usernameInput.style.display === \"none\"){\n      usernameInput.style.display = \"block\"\n    }else{\n      let re = /\\W/g  // match non word characters ^[A-Za-z0-9]\n\n      if(usernameInput.value.length > USERNAME_MAX_LEN){\n        this.props.onAlert({\n          type: \"warning\",\n          message: USERNAME_MAX_LENGTH_ERR_MSG\n        })\n        return\n      }\n      if(re.exec(usernameInput.value) !== null ){\n        this.props.onAlert({\n          type: \"warning\",\n          message: USERNAME_ERR_MSG\n        })\n        return\n      }\n      if(usernameInput.value.length <= 0){\n        return\n      }\n\n      setUsername(this.state.userMD.uid, usernameInput.value)\n      .then((res) => {\n        console.log(res)\n      })\n      .catch(err => { console.log(err) })\n    }\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n        this.updateUsername()\n    }\n  }\n\n\n\n  render () {\n    return (\n    <Grid container id=\"usernamePanel\" >\n    {\n      !this.state.userMD\n      ?\n        <h1> Loading </h1>\n      :\n        <TableContainer>\n            <Table>\n              <TableBody>\n              <TableRow>\n                <TableCell align=\"left\">\n                  Username\n                </TableCell>\n                <TableCell colSpan={2} align=\"left\">\n                  <Typography gutterBottom variant=\"h5\">\n                    {this.state.userMD.username}\n                  </Typography>\n                </TableCell>\n              </TableRow>\n\n                <TableRow>\n                  <TableCell>\n                    <TextField\n                      id=\"updateUsernameInput\"\n                      type=\"text\"\n\n                      pattern=\"[A-Za-z]{12}\"\n                      inputProps={{\n                        title: \"Letters only, max length 12\",\n                        placeholder: \"New username\"\n                      }}\n                      onKeyUp={this.onKeyUp.bind(this) }\n                      margin=\"normal\"\n                      color=\"primary\"\n                      InputLabelProps={{\n                        shrink: true,\n                      }}\n                    />\n                  </TableCell>\n\n                  <TableCell align=\"left\">\n                    <Typography gutterBottom variant=\"h5\">\n                      <Button size=\"small\" variant=\"outlined\" color=\"primary\"\n                          onClick={this.updateUsername.bind(this)}>\n                          Update\n                      </Button>\n                    </Typography>\n                  </TableCell>\n                </TableRow>\n\n              </TableBody>\n            </Table>\n        </TableContainer>\n    }\n    </Grid>\n    );\n  }\n}\n\nexport default UsernamePanel = withTheme(UsernamePanel)","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tTableRow, TableHead, TableContainer,\n\tTableBody, Table, TableCell, IconButton\n}\nfrom '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\nimport { ArrowBackIos } from '@material-ui/icons';\n\nimport ResetPassword from \"../comps/settings/resetPassword\"\nimport DeleteAccount from \"../comps/profile/deleteAccount\"\nimport UsernamePanel from \"../comps/profile/usernamePanel\"\n\n\nlet fs = firebase.firestore();\n\nconst HOME = \"home\"\nconst CHANGE_USERNAME = \"change username\"\nconst CHANGE_PASSWORD = \"change password\"\nconst DELETE_ACCOUNT = \"delete account\"\n\n\nfunction SettingsRowRaw(props){\n    return(\n        <TableRow onClick={() => { props.openSetting(props.info.id) }}>\n            <TableCell align=\"left\" colSpan={2}>\n                {props.info.title}\n            </TableCell>\n        </TableRow>\n    )\n}\n\nconst SettingsRow = withTheme(SettingsRowRaw)\n\n\n\n\nclass Settings extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n        user: props.user,\n        userMD: props.userMD,\n        currentPage: HOME\n    }\n\n    this.settings = [\n        {\n            id: CHANGE_USERNAME,\n            title: \"Change Username\",\n\n        },\n        {\n            id: CHANGE_PASSWORD,\n            title: \"Change Password\",\n\n        },\n        {\n            id: DELETE_ACCOUNT,\n            title: \"Delete Account\",\n\n        },\n    ]\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n    let pageChange = props.userMD.currentPage !== state.userMD.currentPage\n\n\treturn pageChange? state: props\n  }\n\n  openSetting(id){\n      console.log(\"clicked \", id)\n    this.setState({\n        currentPage: id\n    })\n  }\n\n  handleBack(){\n      this.setState({currentPage: HOME})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12}>\n            {this.state.currentPage === HOME?\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                                <TableCell align=\"center\" colSpan={2}>\n                                    <Typography gutterBottom variant=\"h3\">\n                                        Settings\n                                    </Typography>\n                                </TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {this.settings.map((setting, i) => {\n                            return(\n                                <SettingsRow key={i}\n                                    info={setting}\n                                    openSetting={this.openSetting.bind(this)}\n                                />\n                            )\n                        })}\n                    </TableBody>\n                </Table>\n\n            : this.state.currentPage === CHANGE_PASSWORD?\n                <Grid container item xs={12}>\n                    <Grid item xs={12}>\n                        <IconButton style={{color: this.props.theme.palette.text.primary}} onClick={this.handleBack.bind(this)}>\n                            <ArrowBackIos />\n                        </IconButton>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <ResetPassword user={this.state.user} />\n                    </Grid>\n\n                </Grid>\n            : this.state.currentPage == DELETE_ACCOUNT?\n                <Grid container item xs={12}>\n                    <Grid item xs={12}>\n                        <IconButton style={{color: this.props.theme.palette.text.primary}} onClick={this.handleBack.bind(this)}>\n                            <ArrowBackIos />\n                        </IconButton>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <DeleteAccount user={this.state.user} />\n                    </Grid>\n\n                </Grid>\n            : this.state.currentPage === CHANGE_USERNAME?\n                <Grid container item xs={12}>\n                    <Grid item xs={12}>\n                        <IconButton style={{color: this.props.theme.palette.text.primary}} onClick={this.handleBack.bind(this)}>\n                            <ArrowBackIos />\n                        </IconButton>\n                    </Grid>\n                    <Grid item xs={12}>\n                    <UsernamePanel\n                        userMD={this.state.userMD}\n                        onAlert={this.props.onAlert}\n                    />\n                    </Grid>\n                </Grid>\n            :\n                <span>Default</span>\n            }\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default Settings = withTheme(Settings);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"; \n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Paper } from '@material-ui/core';\nimport { Redirect } from 'react-router-dom';\nimport { withTheme } from '@material-ui/core/styles';\n\nclass RegisterUser extends Component {\n  constructor(props){\n    super(props)\n    this.state = {redirect: false}\n  }\n\n  componentDidMount(){\n  }\n\n  handleSubmit(ev){\n    let email = document.getElementById('email')\n\n    let pass1 = document.getElementById('password')\n    let pass2 = document.getElementById('passwordConfirm')\n    \n    console.log(email.value, pass1.value)\n    \n\n    if(pass1.value === pass2.value){\n      firebase.auth().createUserWithEmailAndPassword(email.value, pass1.value)\n      .then(res => {\n        console.log(res)\n        let fs = firebase.firestore();\n        let data = {\n          username: \"\",\n          admin: false,\n          uid: res.user.uid,\n          accountType: \"athlete\"\n        }\n\n        fs.collection('users').doc(res.user.uid).set(data)\n      })\n      .catch(err => {\n        console.log(err)\n      });\n    }else{\n      alert(\"Passwords do not match\")\n    }\n  }\n\n  render () {\n    return (\n      <React.Fragment>\n      {this.state.redirect ?\n      \t<Redirect to=\"/\" />\n\t\t\t:\n\t\t\t\t<Grid container xs={12} id=\"login\" align=\"center\" justify=\"center\">\n\t\t\t\t\t<Paper elevation={2}>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Grid item xs={12} ><h1>Register</h1></Grid>\n\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\tstyle={{ margin: 8 }}\n\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t  shrink: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/><br /><br />\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t  id=\"password\"\n\t\t\t\t\t\t\t  type=\"password\"\n\t\t\t\t\t\t\t  style={{ margin: 8 }}\n\t\t\t\t\t\t\t  placeholder=\"Password\"\n\t\t\t\t\t\t\t  margin=\"normal\"\n\t\t\t\t\t\t\t  InputLabelProps={{\n\t\t\t\t\t\t\t    shrink: true,\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t <br/><br/>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t  id=\"passwordConfirm\"\n\t\t\t\t\t\t\t  type=\"password\"\n\t\t\t\t\t\t\t  style={{ margin: 8 }}\n\t\t\t\t\t\t\t  placeholder=\"Confirm Password\"\n\t\t\t\t\t\t\t  margin=\"normal\"\n\t\t\t\t\t\t\t  InputLabelProps={{\n\t\t\t\t\t\t\t    shrink: true,\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t/> <br/><br/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t  <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n\t\t\t\t\t\t    Submit\n\t\t\t\t\t\t  </Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n        }\n        </React.Fragment>\n    );\n  }\n}\n\n\n\nexport default RegisterUser = withTheme(RegisterUser);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, Modal\n}\nfrom '@material-ui/core';\n\nimport {editWod} from \"../../utils/firestore/wods\"\n\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nvar db = firebase.database();\n\nconst StyledGrid = withStyles((theme) => ({\n\troot: {\n\t\tmarginTop: \"2.5vh\",\n\t\tmarginBottom: \"2.5vh\"\n\t},\n}))(Grid);\n\n\nclass EditWod extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\topen: props.open,\n\t\t\twodInfo: props.wodInfo,\n\t\t\tuserBoxes: props.userBoxes,\n\t\t\thasBoxes: props.hasBoxes,\n\t\t\topen: props.open,\n\t\t\tonClose: props.onClose\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\tconsole.log(\"Edit woood\")\n\t\tconsole.log(props)\n\t\tconsole.log(state)\n\n\t\treturn props\n\t}\n\n\teditWOD(){\n\t  \tlet boxID = document.getElementById(\"editOwnerBoxAddWodBoxID\").value\n\t  \tlet title = document.getElementById(\"editOwnerBoxAddWodTitle\").value\n\t  \tlet scoreType = document.getElementById(\"editOwnerBoxAddWodScoreType\").value\n\t  \tlet wodText = document.getElementById(\"editOwnerBoxAddWodWodText\").value\n\t  \tlet wodID = this.state.wodInfo[\"wodID\"]\n\n\t  \tif(!boxID || !title || !scoreType || !wodText || !wodID){\n\t  \t\tconsole.log(\"Error with input in editWod.\")\n\t  \t\tconsole.log(boxID, title, scoreType, wodText)\n\t  \t\treturn\n\t  \t}\n\n\t\tthis.props.onClose()\n\t  \teditWod(boxID, wodID, title, wodText, scoreType)\n\t  \t.then((res)=> {\n\t\t\tthis.props.onAlert({\n\t\t\ttype: \"success\",\n\t\t\tmessage: res\n\t\t})\n\t  \t})\n\t  \t.catch((err)=>{\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n\t\t})\n\t  }\n\n\thandleValChange(ev){\n\t    let wodInfo = this.state.wodInfo\n\t\tconst {name, value} = ev.target\n\t\twodInfo[name] = value\n\t\tthis.setState({\n\t      wodInfo: wodInfo\n\t  \t})\n\t}\n\n\n\trender(){\n\t\tlet scoreTypes = [\"time\", \"reps\"]\n\t\treturn(\n\n\t\t\t<Modal\n\t\t\t    open={this.state.open}\n\t\t\t    onClose={this.props.onClose}\n\t\t\t    aria-labelledby=\"edit-wod-modal\"\n\t\t\t    aria-describedby=\"edit-wod\">\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: \"50%\",\n\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\twidth: \"80vw\",\n\t\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t\t}}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\titem\n\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\txs={12}>\n\t\t\t\t\t\t<Paper style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\n\t\t\t\t\t\t\t\tEdit Wod ({this.state.wodInfo[\"wodID\"]})\n\t\t\t\t\t\t\t</Typography>\n\n\t\t\t\t\t\t\t<StyledGrid item container xs={12}>\n\t\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tnative\n\t\t\t\t\t\t\t\t\tvalue={this.state.wodInfo[\"wodID\"]}\n\t\t\t\t\t\t\t\t\tname=\"wodID\"\n\t\t\t\t\t\t\t\t\tonChange={this.handleValChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Box',\n\t\t\t\t\t\t\t\t\t\tid: 'editOwnerBoxAddWodBoxID',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ this.state.hasBoxes ?\n\t\t\t\t\t\t\t\t\t\tthis.state.userBoxes.map((box, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet boxID = box[\"boxID\"]\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={i} value={boxID}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{box[\"title\"]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\tnative\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Score Type',\n\t\t\t\t\t\t\t\t\t\tid: 'editOwnerBoxAddWodScoreType',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tname=\"scoreType\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.wodInfo['scoreType']}\n\t\t\t\t\t\t\t\t\tonChange={this.handleValChange.bind(this)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tscoreTypes.map((scoreType, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={i} value={scoreType}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{scoreType}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</StyledGrid>\n\n\t\t\t\t\t\t\t<StyledGrid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\tid=\"editOwnerBoxAddWodTitle\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\t\tvalue= {this.state.wodInfo['title']}\n\t\t\t\t\t\t\t\t\tonChange={this.handleValChange.bind(this)}\n\t\t\t\t\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\t\t\t\t\tplaceholder: \"Title\"\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StyledGrid>\n\t\t\t\t\t\t\t<StyledGrid item xs={12}>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"editOwnerBoxAddWodWodText\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"wodText\"\n\t\t\t\t\t\t\t\tstyle={{ margin: 8}}\n\t\t\t\t\t\t\t\tvalue= {this.state.wodInfo['wodText']}\n\t\t\t\t\t\t\t\tonChange={this.handleValChange.bind(this)}\n\t\t\t\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\t\t\t\tplaceholder: \"Workout here\"\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\trows={5}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</StyledGrid>\n\n\t\t\t\t\t\t<StyledGrid container item xs={12}>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={this.props.onClose}>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={this.editWOD.bind(this)}>\n\t\t\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</StyledGrid>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}\n\nexport default EditWod = withTheme(EditWod);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore()\n\nconst CLASS_ADMIN = \"classAdmins\"\nconst ADMINS = \"admins\"\nconst USERS = \"users\"\nconst NOTIFICATIONS = \"notifications\"\nconst INVITES = \"invites\"\n\n\n\nexport default function mTea(){}\n\n\n\nexport function sendAdminInvite(uid, data){\n    \n    let inviteRef = fs.collection(NOTIFICATIONS)\n           .doc(ADMINS)\n           .collection(INVITES)\n           \n\n    \n    return new Promise((res, rej) => {\n        isClassAdmin(uid, data.gymClassID).then(isAdmin => {\n            if(!isAdmin){\n                isNotificationSent(uid, data.gymClassID)\n                .then(isSent => {\n                    if(isSent){\n                        res(\"Admin notified already.\")\n                    }else{\n                        let doc = inviteRef.doc()\n                        doc.set({ ...data, adminInviteID: doc.id })\n                        .then(() => { res(\"Sent admin invite.\") })\n                        .catch(err => { rej(err) })\n                    }\n                })\n                .catch(err => {\n                    rej(err)\n                })\n            }else{\n                res(\"Already an admin.\")\n            }\n        })\n\n    }) \n}\n\nfunction isNotificationSent(uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS)\n        .doc(ADMINS)\n        .collection(INVITES)\n        .where(\"uid\", \"==\", uid)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(ss => {\n            console.log(uid, gymClassID)\n            console.log(ss.docs)\n            if(ss.empty){\n                res(false)\n            }else{\n                res(true)\n            }\n        },\n        err => { rej(err) })\n    })\n}\n\nexport function getUserAdminInvites(uid){\n    return fs.collection(NOTIFICATIONS).doc(ADMINS)\n        .collection(INVITES).where(\"uid\", \"==\", uid)\n}\n\n\nexport function removeNotification(notifyID){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS).doc(ADMINS)\n        .collection(INVITES).where(\"adminInviteID\", \"==\", notifyID)\n        .get().then(ss => {\n            if(!ss.empty){\n                ss.docs.forEach(doc => {\n                    doc.ref.delete()\n                })\n            res(\"Removed notifications.\")\n            }\n            res(\"No notifications found.\")\n        },\n        err => { rej(err) })\n    })\n}\n\n\n\nexport function getClassAdmins(gymClassID){\n    return fs.collection(CLASS_ADMIN)\n    .where(\"gymClassID\", \"==\", gymClassID)\n}\n\nexport function getUserClassAdmins(uid){\n    return fs.collection(CLASS_ADMIN)\n    .where(\"uid\", \"==\", uid)\n}\n\nexport function isClassAdmin (uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(CLASS_ADMIN)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(classSS => {\n            console.log(classSS)\n            if(!classSS.empty){\n                classSS.forEach(classDoc => {\n                    if(classDoc.data().uid == uid){\n                        res(true)\n                    }\n                })\n            }\n            res(false)\n        },\n        err => {\n            rej(err)\n        })\n    })\n}\n\nexport function setClassAdmin(uid, gymClassID, data){\n    return new Promise((res, rej) => {\n        isClassAdmin(uid, gymClassID)\n        .then(isMember => {\n            if(!isMember){\n                let doc = fs.collection(CLASS_ADMIN).doc()\n                \n                doc.set({ ...data, classAdminID: doc.id })\n                .then( () => {\n                    res(\"Added user as an admin.\")\n                })\n                .catch(err => { rej(err) })\n            }else{\n                res(\"User is an admin.\")\n            }\n        })\n        .catch(err => {\n            rej(err)\n        })\n    })\n}\n\nexport function removeAdmin(classAdminID){\n    return fs.collection(CLASS_ADMIN)\n    .doc(classAdminID)\n    .delete()\n}","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { sendAdminInvite } from \"../../utils/firestore/classAdmin\"\n\nimport \"../../styles.css\"\n\n\n\nconst fs = firebase.firestore();\n\nclass InviteView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            filteredUsers: props.filteredUsers,\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n       \n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n        \n\t\treturn props\n\t}\n\n    componentWillUnmount(){\n    }\n\n\t\n  render(){\n\t\treturn( \n\t\t\t<Modal\n                open={this.props.modalOpen}\n                onClose={this.props.onModalClose}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\">\n                <div style={{\n                    position: 'absolute',\n                    top: \"50%\",\n                    left: \"50%\",\n                    width: \"90vw\",\n                    transform: \"translate(-50%, -50%)\",\n                }}>\n                    <Paper style={{ padding: \"8px\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\n                        <Grid item container align=\"center\" xs={12}>\n                            <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                                <Typography variant=\"h6\">\n                                    {this.props.title}\n                                </Typography>\n                            </Grid>\n                            <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                                <TextField\n                                    fullWidth\n                                    variant=\"outlined\"\n                                    onChange={this.props.onChange.bind(this)}\n                                    placeholder=\"Search Users\"\n                                    style={{margin: \"0px 0px 8px 0px\"}}\n                                    InputProps={{\n                                        endAdornment: (\n                                        <InputAdornment position=\"end\">\n                                            <SearchIcon color=\"primary\" />\n                                        </InputAdornment>\n                                        )\n                                    }}\n                                />\n                            </Grid>\n                            <Grid item xs={12} style={{marginTop: \"16px\"}}>\n                                <Select native style={{\n                                        width: \"100%\",\n                                        margin: \"0px 0px 8px 0px\",\n                                        padding: \"4px\"\n                                    }}\n                                    color=\"primary\"\n                                    onChange={this.props.onSelectChange.bind(this)}>\n                                    {this.state.filteredUsers ?\n                                        this.state.filteredUsers.map((user, i) => {\n                                            return (<option key={i} \n                                                            value={JSON.stringify(user)} >\n                                                            {user[\"username\"]}\n                                                    </option>)\n                                        })\n                                    :\n                                        <option aria-label=\"None\" value=\"\" >No users!</option>\n                                    }\n                                </Select>\n                            </Grid>\n                            \n                                <Grid item xs={6} style={{margin: \"16px 0px 16px 0px\"}}>\n                                    <Button fullWidth\n                                        style={{\n                                            borderColor: this.props.theme.palette.text.primary                                        }}\n                                        size=\"small\"\n                                        onClick={this.props.onModalClose}>\n                                        Cancel\n                                    </Button>\n                                </Grid>\n                                <Grid item xs={6} style={{marginTop: \"16px\"}}>\n                                    <Button fullWidth\n                                        color=\"primary\"\n                                        size=\"small\"\n                                        onClick={this.props.sendInvite.bind(this)}>\n                                        Invite\n                                    </Button>\n                                </Grid>\n                            \n                        </Grid>\n                    </Paper>\n                </div>\n            </Modal>\n    )}\n}\n\nexport default InviteView = withTheme(InviteView)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { sendAdminInvite } from \"../../utils/firestore/classAdmin\"\nimport InviteView from \"./inviteView\"\nimport \"../../styles.css\"\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass InviteAdminView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            gymClassMD: props.gymClassMD,\n\t\t\tallUsers: [],\n            filteredUsers: [],\n            selectedUser: {}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.listener = fs.collection(\"users\")\n        .onSnapshot(ss => {\n            let users = []\n            if(!ss.empty){\n                ss.forEach(doc => {\n                    users.push(doc.data())\n                })\n                users.sort((a, b) => {\n                    return (a.username > b.username)? 1 : -1\n                })\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: users[0]\n                })\n            }else{\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: {}\n                })\n            }\n        })\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentWillUnmount(){\n        if(this.listener)\n            this.listener()\n    }\n\n\tonChange(ev){\n        let val = ev.target.value\n        console.log(val)\n\t\tlet filteredUsers = this.state.allUsers.filter(user =>{\n\t\t  return user[\"username\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredUsers: filteredUsers, selectedUser: filteredUsers[0]})\n\t}\n\n    sendInvite(){\n        if(!this.state.selectedUser)\n            return\n\n        console.log(`Send invite to ${this.state.selectedUser.uid} from ${this.state.userMD.uid}`)\n        let data = {\n            msg: \"Accept invite?\",\n            gymClassID: this.state.gymClassMD.gymClassID,\n            senderUID: this.state.userMD.uid,\n            senderUsername: this.state.userMD.username,\n            gymClassTitle: this.state.gymClassMD.title,\n            boxTitle: this.state.gymClassMD.boxTitle,\n            boxID: this.state.gymClassMD.boxID,\n            uid: this.state.selectedUser.uid,\n            date: Date.now()\n        }\n\n        this.props.onModalClose()\n        sendAdminInvite(this.state.selectedUser.uid, data)\n        .then((res) => {\n            this.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: res\n\t\t\t})\n        })\n        .catch(err => {\n            this.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n        })\n    }\n\n    onSelectChange(ev){\n        let user = JSON.parse(ev.target.value)\n        this.setState({selectedUser: user})\n    }\n\n  render(){\n\t\treturn(\n\n            <InviteView\n                modalOpen={this.state.open}\n                title=\"Invite Admin\"\n                onChange={this.onChange.bind(this)}\n                onSelectChange={this.onSelectChange.bind(this)}\n                onModalClose={this.props.onModalClose}\n                sendInvite={this.sendInvite.bind(this)}\n                filteredUsers={this.state.filteredUsers}\n                modalOpen={this.props.modalOpen}\n            />\n    )}\n}\n\nexport default InviteAdminView = withTheme(InviteAdminView)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore()\n\nconst CLASS_MEMBER = \"classMembers\"\nconst MEMBERS = \"members\"\nconst USERS = \"users\"\nconst NOTIFICATIONS = \"notifications\"\nconst INVITES = \"invites\"\n\nexport default function mTea(){}\n \n\nexport function sendMemberInvite(uid, data){\n    \n    let inviteRef = fs.collection(NOTIFICATIONS)\n           .doc(MEMBERS)\n           .collection(INVITES)\n           \n\n    \n    return new Promise((res, rej) => {\n        isClassMember(uid, data.gymClassID).then(isMember => {\n            if(!isMember){\n                isNotificationSent(uid, data.gymClassID)\n                .then(isSent => {\n                    if(isSent){\n                        res(\"Member notified already.\")\n                    }else{\n                        let doc = inviteRef.doc()\n                        doc.set({ ...data, memberInviteID: doc.id })\n                        .then(() => { res(\"Sent member invite.\") })\n                        .catch(err => { rej(err) })\n                    }\n                })\n                .catch(err => {\n                    rej(err)\n                })\n            }else{\n                res(\"Already a member.\")\n            }\n        })\n\n    }) \n}\n\nfunction isNotificationSent(uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS)\n        .doc(MEMBERS)\n        .collection(INVITES)\n        .where(\"uid\", \"==\", uid)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(ss => {\n            console.log(uid, gymClassID)\n            console.log(ss.docs)\n            if(ss.empty){\n                res(false)\n            }else{\n                res(true)\n            }\n        },\n        err => { rej(err) })\n    })\n}\n\nexport function getUserMemberInvites(uid){\n    return fs.collection(NOTIFICATIONS).doc(MEMBERS)\n        .collection(INVITES).where(\"uid\", \"==\", uid)\n}\n\n\nexport function removeNotification(notifyID){\n    return new Promise((res, rej) => {\n        fs.collection(NOTIFICATIONS).doc(MEMBERS)\n        .collection(INVITES).where(\"memberInviteID\", \"==\", notifyID)\n        .get().then(ss => {\n            if(!ss.empty){\n                ss.docs.forEach(doc => {\n                    doc.ref.delete()\n                })\n            res(\"Removed notifications.\")\n            }\n            res(\"No notifications found.\")\n        },\n        err => { rej(err) })\n    })\n}\n\n\n\n\n\nexport function getClassMembers(gymClassID){\n    return fs.collection(CLASS_MEMBER).where(\"gymClassID\", \"==\", gymClassID)\n}\n\nexport function getUserClassMembers(uid){\n    return fs.collection(CLASS_MEMBER).where(\"uid\", \"==\", uid)\n}\n \n\nexport function isClassMember (uid, gymClassID){\n    return new Promise((res, rej) => {\n        fs.collection(CLASS_MEMBER)\n        .where(\"gymClassID\", \"==\", gymClassID)\n        .get().then(classSS => {\n            console.log(classSS)\n            if(!classSS.empty){\n                classSS.forEach(classDoc => {\n                    if(classDoc.data().uid == uid){\n                        res(true)\n                    }\n                })\n            }\n            res(false)\n        },\n        err => {\n            rej(err)\n        })\n    })\n}\n\nexport function setClassMember(uid, gymClassID, data){\n    return new Promise((res, rej) => {\n        isClassMember(uid, gymClassID)\n        .then(isMember => {\n            if(!isMember){\n                let doc = fs.collection(CLASS_MEMBER)\n                .doc()\n\n                doc.set({ ...data, classMemberID: doc.id })\n                .then(result => {\n                    res(\"Added user as a member.\")\n                })\n            }else{\n                rej(\"User is a member.\")\n            }\n        })\n        .catch(err => {\n            rej(err)\n        })\n    })\n}\n\n\nexport function removeMember(classMemberID){\n    return fs.collection(CLASS_MEMBER)\n    .doc(classMemberID)\n    .delete()\n}","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { sendMemberInvite } from \"../../utils/firestore/classMember\"\nimport InviteView from \"./inviteView\"\n\nimport \"../../styles.css\"\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass InviteMemberView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            gymClassMD: props.gymClassMD,\n\t\t\tallUsers: [],\n            filteredUsers: [],\n            selectedUser: {}\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        fs.collection(\"users\")\n        .onSnapshot(ss => {\n            let users = []\n            if(!ss.empty){\n                ss.forEach(doc => {\n                    users.push(doc.data())\n                })\n                users.sort((a, b) => {\n                    return (a.username > b.username)? 1 : -1\n                })\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: users[0]\n                })\n            }else{\n                this.setState({allUsers: users,\n                    filteredUsers: users,\n                    selectedUser: {}\n                })\n            }\n        })\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tonKeyUp(data){\n\t\tif((data.keyCode || data.which) == 13){\n\n\t\t}\n\t}\n\n\tonChange(ev){\n\t\t/*\n\t\t\tSearch bar, filter by name\n\t\t*/\n\t\tlet val = ev.target.value\n\t\tlet filteredUsers = this.state.allUsers.filter(user =>{\n\t\t  return user[\"username\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredUsers: filteredUsers, selectedUser: filteredUsers[0]})\n\t}\n\n    sendInvite(){\n        if(!this.state.selectedUser)\n            return\n\n        let data = {\n            msg: \"Accept invite?\",\n            gymClassID: this.state.gymClassMD.gymClassID,\n            senderUID: this.state.userMD.uid,\n            senderUsername: this.state.userMD.username,\n            gymClassTitle: this.state.gymClassMD.title,\n            boxTitle: this.state.gymClassMD.boxTitle,\n            boxID: this.state.gymClassMD.boxID,\n            uid: this.state.selectedUser.uid,\n            date: Date.now()\n        }\n        this.props.onModalClose()\n        console.log(`Send invite to ${this.state.selectedUser.uid} from ${this.state.userMD.uid}`)\n\n        sendMemberInvite(this.state.selectedUser.uid, data)\n        .then((res) => {\n            this.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: res\n\t\t\t})\n        })\n        .catch(err => {\n            this.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n        })\n    }\n\n    onSelectChange(ev){\n        let user = JSON.parse(ev.target.value)\n        console.log(user)\n        this.setState({selectedUser: user})\n    }\n\n  render(){\n\t\treturn(\n            <InviteView\n            modalOpen={this.state.open}\n            title=\"Invite Member\"\n            onChange={this.onChange.bind(this)}\n            onSelectChange={this.onSelectChange.bind(this)}\n            onModalClose={this.props.onModalClose}\n            sendInvite={this.sendInvite.bind(this)}\n            filteredUsers={this.state.filteredUsers}\n            modalOpen={this.props.modalOpen}\n        />\n    )}\n}\n\nexport default InviteMemberView = withTheme(InviteMemberView)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport\n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport Delete from '@material-ui/icons/Delete'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeAdmin } from '../../utils/firestore/classAdmin'\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction AdminRowRaw(props){\n\n  // TODO redirect to wods whhoch is what boxView is\n  return(\n    <TableRow>\n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { props.info.username }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.handleRemoveAdmin(props.info.classAdminID, props.info.username)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n}\nconst AdminRow = withTheme(AdminRowRaw)\n\nfunction EmptyAdminRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Admins!\n        </Typography>\n      </TableCell>\n    </TableRow>\n  )\n}\nconst EmptyAdmin = withTheme(EmptyAdminRaw)\n\nclass ClassAdminList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n        gymClassID: props.gymClassID,\n        isOwner: props.isOwner,\n        filteredAdmins: props.filteredAdmins,\n        admins: props.admins,\n        showRemoveAlert: false,\n        removeUsername: \"\",\n        removeClassAdminID: \"\"\n    }\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state.admins.length > 0? state : props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n    }\n  }\n\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredAdmins = this.state.admins.filter(admin =>{\n        return admin[\"username\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredAdmins: filteredAdmins})\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert: false})\n  }\n\n  handleRemoveAdmin(classAdminID, username){\n    console.log(\"remove member w/ uid: \", classAdminID)\n    this.setState({removeClassAdminID: classAdminID, removeUsername: username, showRemoveAlert: true})\n  }\n\n  onRemoveAdmin(){\n    this.setState({showRemoveAlert: false})\n    removeAdmin(this.state.removeClassAdminID)\n    .then((res) => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Removed admin!\"\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n\t\t})\n\n  }\n\n\n\n  render () {\n    return (\n      <Grid item xs={12}>\n        <Grid item xs={12}>\n          <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n          <Paper elevation={2} component=\"form\">\n            <TextField\n                fullWidth\n                variant=\"outlined\"\n                inputProps={{style: {fontSize: \"0.8em\"}}}\n                onKeyUp={this.onKeyUp.bind(this)}\n                onChange={this.onChange.bind(this)}\n                placeholder=\"Search Admins\"\n                InputProps={{\n                    startAdornment: (\n                    <InputAdornment position=\"start\">\n                        <SearchIcon color=\"primary\" />\n                    </InputAdornment>\n                    )\n                }}\n            />\n            <TableContainer>\n                <Table stickyHeader size=\"small\">\n                <TableHead>\n                    <TableRow>\n                    <TableCell>Admin Username</TableCell>\n                    <TableCell></TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {this.state.filteredAdmins.length > 0 ?\n                  this.state.filteredAdmins.map((admin, i) => {\n                      return (\n                          <AdminRow\n                              key={i}\n                              info={admin}\n                              handleRemoveAdmin={this.handleRemoveAdmin.bind(this)}\n                              isOwner={this.props.isOwner}\n                          />\n                      )\n                  })\n                :\n                  <EmptyAdmin />\n                }\n                </TableBody>\n                </Table>\n            </TableContainer>\n          </Paper>\n          </Grid>\n        </Grid>\n        <ActionCancelModal\n\t\t\t\t  open={this.state.showRemoveAlert}\n          onClose={this.handleModalClose.bind(this)}\n          onAction={this.onRemoveAdmin.bind(this)}\n          modalText={ `Remove admin, ${this.state.removeUsername}?`}\n          actionText={\"Remove\"}\n          cancelText={\"Cancel\"}\n\t\t\t/>\n      </Grid>\n    );\n  }\n}\n\n\n\nexport default ClassAdminList = withTheme(ClassAdminList)\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport\n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment, TableBody, Table, TableCell, TableContainer,\n  TableHead, TableRow }\nfrom '@material-ui/core'\n\nimport Delete from '@material-ui/icons/Delete'\nimport SearchIcon from '@material-ui/icons/Search'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeMember } from '../../utils/firestore/classMember'\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nfunction MemberRowRaw(props){\n\n  // TODO redirect to wods whhoch is what boxView is\n  return(\n    <TableRow>\n      <TableCell align=\"left\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          { props.info.username }\n        </Typography>\n      </TableCell>\n      <TableCell align=\"right\">\n        { props.isOwner ?\n          <Button\n            onClick={()=>{props.handleRemoveMember(props.info.classMemberID, props.info.username)}}>\n            <Delete  color=\"error\" />\n          </Button>\n        :\n          <React.Fragment></React.Fragment>\n        }\n      </TableCell>\n    </TableRow>\n  )\n}\nconst MemberRow = withTheme(MemberRowRaw)\n\nfunction EmptyMemberRaw(props){\n  return(\n    <TableRow>\n      <TableCell colSpan={3} align=\"center\">\n        <Typography variant=\"subtitle1\" color=\"primary\">\n          No Members!\n        </Typography>\n      </TableCell>\n    </TableRow>\n  )\n}\nconst EmptyMember = withTheme(EmptyMemberRaw)\n\nclass ClassMemberList extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n        gymClassID: props.gymClassID,\n        isOwner: props.isOwner,\n        filteredMembers: props.filteredMembers,\n        members: props.members,\n        showRemoveAlert: false,\n        removeUsername: \"\",\n        classMemberID: \"\"\n    }\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state.members.length > 0? state : props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n    }\n  }\n\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredMembers = this.state.members.filter(member =>{\n        return member[\"username\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredMembers: filteredMembers})\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert: false})\n  }\n\n  handleRemoveMember(classMemberID, username){\n    this.setState({classMemberID: classMemberID, removeUsername: username, showRemoveAlert: true})\n  }\n\n  onRemoveMember(){\n    this.setState({showRemoveAlert: false})\n    removeMember(this.state.classMemberID)\n    .then((res) => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Removed member!\"\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n\t\t})\n\n  }\n\n  render () {\n    return (\n      <Grid item xs={12}>\n        <Grid item xs={12}>\n          <Grid item xs={12} style={{margin: \"0px 0px 8px 0px\"}}>\n          <Paper elevation={2} component=\"form\">\n            <TextField\n                fullWidth\n                variant=\"outlined\"\n                inputProps={{style: {fontSize: \"0.8em\"}}}\n                onKeyUp={this.onKeyUp.bind(this)}\n                onChange={this.onChange.bind(this)}\n                placeholder=\"Search Members\"\n                InputProps={{\n                    startAdornment: (\n                    <InputAdornment position=\"start\">\n                        <SearchIcon color=\"primary\" />\n                    </InputAdornment>\n                    )\n                }}\n            />\n            <TableContainer>\n                <Table stickyHeader size=\"small\">\n                <TableHead>\n                    <TableRow>\n                    <TableCell>Member Username</TableCell>\n                    <TableCell></TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                {this.state.filteredMembers.length > 0 ?\n                  this.state.filteredMembers.map((member, i) => {\n                      return (\n                          <MemberRow\n                              key={i}\n                              info={member}\n                              handleRemoveMember={this.handleRemoveMember.bind(this)}\n                              isOwner={this.props.isOwner}\n                          />\n                      )\n                  })\n                :\n                  <EmptyMember />\n                }\n                </TableBody>\n                </Table>\n            </TableContainer>\n          </Paper>\n          </Grid>\n        </Grid>\n        <ActionCancelModal\n\t\t\t\t  open={this.state.showRemoveAlert}\n          onClose={this.handleModalClose.bind(this)}\n          onAction={this.onRemoveMember.bind(this)}\n          modalText={ `Remove member, ${this.state.removeUsername}?`}\n          actionText={\"Remove\"}\n          cancelText={\"Cancel\"}\n\t\t\t/>\n      </Grid>\n    );\n  }\n}\n\n\n\nexport default ClassMemberList = withTheme(ClassMemberList)\n","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel, IconButton\n} from '@material-ui/core';\n\nimport { ArrowBackIos } from '@material-ui/icons';\n\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// WodTrackrr\n\nimport EditWod from \"../wods/editWod\"\nimport SearchSortTable from \"../searchSortTable\"\nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport InviteAdminView from \"./inviteAdminView\"\nimport InviteMemberView from \"./inviteMemberView\"\n\nimport ClassAdminList from \"../admins/classAdminList\"\nimport ClassMemberList from \"../members/classMemberList\"\n\nimport { removeWod } from \"../../utils/firestore/wods\"\nimport { getClassAdmins } from \"../../utils/firestore/classAdmin\"\nimport { getClassMembers } from \"../../utils/firestore/classMember\"\n\nimport \"../../styles.css\"\n\n\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass GymClassView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\tboxID: props.boxID,\n\t\t\tgymClassID: props.gymClassID,\n\t\t\tgymClassMD: {},\n\t\t\tgymClasses:[],\n\t\t\tuserBoxes: [],\n\t\t\thasBoxes: false,\n\t\t\twods: [],\n\t\t\tcurrentWodID: \"\",\n\t\t\tcurrentWodMD: {},\n\t\t\tshowRemoveAlert: false,\n\t\t\tshowEditModal: false,\n\t\t\teditWodInfo: {},\n\t\t\tcurRemoveWodBoxID: \"\",\n\t\t\tcurRemoveWodID: \"\",\n\t\t\tcurRemoveWodTitle: \"\",\n\t\t\tinviteModalOpen: false,\n\t\t\tinviteMemberModalOpen: false,\n\t\t\tadmins: [],\n\t\t\tadminUids: [],\n\t\t\tmembers: [],\n\t\t\tmemberUids: [],\n\t\t\tshowAdminList:false,\n\t\t\tshowMemberList: false,\n\t\t\tisAdmin: false,\n\t\t\tisMember: false\n\n\t\t}\n\t}\n\n\tgetGymClassListener(){\n\t\tif(!this.gymClassListener){\n\t\t\tthis.gymClassListener = fs.collection(\"gymClasses\")\n\t\t\t.doc(this.state.boxID)\n\t\t\t.collection(\"classes\")\n\t\t\t.doc(this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tif(ss.exists){\n\t\t\t\t\tthis.setState({gymClassMD: ss.data()})\n\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tgetUserBoxListener(){\n\t\tif(this.state.userMD.uid && !this.userBoxesListener ){\n\t\t\tthis.userBoxesListener = fs.collection(\"boxes\")\n\t\t\t.where(\"uid\", \"==\", this.state.userMD.uid)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet boxes = []\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.forEach(doc => {\n\t\t\t\t\t\tboxes.push(doc.data())\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.setState({userBoxes: boxes, hasBoxes: boxes.length? true: false})\n\t\t\t})\n\t\t}\n\t}\n\n\tgetAdminListener(){\n\t\tif(this.state.userMD.uid && !this.adminListener){\n\t\t\tthis.adminListener =\n\t\t\tgetClassAdmins(this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet admins = []\n\t\t\t\tlet adminUids = []\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.docs.forEach(doc => {\n\t\t\t\t\t\tadmins.push(doc.data())\n\t\t\t\t\t\tadminUids.push(doc.data().uid)\n\t\t\t\t\t})\n\t\t\t\t\tlet isAdmin = adminUids.indexOf(this.state.userMD.uid) >= 0\n\t\t\t\t\tthis.setState({admins: admins, adminUids: adminUids, isAdmin: isAdmin})\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({admins: admins, adminUids: adminUids, isAdmin: false})\n\t\t\t\t}\n\t\t\t},\n\t\t\terr => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t}\n\t}\n\n\tgetMemberListener(){\n\t\tif(this.state.userMD.uid && !this.memberListener){\n\t\t\tthis.memberListener = getClassMembers(this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet members = []\n\t\t\t\tlet memberUids = []\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.docs.forEach(doc => {\n\t\t\t\t\t\tmembers.push(doc.data())\n\t\t\t\t\t\tmemberUids.push(doc.data().uid)\n\t\t\t\t\t})\n\t\t\t\t\tlet isMember = memberUids.indexOf(this.state.userMD.uid) >= 0\n\t\t\t\t\tthis.setState({members: members, memberUids: memberUids, isMember: isMember})\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({members: members, memberUids: memberUids, isMember: false})\n\t\t\t\t}\n\t\t\t},\n\t\t\terr => {\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t}\n\t}\n\n\tgetWodListener(){\n\t\tif(!this.wodListener){\n\t\t\tthis.wodListener = fs.collection(\"wods\")\n\t\t\t.where(\"gymClassID\", \"==\", this.state.gymClassID)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tlet wods = []\n\t\t\t\t\tss.forEach(doc => {\n\t\t\t\t\t\twods.push(doc.data())\n\t\t\t\t\t})\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twods: wods\n\t\t\t\t\t})\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twods: []\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}, err => { console.log(err)})\n\t\t}\n\t}\n\n\tcheckListeners(){\n\t\tif(!this.userBoxesListener)\n\t\t\tthis.getUserBoxListener()\n\t\tif(!this.adminListener)\n\t\t\tthis.getAdminListener()\n\t\tif(!this.memberListener)\n\t\t\tthis.getMemberListener()\n\n\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.checkListeners()\n\t\tthis.getGymClassListener()\n\t\tthis.getWodListener()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\tconsole.log(props)\n\t\tconsole.log(state)\n\t\treturn state.userMD? state: props\n\t}\n\n\tcomponentDidUpdate(){\n\t\tthis.checkListeners()\n\t}\n\n\tcomponentWillUnmount(){\n\t\tif(this.adminListener)\n\t\t\tthis.adminListener()\n\t\tif(this.memberListener)\n\t\t\tthis.memberListener()\n\t\tif(this.userBoxesListener)\n\t\t\tthis.userBoxesListener()\n\t\tif(this.wodListener)\n\t\t\tthis.wodListener()\n\t\tif(this.gymClassListener){\n\t\t\tthis.gymClassListener()\n\t\t}\n\t}\n\n\thandleModalClose(){\n\t  \tthis.setState({showRemoveAlert:false})\n\t  }\n\n\thandleRemoveWod(wodInfo){\n\t\tthis.setState({\n\t\t\tshowRemoveAlert: true,\n\t\t\tcurRemoveWodBoxID: wodInfo[\"boxID\"],\n\t\t\tcurRemoveWodID: wodInfo[\"wodID\"],\n\t\t\tcurRemoveWodTitle: wodInfo[\"title\"],\n\t\t})\n\t}\n\n\tdeleteWod(){\n\t\tthis.setState({showRemoveAlert: false})\n\t\tremoveWod(this.state.curRemoveWodID)\n\t\t.then((res) => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Deleted workout!\"\n\t\t\t})\n\t\t})\n\t\t.catch(err => {\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n\t\t})\n\t}\n\n\n\n\tonChange(ev){\n\t\tlet val = ev.target.value\n\t\tlet filteredWods = this.state.wods.filter(wod =>{\n\t\t  return wod[\"title\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredWods: filteredWods})\n\t}\n\n\thandleEdit(info){\n\t\tif(!this.userBoxesListener)\n\t\t\tthis.getUserBoxListener()\n\t\tthis.setState({\n\t\t\teditWodInfo: info,\n\t\t\tshowEditModal: true\n\t\t})\n\t}\n\n\thandleEditModalClose(){\n\t\tthis.setState({showEditModal: false})\n\t}\n\n\tisOwner(){\n\t\treturn this.state.gymClassMD[\"uid\"] === this.state.userMD['uid']\n\t}\n\n\topenAdminInvite(){\n\t\tthis.setState({inviteModalOpen: true})\n\t}\n\n\topenMemberInvite(){\n\t\tthis.setState({inviteMemberModalOpen: true})\n\t}\n\n\tonInviteModalClose(){\n\t\tthis.setState({inviteModalOpen: false})\n\t}\n\n\tonInviteMemberModalClose(){\n\t\tthis.setState({inviteMemberModalOpen: false})\n\t}\n\n\tempty(obj){\n\t\treturn (obj\n\t\t&& Object.keys(obj).length === 0\n\t\t&& obj.constructor === Object)\n\t}\n\n\topenViewAdmins(){\n\t\tthis.setState({showAdminList: true})\n\t}\n\n\topenViewMembers(){\n\t\tthis.setState({showMemberList: true})\n\t}\n\n\tcloseViewLists(){\n\t\tthis.setState({showAdminList: false, showMemberList: false})\n\t}\n\n\tisAdmin(){\n\t\treturn (this.state.isAdmin || this.isOwner()) && this.state.userMD\n\t}\n\n\tisMember(){\n\t\treturn (this.state.isMember || this.isAdmin()) && this.state.userMD\n\t}\n\n  \trender(){\n\t \tlet sortableHeadersOwner = [\n\t \t\t{id:\"date\", sortable:true, label:\"Date\"},\n\t \t\t{id:\"title\", sortable:true, label:\"Title\"},\n\t\t\t{id:\"title2\", sortable:true, label:\"\"},\n\t \t\t{id:\"btns\", sortable:false, label:\"\"}\n\t \t]\n\t \tlet sortableHeadersUser = [\n\t \t\t{id:\"date\", sortable:true, label:\"Date\"},\n\t \t\t{id:\"title\", sortable:true, label:\"Title\"},\n\t\t\t{id:\"title2\", sortable:true, label:\"\"},\n\t \t\t{id:\"btns\", sortable:false, label:\"\"}\n\t \t]\n\n\t\treturn this.empty(this.state.userMD) || this.empty(this.state.gymClassMD)\n\t\t\t?\n\t\t\t\t<React.Fragment>Loading</React.Fragment>\n\t\t\t:\n\t\t \t\tthis.state.gymClassMD.isPrivate && !this.isMember()\n\t\t\t\t?\n\t\t\t\t<Typography>Private Class</Typography>\n\t\t\t\t:\n\t\t\t\tthis.state.showAdminList && this.isAdmin() ?\n\t\t \t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<IconButton onClick={this.closeViewLists.bind(this)}\n\t\t\t\t\t\t\t\tstyle={{color: this.props.theme.palette.text.primary}}>\n\t\t\t\t\t\t\t\t<ArrowBackIos />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<ClassAdminList\n\t\t\t\t\t\t\t\tgymClassID={this.state.gymClassID}\n\t\t\t\t\t\t\t\tfilteredAdmins={this.state.admins}\n\t\t\t\t\t\t\t\tadmins={this.state.admins}\n\t\t\t\t\t\t\t\tisOwner={this.isOwner()}\n\t\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t </Grid>\n\t\t\t\t:\n\t\t\t\tthis.state.showMemberList && this.isMember()?\n\t\t \t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<IconButton onClick={this.closeViewLists.bind(this)}\n\t\t\t\t\t\t\t\tstyle={{color: this.props.theme.palette.text.primary}}>\n\t\t\t\t\t\t\t\t <ArrowBackIos />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<ClassMemberList\n\t\t\t\t\t\t\tgymClassID={this.state.gymClassID}\n\t\t\t\t\t\t\tfilteredMembers={this.state.members}\n\t\t\t\t\t\t\tmembers={this.state.members}\n\t\t\t\t\t\t\tisOwner={this.isOwner()}\n\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t </Grid>\n\t\t\t\t:\n\n\t\t\t(\n\t\t\t<Grid item xs={12}>\n\n\t\t\t\t<Grid item align=\"center\" xs={12}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography align=\"center\" variant=\"h3\">\n\t\t\t\t\t\t\t{this.state.gymClassMD['title']}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography align=\"center\" variant=\"h6\">\n\t\t\t\t\t\t\t{this.state.gymClassMD['boxTitle']}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\n\n\t\t\t\t<Grid item container spacing={1} xs={12}\n\t\t\t\t\tstyle={{marginTop: \"16px\"}}>\n\t\t\t\t\t{this.isAdmin()?\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button color=\"primary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonClick={ this.openAdminInvite.bind(this) }>\n\t\t\t\t\t\t\t\t\tInvite Admin\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<Button color=\"primary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonClick={ this.openViewAdmins.bind(this) }>\n\t\t\t\t\t\t\t\t\tView Admins\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<InviteAdminView\n\t\t\t\t\t\t\t\t\tuserMD={this.state.userMD}\n\t\t\t\t\t\t\t\t\tgymClassMD={this.state.gymClassMD}\n\t\t\t\t\t\t\t\t\tonModalClose={this.onInviteModalClose.bind(this)}\n\t\t\t\t\t\t\t\t\tmodalOpen={this.state.inviteModalOpen}\n\t\t\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</React.Fragment>\n\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ this.isMember() ?\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t<Button color=\"secondary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\t\tonClick={ this.openMemberInvite.bind(this) }>\n\t\t\t\t\t\t\t\t\t\tInvite Member\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t<Button color=\"secondary\" variant=\"outlined\" style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonClick={ this.openViewMembers.bind(this) }>\n\t\t\t\t\t\t\t\t\tView Members\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<InviteMemberView\n\t\t\t\t\t\t\t\t\tuserMD={this.state.userMD}\n\t\t\t\t\t\t\t\t\tgymClassMD={this.state.gymClassMD}\n\t\t\t\t\t\t\t\t\tonModalClose={this.onInviteMemberModalClose.bind(this)}\n\t\t\t\t\t\t\t\t\tmodalOpen={this.state.inviteMemberModalOpen}\n\t\t\t\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\t\t\t\t</Grid>\n\n\t\t\t\t<SearchSortTable\n\t\t\t\t\trows = {this.state.wods}\n\t\t\t\t\tfilteredRows={this.state.wods}\n\t\t\t\t\theaders={this.isOwner()? sortableHeadersOwner: sortableHeadersUser}\n\t\t\t\t\thandleRemove={this.handleRemoveWod.bind(this)}\n\t\t\t\t\thandleEdit={this.handleEdit.bind(this)}\n\t\t\t\t\tshowOwnerBtns={this.isOwner()}\n\t\t\t\t/>\n\n\t\t\t\t<ActionCancelModal\n\t\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\t\tonClose={this.handleModalClose.bind(this)}\n\t\t\t\t\tonAction={this.deleteWod.bind(this)}\n\t\t\t\t\tmodalText={ `Remove ${this.state.curRemoveWodTitle} (${this.state.curRemoveWodID})?`}\n\t\t\t\t\tactionText={\"Delete\"}\n\t\t\t\t\tcancelText={\"Cancel\"}\n\t\t\t\t/>\n\n\t\t\t\t<EditWod\n\t\t\t\t\topen={this.state.showEditModal}\n\t\t\t\t\tonClose={this.handleEditModalClose.bind(this)}\n\t\t\t\t\tuserBoxes={this.state.userBoxes}\n\t\t\t\t\thasBoxes={this.state.hasBoxes}\n\t\t\t\t\twodInfo={this.state.editWodInfo}\n\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t/>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\nexport default GymClassView = withTheme(GymClassView);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n/*\n\tBoxes\n*/\n\nexport function setBox(title, uid){\n\n  \treturn new Promise((res, rej) => {\n  \t\tfs.collection(\"boxes\").where(\"title\", \"==\", title)\n  \t\t.get().then(result => {\n  \t\t\tif(result.empty){\n\t\t\t\t\tlet doc = fs.collection(\"boxes\").doc()\n\t\t  \t\tdoc.set({\n\t\t  \t\t\tboxID: doc.id,\n\t\t  \t\t\ttitle: title,\n\t\t  \t\t\tuid, uid,\n\t\t  \t\t\tdate: Date.now()\n\t\t  \t\t})\n\t\t  \t\t.then(()=>{\n\t\t  \t\t\tres(\"Added box\")\n\t\t  \t\t})\n\n  \t\t\t}else{\n  \t\t\t\trej(\"Name Taken\")\n  \t\t\t}\n  \t\t})\n  \t})\n }\n\n\nfunction batchDelete(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\t\n\t\tss.forEach(doc => {\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\t\t\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)  // bacth limits to 500 changes\n\t\t\tbatchDelete(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nfunction batchUpdate(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\t\n\t\tss.forEach(doc => {\n\t\t\tbatch.update(doc.ref, {\n\t\t\t\tboxID: \"\"\n\t\t\t})\n\t\t\tcnt++\n\t\t})\n\t\t\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)  // bacth limits to 500 changes\n\t\t\tbatchUpdate(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeBox(boxID){\n\t/*\n\t\tboxes\n\t\tclassAdmin\n\t\tclassMember\n\t\tfollowing\n\t\t - remove boxID\n\t\t - allows user to see their follows after box is deleted\n\t\t - once user unfollows, it will no longer appear\n\t\tgymClasses\n\t\tscores\n\t\twods\n\t\tusers\n\t\t\t-uid/\n\t*/\n\n\tlet collectionNames = [\"notifications/admins/invites\",\n\t\t\t\t\t\t  \"notifications/members/invites\",\n\t\t\t\t\t\t  \"classAdmins\", \"classMembers\",\n\t\t\t\t\t\t  `gymClasses/${boxID}/classes`,\n\t\t\t\t\t\t  \"wods\",\n\t\t\t\t\t\t  \"scores\",\n\t\t\t\t\t\t  \"boxes\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tbatchDelete(name, \"boxID\", boxID, res, rej)\n\t\t})\n\t})\n\n\tpromises.push(new Promise((res, rej) => {\n\t\tbatchUpdate(\"following\", \"boxID\", boxID, res, rej)\n\t}))\n\n\treturn Promise.all(promises)\n}","import React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, Modal\n}\nfrom '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport BoxView from \"./boxView\"\nimport BoxSearch from \"./boxSearch\"\nimport { removeBox } from \"../../utils/firestore/boxes\"\nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport \"../../styles.css\"\n\nclass BoxListAccordion extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userBoxes: props.userBoxes,\n      hasBoxes: props.hasBoxes,\n      currentBoxID: \"\",\n      showRemoveAlert: false,\n      curRemoveBoxID: \"\",\n      curRemoveBoxTitle: \"\"\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n\t  console.log(props)\n    return props\n  }\n\n  componentWillUnmount(){\n  \tconsole.log(\"Component will unmount\")\n  }\n\n  handleRemoveBox(boxID, boxTitle){\n  \tthis.setState({\n  \t\tshowRemoveAlert: true,\n  \t\tcurRemoveBoxID: boxID,\n  \t\tcurRemoveBoxTitle: boxTitle\n  \t})\n  }\n\n  handleModalClose(){\n  \tthis.setState({showRemoveAlert:false})\n  }\n\n  deleteBox(){\n\tthis.handleModalClose()\n  \tremoveBox(this.state.curRemoveBoxID)\n  \t.then((res)=>{\n  \t\tthis.props.onAlert({\n\t\t\t  type: \"success\",\n\t\t\t  message: \"Removed gym!\"\n\t\t  })\n  \t})\n  \t.catch((err)=>{\n\t\tthis.props.onAlert({\n\t\t\ttype: \"error\",\n\t\t\tmessage: err\n\t\t})\n\t})\n  }\n\n  render(){\n\treturn(\n\t\t<Grid item xs ={12}>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t{\n\t\t\t\t\tthis.state.userBoxes.length > 0\n\t\t\t\t?\n\t\t\t\t\t<BoxSearch\n\t\t\t\t\t\tuser = {this.state.user}\n\t\t\t\t\t\tuserMD = {this.state.userMD}\n\t\t\t\t\t\tallBoxes = {this.state.userBoxes}\n\t\t\t\t\t\tfilteredBoxes={this.state.userBoxes}\n\t\t\t\t\t\thandleRemoveBox={this.handleRemoveBox.bind(this)}\n\t\t\t\t\t\tisOwner = {true}\n\t\t\t\t\t\tonAlert={this.props.onAlert}\n\t\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t\t<Grid item zeroMinWidth xs={12}>\n\t\t\t\t\t\t<Paper elevation={4} style={{padding: \"1vw\"}}>\n\t\t\t\t\t\t\t<Typography noWrap align=\"left\">No gyms Found!</Typography>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t}\n\t\t\t</Grid>\n\t\t\t<ActionCancelModal\n\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\tonClose={this.handleModalClose.bind(this)}\n\t\t\t\tonAction={this.deleteBox.bind(this)}\n\t\t\t\tmodalText={ `Remove ${this.state.curRemoveBoxTitle} (${this.state.curRemoveBoxID})`}\n\t\t\t\tactionText={\"Remove\"}\n\t\t\t\tcancelText={\"Cancel\"}\n\t\t\t/>\n\t\t</Grid>\n\t)\n  }\n}\n\nexport default BoxListAccordion = withTheme(BoxListAccordion);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nimport React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tTableRow, TableHead, TableContainer,\n\tTableBody, Table, Checkbox\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { setGymClass } from \"../../utils/firestore/gymClass\"\n\nlet fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddGymClass extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userBoxes: props.userBoxes,\n      hasBoxes: props.hasBoxes,\n\t  title: \"\",\n\t  box: {},\n\t  isPrivate: false\n    }\n  }\n\n  componentDidMount(){\n  }\n\n\n  static getDerivedStateFromProps(props, state){\n\tif(props.userBoxes.length > 0){\n\t\treturn{...props,\n\t\t\t box: props.userBoxes[0]\n\t\t}\n\t}\n\treturn props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n      this.createGymClass()\n    }\n  }\n\n  createGymClass(){\n\tlet title = this.state.title\n\tlet box = this.state.box\n\tlet isPrivate = this.state.isPrivate\n\n\tconsole.log(\"Creating class\")\n\tconsole.log(title, box, isPrivate)\n\tif(!title || !box || isPrivate === null)\n\t\treturn\n\n\tsetGymClass(title, this.props.user.uid, box.boxID, box.title, isPrivate)\n\t.then((res)=>{\n\t\tthis.props.onAlert({\n\t\t\ttype: \"success\",\n\t\t\tmessage: \"Added class!\"\n\t\t})\n\t})\n\t.catch((err)=>{\n\t  this.props.onAlert({\n\t\t  type: \"error\",\n\t\t  message: err\n\t  })\n\t})\n  }\n\n  handleCheckboxChange(ev){\n\t  let checked = ev.target.checked\n\t  this.setState({isPrivate: checked})\n  }\n\n  onTitleChange(ev){\n\tthis.setState({title: ev.target.value})\n  }\n\n  onSelectChange(ev){\n\tthis.setState({box: JSON.parse(ev.target.value)})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12}>\n\t\t\t<Table>\n\t\t\t\t<TableBody>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\tGym\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\tonChange={this.onSelectChange.bind(this)}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\tname: 'Box',\n\t\t\t\t\t\t\t\t\tid: 'addGymClassBox'\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t{this.state.hasBoxes ?\n\t\t\t\t\t\t\t\t\tthis.state.userBoxes.map((box, i) => {\n\t\t\t\t\t\t\t\t\t\treturn (<option key={i} value={JSON.stringify(box)} >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{box[\"title\"]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Title</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tid=\"addGymClassTitle\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t\t\t\tonChange={this.onTitleChange.bind(this)}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\t\t\tplaceholder: \"Name of class\"\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonKeyUp={this.onKeyUp.bind(this) }\n\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Private</TableCell>\n\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tchecked={this.state.isPrivate}\n\t\t\t\t\t\t\tonChange={this.handleCheckboxChange.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell align=\"center\" colSpan={2}>\n\t\t\t\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" color=\"primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={ this.createGymClass.bind(this)} >\n\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n  \t\t</Grid>\n    )\n  }\n}\n\nexport default AddGymClass = withTheme(AddGymClass);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, TableRow, TableHead, TableContainer,\n  \tTableBody, Table\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport { withTheme, withStyles } from '@material-ui/core/styles'\n\nimport { setWod } from \"../../utils/firestore/wods\"\nimport { getGymClasses } from \"../../utils/firestore/gymClass\"\n\nlet fs = firebase.firestore()\nconst SCORETYPES = [\"reps\", \"rounds\", \"time\", \"total\"]\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddWod extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\tuserBoxes: props.userBoxes,\n\t\t\thasBoxes: props.hasBoxes,\n\t\t\tgymClasses: [],\n\t\t\tboxIDForm: props.userBoxes[0].boxID,\n\t\t\tgymClassIDForm: {},\n\t\t\ttitleForm: \"\",\n\t\t\tscoreTypeForm: SCORETYPES[0],\n\t\t\twodTextForm: \"\"\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn state.userMD? props: state\n\t}\n\n\tcomponentDidUpdate(){\n\t\tif(!this.gymClassListener && this.state.userBoxes){\n\t\t\tthis.setGymClassListner(this.state.userBoxes[0].boxID)\n\t\t}\n\t}\n\n\tsetGymClassListner(boxID){\n\t\tthis.gymClassListener = getGymClasses(boxID)\n\t\t.onSnapshot(ss => {\n\t\t\tif(!ss.empty){\n\t\t\t\tlet classes = []\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tclasses.push(doc.data())\n\t\t\t\t})\n\t\t\t\tlet initClass = classes[0]\n\n\t\t\t\tconsole.log(\"Inint class\")\n\t\t\t\tconsole.log(initClass)\n\t\t\t\tthis.setState({\n\t\t\t\t\tgymClasses: classes,\n\t\t\t\t\tgymClassIDForm: initClass.gymClassID\n\t\t\t\t})\n\n\t\t\t}else{\n\t\t\t\tthis.setState({gymClasses: []})\n\t\t\t}\n\t\t},\n\t\terr => {console.log(err)})\n\t}\n\n\tonBoxSelectChange(ev){\n\t\tlet boxID = ev.target.value\n\t\tconsole.log(ev.target.value)\n\t\tthis.setGymClassListner(boxID)\n\t\tthis.setState({boxIDForm: boxID})\n\t}\n\n\tonClassSelectChange(ev){\n\t\tconsole.log(ev.target.value)\n\t\tlet gymClass = JSON.parse(ev.target.value)\n\t\tthis.setState({gymClassIDForm: gymClass.gymClassID})\n\t}\n\n\tonTitleChange(ev){\n\t\tconsole.log(ev.target.value)\n\t\tlet title = ev.target.value\n\t\tthis.setState({titleForm: title})\n\t}\n\n\tonScoreTypeSelectChange(ev){\n\t\tconsole.log(ev.target.value)\n\t\tlet scoreType = ev.target.value\n\t\tthis.setState({scoreTypeForm: scoreType})\n\t}\n\n\tonWodTextChange(ev){\n\n\t\tlet wodText = ev.target.value\n\t\tthis.setState({wodTextForm: wodText})\n\t}\n\n\tcreateWOD(){\n\t  \tlet boxID = this.state.boxIDForm\n\t  \tlet gymClassID = this.state.gymClassIDForm\n\t  \tlet title = this.state.titleForm\n\t  \tlet scoreType = this.state.scoreTypeForm\n\t  \tlet wodText = this.state.wodTextForm\n\n\t  \tif(!boxID || !gymClassID || !title || !scoreType || !wodText){\n\t  \t\tconsole.log(\"Error with input createWod\")\n\t  \t\tconsole.log(boxID, gymClassID, title, scoreType, wodText)\n\t  \t\treturn\n\n\t  \t}\n\t\tconsole.log(gymClassID)\n\t  \tsetWod(boxID, gymClassID, title, wodText, scoreType)\n\t  \t.then((res)=>{\n\t\t\tthis.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: \"Added workout!\"\n\t\t\t})\n\t\t})\n\t\t.catch((err)=>{\n\t\t  this.props.onAlert({\n\t\t\t  type: \"error\",\n\t\t\t  message: err\n\t\t  })\n\t \t })\n\n\t  }\n\n\n\n\trender(){\n\t\treturn(\n\t\t\t<Grid item container xs={12}>\n\t\t\t\t<TableContainer>\n\n\t\t\t\t\t<Table>\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tBox\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onBoxSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Box',\n\t\t\t\t\t\t\t\t\t\tid: 'ownerBoxAddWodBoxID'}}>\n\t\t\t\t\t\t          \t{this.state.hasBoxes ?\n\t\t\t\t\t\t\t          \tthis.state.userBoxes.map((box, i) => {\n\t\t\t\t\t\t        \t\t\treturn (<option key={i} value={box[\"boxID\"]} >\n\t\t\t\t\t\t        \t\t\t\t\t\t\t\t{box[\"title\"]}\n\t\t\t\t\t\t        \t\t\t\t\t\t\t</option>)\n\t\t\t\t\t\t        \t\t})\n\t\t\t\t\t\t        \t:\n\t\t\t\t\t\t        \t\t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t\t\t\t          }\n\t\t\t\t      \t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tClass\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onClassSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'gymClass',\n\t\t\t\t\t\t\t\t\t\tid: 'AddWodGymClassID'}}>\n\t\t\t\t\t\t          \t{this.state.gymClasses.length > 0 ?\n\t\t\t\t\t\t\t          \tthis.state.gymClasses.map((gymClass, i) => {\n\t\t\t\t\t\t        \t\t\treturn (<option key={i} value={JSON.stringify(gymClass)} >\n\t\t\t\t\t\t        \t\t\t\t\t\t\t\t{gymClass[\"title\"]}\n\t\t\t\t\t\t        \t\t\t\t\t\t\t</option>)\n\t\t\t\t\t\t        \t\t})\n\t\t\t\t\t\t        \t:\n\t\t\t\t\t\t        \t\t<option aria-label=\"None\" value=\"\" >No Classes!</option>\n\t\t\t\t\t\t          }\n\t\t\t\t      \t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tScore Type\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Select native\n\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t\tonChange={this.onScoreTypeSelectChange.bind(this)}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\tname: 'Score Type',\n\t\t\t\t\t\t\t\t\t\tid: 'ownerBoxAddWodScoreType',\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tSCORETYPES.map((scoreType, i) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn <option key={i} value={scoreType}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ scoreType.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscoreType[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscoreType[0].toUpperCase()) }\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t              id=\"ownerBoxAddWodTitle\"\n\t\t\t\t\t              type=\"text\"\n\t\t\t\t\t\t\t\t  onChange={this.onTitleChange.bind(this)}\n\t\t\t\t\t              style={{width: \"100%\"}}\n\t\t\t\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\t              inputProps={{\n\t\t\t\t\t                title: \"Letters only, max length 35\",\n\t\t\t\t\t                placeholder: \"Title\"\n\t\t\t\t\t              }}\n\t\t\t\t\t              margin=\"normal\"\n\t\t\t\t\t              color=\"primary\"\n\t\t\t\t\t              InputLabelProps={{\n\t\t\t\t\t                shrink: true,\n\t\t\t\t\t              }}\n\t\t\t\t\t            />\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n\t\t\t\t\t\t\t\t<Typography color=\"primary\" variant=\"caption\">\n\t\t\t\t\t\t\t\t\tWorkout\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell colSpan={2}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t              id=\"wodText\"\n\t\t\t\t\t              type=\"text\"\n\t\t\t\t\t              style={{width: \"100%\"}}\n\t\t\t\t\t\t\t\t  onChange={this.onWodTextChange.bind(this)}\n\t\t\t\t\t              inputProps={{\n\t\t\t\t\t                title: \"Enter workout\",\n\t\t\t\t\t                placeholder: \"workout\"\n\t\t\t\t\t              }}\n\t\t\t\t\t              margin=\"normal\"\n\t\t\t\t\t              color=\"primary\"\n\t\t\t\t\t              InputLabelProps={{\n\t\t\t\t\t                shrink: true,\n\t\t\t\t\t              }}\n\t\t\t\t\t\t\t\t  multiline={true}\n\t\t\t\t\t\t\t\t  rows={12}\n\t\t\t\t\t            />\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell colSpan={2} align=\"center\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tonClick={this.createWOD.bind(this)}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableBody>\n\t\t\t\t\t</Table>\n\t\t\t\t</TableContainer>\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\nexport default AddWod = withTheme(AddWod)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\n\nimport React, { Component } from 'react'\n\nimport\n{ \tGrid, Paper, Button, Typography, TextField, Select,\n\tTableRow, TableHead, TableContainer,\n\tTableBody, Table\n}\nfrom '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { setBox } from \"../../utils/firestore/boxes\"\n\nlet fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\nclass AddBox extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD\n    }\n  }\n\n  componentDidMount(){\n  }\n\n  static getDerivedStateFromProps(props, state){\n\treturn props\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n      let a = document.getElementById(\"ownerBoxAddBoxTitle\")\n      let title = a.value\n      this.createBox(title)\n    }\n  }\n\n  createBox(title){\n\t  if(!title)\n\t  \treturn\n\tsetBox(title, this.props.user.uid)\n\t.then((res)=>{\n\t\tthis.props.onAlert({\n\t\t\ttype: \"success\",\n\t\t\tmessage: \"Added gym!\"\n\t\t})\n\t})\n\t.catch((err)=>{\n\t  this.props.onAlert({\n\t\t  type: \"error\",\n\t\t  message: err\n\t  })\n\t})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12}>\n\t\t\t<Table>\n\t\t\t\t<TableBody>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell>Title</TableCell>\n\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\tid=\"ownerBoxAddBoxTitle\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tpattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\ttitle: \"Letters only, max length 35\",\n\t\t\t\t\t\tplaceholder: \"Name of gym\"\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyUp={this.onKeyUp.bind(this) }\n\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\tstyle={{width: \"100%\"}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tshrink: true,\n\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell align=\"center\" colSpan={2}>\n\t\t\t\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" color=\"primary\"\n\t\t\t\t\t\t\t\t\tonClick={ () =>{\n\t\t\t\t\t\t\t\t\t\tlet el = document.getElementById(\"ownerBoxAddBoxTitle\")\n\t\t\t\t\t\t\t\t\t\tthis.createBox(el.value)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default AddBox = withTheme(AddBox);","import firebase from \"../context/firebaseContext\"\nimport \"firebase/firestore\"\n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, TableBody, Table, TableCell, TableContainer,\n          TableHead, TableRow, Tabs, Tab, AppBar }\nfrom '@material-ui/core';\nimport SwipeableViews from 'react-swipeable-views';\n\nimport { withTheme } from '@material-ui/core/styles'\nimport OwnerBoxes from \"./boxes/ownerBoxes\"\nimport AddGymClass from \"./gymClasses/addGymClass\"\nimport AddWod from \"./wods/addWod\"\nimport AddBox from \"./boxes/addBox\"\n\nlet fs = firebase.firestore()\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Grid item xs={12}\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Grid item xs={12}>\n          {children}\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nclass OwnerControls extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userBoxes: [],\n      hasBoxes: false,\n      addBoxProgress: true,\n      value: 0\n    }\n    console.log(props)\n  }\n\n  componentDidMount(){\n  \tthis.listenForBoxes()\n  }\n\n  static getDerivedStateFromProps(props, state){\n\t  return props\n  }\n\n  componentDidUpdate(){\n    if(this.state.userMD.accountType === \"owner\"){\n      this.listenForBoxes()\n    }\n\n  }\n\n  componentWillUnmount(){\n    if(this.boxListener){\n      this.boxListener()\n    }\n  }\n\n  listenForBoxes(){\n  \tif(!this.state.user || this.boxListener)\n  \t\treturn\n\n\t\tthis.boxListener = fs.collection(\"boxes\").where(\"uid\", \"==\", this.state.user.uid)\n\t\t.onSnapshot(ss => {\n\t\t\tlet data = []\n\t\t\tss.forEach(doc => {\n\t\t\t\tdata.push(doc.data())\n\t\t\t})\n      console.log(\"Setting new state for userBoxes\")\n\t\t\tthis.setState({\n\t\t\t\thasBoxes: true,\n\t\t\t\tuserBoxes: data\n\t\t\t})\n\t\t},\n\t\terr => {\n  \t\tthis.setState({\n\t\t\t\thasBoxes: false,\n\t\t\t\tuserBoxes: []\n\t\t\t})\n\t\t})\n  }\n\n  a11yProps(index) {\n\t\treturn {\n\t\t  id: `ownerbox-tab-${index}`,\n\t\t  'aria-controls': `simple-tabpanel-${index}`,\n\t\t}\n\t}\n\n  handleChange(ev, value){\n  \tthis.setState({value: value})\n  }\n  handleChangeIndex(value){\n  \tthis.setState({value: value})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} id=\"ownerBox\" >\n    \t<AppBar position=\"static\">\n        <Tabs value={this.state.value} variant=\"fullWidth\" selectionFollowsFocus\n        \t\tonChange={this.handleChange.bind(this)} aria-label=\"simple tabs example\">\n          <Tab label=\"View Gyms\" {...this.a11yProps(0)} />\n          <Tab label=\"Add Workout\" {...this.a11yProps(1)} />\n          <Tab label=\"Add Class\" {...this.a11yProps(2)} />\n          <Tab label=\"Add Gym\" {...this.a11yProps(3)} />\n        </Tabs>\n      </AppBar>\n      <SwipeableViews\n        axis={this.props.theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n        index={this.state.value}\n        onChangeIndex={this.handleChangeIndex.bind(this)}\n      >\n\t      <TabPanel value={this.state.value} index={0}>\n\t\t\t\t  \t<OwnerBoxes\n\t\t\t\t  \t\tuser = {this.state.user}\n\t\t\t\t\t\t\tuserMD = {this.state.userMD}\n\t\t\t\t\t\t\tuserBoxes = {this.state.userBoxes}\n\t\t\t\t\t\t\thasBoxes = {this.state.hasBoxes}\n              onAlert={this.props.onAlert}\n\t\t\t\t  \t/>\n\t      </TabPanel>\n\t      <TabPanel value={this.state.value} index={1}>\n\t        \t<AddWod\n\t          \tuid={this.state.user.uid}\n\t          \tuserMD={this.state.userMD}\n\t          \tuserBoxes = {this.state.userBoxes}\n\t\t\t\t\t\t\thasBoxes = {this.state.hasBoxes}\n              onAlert={this.props.onAlert}\n\t          />\n\t      </TabPanel>\n        <TabPanel value={this.state.value} index={2}>\n            <AddGymClass\n              user = {this.state.user}\n              userMD = {this.state.userMD}\n              userBoxes = {this.state.userBoxes}\n              hasBoxes = {this.state.hasBoxes}\n              onAlert={this.props.onAlert}\n            />\n        </TabPanel>\n\t      <TabPanel value={this.state.value} index={3}>\n\t\t\t\t  \t<AddBox\n\t\t\t\t  \t\tuser = {this.state.user}\n\t\t\t\t\t\t\tuserMD = {this.state.userMD}\n              onAlert={this.props.onAlert}\n\t\t\t\t  \t/>\n\t      </TabPanel>\n\t     </SwipeableViews>\n  \t\t</Grid>\n    )\n  }\n}\n\n\n\n\nexport default withTheme(OwnerControls);","\nimport React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { Grid, Paper, Button, Typography, IconButton,\n        TableBody, Table, TableCell, TableContainer, TableRow } \nfrom '@material-ui/core';\n\nimport Whatshot from '@material-ui/icons/Whatshot'\nimport { Alert } from '@material-ui/lab'\nimport { withTheme } from '@material-ui/core/styles'\n\nimport { getFollowers, setFollow, removeFollow } from \"../../utils/firestore/follows\"\n\n\nclass UserFollows extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userFollows: [],\n      userFollowing: {}\n    }\n  }\n\n  extractData(ss){\n    let follows = []\n    let following = {}\n    \n    ss.forEach(doc => {\n      let data = doc.data()\n      follows.push(data)\n      following[data.boxID] = data.followID\n    })\n    return [follows, following]\n  }\n\n  componentDidMount(){\n   this.getFollowers = getFollowers(this.state.user.uid)\n    .onSnapshot(followingSS => {\n      let [follows, following] = this.extractData(followingSS)\n      followingSS.docChanges().forEach(change => {\n        switch(change.type){    \n          case \"added\":\n            console.log(\"Case Added!\")\n            \n\n\n            this.setState({\n              userFollows: follows,\n              userFollowing: following\n            })\n\n            break\n          case \"modified\":\n            console.log(\"modififed\")\n            let modData = change.doc.data()\n            console.log(modData)\n\n            this.setState({\n              userFollows: follows,\n              userFollowing: following\n            })\n\n            \n            break\n          case \"removed\":\n            console.log(\"case Removed\")\n            let data = change.doc.data()\n            let userFollowing = this.state.userFollowing\n            userFollowing[data.boxID] = undefined\n            this.setState({userFollowing: userFollowing})\n\n\n            break\n          default:\n            console.log(\"Uncaught change.\")\n        }\n      })\n    })\n  }\n\n  componentWillUnmount(){\n    if(this.getFollowers){\n      this.getFollowers()\n    }\n  }\n\n  handleFollow(follow){\n    console.log(follow)\n    if(follow.boxID === \"\"){\n      return\n    }\n\n    setFollow(this.state.user.uid, this.state.userMD.username, follow.boxID,\n              follow.title)\n    .then(res => {console.log(\"Succefully followed.\")})\n    .catch(err => {console.log(err)})\n  }\n\n  handleUnfollow(boxID){\n    let followID = this.state.userFollowing[boxID]\n\n    removeFollow(followID)\n    .then(res => {\n      if(res){\n        let userFollowing = this.state.userFollowing\n        userFollowing[boxID] = undefined\n        this.setState({userFollowing: userFollowing})        \n        console.log(\"Succefully unfollowed.\")\n      }\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  isUserFollowing(boxID){\n    return (this.state.userFollowing[boxID])? true: false\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render(){\n    return(\n      <Grid item xs={12}>\n          <Paper elevation={6}>\n            <Grid item xs={12}>\n              <Typography>Following</Typography>\n            </Grid>\n            <Grid item xs={12}>\n                {this.state.userFollows.length > 0 ?\n                  <TableContainer>\n                    <Table>\n                      <TableBody>\n                        {this.state.userFollows.map((follow, i) => {\n                          return (\n                            <TableRow key={i}>\n                              <TableCell>\n                                {follow.boxID === \"\" ?\n                                  <Button>\n                                    {follow.title} <Typography variant=\"caption\" component=\"span\">&nbsp;(deleted)</Typography>\n                                  </Button>\n                                :  \n                                  <Button\n                                    to={`box/${follow.boxID}`}\n                                    component={Link}\n                                  >\n                                    {follow.title}\n                                  </Button>\n                              }\n                              </TableCell>\n                                <TableCell align=\"right\">\n                                { this.isUserFollowing(follow.boxID) ?\n                                    <IconButton\n                                      onClick={()=>{\n                                        this.handleUnfollow(follow.boxID)}\n                                      }>\n                                      <Whatshot color=\"primary\" />\n                                    </IconButton>\n                                  :\n                                    <IconButton \n                                      onClick={()=>{\n                                        this.handleFollow(follow)\n                                      }}>\n                                      <Whatshot style={{fill: this.props.theme.palette.text.primary}}/>\n                                    </IconButton>\n                                }\n                              </TableCell>\n                            </TableRow>\n                          )\n                        })\n                        }\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n                :\n                  <React.Fragment>Not following anyone!</React.Fragment>\n                }\n          </Grid>\n\n          </Paper>\n      </Grid>\n    )\n  }\n}\n\nexport default UserFollows = withTheme(UserFollows);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n}\nfrom '@material-ui/core';\nimport { Delete, LooksOneOutlined, AddBoxOutlined } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nclass UserScoreList extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores,\n\t\t\tuid: props.uid,\n\t\t\tshowRemoveAlert: false,\n\t\t\tremoveScoreID: \"\",\n\t\t\tredirectUrl: \"\",\n\t\t\tredirect: false\n\t\t}\n\t}\n\n\thandleViewWod(wodID){\n\t\tconsole.log(`Go to wodID: ${wodID}`)\n\t}\n\n\thandleViewBox(boxID){\n\t\tconsole.log(`Go to boxID: ${boxID}`)\n\t}\n\n\tshowRemoveAlert(scoreID){\n\t\tthis.setState({showRemoveAlert: true, removeScoreID: scoreID})\n\t}\n\n\tonRemove(){\n\t\tthis.hideRemoveAlert()\n\t\tremoveScore(this.state.removeScoreID)\n\t\t.then((res) => {\n            this.props.onAlert({\n\t\t\t\ttype: \"success\",\n\t\t\t\tmessage: res\n\t\t\t})\n        })\n        .catch(err => {\n            this.props.onAlert({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: err\n\t\t\t})\n        })\n\t}\n\n\thideRemoveAlert(){\n\t\tthis.setState({showRemoveAlert: false})\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n\tonView(url){\n\t\tthis.setState({redirectUrl: url, redirect: true})\n\t}\n\n  \trender(){\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t{this.state.scores.length > 0?\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t{this.state.redirect?\n\t\t\t\t\t<Redirect to={this.state.redirectUrl} />\n\t\t\t\t:\n\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t}\n\t\t\t\t<Table aria-label=\"score table\">\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Title</TableCell>\n\t\t\t\t\t\t<TableCell>Score</TableCell>\n\t\t\t\t\t\t<TableCell></TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.scores.map((score, i) => {\n\t\t\t\t\t\treturn <ScoreRow key={i}\n\t\t\t\t\t\t\tinfo={score}\n\t\t\t\t\t\t\tonViewBox={this.handleViewBox.bind(this)}\n\t\t\t\t\t\t\tonViewWod={this.handleViewWod.bind(this)}\n\t\t\t\t\t\t\tonRemove = {this.showRemoveAlert.bind(this)}\n\t\t\t\t\t\t\tonView={this.onView.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t    </TableBody>\n\t\t\t    </Table>\n\t\t\t</TableContainer>\n\t\t\t:\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Card variant=\"outlined\" color=\"primary\">\n\t\t\t\t  <CardContent>\n\t\t\t\t    <Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t   \tNo Scores!\n\t\t\t\t    </Typography>\n\t\t\t\t   </CardContent>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t\t}\n\t\t\t<ActionCancelModal\n\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\tactionText=\"Remove\"\n\t\t\t\tcancelText=\"Cancel\"\n\t\t\t\tmodalText=\"Remove score?\"\n\t\t\t\tonAction={this.onRemove.bind(this)}\n\t\t\t\tonClose={this.hideRemoveAlert.bind(this)}\n\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n\nexport default UserScoreList = withTheme(UserScoreList);\n\nfunction ScoreRow(props){\n\tlet score = props.info[\"score\"]\n\tlet title = props.info[\"title\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet uid = props.info[\"uid\"]\n\tlet scoreID = props.info[\"scoreID\"]\n\tlet boxID = props.info[\"boxID\"]\n\treturn(\n\t\t<TableRow onClick={(ev) => {\n\t\t\tlet tagName = ev.target.tagName\n\t\t\tif([\"path\", \"svg\"].indexOf(tagName) > -1)\n\t\t\t\treturn\n\t\t\tprops.onView(`wod/${boxID}/${wodID}`)\n\t\t}}>\n\t\t\t<TableCell>\n\t\t\t\t{title}\n\t\t\t</TableCell>\n\t\t\t<TableCell>\n\t\t\t\t{score}\n\t\t\t</TableCell>\n\t\t\t<TableCell align=\"right\">\n\t\t\t\t<Button size=\"small\"\n\t\t\t    \tonClick={() => props.onRemove(scoreID)}>\n\t\t\t    \t<Delete color=\"error\" />\n\t\t\t    </Button>\n\t  \t\t</TableCell>\n\t\t</TableRow>\n\t)\n}\n","import React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport UserScoreList from '../scores/userScoreList'\n\n\nclass Athlete extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      scores: props.scores\n    }\n  }\n\n\n\n\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render(){\n    return(\n\n      <Grid item xs={12}>\n        <Paper elevation={6}>\n          <Grid item xs={12}>\n            <Grid item xs={12}>\n                <Typography>Scores</Typography>\n            </Grid>\n            <Grid item xs={12}>\n              <UserScoreList\n                uid={this.state.user.uid}\n                scores={this.state.scores}\n                onAlert={this.props.onAlert}\n              />\n            </Grid>\n          </Grid>\n        </Paper>\n      </Grid>\n    )\n  }\n}\n\nexport default Athlete = withTheme(Athlete);","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport { Check, Close } from '@material-ui/icons'\nimport \n{ \tGrid, Paper, Button, Typography, IconButton, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { setClassAdmin, getUserAdminInvites, removeNotification } from \"../../utils/firestore/classAdmin\"\n\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore();\n\n\nfunction NotificationRaw(props){\n    let senderUsername = props.info.senderUsername\n    let adminInviteID = props.info.adminInviteID\n    let gymClassTitle = props.info.gymClassTitle\n    let gymClassBoxTitle = props.info.boxTitle\n\n    return(\n        <Grid container item xs={12}>\n            <Grid item xs={8}>\n                <Typography variant=\"caption\">\n                {senderUsername} wants you to be an Admin of {gymClassTitle} at {gymClassBoxTitle}\n                </Typography>\n            </Grid>\n            <Grid item xs={2}>\n                <IconButton size=\"small\" onClick={() => { props.acceptInvite(props.info) }} color=\"secondary\">\n                    <Check />\n                </IconButton>\n            </Grid>\n            <Grid item xs={2}>\n                <IconButton size=\"small\" onClick={() => { props.removeNotification(adminInviteID) }} >\n                    <Close color=\"error\"/>\n                </IconButton>\n            </Grid>\n        </Grid>\n    )\n}\nconst Notification = withTheme(NotificationRaw)\n\n\n\nclass AdminInvites extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            notifications: []\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n    componentWillUnmount(){\n        if(this.notificationsListener)\n            this.notificationsListener()\n    }\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    getListener(){\n        if(this.state.userMD && !this.notificationsListener){\n            this.notificationsListener = getUserAdminInvites(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let notifications = []\n                console.log(ss)\n                if(!ss.empty){\n                    ss.docs.forEach(doc => {\n                        notifications.push(doc.data())\n                    })\n                    \n                    notifications.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n                    this.setState({ notifications: notifications })\n                }else{\n                    this.setState({ notifications: notifications })\n                }\n            })\n        }\n    }\n\n    onRemoveNotification(notifyID){\n        console.log(\"Remove \", notifyID)\n        removeNotification(notifyID)\n        .then( res => { console.log(res) })\n        .catch( err => { console.log(err) })\n    }\n\n    acceptInvite(notify){\n        let gymClassID = notify.gymClassID\n        let classTitle = notify.gymClassTitle\n        let boxTitle = notify.boxTitle\n        let boxID = notify.boxID\n        let notifyID = notify.adminInviteID\n\n        let data = {            \n            gymClassID: gymClassID,\n            gymClassTitle: classTitle,\n            boxTitle: boxTitle,\n            boxID: boxID,\n            uid: this.state.userMD.uid,\n            username: this.state.userMD.username,\n            date: Date.now()\n        }\n        console.log(\"Accept Data\")\n        console.log(data)\n        setClassAdmin(this.state.userMD.uid, gymClassID, data)\n        .then(res => {\n            console.log(res)\n            this.onRemoveNotification(notifyID)\n        })\n        .catch(err => {\n            console.log(err)\n        })\n       \n\n    }\n\n  render(){\n        console.log(this.state.notifications.length)\n\t\treturn( \n            <Grid item xs={12}>\n            {this.state.notifications.length > 0?\n                <Paper style={{margin: \"16px 0px 0px 0px \"}}>\n                    <Grid item xs={12}>\n                        <Typography variant=\"subtitle2\">\n                            Admin Notifications\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                    {this.state.notifications.map((notify, i) => {\n                        return (\n                            <Notification key={i}\n                                info={notify} \n                                removeNotification={this.onRemoveNotification.bind(this)}\n                                acceptInvite={this.acceptInvite.bind(this)}\n                            />)\n                    })}\n                    </Grid>\n                </Paper>\n            :\n                <React.Fragment></React.Fragment>\n            }    \n            </Grid>\n    )}\n}\n\nexport default AdminInvites = withTheme(AdminInvites)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, IconButton, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\nimport { Check, Close } from '@material-ui/icons'\n\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport { setClassMember, getUserMemberInvites, removeNotification } from \"../../utils/firestore/classMember\"\n\nimport \"../../styles.css\"\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\n\nfunction NotificationRaw(props){\n    let senderUsername = props.info.senderUsername\n    let memberInviteID = props.info.memberInviteID\n    let gymClassTitle = props.info.gymClassTitle\n    let gymClassBoxTitle = props.info.boxTitle\n\n    return(\n        <Grid container item xs={12}>\n            <Grid item xs={8}>\n                <Typography variant=\"caption\">\n                {senderUsername} wants you to be a Member of {gymClassTitle} at {gymClassBoxTitle}\n                </Typography>\n            </Grid>\n            <Grid item xs={2}>\n               <IconButton size=\"small\" onClick={() => { props.acceptInvite(props.info) }} color=\"secondary\">\n                    <Check />\n                </IconButton>\n            </Grid>\n            <Grid item xs={2}>\n                <IconButton size=\"small\" onClick={() => { props.removeNotification(memberInviteID) }} >\n                    <Close color=\"error\"/>\n                </IconButton>\n            </Grid>\n        </Grid>\n    )\n}\nconst Notification = withTheme(NotificationRaw)\n\nclass MemberInvites extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            notifications: []\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n    componentWillUnmount(){\n        if(this.notificationsListener)\n            this.notificationsListener()\n    }\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    getListener(){\n        if(this.state.userMD.uid && !this.notificationsListener){\n            this.notificationsListener = getUserMemberInvites(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let notifications = []\n                if(!ss.empty){\n                    ss.docs.forEach(doc => {\n                        notifications.push(doc.data())\n                    })\n    \n                    notifications.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n    \n                    this.setState({ notifications: notifications })\n                }else{\n                    this.setState({ notifications: notifications })\n                }\n            })\n        }\n    }\n\n    onRemoveNotification(notifyID){\n        removeNotification(notifyID)\n        .then( res => { console.log(res) })\n        .catch( err => { console.log(err) })\n    }\n\n    acceptInvite(notify){\n        let gymClassID = notify.gymClassID\n        let classTitle = notify.gymClassTitle\n        let boxTitle = notify.boxTitle\n        let boxID = notify.boxID\n        let notifyID = notify.memberInviteID\n\n        let data = {            \n            gymClassID: gymClassID,\n            gymClassTitle: classTitle,\n            boxTitle: boxTitle,\n            uid: this.state.userMD.uid,\n            boxID: boxID,\n            username: this.state.userMD.username,\n            date: Date.now()\n        }\n\n        setClassMember(this.state.userMD.uid, gymClassID, data)\n        .then(res => {\n            console.log(res)\n            this.onRemoveNotification(notifyID)\n        })\n        .catch(err => {\n            console.log(err)\n        })\n       \n        \n\n    }\n\n  render(){\n\t\treturn( \n            <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n            {this.state.notifications.length > 0?\n                <Paper  elevation={6}>\n                    <Grid item xs={12}>\n                        <Typography variant=\"subtitle2\">\n                            Member Notifications\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12}>\n                    {this.state.notifications.map((notify, i) => {\n                        return (\n                            <Notification key={i}\n                                info={notify} \n                                removeNotification={this.onRemoveNotification.bind(this)}\n                                acceptInvite={this.acceptInvite.bind(this)}\n                            />)\n                    })}\n                    </Grid>\n                </Paper>\n            :\n                <React.Fragment></React.Fragment>\n            }    \n            </Grid>\n    )}\n}\n\nexport default MemberInvites = withTheme(MemberInvites)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\nimport { Redirect } from \"react-router\";\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { getUserClassAdmins } from \"../../utils/firestore/classAdmin\"\n\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\n\nfunction AdminRowRaw(props){\n    let gymClassTitle = props.info.gymClassTitle\n    let boxTitle = props.info.boxTitle\n    let boxID = props.info.boxID\n    let redirectUrl = `class/${boxID}/${props.info.gymClassID}`\n\n    return(\n        <TableRow onClick={ (ev) => props.onView(redirectUrl)}>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {boxTitle}\n                </Typography>\n            </TableCell>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {gymClassTitle}\n                </Typography>\n            </TableCell>\n        </TableRow>\n    )\n}\nconst AdminRow = withTheme(AdminRowRaw)\n\nclass ClassAdminView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            classes: [],\n            redirect: false, \n            redirectUrl: \"\"\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    getListener(){\n        if(this.state.userMD.uid && !this.userClassAdminsListener){\n            this.userClassAdminsListener = getUserClassAdmins(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let classes = []\n                if(!ss.empty){\n                    ss.forEach(doc => {\n                        classes.push(doc.data())\n                    })\n                    classes.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n                    this.setState({ classes: classes })\n                }else{\n                    this.setState({ classes: classes })\n                }\n            })\n        }\n    }\n\n    componentWillUnmount(){\n        if(this.userClassAdminsListener)\n        this.userClassAdminsListener()\n    }\n\n    onView(redirectUrl){\n        this.setState({redirect: true, redirectUrl: redirectUrl})\n    }\n\n  render(){\n\t\treturn( \n            <React.Fragment>\n                {this.state.redirect?\n                    <Redirect to={this.state.redirectUrl}/>\n                :\n                    <React.Fragment></React.Fragment>\n                }\n                {this.state.classes.length > 0?\n                    <Grid item xs={12} style={{margin: \"16px 0px 0px 0px\"}}>\n                        <Paper elevation={6}>\n                            <Typography variant=\"subtitle1\">Admin Roles</Typography>\n                            <Table size=\"small\">\n                                <TableHead>\n                                    <TableRow>\n                                        <TableCell align=\"center\">Gym</TableCell>\n                                        <TableCell align=\"center\">Class</TableCell>\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {this.state.classes.map((classAdmin, i) => {\n                                        return (\n                                            <AdminRow key={i}\n                                                info={classAdmin} \n                                                onView={this.onView.bind(this)}\n                                            />)\n                                    })}\n                                </TableBody>\n                            </Table>\n                        </Paper>      \n                    </Grid>    \n                :\n                    <React.Fragment></React.Fragment>\n                }\n            </React.Fragment>\n    )}\n}\n\nexport default ClassAdminView = withTheme(ClassAdminView)","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\nimport {TableCell as TC} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme, withStyles } from '@material-ui/core/styles';\n\nimport { getUserClassMembers } from \"../../utils/firestore/classMember\"\n\nimport \"../../styles.css\"\nimport { Redirect } from \"react-router\";\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nconst TableCell = withStyles({root:{\n\tborderBottom: \"none\"\n}})(TC)\n\n\nfunction MemberRowRaw(props){\n    let gymClassTitle = props.info.gymClassTitle\n    let boxTitle = props.info.boxTitle\n    let boxID = props.info.boxID\n    let redirectUrl = `class/${boxID}/${props.info.gymClassID}`\n\n    return(\n        <TableRow onClick={ (ev) => props.onView(redirectUrl)}>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {boxTitle}\n                </Typography>\n            </TableCell>\n            <TableCell>\n                <Typography color=\"primary\">\n                    {gymClassTitle}\n                </Typography>\n            </TableCell>\n        </TableRow>\n    )\n}\nconst MemberRow = withTheme(MemberRowRaw)\n\nclass ClassMemberView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n            userMD: props.userMD,\n            classes: [],\n            redirect: false, \n            redirectUrl: \"\"\n\t\t}\n\t}\n\n\tcomponentDidMount(){\n        this.getListener()\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    componentDidUpdate(){\n        this.getListener()\n    }\n\n    componentWillUnmount(){\n        if(this.userClassMembersListener)\n            this.userClassMembersListener()\n    }\n\n\n    getListener(){\n        if(this.state.userMD && !this.userClassMembersListener){\n            this.userClassMembersListener = getUserClassMembers(this.state.userMD.uid)\n            .onSnapshot(ss => {\n                let classes = []\n                if(!ss.empty){\n                    ss.forEach(doc => {\n                        classes.push(doc.data())\n                    })\n                    classes.sort((a, b) => {\n                        return (a.date > b.date)? 1 : -1\n                    })\n                    this.setState({ classes: classes })\n                }else{\n                    this.setState({ classes: classes })\n                }\n            })\n        }\n    }\n\n    onView(redirectUrl){\n        this.setState({redirect: true, redirectUrl: redirectUrl})\n    }\n\n  render(){\n\t\treturn( \n            <React.Fragment>\n                {this.state.redirect?\n                    <Redirect key={\"redirectClassMemberView\"} to={this.state.redirectUrl}/>\n                :\n                    <React.Fragment></React.Fragment>\n                }\n                {this.state.classes.length > 0?\n                    <Grid item xs={12} style={{margin: \"16px 0px 0px 0px\"}}>\n                        <Paper elevation={6}>\n                            <Typography variant=\"subtitle1\">Membership</Typography>\n                            <Table size=\"small\">\n                                <TableHead>\n                                    <TableRow>\n                                        <TableCell align=\"center\">Gym</TableCell>\n                                        <TableCell align=\"center\">Class</TableCell>\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {this.state.classes.map((classMember, i) => {\n                                        return (\n                                            <MemberRow key={i}\n                                                info={classMember} \n                                                onView={this.onView.bind(this)}\n                                            />)\n                                    })}\n                                </TableBody>\n                            </Table>\n                        </Paper>      \n                    </Grid>    \n                :\n                    <React.Fragment></React.Fragment>\n                }\n            </React.Fragment>\n    )}\n}\n\nexport default ClassMemberView = withTheme(ClassMemberView)","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link, Redirect } from 'react-router-dom';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport\n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal, Box\n}\nfrom '@material-ui/core';\nimport { Delete, LooksOneOutlined, AddBoxOutlined } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab';\nimport { withStyles, withTheme } from '@material-ui/core/styles';\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\nimport { DateTime } from 'luxon'\n\nvar db = firebase.database();\n\nfunction cellData(color=\"grey\", valid=false){\n    return {\n        color: color,\n        valid: valid\n    }\n}\n\n\n\n// It would be cool to animate this comp's width 0 -> 12%\nconst SuperCell = withStyles(theme => ({\n    root:{\n        background: `transparent`,\n        display: \"block\",\n        borderRadius: \"4px\",\n        padding: \"0px 0px 0px 2px\",\n        margin: \"1px auto\",\n        width: \"12%\",\n        height: \"6px\"\n\n    }\n}))(Box)\n\nconst Cell = withStyles(theme => ({\n    root:{\n        borderRadius: \"4px\",\n        height:\"5px\"\n    }\n}))(Paper)\n\nconst CellRow = withStyles(theme => ({\n    root:{\n        display: \"flex\"\n    }\n}))(Grid)\n\nconst RedCell = withStyles(theme => ({\n    root:{\n        background: \"linear-gradient(45deg, transparent, #ff0b0b, #6700c5)\",\n    }\n}))(Cell)\n\nconst GreyCell = withStyles({\n    root:{\n        background: `linear-gradient(45deg, transparent, grey, #6700c5)`,\n    }\n})(Cell)\n\nconst GreenCell = withStyles(theme => ({\n    root:{\n        // background: `linear-gradient(45deg, transparent, white, transparent)`,\n        background: `linear-gradient(45deg, transparent,  ${theme.palette.primary.main}, #6700c5)`,\n    }\n}))(Cell)\n\nconst WhiteCell = withStyles(theme => ({\n    root:{\n        background: `linear-gradient(45deg, transparent, #00fb42, #00fb42, #6700c5)`,\n    }\n}))(Cell)\n\n\nclass CalendarScoreView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n        let today = DateTime.now()\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n            scores: props.scores,\n            calendar: this.createCalendar(today),\n            today: today,\n            fakeScores: [{date: 1614844800000}, {date: 1615017600000}, {date: 1615190400000}, {date: 1615363200000}, {date: 1615536000000}]\n\t\t}\n\t}\n\n    componentDidUpdate(){\n\n    }\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n\t}\n\n    getFirstOfMonth(today){\n        return DateTime.local(today.year, today.month, 1, 0, 0, 0, 0)\n    }\n\n    getEndOfMonth(today){\n        return DateTime.local(today.year, today.month, today.daysInMonth, 0, 0, 0, 0)\n    }\n\n\n    getFirstAndLast(today){\n        let first = this.getFirstOfMonth(today)\n        let last = this.getEndOfMonth(today)\n        console.log(last)\n        return [first, last]\n    }\n\n\n    // Creates base calendar, with invalid days, passed days, and future days\n    createCalendar(today){\n\n        // First and last day of the month.\n        let [first, last] = this.getFirstAndLast(today)\n\n        // First week may contain invalid days from previous month\n        // Middle weeks that have valid days\n        // Last week may contain invalid days from next month\n        let firstWeek = []\n        let fullWeek  = []\n        let fullWeek1 = []\n        let fullWeek2 = []\n        let lastWeek  = []\n\n        for(let i=0; i<7; i++){\n            fullWeek.push(cellData(\"white\", true))\n        }\n\n        fullWeek1 = [...fullWeek]\n        fullWeek2 = [...fullWeek]\n\n        for(let i=0; i<first.weekday; i++){\n            firstWeek.push(cellData())\n        }\n        for(let i=first.weekday; i<7; i++){\n            firstWeek.push(cellData(\"white\", true))\n        }\n        for(let i=0; i<=last.weekday; i++){\n            lastWeek.push(cellData(\"white\", true))\n        }\n        for(let i=last.weekday + 1; i<7; i++){\n            lastWeek.push(cellData())\n        }\n\n        let calendar = [[...firstWeek], [...fullWeek], [...fullWeek1], [...fullWeek2], [...lastWeek]]\n\n        // Fill in passed days w/ red\n        // Start and end days' offset corresponding to 2d array\n        let startOffset = this.getOffsetDayOfMonthFromTs(first.ts)\n        let endOffset = this.getOffsetDayOfMonthFromTs(today.ts)\n\n        // convert to 1d array start and end position\n        let start = (startOffset[0] * startOffset[1]) + startOffset[1]\n        let end = (endOffset[0] * endOffset[1]) + endOffset[1]\n\n        for(let i=start; i<end; i++){\n            // convert back to 2d array offsets\n            let r = parseInt(i/7)\n            let c = i%7\n            calendar[r][c] = cellData(\"red\", true)\n        }\n\n        return calendar\n    }\n\n    // Returns [row, col] of calendar from a timestamp\n    getOffsetDayOfMonthFromTs(ts){\n        let day = DateTime.fromMillis(ts)\n        let firstDayOfMonth = this.getFirstOfMonth(day)\n\n        let offset = firstDayOfMonth.weekday + day.day - 1\n        let offsetWeek = parseInt(offset / 7)\n        let offsetDay = offset %  7\n        return [offsetWeek, offsetDay]\n    }\n\n    // Fill calendar with user's scores.\n    fillCalendar(){\n        let calendar = [...this.state.calendar]\n\n        for(let score of this.state.scores){\n            let [row, col] = this.getOffsetDayOfMonthFromTs(score.date)\n            console.log(score.date)\n            calendar[row][col] = cellData(\"green\", true)\n        }\n        console.log(calendar)\n        return calendar\n    }\n\n\n  \trender(){\n\t\treturn(\n\t\t\t<Grid item container xs={12}>\n                <Grid item xs={12}>{this.state.today.monthLong}</Grid>\n                <Grid item xs={3}></Grid>\n                <Grid item container xs={6}>\n\n                    {\n                    this.fillCalendar().map((week, i) => {\n                        let flipDir = i%2==0? \"flip-right\": \"flip-left\"\n\n                        return <CellRow className={flipDir}\n                                item xs={12}\n                                key={i}>\n\n                                {week.map((day, j) => {\n                                    if(day.color === 'green'){\n                                        return <SuperCell key={j}> <GreenCell/></SuperCell>\n                                    }else if(day.color === 'white'){\n                                        return <SuperCell key={j}> <WhiteCell/></SuperCell>\n                                    }else if(day.color === 'red'){\n                                        return <SuperCell  key={j}> <RedCell/></SuperCell>\n                                    }\n                                    return <SuperCell key={j}> <GreyCell /></SuperCell>\n                                })}\n                        </CellRow>\n                    })\n                    }\n                </Grid>\n\t\t\t</Grid>\n\t\t)\n\t}\n}\n\n\nexport default CalendarScoreView = withTheme(CalendarScoreView);\n\nfunction CalenderRow(props){\n\n\treturn(\n\t\t<TableRow>\n\t\t\t<TableCell>\n\n\t\t\t</TableCell>\n\t\t</TableRow>\n\t)\n}\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/firestore\"\n\nimport React, { Component } from 'react'\n\nimport { Grid, Paper, Button, Typography, Collapse,\n        Accordion, AccordionSummary, AccordionDetails }\nfrom '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport OwnerControls from \"../comps/ownerControls\"\nimport UserFollows from '../comps/followers/userFollows'\nimport Athlete from '../comps/profile/athlete'\nimport AdminInvites from \"../comps/profile/adminInvites\"\nimport MemberInvites from \"../comps/profile/memberInvites\"\nimport ClassAdminView from \"../comps/profile/classAdminView\"\nimport ClassMemberView from \"../comps/profile/classMemberView\"\nimport CalendarScoreView from \"../comps/scores/calendarView\"\nimport makeCancelable from \"../utils/promises\"\n\nlet fs = firebase.firestore()\n\nclass PageContentRaw extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      emailAlertOpen: false,\n      scores: []\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n\n    return props\n  }\n\n  componentWillUnmount(){\n    if(this.cancelablePromise){\n      console.log(\"email cancelled\")\n      this.cancelablePromise.cancel()\n    }\n    if(this.listener)\n      this.listener()\n  }\n\n  componentDidMount(){\n    this.listenForUserScores()\n  }\n\n  listenForUserScores(){\n    if(!this.listener){\n      this.listener = fs.collection(\"scores\").where(\"uid\", \"==\", this.state.user.uid)\n      .onSnapshot(ss => {\n        console.log(ss)\n        if(!ss.empty){\n          let scores = []\n          ss.forEach(doc => {\n            scores.push(doc.data())\n          })\n          console.log(scores[0])\n          scores.sort((a, b) => {\n           return (a.date > b.date)? 1 : -1\n          })\n          this.setState({scores: scores })\n        }else{\n          this.setState({scores: [] })\n        }\n      },\n      err => {console.log(err)})\n    }\n  }\n\n  sendVerificationEmail(){\n    let emailVerifyPromise = new Promise(\n      (res, rej) => {\n      this.state.user.sendEmailVerification()\n      .then(() => this.setState({ emailAlertOpen: true }))\n      .catch( err => { rej(err) })\n    })\n\n    this.cancelablePromise = makeCancelable(emailVerifyPromise)\n  }\n\n  render(){\n    return (\n      <Grid item container align=\"center\">\n        <Grid item xs={12}>\n          <Collapse in={this.state.emailAlertOpen}>\n            <Alert onClose={() => {this.setState({emailAlertOpen: false})}}>\n              Email sent!\n            </Alert>\n          </Collapse>\n        </Grid>\n        <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n          <Paper elevation={4}>\n            <Typography gutterBottom variant=\"h5\" >\n              { this.state.userMD.username }\n            </Typography>\n          </Paper>\n        </Grid>\n        <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n          <Paper elevation={4}>\n            <CalendarScoreView\n              userMD={this.state.userMD}\n              scores={this.state.scores}\n            />\n          </Paper>\n        </Grid>\n        <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n          <Paper elevation={4}>\n\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid item container xs={12}>\n              {!this.state.user.emailVerified ?\n                <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n                  <Paper elevation={4}>\n                    <Typography >\n                      Verification\n                    </Typography>\n\n                    <Button color=\"secondary\" style={{margin: \"0px 0px 4px 0px \"}}\n                      onClick={this.sendVerificationEmail.bind(this)} >\n                      <Typography  variant=\"subtitle2\">\n                        Send Verification Email\n                      </Typography>\n                    </Button>\n                  </Paper>\n                </Grid>\n              :\n                <React.Fragment></React.Fragment>\n              }\n\n              <AdminInvites userMD={this.state.userMD}/>\n              <MemberInvites userMD={this.state.userMD}/>\n              <ClassAdminView userMD={this.state.userMD}/>\n              <ClassMemberView userMD={this.state.userMD}/>\n\n             <Grid item xs={12} style={{margin: \"16px 0px 0px 0px \"}}>\n               <Paper elevation={4}>\n                <UserFollows\n                  user={this.state.user}\n                  userMD={this.state.userMD}\n                 />\n               </Paper>\n              </Grid>\n        </Grid>\n\n        <Paper elevation={2} style={{margin: \"16px 0px 0px 0px\"}}>\n          {this.state.userMD.accountType === \"owner\" ?\n            <OwnerControls\n              user={this.state.user}\n              userMD={this.state.userMD}\n              onAlert={this.props.onAlert}\n              />\n          :\n            <Athlete\n              user={this.state.user}\n              userMD={this.state.userMD}\n              onAlert={this.props.onAlert}\n              scores={this.state.scores}\n            />\n          }\n          </Paper>\n        </Grid>\n    </Grid>\n    )\n  }\n}\n\nconst PageContent = withTheme(PageContentRaw)\n\nclass ProfilePage extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD\n    }\n  }\n\n  /*\n    login.js has the form and does the login, calls this with the user obj\n  */\n  handleLogIn(user){\n      this.setState({user: user} )\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return props\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} id=\"profilepage\">\n           <PageContent\n                user= {this.state.user}\n                userMD={this.state.userMD}\n                onAlert={this.props.onAlert}\n            />\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default ProfilePage = withTheme(ProfilePage)\n","\nexport default function makeCancelable(promise){\n    let hasCanceled_ = false;\n  \n    const wrappedPromise = new Promise((resolve, reject) => {\n      promise.then(\n        val => hasCanceled_ ? reject({isCanceled: true}) : resolve(val),\n        error => hasCanceled_ ? reject({isCanceled: true}) : reject(error)\n      );\n    });\n  \n    return {\n      promise: wrappedPromise,\n      cancel() {\n        hasCanceled_ = true;\n      },\n    };\n  };","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\"\n\nimport { Link } from 'react-router-dom';\n\n\nimport React, { Component, createRef } from \"react\";\n\nimport {\n\t AppBar, Toolbar, IconButton, Button, Typography, Paper, Collapse,\n\t Popper, MenuList, MenuItem, ClickAwayListener, Grow, Fade\n\n} \nfrom '@material-ui/core';\nimport { Menu } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab'\nimport { withTheme, withStyles, makeStyles } from '@material-ui/core/styles';\n\nconst StyledMenuItem = withStyles((theme) => ({\n\troot: {\n\t  '&:hover': {\n\t\tbackgroundColor: theme.palette.primary.main,\n\t\t'& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n\t\t  color: theme.palette.common.white,\n\t\t},\n\t  },\n\t},\n  }))(MenuItem);\n\nconst StyledTypography = withStyles((theme) => ({\n\troot: {\n\t\tcolor: theme.palette.text.primary\t\n\t},\n}))(Typography);\n\nconst StyledPaper = withStyles((theme) => ({\n\troot: {\n\t\t'border': '1px solid',\n\t  'borderColor': theme.palette.text.primary,\n\t},\n}))(Paper);\n\n\nconst styles = theme => ({\n  popper: {\n\t  zIndex: 100,\n  }\n});\n\n\nfunction UserAlertRaw(props){\n\treturn(\n\t\t<Alert severity={props.alertInfo.type} onClose={props.onCloseAlert}>\n\t\t\t{props.alertInfo.message}\n\t\t</Alert>\n\t)\n}\n\nconst UserAlert = withTheme(UserAlertRaw)\n\nclass Header extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.menuRef = createRef()\n\t\tthis.state = {\n\t\t\tuser: props.user,\n\t\t\tuserMD: props.userMD,\n\t\t\topen: false,\n\t\t\talertOpen: props.alertOpen,\n\t\t\talertInfo: props.alertInfo\n\t\t}\n\t}\n\n\tstatic getDerivedStateFromProps(props, state){\n\t\treturn props\n  \t}\n\t  \n\thandleToggle(){\n\t\tthis.setState({open: !this.state.open})\n\t};\n\t\n\thandleClose(ev){\n\t\tconsole.log(\"Should close\")\n\t\tthis.setState({open: false})\n\t}\n\n\thandleListKeyDown(ev) {\n\t\tif (ev.key === 'Tab') {\n\t\t\tev.preventDefault();\n\t\t\tthis.setState({open: false})\n\t\t}\n\t}\n\n\trender(){\n\t\tconst { classes } = this.props\n\t\treturn(\n\t\t\t<AppBar position=\"sticky\" ref={this.menuRef} \n\t\t\t\t\tstyle={{background:this.props.theme.palette.background.toolbar}}>\n\t\t\t<Toolbar disableGutters={false}>\n\t\t\t    <StyledTypography  variant=\"h3\" >\n\t\t            WodTrackrr\n\t\t          </StyledTypography>\n\t\t\t\t  \n\t\t          <section style={{marginLeft: \"auto\", marginRight: -12}}>\n\t\t\t\t\t<IconButton color=\"primary\" onClick={this.handleToggle.bind(this)}>\n\t\t\t\t\t\t<Menu   />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Popper open={this.state.open} anchorEl={this.menuRef.current}\n\t\t\t\t\t\t\t  placement=\"bottom-end\" transition disablePortal\n\t\t\t\t\t\t\t className={classes.popper}>\n\t\t\t\t\t\t{({ TransitionProps, placement }) => (\n\t\t\t\t\t\t\t<Fade\n\t\t\t\t\t\t\t{...TransitionProps}\n\t\t\t\t\t\t\tstyle={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<StyledPaper>\n\t\t\t\t\t\t\t\t<ClickAwayListener onClickAway={this.handleClose.bind(this)}>\n\t\t\t\t\t\t\t\t<MenuList  id=\"menu-list-grow\" onKeyDown={this.handleListKeyDown.bind(this)}>\n\t\t\t\t\t\t\t\t\t<StyledMenuItem onClick={this.props.changeTheme}>\n\t\t\t\t\t\t\t\t\t\tChange Theme\n\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\n\t\t\t\t\t\t\t\t\t<StyledMenuItem onClick={this.handleClose.bind(this)} component={Link} to=\"/settings/\">\n\t\t\t\t\t\t\t\t\t\tSettings \n\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t{this.state.user?\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t<StyledMenuItem onClick={(ev) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.handleClose.bind(this)(ev)\n\t\t\t\t\t\t\t\t\t\t\tthis.props.handleLogout()\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<StyledMenuItem component={Link} to=\"/login\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ this.handleClose.bind(this) }>\n\t\t\t\t\t\t\t\t\t\t\t\tLogin\n\t\t\t\t\t\t\t\t\t\t</StyledMenuItem>\n\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</MenuList>\n\t\t\t\t\t\t\t\t</ClickAwayListener>\n\t\t\t\t\t\t\t</StyledPaper>\n\t\t\t\t\t\t\t</Fade>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Popper>\n\t\t          \t</section>\n\t\t        </Toolbar>\n\t\t\t\t<Collapse in={this.props.alertOpen}>\n\t\t\t\t\t{this.state.alertInfo ?\n\t\t\t\t\t\t<UserAlert  alertInfo={this.state.alertInfo} \n\t\t\t\t\t\t\tonCloseAlert={this.props.onCloseAlert}\n\t\t\t\t\t\t/>\n\t\t\t\t\t:\n\t\t\t\t\t\t<React.Fragment></React.Fragment>\n\t\t\t\t\t}\n\n\t\t\t\t</Collapse>\n\t\t\t</AppBar>\n\t\t)\n\t}\n}\n\n\n\nexport default withStyles(styles, { withTheme: true })(Header);\n","import firebase from \"../../context/firebaseContext\"\n// import * as firebase from \"firebase/app\";\nimport \"firebase/auth\"; \n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, Paper } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\n\nimport \"../../styles.css\"\n\n\nexport default class Login extends Component {\n  \n  handleSubmit(ev){\n    let email = document.getElementById('email')\n\n    let pass1 = document.getElementById('password')\n    let pass2 = document.getElementById('passwordConfirm')\n    \n    console.log(email.value, pass1)\n  \n    firebase.auth().signInWithEmailAndPassword(email.value, pass1.value)\n    .then(res=>{\n      console.log(\"Firebase res\")\n      console.log(res)\n      this.props.onLogin(res.user)\n    })\n    .catch(function(error) {\n      console.log(error)\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // ...\n    });\n  }\n\n  render () {\n    return (\n      <Grid container id=\"login\" align=\"center\" justify=\"center\">\n        <br />\n        <Grid item xs={12} >\n          <Paper elevation={2}>\n            <Typography variant=\"h4\">\n              Login\n            </Typography>\n          \n            <br />\n        \n            <TextField\n            id=\"email\"\n            style={{ margin: 8 }}\n            placeholder=\"Email\"\n            margin=\"normal\"\n            InputLabelProps={{\n            shrink: true,\n            }}\n            /><br /><br />\n            <TextField\n            id=\"password\"\n            type=\"password\"\n            style={{ margin: 8 }}\n            placeholder=\"Password\"\n            margin=\"normal\"\n            InputLabelProps={{\n            shrink: true,\n            }}\n            />\n            <br/><br/>\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} >\n          <Paper elevation={2}>\n            <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n              Login\n            </Button>\n            <Link to=\"/register\" className=\"no-line\" style={{'paddingLeft': '10px'}}>\n              <Button variant=\"outlined\" color=\"secondary\" >\n                Register\n              </Button>\n            </Link>\n          </Paper>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\n\n\n","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();","let apptheme = {\n   \"overrides\": {\n      \"MuiContainer\": {\n         \"root\":{\n            \"background-color\": \"#212121\"\n         }\n      },\n      \"MuiSelect\": {\n         \"icon\": {\n            \"color\": \"white\"\n         }\n      },\n      \"MuiInputBase\":{\n         \"root\": {\n            \n         }\n      },\n      \"MuiInput\":{\n         \"underline\":{\n            '&:before': {\n               borderBottomColor: \"white\"\n           }\n         }\n      }\n   },\n   \"palette\":{\n      \"common\":{\n         \"black\":\"#000\",\n         \"white\":\"#fff\"\n      },\n      \"appBackground\":{\n         \"main\": \"black\"\n        },\n      \"background\":{\n         \"paper\":\"#212121\",\n         \"toolbar\": \"#333333\",\n         \"tableHeader\": \"#2e3134\",\n         \"default\":\"rgba(48, 48, 48, 1)\"\n      },\n      \"primary\":{\n         \"main1\":\"#0072fff7\",\n         \"main\":\"#4ec5ff\",\n         \"mainGrad\": 'linear-gradient(90deg,#0890fd,#01d3fe)',\n         \"contrastText\":\"rgba(255, 255, 255, 1)\"\n      },\n      \"secondary\":{\n         \"light\":\"#14eac3\",\n         \"main\":\"#14eac3\",\n         \"dark\":\"#14eac3\",\n         \"contrastText\":\"#fff\"\n      },\n      \"error\":{\n         \"light\":\"#ea4331\",\n         \"main\":\"#c43627\",\n         \"dark\":\"#2d0d0b\",\n         \"contrastText\":\"rgba(255, 255, 255, 1)\"\n      },\n      \"text\":{\n         \"primary\":\"#ffffff\",\n         \"secondary\":\"#e0dfdf\",\n         \"disabled\":\"#bdbdbd\",\n         \"hint\":\"#afafaf\"\n      }\n   }\n};\n\nexport default apptheme = apptheme;","let applighttheme = {\n   \"overrides\": {\n      \"MuiContainer\": {\n         \"root\":{\n            \"background-color\": \"#ffffff\"\n         }\n      },\n      \"MuiSelect\": {\n         \"icon\": {\n            \"color\": \"black\"\n         }\n      }\n   },\n    \"palette\":{\n       \"common\":{\n          \"black\":\"#000\",\n          \"white\":\"#fff\"\n       },\n       \"background\":{\n          \"paper\":\"#ffffff\",\n          \"toolbar\": \"#fffffff5\",\n          \"tableHeader\": \"#f1f1f1\",\n          \"default\":\"#f1f1f1\"\n       },\n       \"primary\":{\n          \"main1\":\"#0072fff7\",\n          \"main\":\"#4ec5ff\",\n          \"mainGrad\": 'linear-gradient(90deg,#0890fd,#01d3fe)',\n          \"contrastText\":\"rgba(255, 255, 255, 1)\"\n       },\n       \"secondary\":{\n          \"light\":\"#14eac3\",\n          \"main\":\"#14eac3\",\n          \"dark\":\"#14eac3\",\n          \"contrastText\":\"#fff\"\n       },\n       \"error\":{\n          \"light\":\"#ea4331\",\n          \"main\":\"#c43627\",\n          \"dark\":\"#2d0d0b\",\n          \"contrastText\":\"rgba(255, 255, 255, 1)\"\n       },\n       \"follow\":{\n          \"main\": \"#09e073\"\n       },\n       \"unfollow\": {\n          \"main\": \"#e07609\"\n       },\n       \"text\":{\n          \"primary\":\"#000000\",\n          \"secondary\":\"#e0dfdf\",\n          \"disabled\":\"#bdbdbd\",\n          \"hint\":\"#afafaf\"\n       }\n    }\n };\n \n export default applighttheme = applighttheme;","import firebase, { FirebaseAuthContext } from \"./context/firebaseContext\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\n\nimport React from \"react\";\nimport { HashRouter, Switch, Route, Link, Redirect } from 'react-router-dom';\n\nimport { Paper, Button, BottomNavigation, BottomNavigationAction,\n        Grid, Container, Box }\nfrom '@material-ui/core';\n\nimport HomeIcon from '@material-ui/icons/Home';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\nimport PanoramaIcon from '@material-ui/icons/Panorama';\n\nimport \"./styles.css\";\n\n\nimport BoxSearchPage from \"./pages/boxSearchPage\"\nimport Settings from \"./pages/settings\"\nimport BoxView from \"./comps/boxes/boxView\"\nimport RegisterUser from \"./comps/profile/registerUser\"\nimport GymClassView from \"./comps/gymClasses/gymClassView\"\nimport ScoreView from \"./comps/scores/scoreView\"\nimport Profile from \"./pages/profile\"\nimport Header from \"./comps/header\"\nimport Login from \"./comps/profile/login\"\n\n\nimport history from \"./history\"\nimport { createMuiTheme, withStyles, ThemeProvider, responsiveFontSizes } from '@material-ui/core/styles';\n\nimport apptheme from \"./css/apptheme\"\nimport lightapptheme from \"./css/applighttheme\"\nimport \"./styles.css\"\n\nlet darkTheme = createMuiTheme(apptheme)\ndarkTheme = responsiveFontSizes(darkTheme)\n\n\nlet lightTheme = createMuiTheme(lightapptheme)\nlightTheme = responsiveFontSizes(lightTheme)\n\nconst BackgroundGrid = withStyles(theme =>({\n  root:{\n    backgroundColor: theme.palette.background.paper\n  }\n}))(Grid)\n\n\nexport default class App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state={\n      btmnav: 0,\n      user: firebase.auth().currentUser,\n      userMD: false,\n      theme: darkTheme,\n      darkTheme: true,\n      alertOpen: false,\n      alertInfo: false\n    }\n  }\n\n  static getDerivedStateFromProps(props, state){\n    return state\n  }\n\n\n  componentDidMount(){\n    this.firebaseAuthListener = firebase.auth()\n    .onAuthStateChanged(user => {\n      let fs = firebase.firestore()\n      if(user){\n        let doc = fs.collection(\"users\").doc(user.uid)\n        this.userMDListener = doc.onSnapshot(metadata => {\n          if(metadata.exists){\n            this.setState({ user: user, userMD: metadata.data() })\n          }else{\n            this.setState({ user: user, userMD: false })\n          }\n        }, err => {console.log(err)})\n\n      }else{\n        this.setState({ user: null, userMD: false })\n      }\n    })\n\n  }\n\n  handleLogin(user){\n    this.setState({user: user})\n  }\n\n  handleLogout(){\n    firebase.auth().signOut().then(() => {\n      this.setState({user: null})\n    }, (error) => {\n      console.error('Sign Out Error', error )\n    });\n  }\n\n  componentWillUnmount(){\n    if(this.firebaseAuthListener !== undefined)\n      this.firebaseAuthListener && this.firebaseAuthListener()\n    if(this.userMDListener !== null)\n      this.userMDListener && this.userMDListener()\n  }\n\n  changeTheme(){\n    let newTheme  = this.state.darkTheme? lightTheme: darkTheme\n    this.setState({theme: newTheme, darkTheme: !this.state.darkTheme})\n  }\n\n  onAlert(alert){\n    console.log(alert)\n    this.setState({alertInfo: alert, alertOpen: true})\n  }\n\n  onCloseAlert(){\n    this.setState({alertOpen: false, alertInfo: false})\n  }\n\n\n\n  render(){\n    return(\n    <FirebaseAuthContext.Provider>\n    <HashRouter history={history} >\n    <ThemeProvider theme={this.state.theme}>\n    <Header className=\"header\" user={this.state.user}\n      userMD={this.state.userMD}\n      changeTheme={this.changeTheme.bind(this)}\n      handleLogout={this.handleLogout.bind(this)}\n      alertOpen={this.state.alertOpen}\n      alertInfo={this.state.alertInfo}\n      onCloseAlert={this.onCloseAlert.bind(this)}\n      />\n\n      <BackgroundGrid container id=\"testCont\">\n        <Grid item container xs={12}\n          style={{\"minHeight\": \"100vh\", paddingTop: \"8px\"}}>\n          <Switch>\n            <Route exact path=\"/boxSearch\">\n              <BoxSearchPage user={this.state.user}\n                userMD={this.state.userMD}\n                onAlert={this.onAlert.bind(this)}\n                />\n            </Route>\n            <Route exact path=\"/profile\">\n              {this.state.user?\n                <Profile user={this.state.user}\n                  userMD={this.state.userMD}\n                  onAlert={this.onAlert.bind(this)}\n                  />\n              :\n                <Redirect to=\"/login\" />\n              }\n            </Route>\n\n            <Route path=\"/box/:boxID\"\n              render= { props =>(\n                <BoxView\n                  userMD={this.state.userMD}\n                  boxID={props.match.params.boxID}\n                  onAlert={this.onAlert.bind(this)}/>\n              )}\n            />\n            <Route path=\"/class/:boxID/:gymClassID\"\n              render= { props =>(\n                <GymClassView\n                  userMD={this.state.userMD}\n                  gymClassID={props.match.params.gymClassID}\n                  boxID={props.match.params.boxID}\n                  onAlert={this.onAlert.bind(this)}/>\n              )}\n            />\n           <Route path=\"/wod/:boxID/:wodID\"\n            render= { props =>(\n                <ScoreView userMD={this.state.userMD}\n                  boxID={props.match.params.boxID}\n                  wodID={props.match.params.wodID}\n                  isReadOnly={true}\n                  onAlert={this.onAlert.bind(this)}/>\n              )\n            }\n          />\n          <Route exact path=\"/register\"\n            render= { props =>(\n              this.state.user?\n                <Redirect to=\"/profile\" />\n              :\n                <RegisterUser onAlert={this.onAlert.bind(this)}/>\n              )\n            }\n          />\n\n          <Route exact path=\"/settings\"\n            render= { props =>(\n                <Settings\n                  user={this.state.user}\n                  userMD={this.state.userMD}\n                  onAlert={this.onAlert.bind(this)}\n                />\n            )}\n          />\n\n          <Route exact path=\"/login\">\n            {!this.state.user?\n              <Login\n                onLogin={this.handleLogin.bind(this)}\n                onAlert={this.onAlert.bind(this)}/>\n            :\n              <Redirect to=\"/boxSearch\" />\n            }\n            </Route>\n          </Switch>\n          <div style={{\"margin\": \"5vh\"}}></div>\n        </Grid>\n      </BackgroundGrid>\n\n      <BottomNavigation className=\"footer\"\n        value = {this.state.btmnav}\n        onChange = {(event, newValue) => {\n            this.setState({btmnav: newValue})\n          }}\n          style={{background: this.state.theme.palette.primary.mainGrad}}\n        showLabels\n      >\n        <BottomNavigationAction label=\"Search\" component={Link} to=\"/boxSearch\" icon={<PersonIcon />}  />\n        <BottomNavigationAction label=\"Profile\" component={Link} to=\"/profile\" icon={<PersonIcon />}  />\n      </BottomNavigation>\n      </ThemeProvider>\n      </HashRouter>\n      </FirebaseAuthContext.Provider>\n\n    );\n  }\n}\nApp.contextType = FirebaseAuthContext;\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app\";\n\n\n\n\n\nReactDOM.render( <App />, document.getElementById('root'));"],"sourceRoot":""}