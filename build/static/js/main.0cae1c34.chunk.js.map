{"version":3,"sources":["context/firebaseContext.js","utils/formatting.js","comps/lineChart.js","comps/barChart.js","comps/scores/scoreDataView.js","comps/scores/scoreList.js","utils/firebase/scores.js","utils/firestore/scores.js","comps/scores/addScore.js","comps/actionCancelModal.js","comps/scores/scoreView.js","utils/firestore/wods.js","comps/wods/editWod.js","comps/searchSortTable.js","comps/boxes/boxView.js","comps/boxes/boxSearch.js","utils/firestore/follows.js","pages/boxSearchPage.js","comps/profile/registerUser.js","comps/profile/login.js","utils/firestore/boxes.js","comps/boxes/boxListAccordion.js","comps/wods/addWod.js","comps/boxes/ownerBox.js","utils/firestore/users.js","comps/profile/usernamePanel.js","comps/scores/userScoreList.js","utils/firebase/followers.js","comps/followers/userFollows.js","comps/profile/athlete.js","pages/profile.js","comps/header.js","history.js","css/apptheme.js","app.js","index.js"],"names":["firebase","FirebaseAuthContext","React","createContext","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","cvtTimetoInt","x","console","log","split","mins","seconds","parseInt","cvtIntToTime","Math","floor","secs","database","LineChart","props","state","scoreType","data","values","stats","this","ctx","document","getElementById","grd","getContext","createLinearGradient","addColorStop","lineChart","destroy","Chart","type","label","datasets","barPercentage","barThickness","maxBarThickness","minBarLength","backgroundColor","options","scales","yAxes","ticks","callback","index","labels","tooltips","callbacks","title","tooltipItem","datasetIndex","yLabel","maintainAspectRatio","plugins","beforeInit","chart","newProps","setState","createChart","obj","Array","from","Object","entries","entry","Map","Grid","item","xs","style","height","id","Component","withTheme","BarChart","length","binData","barChart","parseFloat","_mean","sd","bins","i","binA","format","binB","unshift","push","standardDeviation","mean","createLabels","binnedData","diff","numSDAway","abs","ScoreDataView","scores","graphData","rawScores","transformData","showCharts","map","score","getDescStats","vals","min","max","median","container","align","Paper","elevation","Typography","ScoreList","uid","Fragment","TableContainer","component","Table","aria-label","TableHead","TableCell","TableBody","isCurUserScore","ScoreRow","info","onRemove","isUserScore","Card","variant","color","CardContent","gutterBottom","username","scoreID","TableRow","selected","Button","size","onClick","db","storage","fs","firestore","AddScore","userMD","wodMD","s","search","userScore","value","isNumInSane","alert","isNaN","wodID","boxID","Promise","res","rej","date","Date","now","collection","where","get","then","ss","key","empty","doc","set","catch","err","forEach","setScore","Accordion","AccordionSummary","background","theme","palette","primary","main","expandIcon","aria-controls","AccordionDetails","replace","toUpperCase","TextField","margin","pattern","inputProps","placeholder","InputLabelProps","shrink","handleAddScore","bind","ActionCancelModal","open","Modal","onClose","aria-labelledby","aria-describedby","position","top","left","width","transform","display","flexDirection","justifyContent","modalText","onAction","actionText","cancelText","ScoreView","curRemoveScoreID","showRemoveAlert","wodListener","onSnapshot","scoreListener","isTime","sort","a","b","undefined","delete","removeScore","keys","handleRemoveScore","handleModalClose","removeWod","promises","name","getSnapshot","collectionName","fieldName","fieldID","batch","cnt","ref","commit","all","EditWod","wodInfo","userBoxes","hasBoxes","wodText","update","editWod","ev","val","target","oldScoreType","oldBoxID","Select","native","box","onChange","handleValChange","multiline","rows","editWOD","SearchSortTable","headers","filteredRows","orderTableBy","orderTable","pageNum","rowsPerPage","pageStart","pageEnd","keyCode","which","filter","wod","toLowerCase","includes","orderBy","order","descendingComparator","comparator","stabilizedThis","el","isAsc","newPage","start","end","fullWidth","onKeyUp","InputProps","startAdornment","InputAdornment","header","sortable","TableSortLabel","active","direction","createSortHandler","stableSort","getComparator","slice","row","Wod","handleView","handleRemove","handleEdit","showOwnerBtns","TablePagination","rowsPerPageOptions","count","page","onChangePage","handleChangePage","onChangeRowsPerPage","handleChangeRowsPerPage","toLocaleDateString","to","BoxView","boxMD","wods","currentWodID","currentWodMD","showEditModal","editWodInfo","curRemoveWodBoxID","curRemoveWodID","curRemoveWodTitle","userBoxesListener","boxes","boxListener","getUserBoxListener","getBoxListener","getWodListener","checkListeners","filteredWods","isReadOnly","handleRemoveWod","deleteWod","handleEditModalClose","BoxSearch","user","isOwner","allBoxes","filteredBoxes","userFollowing","listenForFollowing","following","followID","boxInfo","isFollowing","setFollow","removeFollow","isUserFollowing","Box","mainGrad","handleBoxView","handleRemoveBox","handleFollow","handleUnfollow","itemxs","padding","alignItems","BoxSearchPage","allBoxesListener","y","RegisterUser","redirect","email","pass1","pass2","auth","createUserWithEmailAndPassword","admin","accountType","justify","handleSubmit","Login","signInWithEmailAndPassword","onLogin","error","code","message","className","removeBox","BoxListAccordion","currentBoxID","curRemoveBoxID","curRemoveBoxTitle","boxTitle","reduce","zeroMinWidth","noWrap","deleteBox","AddWod","setWod","createWOD","OwnerBox","addBoxProgress","scoreTypeSelectVal","boxIDSelectVal","listenForBoxes","showAddBoxProgress","createBox","result","setBox","UsernamePanel","hideUsernameInput","usernameInput","exec","docs","setUsername","updateUsername","UserScoreList","removeScoreID","remove","hideRemoveAlert","onViewBox","handleViewBox","onViewWod","handleViewWod","AddBoxOutlined","LooksOneOutlined","DeleteOutlined","UserFollows","on","followingSS","exists","toList","follow","Athlete","userScores","listenForUserScores","orderByChild","equalTo","userScoresSS","PageContent","emailAlertOpen","sendEmailVerification","Collapse","in","Alert","emailVerified","sendVerificationEmail","onLogout","ProfilePage","signOut","handleLogout","handleLogIn","Header","AppBar","toolbar","Toolbar","disableGutters","createBrowserHistory","apptheme","createMuiTheme","responsiveFontSizes","App","btmnav","currentUser","firebaseAuthListener","onAuthStateChanged","userMDListener","metadata","Provider","history","ThemeProvider","exact","path","render","match","params","BottomNavigation","event","newValue","showLabels","BottomNavigationAction","Link","icon","contextType","ReactDOM"],"mappings":"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","file":"static/js/main.0cae1c34.chunk.js","sourcesContent":["import * as firebase from \"firebase/app\";\nimport \"firebase/auth\"; \nimport React from \"react\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCGE8_j8cfIBmIzcvP6CVgG2yC6EE1Ep1U\",\n  authDomain: \"wodtrackrr.firebaseapp.com\",\n  databaseURL: \"https://wodtrackrr.firebaseio.com\",\n  projectId: \"wodtrackrr\",\n  storageBucket: \"wodtrackrr.appspot.com\",\n  messagingSenderId: \"743601990099\",\n  appId: \"1:743601990099:web:5937e9151eaad13e93a726\",\n  measurementId: \"G-39CF0BRPMH\"\n};\n\n\n\nexport default firebase\nexport const FirebaseAuthContext = React.createContext(firebase.initializeApp(firebaseConfig));","export default function cvtReps(x){\n\treturn parseInt(x)\n}\n\nexport function cvtTimetoInt(x){\n\tconsole.log(\"Split\", x)\n\tlet [mins, seconds] = x.split(\":\")\n\treturn (parseInt(mins) * 60) + parseInt(seconds)\n}\n\n\nexport function cvtIntToTime(x){\n\tlet mins = Math.floor(x / 60)\n\tlet secs = Math.floor(x - (mins*60))\n\tif(secs < 10){\n\t\tsecs = `0${secs}`\n\t}\n\treturn `${mins}:${secs}`\n}\n\n\nexport function cvtTimetoIntList(rawScores){\n\treturn rawScores.map((score) => {\n\t\tcvtTimetoInt(score)\n\t})\n}\n\n\nexport function msToDate(ms){\n\treturn new Date(ms).toLocaleDateString(\"en-US\")\n}\n\n\nexport function formatDate(){\n  const [{ value: month },,{ value: day },,{ value: year }] \n    = new Intl.DateTimeFormat('en', \n      { year: 'numeric', month: 'numeric', day: '2-digit' })\n      .formatToParts(new Date())  \n  console.log(new Intl.DateTimeFormat('en', \n      { year: 'numeric', month: 'numeric', day: '2-digit' }))\n  return `${year}/${month}/${day}`\n}\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\nimport Chart from 'chart.js';\n\nimport {cvtTimetoInt, cvtIntToTime} from \"../utils/formatting\"\n// Stats\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport \"../styles.css\"\n\n\nvar db = firebase.database();\n\n\nclass LineChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscoreType: props.scoreType,\n\t\t\tdata: props.data, // x y values for chart\n\t\t\tvalues: props.values, // raw score values\n\t\t\tstats: props.stats // mean, median, SD\n\t\t}\n\t}\n\n\t\n\tcomponentDidMount(){\n\n\t}\n\n\tcreateChart(){\n\t\tconsole.log(\"LineChart____________\")\n\t\tconsole.log(this.state)\n\t\tthis.ctx = document.getElementById('lineChart');\n\t\t\n\t\tlet context = this.ctx.getContext('2d')\n\t\tlet grd = context.createLinearGradient(200,0,200,400);\n\t\tgrd.addColorStop(0,\"#01d3fe\");\n\t\t\n\t\tgrd.addColorStop(1,\"#0890fd\");\n\n\t\tif(this.lineChart){\n\t\t\tthis.lineChart.destroy()\n\t\t}\n\t\t\n\t\tthis.lineChart = new Chart(this.ctx, {\n\t\t    type: 'line',\n\t\t    \n\t\t    data:  {\n\t\t    \tlabel: \"Scores\",\n\t\t\t    datasets: [{\n\t\t\t    \tlabel: \"Score\",\n\t\t\t        barPercentage: 0.5,\n\t\t\t        barThickness: 6,\n\t\t\t        maxBarThickness: 8,\n\t\t\t        minBarLength: 2,\n\t\t\t        backgroundColor: grd,\n\t\t\t        data: this.state.data\n\t\t\t    }]\n\t\t\t},\n\t\t\toptions:{\n\t\t\t\tscales: {\n\t\t            yAxes: [{\n\t\t                ticks:{\n\t\t                \tcallback: (label, index, labels) => {\n\t\t\t                \tif(this.state.scoreType === \"time\"){\n\t\t\t                \t\treturn cvtIntToTime(label)\n\t\t\t                \t}else if(this.state.scoreType === \"reps\"){\n\t\t\t                \t\treturn label\n\t\t\t                \t}\n\t\t\t                }\n\t\t\t             }\n\t\t            }]\n\t\t\t    },\n\t\t\t    tooltips: {\n\t\t\t        callbacks: {\n\t\t\t        \ttitle: (tooltipItem, data) => {\n\n\t\t\t        \t},\n\t\t\t            label: (tooltipItem, data) => {\n\t\t\t                var label = data.datasets[tooltipItem.datasetIndex].label || '';\n\n\t\t\t                if (label) {\n\t\t\t                    label += ': ';\n\t\t\t                }\n\n\t\t\t                if(this.state.scoreType === \"time\"){\n\t\t                \t\tlabel += cvtIntToTime(tooltipItem.yLabel)\n\t\t                \t}else if(this.state.scoreType === \"reps\"){\n\t\t                \t\tlabel += tooltipItem.yLabel\n\t\t                \t}\n\t\t\t                \n\t\t\t                \n\t\t\t                return label;\n\t\t\t            }\n\t\t\t        }\n\t\t\t    },\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t},\n\t\t\tplugins: [{\n\t\t\t\tbeforeInit: function(chart) {\n\t\t\t\t\tvar chartData = chart.data.datasets[0].data\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\n\n\t}\n    \n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps}, ()=>{\n\t\t\tthis.createChart()\n\t\t})\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log(\"Component will unmount\")\n\t\t\n\t}\n\n\tobjListToArray(obj){\n\t\treturn Array.from(Object.entries(obj), entry => {\n\t\t\t return new Map(Object.entries(entry[1]));\n\t\t})\n\t}\n\n\t\n\n  render(){\n\n\treturn(\n\t\t<Grid item xs={12}>\n\t\t\t<div style={{height:\"25vh\", \"max-width\":\"50vw\"}}>\n\t\t\t\t<canvas id=\"lineChart\" ></canvas>\n\t\t\t</div>\n\t\t</Grid>\n\t)\n  }\n}\n\n\n\n\n  \nexport default LineChart = withTheme(LineChart);\n\n","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// Stats\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport {cvtTimetoInt, cvtIntToTime} from \"../utils/formatting\"\nimport \"../styles.css\"\n\nimport Chart from 'chart.js';\n\n\n\nvar db = firebase.database();\n\nclass BarChart extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscoreType: props.scoreType,\n\t\t\tdata: props.data, // x y values for chart\n\t\t\tvalues: props.values, // raw score values\n\t\t\tstats: new Map() // mean, median, SD\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({\n\t\t\t...newProps,\n\t\t}, () => {\n\t\t\tif(this.state.values.length > 0)\n\t\t\t\tthis.createChart(this.binData(this.state.values))\n\t\t})\n\t}\n\n\tcreateChart([labels, data]){\n\t\tthis.ctx = document.getElementById('barChart');\n\t\tlet context = this.ctx.getContext('2d')\n\t\tlet grd = context.createLinearGradient(200,0,200,400);\n\t\tgrd.addColorStop(0,\"#01d3fe\");\n\t\tgrd.addColorStop(1,\"#0890fd\");\n\n\t\tif(this.barChart){\n\t\t\tthis.barChart.destroy()\n\t\t}\n\t\tthis.barChart = new Chart(this.ctx, {\n\t\t    type: 'bar',\n\t\t    data:  {\n\t\t    \tlabels: labels,\n\t\t\t    datasets: [{\n\t\t\t    \t'label': \"Scores (Standard Deviation)\",\n\t\t\t        minBarLength: 1,\n\t\t\t        backgroundColor: grd,\n\t\t\t        data: data\n\t\t\t    }]\n\t\t\t},\n\t\t\toptions:{\n\t\t\t\tmaintainAspectRatio: false\n\t\t\t}\n\t\t});\n\t}\n\n\tformat(x){\n\t\tif(this.state.scoreType === \"time\"){\n\t\t\treturn x <= 0 ? 0 : cvtIntToTime(x)\n\t\t}else if(this.state.scoreType === \"reps\"){\n\t\t\treturn parseFloat(x)\n\t\t}\n\t}\n\n\tcreateLabels(_mean, sd){\n\t\tlet bins = []\n\n\t\tfor(let i=0; i<3; i++){\n\t\t\tlet binA = `${this.format(_mean - (sd * (i + 1)))} - ${this.format(_mean - (sd * i))}`\n\t\t\tlet binB = `${this.format(_mean + (sd * i))} - ${this.format(_mean + (sd * (i + 1)))}`\t\n\t\t\tbins.unshift(binA)\n\t\t\tbins.push(binB)\n\t\t}\n\t\treturn bins\n\t}\n\n\tbinData(values){\n\t\t/*\n\t\t\t{x: binValue, y: countOfbin}\n\t\t\t6 bins 1,2,3 SD from Mean each way\n\t\t*/\n\t\tconsole.log(values)\n\t\tlet sd = standardDeviation(values)\n\t\tlet _mean = mean(values)\n\t\tlet labels = this.createLabels(_mean, sd)\n\t\tlet binnedData = [0, 0, 0, 0, 0, 0]\n\t\tfor(let x of values){\n\t\t \t\tlet diff = (x - _mean) // 11 - 10 => 1\n\t\t \t\tlet numSDAway = Math.floor(diff / sd) // 5 / 2 => .5 => 0\n\t\t \t\tconsole.log(`SD: ${sd}, x: ${x}, mean: ${_mean} Diff: ${diff}, sdAway: ${numSDAway}`)\n\t\t \t\tif(Math.abs(numSDAway) <= 1){\n\t\t \t\t\tif(diff > 0){\n\t\t \t\t\t\tbinnedData[3]++\n\t\t \t\t\t}else{\n\t\t \t\t\t\tbinnedData[2]++\n\t\t \t\t\t}\n\t\t \t\t}else if(Math.abs(numSDAway) <= 2){\n\t\t \t\t\tif(diff > 0){\n\t\t \t\t\t\tbinnedData[4]++\n\t\t \t\t\t}else{\n\t\t \t\t\t\tbinnedData[1]++\n\t\t \t\t\t}\n\t\t \t\t} else{\n\t\t \t\t\tif(diff > 0){\n\t\t \t\t\t\tbinnedData[5]++\n\t\t \t\t\t}else{\n\t\t \t\t\t\tbinnedData[0]++\n\t\t \t\t\t}\n\t\t \t\t}\n\t\t }\n\t\t \n\t\t return [labels, binnedData]\n\t}\n\n  render(){\n\n\treturn(\n\t\t<Grid item xs={12}>\n\t\t\t<div style={{height:\"25vh\", \"max-width\":\"50vw\"}}>\n\t\t\t\t<canvas id=\"barChart\"></canvas>\n\t\t\t</div>\n\t\t</Grid>\n\t)\n  }\n}\n\n\n\n\n  \nexport default BarChart = withTheme(BarChart);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport {\n\tmean, median, standardDeviation\n}from 'simple-statistics'\n\nimport LineChart from \"../lineChart\"\nimport BarChart from \"../barChart\"\n\nimport {cvtTimetoInt, cvtIntToTime, cvtTimetoIntList} from \"../../utils/formatting\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\n\nclass ScoreDataView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores, // array of objects\n\t\t\tgraphData: [],\n\t\t\trawScores: [],\n\t\t\tscoreType: \"\",\n\t\t\tstats: {}\n\t\t}\n\t\t\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tif(newProps.scores && newProps.scores.length > 0){\n\t\t\tlet data = this.transformData(newProps.scores)\n\t\t\tlet [graphData, rawScores, scoreType, stats] = data\n\t\t\tlet showCharts = (rawScores.length > 1) ? true : false\n\n\t\t\tthis.setState({...newProps,\n\t\t\t\tgraphData: graphData, \n\t\t\t\trawScores: rawScores, \n\t\t\t\tscoreType: scoreType, \n\t\t\t\tstats: stats,\n\t\t\t\tshowCharts: showCharts\n\t\t\t})\n\t\t}else{\n\t\t\tthis.setState({...newProps})\n\t\t}\n\t}\n\n\tcomponentWillUnmount(){\n\t\tconsole.log(\"Component will unmount\")\n\t}\n\n\ttransformData(scores){\n\t\t// create two arrays\n\t\t// One for data display in graph, \n\t\t//\t\t[ {\"category\": \"A\", \"amount\": 28}, ... ]\n\t\t// Second to crunch data, raw values\n\t\t/*\n\t\t\t\tkey\t=> uid\n\t\t\t\t\tboxID: \t\t\"-MMVcVjihF2bXFc6qIEp\"\n\t\t\t\t\tscore:  \t\"321\"\n\t\t\t\t\tusername:  \t\"TestOwner\"\n\t\t\t\t\twodID:  \t\"-MMjP1_MQH23dnFQOfjR\"\n\t\t*/\n\t\tlet graphData = []\n\t\tlet scoreType = \"\"\n\t\tlet values = scores.map(score => {\n\t\t\tconsole.log(score)\n\t\t\tscoreType = score.scoreType\n\t\t\treturn (score.scoreType === \"time\") ? cvtTimetoInt(score.score)\n\t\t\t\t: parseFloat(score.score)\n\t\t})\n\t\t\n\t\t// create data list for chart \n\t\tfor(let i =0; i < values.length; i++){\n\t\t\t graphData.push({\"x\": i, \"y\": values[i], \"c\": 0})\n\t\t}\n\t\treturn [graphData, values, scoreType, this.getDescStats(values)]\n\t}\n\n\t getDescStats(vals){\n\t\treturn {\n\t\t\t\t\t'min': Math.min(...vals),\n\t\t\t\t\t'max': Math.max(...vals),\n\t\t\t\t\t'mean': mean(vals),\n\t\t\t\t\t'median': median(vals),\n\t\t\t\t\t'sd': standardDeviation(vals)\n\t\t\t\t}\n    }\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12}>\n\t\t\t<Grid item container align=\"center\" xs={12}>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\tLow: {this.state.scoreType === \"time\" ? \n\t\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"min\"])\n\t\t\t\t\t\t\t\t: this.state.stats[\"min\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography>\n\t\t\t\t\t\t\tHigh: {this.state.scoreType === \"time\" ?\n\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"max\"])\n\t\t\t\t\t\t\t: this.state.stats[\"max\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={4}>\n\t\t\t\t\t<Paper elevation={6}>\n\t\t\t\t\t\t<Typography >\n\t\t\t\t\t\t\tAvg: {this.state.scoreType === \"time\" ?\n\t\t\t\t\t\t\tcvtIntToTime(this.state.stats[\"mean\"])\n\t\t\t\t\t\t\t: this.state.stats[\"mean\"]}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\n\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<LineChart \n\t\t\t\t\t\tdata = {this.state.graphData}\n\t\t\t\t\t\tvalues={this.state.rawScores}\n\t\t\t\t\t\tscoreType={this.state.scoreType}\n\t\t\t\t\t\tstats={this.state.stats} />\n\t\t\t</Grid>\n\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<BarChart \n\t\t\t\t\t\tdata = {this.state.graphData}\n\t\t\t\t\t\tvalues={this.state.rawScores}\n\t\t\t\t\t\tscoreType={this.state.scoreType}\n\t\t\t\t\t\tstats={this.state.stats} />\n\t\t\t</Grid>\n\t\t</Grid>\n\t)\n  }\n}\nexport default ScoreDataView = withTheme(ScoreDataView);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nclass ScoreList extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores,\n\t\t\tuid: props.uid\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\t\n  \trender(){\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t{this.state.scores.length > 0?\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t<Table aria-label=\"score table\">\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableCell>Username</TableCell>\n\t\t\t\t\t<TableCell>Score</TableCell>\n\t\t\t\t\t<TableCell></TableCell>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.scores.map(score => {\n\t\t\t\t\t\tlet isCurUserScore = \n\t\t\t\t\t\t\t(this.state.uid == score[\"uid\"])? true : false\n\t\t\t\t\t\treturn <ScoreRow \n\t\t\t\t\t\t\tinfo={score}\n\t\t\t\t\t\t\tonRemove = {this.props.onRemove}\n\t\t\t\t\t\t\tisUserScore={isCurUserScore} \n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t    </TableBody>\n\t\t\t    </Table>\n\t\t\t</TableContainer>\n\t\t\t:\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Card variant=\"outlined\" color=\"primary\">\n\t\t\t\t  <CardContent>\n\t\t\t\t    <Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t   \tNo Scores!\n\t\t\t\t    </Typography>\n\t\t\t\t   </CardContent>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t\t}\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n  \nexport default ScoreList = withTheme(ScoreList);\n\n/*\nShow details of Box and its WODS\n*/\nfunction ScoreRow(props){\n\tlet score = props.info[\"score\"]\n\tlet username = props.info[\"username\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet uid = props.info[\"uid\"]\n\tlet scoreID = props.info[\"scoreID\"]\n\tlet rowStyle = (props.isUserScore)? \"\": \"\"\n\treturn(\n\t\t<TableRow selected={props.isUserScore}>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{username}\n\t\t\t\t</TableCell>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{score} \n\t\t\t\t</TableCell>\n\t\t\t\t{\n\t\t  \t\t\tprops.isUserScore\n\t\t  \t\t\t?\n\t\t\t  \t\t<TableCell>\n\t\t\t\t\t    <Button size=\"small\" \n\t\t\t\t\t    \tcolor=\"error\" \n\t\t\t\t\t    \tonClick={() => props.onRemove(scoreID)}>\n\t\t\t\t\t    \tRemove\n\t\t\t\t\t    </Button>\n\t\t\t  \t\t</TableCell>\n\t\t\t  \t\t:\n\t\t\t  \t\t<TableCell></TableCell>\n\n\t\t  \t\t}\n\t\t</TableRow>\n\t)\n}\n","/*\n\tScores\n*/\n\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/storage\";\nimport \"firebase/database\"; \nvar storage = firebase.storage()\nvar db = firebase.database();\n\n\nexport function setScore(title, username, uid, userScore, wodID, boxID,\n\t\t\t\t\t\tscoreType){\n\treturn new Promise((res, rej) => {\n\t\tdb.ref(`scores`)\n\t\t.orderByChild(\"wodID\")\n\t\t.equalTo(wodID)\n\t\t.once(\"value\", ss => {\n\t\t\tconsole.log(\"User has score? Check if uid in here\")\n\t\t\tlet scoreID = \"\"\n\n\t\t\tif(ss && ss.exists()){\n\t\t\t\tlet value = ss.val()\n\t\t\t\tlet hasScore = false\n\t\t\t\tObject.keys(value).forEach(key => {\n\t\t\t\t\tif(value[key].uid === uid){\n\t\t\t\t\t\tscoreID = key\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tif(!scoreID.length > 0){\n\t\t\t\tscoreID = db.ref(`scores`).push().key\n\t\t\t}\n\n\t\t\tdb.ref(`scores/${scoreID}`).set({\n\t\t\t\tscoreID:scoreID,\n\t\t\t\tuid: uid,\n\t\t\t\twodID: wodID,\n\t\t\t\tboxID: boxID,\n\t\t\t\tusername: username,\n\t\t\t\ttitle: title,\n\t\t\t\tscore: userScore,\n\t\t\t\tscoreType: scoreType,\n\t\t\t\tdate: Date.now()\n\t\t\t})\n\t\t\t.then(() => res(\"Successfully added score to users.\"))\n\t\t\t.catch(() => rej(\"Failed to add score to users.\"))\t\n\t\t})\n\t})\n}\n\nexport function removeScore(scoreID){\n\treturn new Promise((res, rej) => {\n\t\tdb.ref(`scores/${scoreID}`)\n\t\t.remove()\n\t\t.then(()=>{res(`Successfully removed score: ${scoreID}`)})\n\t\t.catch((err) => {rej(`Failed to remove score: ${scoreID}`)})\n\t})\t\n}\n","/*\n\tScores\n*/\n\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\"; \n\nlet fs = firebase.firestore();\n\n\nexport function setScore(title, username, uid, userScore, wodID, boxID,\n\t\t\t\t\t\tscoreType){\n\treturn new Promise((res, rej) => {\n\t\tlet data = {\n\t\t\t\tuid: uid,\n\t\t\t\twodID: wodID,\n\t\t\t\tboxID: boxID,\n\t\t\t\tusername: username,\n\t\t\t\ttitle: title,\n\t\t\t\tscore: userScore,\n\t\t\t\tscoreType: scoreType,\n\t\t\t\tdate: Date.now()\n\t\t\t}\n\t\tfs.collection(\"scores\")\n\t\t.where(\"uid\", \"==\", uid)\n\t\t.where(\"wodID\", \"==\", wodID)\n\t\t.get().then(ss => {\n\t\t\tlet key = \"\"\n\t\t\tconsole.log(ss)\n\t\t\tif(!ss.empty){\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tkey = doc.data().scoreID\n\t\t\t\t})\n\t\t\t\tdata['scoreID'] = key\n\t\t\t\tfs.collection(\"scores\").doc(key).set(data)\n\t\t\t\t.then(() => {res(\"Updated score.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t}else{\n\t\t\t\tlet doc = fs.collection(\"scores\").doc()\n\t\t\t\tdata['scoreID'] = doc.id\n\t\t\t\tdoc.set(data)\n\t\t\t\t.then(() => {res(\"Added new score.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t\t// Create score \n\t\t\t}\n\t\t},\n\t\t\terr => {\n\t\t\t\trej(err)\n\t\t})\n\t})\n}\n\nexport function removeScore(scoreID){\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"scores\").doc(scoreID).delete()\n\t\t.then(()=>{res(`Successfully removed score: ${scoreID}`)})\n\t\t.catch((err) => {rej(`Failed to remove score: ${scoreID}`)})\n\t})\t\n}\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport ScoreDataView from \"./scoreDataView\" \n\nimport { removeScore, setShallowScore } from \"../../utils/firebase/scores\"\nimport { setScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nclass AddScore extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\twodMD: props.wodMD\n\t\t}\n\t\tconsole.log(props)\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\n\tobjListToArray(obj){\n\t\t// let key = Object.keys(obj)[0]\n\t\treturn Array.from(Object.entries(obj), entry => {\n\t\t\t return new Map(Object.entries(entry[1]));\n\t\t})\n\t}\n\n\tisNumInSane(s){\n\t\tlet hasNonDigitRegex = /\\D/\n\t\tlet res = s.search(hasNonDigitRegex) \n\t\tlet isSane = (res === -1) ? true: false\n\t\treturn isSane \n\t}\n\n\thandleAddScore(){\n\t\tif(!this.state.userMD){return}\n\n\t\tlet userScore = \"\"\n\t\tif(this.state.wodMD['scoreType'] === \"time\"){\n\t\t\tlet mins =  document.getElementById(\"scoreViewUserScoreMins\").value\n\t\t\tlet secs =  document.getElementById(\"scoreViewUserScoreSecs\").value\n\t\t\tif(!this.isNumInSane(mins) || !this.isNumInSane(secs)){\n\t\t\t\talert(`Time must only contain numbers, entered: ${mins}:${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(parseInt(secs) > 59){\n\t\t\t\talert(`Seconds must be 59 or below, entered: ${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(parseInt(secs) < 10 && secs.length === 1){\n\t\t\t\tsecs = `0${secs}`\n\t\t\t}\n\t\t\tif(isNaN(parseInt(secs)) ||  isNaN(parseInt(mins))){\n\t\t\t\talert(`Missing field, entered: ${mins}:${secs}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(mins.length > 2){\n\t\t\t\talert(`Minutes must be 99 or below, entered: ${mins}`)\t\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(mins.length === 0){\n\t\t\t\tmins = \"0\"\n\t\t\t}\n\t\t\tif(secs.length === 0){\n\t\t\t\tsecs = \"0\"\n\t\t\t}\n\t\t\tuserScore = `${mins}:${secs}`\n\t\t}else{\n\t\t\t// reps or rounds\n\t\t\tuserScore =  document.getElementById(\"scoreViewUserScore\").value\n\t\t\tif(userScore.length > 3){\n\t\t\t\talert(`Score must be 3 digits or less, entered: ${userScore}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(!this.isNumInSane(userScore)){\n\t\t\t\talert(`Score must be digits only, entered: ${userScore}`)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tlet username = this.state.userMD.username\n\t\tlet uid = this.state.userMD.uid\n\t\tlet wodID = this.state.wodMD[\"wodID\"]\n\t\tlet boxID = this.state.wodMD[\"boxID\"]\n\t\tlet title = this.state.wodMD[\"title\"]\n\t\tlet scoreType = this.state.wodMD[\"scoreType\"]\n\t\t\n\t\tsetScore(title, username, uid, userScore, wodID, boxID, scoreType)\n\t\t.then((res) => console.log(res))\n\t\t.catch((err) => console.log(err))\n\t}\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12}>\n\t\t\t<Accordion>\n\t\t\t\t<AccordionSummary\n\t\t\t\t\tstyle={{background: this.props.theme.palette.primary.main}}\n\t\t\t\t\texpandIcon={<ExpandMoreIcon />}\n\t\t\t\t\taria-label=\"Expand\"\n\t\t\t\t\taria-controls=\"additional-actions2-content\"\n\t\t\t\t\tid=\"additional-actions2-header\">\n\t\t\t\t\t<Typography >\n\t\t\t\t\t\tAdd Score\n\t\t\t\t\t</Typography>\t        \n\t\t\t\t</AccordionSummary>\n\t\t\t\t<AccordionDetails>\n\t\t\t\t<Grid container>\n\t\t\t\t\t<Grid  item xs={12} >\n\t\t\t\t\t\t<Typography >\n\t\t\t\t\t\t\t{this.state.wodMD['scoreType']\n\t\t\t\t\t\t\t\t.replace(\n\t\t\t\t\t\t\t\t\tthis.state.wodMD['scoreType'][0],\n\t\t\t\t\t\t\t\t\tthis.state.wodMD['scoreType'][0].toUpperCase())\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t{this.state.scoreType === \"reps\"\n\t\t\t\t\t?\t<Grid item xs={10}>\n\t\t\t\t\t\t<TextField\n\t\t\t              id=\"scoreViewUserScore\"\n\t\t\t              type=\"number\"\n\t\t\t              style={{ margin: 8}}\n\t\t\t              pattern=\"[0-9]{4}\"\n\t\t\t              inputProps={{\n\t\t\t                title: \"Numbers only, max length 4\",\n\t\t\t                placeholder: \"Score\"\n\t\t\t              }}\n\t\t\t              margin=\"normal\"\n\t\t\t              color=\"primary\"\n\t\t\t              InputLabelProps={{\n\t\t\t                shrink: true,\n\t\t\t              }}\n\t\t\t            />\n\t\t\t            </Grid>\n\t\t\t        :\n\t\t\t        \t<React.Fragment>\n\t\t\t        \t<Grid item xs={5}>\n\t\t\t        \t<TextField\n\t\t\t              id=\"scoreViewUserScoreMins\"\n\t\t\t              type=\"number\"\n\t\t\t              style={{ margin: 8}}\n\t\t\t              pattern=\"[0-9]{3}\"\n\t\t\t              inputProps={{\n\t\t\t                title: \"Numbers only, max length 3\",\n\t\t\t                placeholder: \"Minutes\"\n\t\t\t              }}\n\t\t\t              margin=\"normal\"\n\t\t\t              color=\"primary\"\n\t\t\t              InputLabelProps={{\n\t\t\t                shrink: true,\n\t\t\t              }}\n\t\t\t            />\n\t\t\t            </Grid>\n\t\t\t            <Grid item xs={5}>\n\t\t\t            <TextField\n\t\t\t              id=\"scoreViewUserScoreSecs\"\n\t\t\t              type=\"number\"\n\t\t\t              style={{ margin: 8}}\n\t\t\t              pattern=\"[0-9]{2}\"\n\t\t\t              inputProps={{\n\t\t\t                title: \"Numbers only, max length 2\",\n\t\t\t                placeholder: \"Seconds\"\n\t\t\t              }}\n\t\t\t              margin=\"normal\"\n\t\t\t              color=\"primary\"\n\t\t\t              InputLabelProps={{\n\t\t\t                shrink: true,\n\t\t\t              }}\n\t\t\t            />\n\t\t\t            </Grid>\n\t\t\t        \t</React.Fragment>\n\n\t\t\t\t\t}\n\t\t\t\t\t<Grid item xs={2}>\n\t\t            \t<Button variant=\"outline\" color=\"primary\" onClick={this.handleAddScore.bind(this)}>Add</Button>\n\t\t            </Grid>\n\t\t        </Grid>\n\t\t\t\t</AccordionDetails>\n\t\t\t</Accordion>\t\t\n\t\t</Grid>\n\t)\n  }\n}\n\n  \nexport default AddScore = withTheme(AddScore);\n\n","import React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\n\n\nexport default class ActionCancelModal extends Component{\n\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\topen: props.open\n\t\t}\n\t\t/*\n\t\topen\n\t\tactionText\n\t\tcancelText\n\t\tmodalText\n\t\tonAction\n\t\tonClose\n\t\t*/\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<Modal\n\t\t\t    open={this.state.open}\n\t\t\t    onClose={this.props.onClose}\n\t\t\t    aria-labelledby=\"simple-modal-title\"\n\t\t\t    aria-describedby=\"simple-modal-description\">\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: \"50%\",\n\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\twidth: \"80vw\",\n\t\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t\t}}>\n\t\t\t\t\t<Grid \n\t\t\t\t\t\titem \n\t\t\t\t\t\talign=\"center\" \n\t\t\t\t\t\txs={12}\n\t\t\t\t\t>\n\t\t\t\t\t<Paper style={{height:\"25vh\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\t\t    \t\t\t<Typography style={{position: \"\"}}>\n\t\t    \t\t\t\t {this.props.modalText}\n\t\t    \t\t\t</Typography>\n\n\n\t\t    \t\t\t<Button \n\t\t    \t\t\t\tcolor=\"primary\"\n\t\t    \t\t\t\tvariant=\"outlined\" \n\t\t    \t\t\t\tonClick={()=>{ this.props.onAction()}}>\n\t\t    \t\t\t\t{this.props.actionText}\n\t\t    \t\t\t</Button>\n\t\t    \t\t\t<Button \n\t\t    \t\t\t\tcolor=\"error\"\n\t\t    \t\t\t\tvariant=\"outlined\" \n\t\t    \t\t\t\tonClick={()=>{ this.props.onClose()}}>\n\t\t    \t\t\t\t{this.props.cancelText}\n\t\t    \t\t\t</Button>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\n\t\t)\n\t}\n\n}\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{   Grid, Paper, Button, Typography, Collapse, TextField, Select,\n  Accordion, AccordionSummary, AccordionDetails, FormControlLabel,\n  CircularProgress, LinearProgress, CardActions, Card, CardContent,\n  ListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n  TableCell, TableBody, Table, Modal\n} \nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport ScoreDataView from \"./scoreDataView\" \nimport ScoreList from \"./scoreList\"\nimport AddScore from \"./addScore\" \nimport ActionCancelModal from \"../actionCancelModal\"\n\nimport { removeScore } from \"../../utils/firestore/scores\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nclass ScoreView extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      userMD: props.userMD,\n      boxID: props.boxID,\n      wodID: props.wodID,\n      wodMD: {},\n      scores: [],\n      userScore: {},\n      curRemoveScoreID: \"\",\n      showRemoveAlert: false\n    }\n  }\n\n  componentDidMount(){\n    let fs = firebase.firestore()\n    this.wodListener = fs.collection(\"wods\").doc(this.state.wodID)\n    .onSnapshot(ss => {\n      this.setState({wodMD: ss.data()})\n    },\n      err => {console.log(err)})\n\n    this.scoreListener = fs.collection(\"scores\")\n    .where(\"wodID\", \"==\", this.state.wodID)\n    .onSnapshot(ss => {\n      if(!ss.empty){\n        let scores = []\n        let userScore = {}\n        let scoreType = \"\"\n        ss.forEach(doc => {\n          let data = doc.data()\n          scores.push(data)\n          scoreType = data.scoreType\n          if(data.uid === this.state.uid)\n            userScore = data\n        })\n        let isTime = (scoreType && scoreType === \"time\") ? 1 : 0\n        scores.sort((a,b) => {\n          return isTime \n          ?\n              parseFloat(a[\"score\"]) < parseFloat(b[\"score\"]) ? -1 : 1\n          :\n             parseFloat(a[\"score\"]) > parseFloat(b[\"score\"]) ? 1 : -1\n        })\n        this.setState({\n          scores: scores,\n          userScore: userScore\n        })\n      }else{\n        this.setState({\n          scores: [],\n          userScore: {}\n        })\n      }\n    }, \n      err => {})\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  componentWillUnmount(){\n    if(this.scoreListener !== undefined)\n      this.scoreListener()\n    if(this.wodListener !== undefined)\n      this.wodListener()\n  }\n\n  handleModalClose(){\n    this.setState({showRemoveAlert:false})\n  }\n\n  handleRemoveScore(scoreID){\n    console.log(`Remove score with ID: ${scoreID}`)\n    this.setState({curRemoveScoreID: scoreID, showRemoveAlert: true})\n  }\n\n  removeScore(){\n    let scoreID = this.state.curRemoveScoreID\n    if(scoreID === \"\" || scoreID.length <=0){return}\n\n    this.setState({showRemoveAlert: false})\n\n    removeScore(scoreID)\n    .then((res)=>{\n      console.log(res)\n      this.setState({showRemoveAlert: false})     \n    })\n    .catch((err)=>{console.log(err)})\n  }\n\n  render(){\n  return(\n    <React.Fragment>\n      {Object.keys(this.state.wodMD).length > 0 ?\n        <Grid item xs={12}>\n          <Grid item align=\"center\" xs={12}>\n            <Paper elevation={2}>\n              <Typography>{this.state.wodMD[\"title\"]}</Typography>\n              <Typography>Type: {this.state.wodMD[\"scoreType\"]}</Typography>\n            </Paper>\n          </Grid>\n\n          <Grid item container xs={12}>\n            <Paper elevation={2}>\n              <ReactMarkdown>{this.state.wodMD[\"wodText\"]}</ReactMarkdown>\n            </Paper>   \n          </Grid>\n          <AddScore \n            userMD={this.state.userMD}\n            wodMD={this.state.wodMD}\n          />\n          <Grid item xs={12}>\n            <Paper elevation={2}>   \n              <ScoreDataView \n                scores={this.state.scores}\n              />\n            </Paper>\n          </Grid>\n          <Grid item xs={12}>\n            <Paper elevation={2}>   \n            <ScoreList\n              scores={this.state.scores}\n              uid={this.state.userMD.uid}\n              onRemove={this.handleRemoveScore.bind(this)}\n            />\n            </Paper>\n          </Grid>\n          <ActionCancelModal\n            open={this.state.showRemoveAlert}\n                onClose={this.handleModalClose.bind(this)}\n                onAction={this.removeScore.bind(this)}\n                modalText={`Remove score?`}\n                actionText={`Remove`}\n                cancelText={`Cancel`}\n            />\n          </Grid>\n        :\n          <React.Fragment>\n            Wod not found!\n          </React.Fragment>\n      }\n    </React.Fragment>\n  )\n  }\n}\n  \nexport default ScoreView = withTheme(ScoreView);\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\n\n\nexport default function mTea(){}\n\n/*\n\tWods\n*/\n\nexport function setWod(boxID, title, wodText, scoreType){\n\tlet fs = firebase.firestore();\n\tlet doc = fs.collection(\"wods\").doc()\n\tlet data = {\n\t\twodID: doc.id,\n\t\tboxID: boxID,\n\t\ttitle: title,\n\t\tscoreType: scoreType,\n\t\twodText: wodText,\n\t\tdate: Date.now()\n\t}\n\treturn doc.set(data)\n}\n\nexport function editWod(boxID, wodID, title, wodText, scoreType){\n\tlet fs = firebase.firestore()\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"wods\").doc(wodID).update({\n\t\t\tboxID: boxID,\n\t\t\ttitle: title,\n\t\t\twodText: wodText,\n\t\t\tscoreType: scoreType\n\t\t})\n\t\t.then(()=> {res(\"Finished updating.\")})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\n\n\nfunction getSnapshot(collectionName, fieldName, fieldID, res, rej){\n\tlet fs = firebase.firestore();\n\tconst batch = fs.batch()\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\tif(ss.size == 0) res(1)\n\t\t\n\t\tss.forEach(doc => {\n\t\t\tconsole.log(\"delete\")\n\t\t\tconsole.log(doc.data())\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\t\t\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)\n\t\t\t\tgetSnapshot(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeWod(wodID){\n\n\tlet collectionNames = [\"wods\", \"scores\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tgetSnapshot(name, \"wodID\", wodID, res, rej)\n\t\t})\n\t})\n\t\n\treturn Promise.all(promises)\n}\n\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, Modal\n} \nfrom '@material-ui/core';\n\nimport {editWod} from \"../../utils/firestore/wods\"\n\n\nvar db = firebase.database();\n\nexport default class EditWod extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\twodInfo: props.wodInfo,\n\t\t\tuserBoxes: props.userBoxes,\n\t\t\thasBoxes: props.hasBoxes,\n\t\t\topen: props.open,\n\t\t\tonClose: props.onClose,\n\t\t\ttitle: props.title,\n\t\t\twodText: props.wodText\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\t\n\teditWOD(){\n\t  \tlet boxID = document.getElementById(\"editOwnerBoxAddWodBoxID\").value\n\t  \tlet title = document.getElementById(\"editOwnerBoxAddWodTitle\").value\n\t  \tlet scoreType = document.getElementById(\"editOwnerBoxAddWodScoreType\").value\n\t  \tlet wodText = document.getElementById(\"editOwnerBoxAddWodWodText\").value\n\t  \tlet wodID = this.state.wodInfo[\"wodID\"]\n\n\t  \tif(!boxID || !title || !scoreType || !wodText || !wodID){\n\t  \t\tconsole.log(\"Error with input editWod\")\n\t  \t\tconsole.log(boxID, title, scoreType, wodText)\n\t  \t\treturn\n\t  \t}\n\t  \teditWod(boxID, wodID, title, wodText, scoreType)\n\t  \t.then((res)=> {\n\t  \t\tconsole.log(res)\n\t  \t\tthis.props.onClose()\n\t  \t})\n\t  \t.catch((err)=>{console.log(err)})\n\t  }\n\n\thandleValChange(ev, val){\n\t\tconst name = ev.target.name;\n\t\tconsole.log(name, val)\n\t    this.setState({\n\t      [name]: ev.target.value\n\t  \t})\n\t}\n\n\trender(){\n\t\tlet oldScoreType = this.state.wodInfo[\"scoreType\"]\n\t\tlet scoreTypes = [\"time\", \"reps\"]\n\t\tlet oldBoxID = this.state.wodInfo[\"boxID\"]\n\t\treturn(\n\n\t\t\t<Modal\n\t\t\t    open={this.state.open}\n\t\t\t    onClose={this.props.onClose}\n\t\t\t    aria-labelledby=\"edit-wod-modal\"\n\t\t\t    aria-describedby=\"edit-wod\">\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: \"50%\",\n\t\t\t\t\tleft: \"50%\",\n\t\t\t\t\twidth: \"80vw\",\n\t\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t\t}}>\n\t\t\t\t\t<Grid \n\t\t\t\t\t\titem \n\t\t\t\t\t\talign=\"center\" \n\t\t\t\t\t\txs={12}\n\t\t\t\t\t>\n\t\t\t\t\t<Paper style={{display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}}>\n\t\t    \t\t\t<Typography style={{position: \"\"}}>\n\t\t    \t\t\t\t Edit Wod({this.state.wodInfo[\"wodID\"]})\n\t\t    \t\t\t</Typography>\n\n\t\t    \t\t\t<Grid item container xs={12}>\n\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t    <Select\n\t\t\t\t\t          native\n\t\t\t\t\t          inputProps={{\n\t\t\t\t\t            name: 'Box',\n\t\t\t\t\t            id: 'editOwnerBoxAddWodBoxID',\n\t\t\t\t\t          }}\n\t\t\t\t\t        >\n\t\t\t\t\t          { this.state.hasBoxes ?\n\t\t\t\t\t          \tthis.state.userBoxes.map((box, i) => {\n\t\t\t\t\t\t        \t\tlet boxID = box[\"boxID\"]\n\t\t\t\t\t\t        \t\treturn (\n\t\t\t\t\t\t        \t\t\t<option \n\t\t\t\t\t        \t\t\t\t\tkey={i}\n\t\t\t\t\t        \t\t\t\t\tvalue={boxID}\n\t\t\t\t\t        \t\t\t\t\tselected={oldBoxID === boxID? true: false}\n\t\t\t\t\t        \t\t\t\t>\n\t\t\t\t\t        \t\t\t\t\t{box[\"title\"]}\n\t\t\t\t\t        \t\t\t\t</option>\n\t\t\t\t\t\t        \t\t)\n\t\t\t\t\t\t        \t})\n\t\t\t\t\t        \t:\n\t\t\t\t\t        \t\t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t\t\t          }\n\t\t\t\t\t      </Select>\n\t\t\t\t\t    </Grid>\n\t\t\t\t\t    <Grid item xs={6}>\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t  native\n\t\t\t\t\t\t\t  inputProps={{\n\t\t\t\t\t\t\t    name: 'Score Type',\n\t\t\t\t\t\t\t    id: 'editOwnerBoxAddWodScoreType',\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tscoreTypes.map((scoreType) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t      \tvalue={scoreType}\n\t\t\t\t\t\t\t\t      \tselected={oldScoreType === scoreType? true: false}\n\t\t\t\t\t\t\t\t      >\n\t\t\t\t\t\t\t\t\t\t  \t{scoreType}\n\t\t\t\t\t\t\t\t\t\t  </option>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t    </Grid>\n\t\t\t\t\t    <Grid item xs={12}>\n\t\t\t          <TextField\n\t\t\t              id=\"editOwnerBoxAddWodTitle\"\n\t\t\t              type=\"text\"\n\t\t\t              name=\"title\"\n\t\t\t              style={{ margin: 8}}\n\t\t\t              value= {this.state.title}\n\t\t\t              onChange={this.handleValChange.bind(this)}\n\t\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t\t              inputProps={{\n\t\t\t                title: \"Letters only, max length 35\",\n\t\t\t                placeholder: \"Title\"\n\t\t\t              }}\n\t\t\t              margin=\"normal\"\n\t\t\t              color=\"primary\"\n\t\t\t              InputLabelProps={{\n\t\t\t                shrink: true,\n\t\t\t              }}\n\t\t\t            />\n\t\t\t\t      </Grid>\n\t\t\t        <Grid item xs={12}>\n\t             \t<TextField\n\t\t              id=\"editOwnerBoxAddWodWodText\"\n\t\t              type=\"text\"\n\t\t              name=\"wodText\"\n\t\t              style={{ margin: 8}}\n\t\t              value= {this.state.wodText}\n\t\t              onChange={this.handleValChange.bind(this)}\n\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t              inputProps={{\n\t\t                title: \"Letters only, max length 35\",\n\t\t                placeholder: \"Workout here\"\n\t\t              }}\n\t\t              margin=\"normal\"\n\t\t              color=\"primary\"\n\t\t              multiline\n\t\t\t\t  \t\t  \trows={5}\n\t\t              InputLabelProps={{\n\t\t                shrink: true,\n\t\t              }}\n\t            \t/>\n\t\t\t      \t</Grid>\n\t\t\t\t      <Grid item xs={12}>\n\t\t\t\t\t      <Button \n\t\t\t\t\t      \tvariant=\"outlined\" \n\t\t\t\t\t      \tcolor=\"primary\" \n\t\t\t\t\t      \tonClick={this.editWOD.bind(this)}\n\t\t\t\t\t      >\n\t\t\t\t\t      \tUpdate\n\t\t\t\t\t      </Button>\n\t\t\t\t      </Grid>\n\t\t\t\t      <Grid item xs={12}>\n\t\t\t\t\t      <Button \n\t\t\t\t\t      \tvariant=\"outlined\" \n\t\t\t\t\t      \tcolor=\"primary\" \n\t\t\t\t\t      \tonClick={this.props.onClose}\n\t\t\t\t\t      >\n\t\t\t\t\t      \tCancel\n\t\t\t\t\t      </Button>\n\t\t\t\t      </Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t)\n\t}\n}","// Firebase\nimport firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n// React\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport ReactMarkdown from 'react-markdown'\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport {msToDate} from \"../utils/formatting\"\n\nclass SearchSortTable extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\theaders: props.headers,\n\t\t\trows: props.rows,\t\t\n\t\t\tfilteredRows: props.filteredRows,\n\t\t\torderTableBy: \"date\",\n\t\t\torderTable: \"asc\",\n\t\t\tpageNum: 0,\n\t\t\trowsPerPage:5,\n\t\t\tpageStart: 0,\n\t\t\tpageEnd: 5\n\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\n\t/*\n\t\tSearch Table\n\t*/\n\tonKeyUp(data){\n\t\tif((data.keyCode || data.which) == 13){\n\t\t    \n\t\t}\n\t}\n\n\tonChange(ev){\n\t\tlet val = ev.target.value\n\t\tconsole.log(val)\n\t\tlet filteredRows = this.state.rows.filter(wod =>{\n\t\t  return wod[\"title\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\n\t\tthis.setState({filteredRows: filteredRows})\n\t}\n\t\n\tdescendingComparator(a, b, orderBy) {\n\t\tif(b[orderBy] < a[orderBy]){\n\t\t\treturn -1;\n\t\t}\n\t\tif(b[orderBy] > a[orderBy]){\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetComparator(order, orderBy) {\n\t\treturn order === 'desc'\n\t\t? (a, b) => this.descendingComparator(a, b, orderBy)\n\t\t: (a, b) => -this.descendingComparator(a, b, orderBy);\n\t}\n\n\tstableSort(comparator) {\n\t\tlet arr = this.state.filteredRows\n\t\tconst stabilizedThis = arr.map((el, index) => [el, index]);\n\n\t\tstabilizedThis.sort((a, b) => {\n\t\t\tconst order = comparator(a[0], b[0]);\n\t\t\t\n\t\t\tif (order !== 0) return order;\n\t\t\treturn a[1] - b[1];\n\t\t});\n\t\treturn stabilizedThis.map((el) => el[0]);\n\t}\n\n\tcreateSortHandler(orderBy){\n\t\tlet isAsc = \n\t\t\tthis.state.orderTableBy === orderBy &&\n\t\t\tthis.state.orderTable === \"asc\"\n\t\tthis.setState({\n\t\t\torderTableBy: orderBy,\n\t\t\torderTable: isAsc? \"desc\" : \"asc\"\n\t\t}) \n\t}\n\n\thandleChangePage(ev, newPage){\n\t\tlet start = newPage * this.state.rowsPerPage\n\t\tlet end = (newPage * this.state.rowsPerPage) + this.state.rowsPerPage\n\t\tthis.setState({\n\t\t\tpageNum: newPage,\n\t\t\tpageStart: start,\n\t\t\tpageEnd: end\n\t\t})\n\t}\n\n\thandleChangeRowsPerPage(ev){\n\t\tlet rowsPerPage = parseInt(ev.target.value)\n\t\tconsole.log(rowsPerPage)\n\t\tthis.setState({\n\t\t\tpageNum: 0,\n\t\t\trowsPerPage: rowsPerPage,\n\t\t\tpageStart: 0,\n\t\t\tpageEnd: rowsPerPage\n\t\t})\n\t}\n\n  render(){\n\treturn(\n\t\t<Grid item xs={12} align=\"center\">\n\t\t<Paper elevation={2}>\n\t\t    <Paper elevation={2} component=\"form\">\n\t\t\t<TextField\n\t\t\tfullWidth\n\t\t\tvariant=\"outlined\"\n\t\t\tonKeyUp={this.onKeyUp.bind(this)}\n\t\t\tonChange={this.onChange.bind(this)}\n\t\t\tplaceholder=\"Search\"\n\t\t\tInputProps={{\n\t\t\t  startAdornment: (\n\t\t\t    <InputAdornment position=\"start\">\n\t\t\t      <SearchIcon color=\"primary\" />\n\t\t\t    </InputAdornment>\n\t\t\t  ),\n\t\t\t}}\n\t\t\t/>\n\t\t\t</Paper>\n\n\t\t\t<Grid container item xs={12}>\n\t\t\t<TableContainer>\n  \t\t\t<Table>\n\t\t\t<TableHead>\n\t\t    \t<TableRow>\n\t\t    \t{\n\t\t    \t\tthis.state.headers.map((header)=>{\n\t\t\t        \treturn (\n\t\t\t        \t<TableCell>\n\t\t\t        \t\t{\n\t\t\t        \t\t\theader.sortable?\n\t\t\t\t\t        \t\t<TableSortLabel\n\t\t\t\t\t\t              active={header.id === this.state.orderTableBy}\n\t\t\t\t\t\t              direction={header.id === this.state.orderTableBy?  this.state.orderTable: \"asc\"}\n\t\t\t\t\t\t              onClick={()=>{ this.createSortHandler(header.id)}}\n\t\t\t\t\t\t            >            \n\t\t\t\t\t        \t\t\t{header.label}\n\t\t\t\t\t\t\t        </TableSortLabel>\n\t\t\t\t\t\t\t    :\n\t\t\t\t\t\t\t    \t<React.Fragment>{header.label}</React.Fragment>\n\t\t\t        \t\t}\n\t\t\t        \t</TableCell>)\n\t\t    \t\t})\n\t\t    \t}\n\t\t    \t</TableRow>\n\t\t    </TableHead>\n\n\t\t    <TableBody>\n\t\t\t\t{this.state.filteredRows.length > 0\n\t\t\t\t?\n\t\t\t\t\tthis.stableSort(\n\t\t\t\t\t\tthis.getComparator(\n\t\t\t\t\t\t\tthis.state.orderTable,\n\t\t\t\t\t\t\tthis.state.orderTableBy\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.slice(this.state.pageStart, this.state.pageEnd)\n\t\t\t\t\t.map(row => {\n\t\t\t\t\t\treturn <Wod \n\t\t\t\t\t\t\thandleView={this.props.handleView}\n\t\t\t\t\t\t\thandleRemove={this.props.handleRemove}\n\t\t\t\t\t\t\thandleEdit={this.props.handleEdit}\n\t\t\t\t\t\t\tinfo={row}\n\t\t\t\t\t\t\tshowOwnerBtns={this.props.showOwnerBtns}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t:\n\t\t\t\t\t\n\t\t\t\t\t<span>No data!</span>\n\t\t\t\t\t\n\t\t\t\t}\n\t\t    </TableBody>\n  \t\t\t</Table>\n\t\t    </TableContainer>\n\t\t     <TablePagination\n\t          rowsPerPageOptions={[5, 10, 25]}\n\t          component=\"div\"\n\t          count={this.state.filteredRows.length}\n\t          rowsPerPage={this.state.rowsPerPage}\n\t          page={this.state.pageNum}\n\t          onChangePage={this.handleChangePage.bind(this)}\n\t          onChangeRowsPerPage={this.handleChangeRowsPerPage.bind(this)}\n\t        />\n\t\t\t</Grid>\n\t\t</Paper>\n\t\t</Grid>\n\t)\n  }\n}\n\nfunction Wod(props){\n\tlet title = props.info[\"title\"]\n\tlet scoreType = props.info[\"scoreType\"]\n\tlet wodText = props.info[\"wodText\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet boxID = props.info[\"boxID\"]\n\tlet date = props.info[\"date\"]\n\treturn(\n\t\t<TableRow>\n\t\t\t<TableCell>\n\t\t\t\t<Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t\t{msToDate(date)}\n\t\t\t\t</Typography>\n\t\t\t</TableCell>\n\t\t\t<TableCell>\n\t\t\t\t<Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t\t{title}\n\t\t\t\t</Typography>\n\t\t\t</TableCell>\n\t\t\t<TableCell>\n\t\t\t\t<Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t\t{scoreType}\n\t\t\t\t</Typography>\n\t\t\t</TableCell>\n\t\t\t<TableCell>\n\t\t\t\t<Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t\t<ReactMarkdown>{wodText}</ReactMarkdown>\n\t\t\t\t</Typography>\n\t\t\t</TableCell>\n\t\t\t<TableCell>\n\t\t\t\t<Link component={Button} to={`/wod/${boxID}/${wodID}`}>\n\t\t\t\t\tView Scores\n\t\t\t\t</Link>\n\t\t\t</TableCell>\n\t\t\t<React.Fragment>\n\t\t\t{\n\t  \t\t\tprops.showOwnerBtns\n\t  \t\t\t?\n\t\t\t\t<TableCell>\n\t\t\t    <Button size=\"small\" \n\t\t\t    \tcolor=\"secondary\" \n\t\t\t    \tonClick={() => props.handleEdit(props.info)}>\n\t\t\t    \tEdit\n\t\t\t    </Button>\n\t\t\t\t</TableCell>\n\t\t  \t\t:\n\t\t  \t\t<React.Fragment></React.Fragment>\n\t  \t\t}\n\t  \t\t</React.Fragment>\n\n\t\t\t<React.Fragment>\n\t\t\t{\n\t  \t\t\tprops.showOwnerBtns\n\t  \t\t\t?\n\t\t\t\t<TableCell>\n\t\t\t    <Button size=\"small\" \n\t\t\t    \tcolor=\"error\" \n\t\t\t    \tonClick={() => props.handleRemove(props.info)}>\n\t\t\t    \tRemove\n\t\t\t    </Button>\n\t\t\t\t</TableCell>\n\t\t  \t\t:\n\t\t  \t\t<React.Fragment></React.Fragment>\n\t  \t\t}\n\t  \t\t</React.Fragment>\n\t\t</TableRow>\n\t)\n}\n\nexport default SearchSortTable = withTheme(SearchSortTable);","// Firebase\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/firestore\"\n\n// React\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\n// Material UI\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tModal, InputAdornment, TableBody, Table, TableCell, TableContainer,\n\tTableHead, TablePagination, TableRow, TableSortLabel\n} from '@material-ui/core';\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n// WodTrackrr\nimport ScoreView from \"../scores/scoreView\"\nimport EditWod from \"../wods/editWod\"\nimport { removeWod } from \"../../utils/firestore/wods\"\nimport SearchSortTable from \"../searchSortTable\"\nimport ActionCancelModal from \"../actionCancelModal\"\nimport \"../../styles.css\"\n\n\n\n/*\n\tGiven:\n\t\tuserMD: props.userMD,\n\t\tboxID: props.boxID,\n\tShow:\n\t\tdetails of Box and its WODS, allows for removal of wods by owner\n*/\nconst fs = firebase.firestore();\n\nclass BoxView extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tconsole.log(props)\n\t\tthis.state = {\n\t\t\tuserMD: props.userMD,\n\t\t\tboxID: props.boxID,\n\t\t\tboxMD: {},\n\t\t\tuserBoxes: [], // TODO()fix from boxListAccordion from OwnerBox\n\t\t\thasBoxes: false,   // from boxListAccordion from OwnerBox\n\t\t\twods: [],\n\t\t\tcurrentWodID: \"\",\n\t\t\tcurrentWodMD: {},\n\t\t\tshowRemoveAlert: false,\n\t\t\tshowEditModal: false,\n\t\t\teditWodInfo: {},\n\t\t\tcurRemoveWodBoxID: \"\",\n\t\t\tcurRemoveWodID: \"\",\n\t\t\tcurRemoveWodTitle: \"\"\n\t\t}\n\t}\n\n\tgetUserBoxListener(){\n\t\tif(this.state.userMD.uid ){\n\t\t\tthis.userBoxesListener = fs.collection(\"boxes\")\n\t\t\t.where(\"uid\", \"==\", this.state.userMD.uid)\n\t\t\t.onSnapshot(ss => {\n\t\t\t\tlet boxes = []\n\t\t\t\tconsole.log(ss)\n\t\t\t\tif(!ss.empty){\n\t\t\t\t\tss.forEach(doc => {\n\t\t\t\t\t\tconsole.log(doc.data())\n\t\t\t\t\t\tboxes.push(doc.data())\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.setState({userBoxes: boxes, hasBoxes: boxes.length? true: false})\n\t\t\t})\n\t\t}\n\t}\n\n\tgetBoxListener(){\n\t\tthis.boxListener = fs.collection(\"boxes\").doc(this.state.boxID)\n\t\t.onSnapshot(ss => {\n\t\t\tif(!ss.empty){\n\t\t\t\tthis.setState({boxMD: ss.data()})\t\n\t\t\t}else{\n\t\t\t\tthis.setState({boxMD: {}})\n\t\t\t}\n\t\t}, err => {\n\t\t\tconsole.log(err)\n\t\t})\n\t}\n\n\tgetWodListener(){\n\t\tthis.wodListener = fs.collection(\"wods\")\n\t\t.where(\"boxID\", \"==\", this.state.boxID)\n\t\t.onSnapshot(ss => {\n\t\t\tif(!ss.empty){\n\t\t\t\tlet wods = []\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\twods.push(doc.data())\n\t\t\t\t})\n\t\t\t\tthis.setState({\n\t\t\t\t\twods: wods\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthis.setState({\n\t\t\t\t\twods: []\n\t\t\t\t})\n\t\t\t}\n\t\t}, err => { console.log(err)})\n\t}\n\n\tcheckListeners(){\n\t\tif(this.userBoxesListener === undefined)\n\t\t\tthis.getUserBoxListener()\n\t\tif(this.boxListener === undefined)\n\t\t\tthis.getBoxListener()\n\t\tif(this.wodListener === undefined)\n\t\t\tthis.getWodListener()\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.checkListeners()\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tconsole.log(newProps)\n\t\tthis.setState({...newProps})\n\t\tthis.checkListeners()\n\t}\n\n\tcomponentWillUnmount(){\n\t\tif(this.wodListener)\n\t\t\tthis.wodListener()\n\t\tif(this.boxListener)\n\t\t\tthis.boxListener()\n\t\tif(this.userBoxesListener)\n\t\t\tthis.userBoxesListener()\n\t}\n\n\thandleModalClose(){\n\t  \tthis.setState({showRemoveAlert:false})\n\t  }\n\n\thandleRemoveWod(wodInfo){\n\t\tthis.setState({\n\t\t\tshowRemoveAlert: true,\n\t\t\tcurRemoveWodBoxID: wodInfo[\"boxID\"],\n\t\t\tcurRemoveWodID: wodInfo[\"wodID\"],\n\t\t\tcurRemoveWodTitle: wodInfo[\"title\"],\n\t\t})\n\t}\n\n\tdeleteWod(){\n\t\tremoveWod(this.state.curRemoveWodID)\n\t\t.then((res) => {\n\t\t\tconsole.log(res)\n\t\t\tthis.setState({showRemoveAlert: false})\n\t\t})\n\t}\n\n\tonKeyUp(data){\n\t\tif((data.keyCode || data.which) == 13){\n\t\t    \n\t\t}\n\t}\n\n\tonChange(ev){\n\t\t/*\n\t\t\tSearch bar, filter by name\n\t\t*/\n\t\tlet val = ev.target.value\n\t\tlet filteredWods = this.state.wods.filter(wod =>{\n\t\t  return wod[\"title\"].toLowerCase().includes(val.toLowerCase())\n\t\t})\n\t\tthis.setState({filteredWods: filteredWods})\n\t}\n\n\thandleEdit(info){\n\t\tconsole.log(\"Populate with info, show in modal with form\")\n\t\tconsole.log(info)\n\t\tif(!this.userBoxesListener)\n\t\t\tthis.getUserBoxListener()\n\t\tthis.setState({\n\t\t\teditWodInfo: info,\n\t\t\tshowEditModal: true\n\t\t})\n\t}\n\thandleEditModalClose(){\n\t\tthis.setState({showEditModal: false})\n\t}\n\n  render(){\n  \tlet showOwnerBtns = this.state.boxMD[\"uid\"] === this.state.userMD.uid && !this.props.isReadOnly\n\n\t \tlet sortableHeadersOwner = [\n\t \t\t{id:\"date\", sortable:true, label:\"Date\"},\n\t \t\t{id:\"title\", sortable:true, label:\"Title\"},\n\t \t\t{id:\"scoreType\", sortable:true, label:\"Scoring\"},\n\t \t\t{id:\"wodText\", sortable:false, label:\"Wod\"},\n\t \t\t{id:\"view\", sortable:false, label:\"\"},\n\t \t\t{id:\"edit\", sortable:false, label:\"\"},\n\t \t\t{id:\"remove\", sortable:false, label:\"\"}\n\t \t]\n\t \tlet sortableHeadersUser = [\n\t \t\t{id:\"date\", sortable:true, label:\"Date\"},\n\t \t\t{id:\"title\", sortable:true, label:\"Title\"},\n\t \t\t{id:\"scoreType\", sortable:true, label:\"Scoring\"},\n\t \t\t{id:\"wodText\", sortable:false, label:\"Wod\"},\n\t \t\t{id:\"view\", sortable:false, label:\"\"}\n\t \t]\n\t \n\t\treturn(\n\t\t\t<Grid item xs={12}>\n\t\t\t<Paper elevation={2}>\n\t\t\t\t<Grid item align=\"center\" xs={12}>\n\t\t\t\t\t<Typography \n\t\t\t\t\t\talign=\"center\" \n\t\t\t\t\t\tvariant=\"h3\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.state.boxMD[\"title\"]}\n\t\t\t\t\t</Typography>\n\t\t\t\t</Grid>\n\n\t\t\t\t<React.Fragment>\n\t\t\t\t{\n\t\t\t\t\tthis.state.wods.length > 0?\n\t\t\t\t\t<SearchSortTable\n\t\t\t\t\t\trows = {this.state.wods}\n\t\t\t\t\t\tfilteredRows={this.state.wods}\n\t\t\t\t\t\theaders={showOwnerBtns? sortableHeadersOwner: sortableHeadersUser}\n\t\t\t\t\t\thandleRemove={this.handleRemoveWod.bind(this)}\n\t\t\t\t\t\thandleEdit={this.handleEdit.bind(this)}\n\t\t\t\t\t\tshowOwnerBtns={showOwnerBtns}\n\t\t\t\t\t/>\n\t\t\t\t\t:\n\t\t\t\t\t<Grid xs={12}>\n\t\t\t\t\t\t<Paper elevation={2}>\n\t\t\t\t\t\t\t<Typography>No wods</Typography>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t}\n\t\t\t\t</React.Fragment>\n\t\t\t</Paper>\n\t\t\t\n\t\t\t<ActionCancelModal\n\t\t\t\topen={this.state.showRemoveAlert}\n\t\t        onClose={this.handleModalClose.bind(this)}\n\t\t        onAction={this.deleteWod.bind(this)}\n\t\t        modalText={ `Remove ${this.state.curRemoveWodTitle} (${this.state.curRemoveWodID})?`}\n\t\t        actionText={\"Delete\"}\n\t\t        cancelText={\"Cancel\"}\n\t\t\t/>\n\n\t\t\t<EditWod \n\t\t\t\topen={this.state.showEditModal}\n\t\t\t\tonClose={this.handleEditModalClose.bind(this)}\n\t\t\t\tuserBoxes={this.state.userBoxes}\n\t\t\t\thasBoxes={this.state.hasBoxes}\n\t\t\t\twodInfo={this.state.editWodInfo}\n\t\t\t\ttitle={this.state.editWodInfo[\"title\"]}\n\t\t\t\twodText={this.state.editWodInfo[\"wodText\"]}\n\t\t\t/>\n\t\t\t</Grid>\n\t\t)\n  }\n}\n\nexport default BoxView = withTheme(BoxView);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport \n{Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment,  }\nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport BoxView from \"./boxView\" \n\nimport { setFollow, removeFollow} from \"../../utils/firestore/follows\"\nimport \"../../styles.css\"\n\nconst fs = firebase.firestore()\n\nclass BoxSearch extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      isOwner: props.isOwner,\n      allBoxes: props.allBoxes,\n      filteredBoxes: props.allBoxes,\n      userFollowing: {}\n    }\n  }\n\n  componentDidMount(){\n    this.listenForFollowing(this.props)\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n    console.log(newProps)\n    this.listenForFollowing(newProps)\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){   \n    }\n  }\n\n  listenForFollowing(props){\n    if(props.user){\n      fs.collection(\"following\").where(\"uid\", \"==\", props.user.uid)\n      .onSnapshot(ss => {\n        let following = {}\n        console.log(\"Getting follows\")\n        console.log(ss)\n        if(!ss.empty){\n          \n          ss.forEach(doc =>{\n            let data = doc.data()\n            console.log(data)\n            following[data.boxID] = data.followID\n          })\n      }\n      this.setState({userFollowing: following})\n      }, \n      err => console.log(err))\n    }\n  }\n\n  onChange(ev){\n    let val = ev.target.value\n    let filteredBoxes = this.state.allBoxes.filter(box =>{\n      return box[\"title\"].toLowerCase().includes(val.toLowerCase())\n    })\n    this.setState({filteredBoxes: filteredBoxes})\n  }\n\n  isUserFollowing(boxID){\n\n    return (this.state.userFollowing[boxID])? true: false\n  }\n\n\n  handleFollow(boxInfo){\n    setFollow(this.state.user.uid, this.state.userMD.username, boxInfo.boxID,\n              boxInfo.title)\n    .then(res => {console.log(\"Succefully followed.\")})\n    .catch(err => {console.log(err)})\n  }\n\n  handleUnfollow(boxID){\n    let followID = this.state.userFollowing[boxID]\n\n    removeFollow(followID)\n    .then(res => {\n      if(res){\n        console.log(\"Succefully unfollowed.\")\n      }\n    })\n    .catch(err => {console.log(err)})\n  }\n\n  render () {\n    return (\n      <Grid item xs={12} >\n      <Paper elevation={2} component=\"form\">\n  \n       <TextField\n       fullWidth\n        variant=\"outlined\"\n        onKeyUp={this.onKeyUp.bind(this)}\n        onChange={this.onChange.bind(this)}\n        placeholder=\"Search Boxes\"\n        InputProps={{\n          startAdornment: (\n            <InputAdornment position=\"start\">\n              <SearchIcon color=\"primary\" />\n            </InputAdornment>\n          )\n        }}\n      />\n      \n      </Paper>\n      <Grid item xs={12}>\n        {\n          this.state.filteredBoxes.map((box, i) => {\n            console.log(this.isUserFollowing(box[\"boxID\"]))\n            return <Box \n                    key={i} \n                    info={box} \n                    color={this.props.theme.palette.primary.mainGrad}\n                    handleBoxView={this.props.handleBoxView}\n                    handleRemoveBox={this.props.handleRemoveBox}\n                    isOwner={this.props.isOwner}\n                    isUserFollowing={this.isUserFollowing(box[\"boxID\"])}\n                    handleFollow={this.handleFollow.bind(this)}\n                    handleUnfollow={this.handleUnfollow.bind(this)}\n                    />\n          })\n        }\n      </Grid>\n      </Grid>\n    );\n  }\n}\n\n\nfunction Box(props){\n  let title = props.info[\"title\"]\n  let boxID = props.info[\"boxID\"]\n  let isFollowing = props.isUserFollowing\n  return(\n    <Grid item xs={12}>\n      <Paper>\n        <Grid container itemxs={12}>\n        <Grid item xs={6}>\n          <Typography align=\"left\" style={{padding: \"2.5vw\"}} variant=\"body1\">\n            {title}\n          </Typography>\n        </Grid>\n\n        <Grid container item xs={2} align=\"center\" alignItems='center'>\n          <Link \n            to={`box/${boxID}`}\n            component={Button}>\n              View\n          </Link>\n        </Grid>\n        <Grid container item xs={2} align=\"center\" alignItems='center'>\n          { isFollowing ?\n              <Button variant=\"outlined\" color=\"error\" \n                  onClick={()=>{props.handleUnfollow(boxID)}}>Unfollow</Button>\n            :\n              <Button variant=\"outlined\" color=\"error\" \n                onClick={()=>{props.handleFollow(props.info)}}>Follow</Button>\n          }\n        </Grid>\n        <Grid container item xs={2} align=\"center\" alignItems='center'>\n          {\n            props.isOwner\n            ?\n              <Button variant=\"outlined\" color=\"error\" \n                onClick={()=>{props.handleRemoveBox(boxID, title)}}>Remove</Button>\n            :\n            <React.Fragment></React.Fragment>\n          }\n        </Grid>\n          \n      </Grid>\n      </Paper>\n    </Grid>)\n}\n\nexport default BoxSearch = withTheme(BoxSearch);\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nexport default function mTea(){}\n\n\n\n\nexport function removeFollow(followID){\n\tconst fs = firebase.firestore()\n\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"following\").doc(followID).delete()\n\t\t.then(() => {\n\t\t\tres(\"Finished delete.\")\n\t\t})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\nexport function setFollow(uid, username, boxID, title){\n\tlet fs = firebase.firestore()\n\treturn new Promise((res, rej) => {\n\t\tfs.collection(\"following\").where(\"uid\", \"==\", uid).get()\n\t\t.then(ss => {\n\t\t\tlet isFollowing = false\n\t\t\tif(!ss.empty){\n\t\t\t\tss.forEach(doc => {\n\t\t\t\t\tif(doc.data().boxID === boxID)\n\t\t\t\t\t\tisFollowing = true\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif(!isFollowing){\n\t\t\t\tlet doc = fs.collection(\"following\").doc()\n\t\t\t\tlet data = {\n\t\t\t\t\tfollowID: doc.id,\n\t\t\t\t\tuid: uid,\n\t\t\t\t\tusername: username,\n\t\t\t\t\tboxID: boxID,\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tdate: Date.now()\n\t\t\t\t}\n\t\t\t\tdoc.set(data).then(() => {res(\"Followed.\")})\n\t\t\t\t.catch(err => {rej(err)})\n\t\t\t}\n\t\t})\n\t})\n}","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse, IconButton, TextField,\nInputBase, InputAdornment }\nfrom '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\n\nimport BoxView from \"../comps/boxes/boxView\" \nimport BoxSearch from \"../comps/boxes/boxSearch\" \n\nimport \"../styles.css\"\n\nlet fs = firebase.firestore()\n\nclass BoxSearchPage extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      allBoxes: []\n    }  \n  }\n\n  componentDidMount(){\n    this.allBoxesListener = fs.collection(\"boxes\")\n    .onSnapshot(ss => {\n      if(!ss.empty){\n        let boxes = []\n        ss.forEach(doc => {\n          boxes.push(doc.data())\n        })\n        boxes.sort((x, y) => {\n          return x[\"title\"].toLowerCase() > y[\"title\"].toLowerCase() ? -1 : 1\n        })        \n        this.setState({\n          allBoxes: boxes\n        })\n      }\n    })\n  }\n\n  componentWillUnmount(){\n    if(this.allBoxesListener !== undefined){\n      this.allBoxesListener()\n    }\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} >\n        {\n          this.state.allBoxes.length > 0?\n          <BoxSearch \n              user={this.state.user}\n              userMD={this.state.userMD}\n              allBoxes={this.state.allBoxes}\n              isOwner={false}\n              isReadOnly={false}\n              handleRemoveBox={this.props.handleRemoveBox}\n          />\n          :\n          <Grid xs={12}>\n            <Paper elevation={2}>\n              No boxes!\n            </Paper>\n          </Grid>\n        }\n  \t\t</Grid>\n    )\n  }\n}\n\nexport default BoxSearchPage = withTheme(BoxSearchPage);\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"\nimport \"firebase/firestore\"; \n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Paper } from '@material-ui/core';\nimport { Redirect } from 'react-router-dom';\nimport { withTheme } from '@material-ui/core/styles';\n\nclass RegisterUser extends Component {\n  constructor(props){\n    super(props)\n    this.state = {redirect: false}\n  }\n\n  componentDidMount(){\n  }\n\n  handleSubmit(ev){\n    let email = document.getElementById('email')\n\n    let pass1 = document.getElementById('password')\n    let pass2 = document.getElementById('passwordConfirm')\n    \n    console.log(email.value, pass1.value)\n    \n\n    if(pass1.value === pass2.value){\n      firebase.auth().createUserWithEmailAndPassword(email.value, pass1.value)\n      .then(res => {\n        console.log(res)\n        let fs = firebase.firestore();\n        let data = {\n          username: \"\",\n          admin: false,\n          uid: res.user.uid,\n          accountType: \"athlete\"\n        }\n\n        fs.collection('users').doc(res.user.uid).set(data)\n      })\n      .catch(err => {\n        console.log(err)\n      });\n    }else{\n      alert(\"Passwords do not match\")\n    }\n  }\n\n  render () {\n    return (\n      <React.Fragment>\n      {this.state.redirect ?\n      \t<Redirect to=\"/\" />\n\t\t\t:\n\t\t\t\t<Grid container xs={12} id=\"login\" align=\"center\" justify=\"center\">\n\t\t\t\t\t<Paper elevation={2}>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Grid item xs={12} ><h1>Register</h1></Grid>\n\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\tstyle={{ margin: 8 }}\n\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\t  shrink: true,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/><br /><br />\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t  id=\"password\"\n\t\t\t\t\t\t\t  type=\"password\"\n\t\t\t\t\t\t\t  style={{ margin: 8 }}\n\t\t\t\t\t\t\t  placeholder=\"Password\"\n\t\t\t\t\t\t\t  margin=\"normal\"\n\t\t\t\t\t\t\t  InputLabelProps={{\n\t\t\t\t\t\t\t    shrink: true,\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t <br/><br/>\n\t\t\t\t\t\t</Grid>\n\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t  id=\"passwordConfirm\"\n\t\t\t\t\t\t\t  type=\"password\"\n\t\t\t\t\t\t\t  style={{ margin: 8 }}\n\t\t\t\t\t\t\t  placeholder=\"Confirm Password\"\n\t\t\t\t\t\t\t  margin=\"normal\"\n\t\t\t\t\t\t\t  InputLabelProps={{\n\t\t\t\t\t\t\t    shrink: true,\n\t\t\t\t\t\t\t  }}\n\t\t\t\t\t\t\t/> <br/><br/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12} >\n\t\t\t\t\t\t  <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n\t\t\t\t\t\t    Submit\n\t\t\t\t\t\t  </Button>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Paper>\n\t\t\t\t</Grid>\n        }\n        </React.Fragment>\n    );\n  }\n}\n\n\n\nexport default RegisterUser = withTheme(RegisterUser);","import firebase from \"../../context/firebaseContext\"\n// import * as firebase from \"firebase/app\";\nimport \"firebase/auth\"; \n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography, Paper } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\n\nimport \"../../styles.css\"\n\n\nexport default class Login extends Component {\n  \n  handleSubmit(ev){\n    let email = document.getElementById('email')\n\n    let pass1 = document.getElementById('password')\n    let pass2 = document.getElementById('passwordConfirm')\n    \n    console.log(email.value, pass1)\n  \n    firebase.auth().signInWithEmailAndPassword(email.value, pass1.value)\n    .then(res=>{\n      console.log(\"Firebase res\")\n      console.log(res)\n      this.props.onLogin(res.user)\n    })\n    .catch(function(error) {\n      console.log(error)\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // ...\n    });\n  }\n\n  // <!-- TODO: Add SDKs for Firebase products that you want to use\n  //      https://firebase.google.com/docs/web/setup#available-libraries -->\n\n  render () {\n    return (\n      <Grid container id=\"login\" align=\"center\" justify=\"center\">\n        <br />\n        <Grid item xs={12} >\n          <Paper elevation=\"2\">\n            <Typography variant=\"h4\">\n              Login\n            </Typography>\n          \n            <br />\n        \n            <TextField\n            id=\"email\"\n            style={{ margin: 8 }}\n            placeholder=\"Email\"\n            margin=\"normal\"\n            InputLabelProps={{\n            shrink: true,\n            }}\n            /><br /><br />\n            <TextField\n            id=\"password\"\n            type=\"password\"\n            style={{ margin: 8 }}\n            placeholder=\"Passowrd\"\n            margin=\"normal\"\n            InputLabelProps={{\n            shrink: true,\n            }}\n            />\n            <br/><br/>\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} >\n          <Paper elevation=\"2\">\n            <Button variant=\"outlined\" color=\"primary\" onClick={this.handleSubmit.bind(this)}>\n              Login\n            </Button>\n            <Link to=\"/register\" className=\"no-line\" style={{'padding-left': '10px'}}>\n              <Button variant=\"outlined\" color=\"secondary\" >\n                Register\n              </Button>\n            </Link>\n          </Paper>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n/*\n\tBoxes\n*/\n\nexport function setBox(title, uid){\n\n  \treturn new Promise((res, rej) => {\n  \t\tfs.collection(\"boxes\").where(\"title\", \"==\", title)\n  \t\t.get().then(result => {\n  \t\t\tif(result.empty){\n\t\t\t\t\tlet doc = fs.collection(\"boxes\").doc()\n\t\t  \t\tdoc.set({\n\t\t  \t\t\tboxID: doc.id,\n\t\t  \t\t\ttitle: title,\n\t\t  \t\t\tuid, uid,\n\t\t  \t\t\tdate: Date.now()\n\t\t  \t\t})\n\t\t  \t\t.then(()=>{\n\t\t  \t\t\tres(\"Added box\")\n\t\t  \t\t})\n\n  \t\t\t}else{\n  \t\t\t\trej(\"Name Taken\")\n  \t\t\t}\n  \t\t})\n  \t})\n }\n\n\nfunction getSnapshot(collectionName, fieldName, fieldID, res, rej){\n\tconst batch = fs.batch()\n\tlet snapshotSize = 0\n\tfs.collection(collectionName).where(fieldName, \"==\", fieldID).get()\n\t.then(ss => {\n\t\tlet cnt = 0\n\t\tsnapshotSize = ss.size\n\t\t\n\t\tss.forEach(doc => {\n\t\t\tbatch.delete(doc.ref)\n\t\t\tcnt++\n\t\t})\n\t\t\n\t\tbatch.commit().then(() => {\n\t\t\tif(cnt >= 500)\n\t\t\t\tgetSnapshot(collectionName, fieldName, fieldID, res, rej)\n\t\t})\n\t\t.catch(err => rej(0))\n\t})\n\tres(1)\n}\n\nexport function removeBox(boxID){\n\tlet collectionNames = [\"wods\", \"scores\", \"boxes\"]\n\n\tlet promises = collectionNames.map(name => {\n\t\treturn new Promise((res, rej) => {\n\t\t\tgetSnapshot(name, \"boxID\", boxID, res, rej)\n\t\t})\n\t})\n\t\n\treturn Promise.all(promises)\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, Modal\n} \nfrom '@material-ui/core';\n\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport BoxView from \"./boxView\" \nimport BoxSearch from \"./boxSearch\" \nimport { removeBox } from \"../../utils/firestore/boxes\"\nimport \"../../styles.css\"\n\nvar db = firebase.database();\n\nclass BoxListAccordion extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userBoxes: props.userBoxes,\n      hasBoxes: props.hasBoxes,\n      currentBoxID: \"\",\n      showRemoveAlert: false,\n      curRemoveBoxID: \"\",\n      curRemoveBoxTitle: \"\"\n    }\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  componentWillUnmount(){\n  \tconsole.log(\"Component will unmount\")\n  }\n\n  handleRemoveBox(boxID, boxTitle){\n  \tthis.setState({\n  \t\tshowRemoveAlert: true, \n  \t\tcurRemoveBoxID: boxID,\n  \t\tcurRemoveBoxTitle: boxTitle\n  \t})\n  }\n\n  handleModalClose(){\n  \tthis.setState({showRemoveAlert:false})\n  }\n\n  deleteBox(){  \t\n  \tremoveBox(this.state.curRemoveBoxID)\n  \t.then((res)=>{\n  \t\tlet finished = (res.reduce((a,b) => a+b, 0) === 3) ? true: false\n\n  \t\tthis.handleModalClose()\n  \t})\n  \t.catch((err)=>{console.log(err)})\n  }\n\n  render(){\n\treturn(\n\t<Accordion id=\"BoxListAccordion\">\n\t\t<AccordionSummary\n\t\tstyle={{background: this.props.theme.palette.primary.main}}\n\t\texpandIcon={<ExpandMoreIcon />}\n\t\taria-label=\"Expand\"\n\t\taria-controls=\"additional-actions2-content\"\n\t\tid=\"additional-actions2-header\"\n\t\t>\n\t\t\t<Typography >\n\t\t\t\tBoxes and Wods\n\t\t\t</Typography>\t        \n\t\t</AccordionSummary>\n\t\t<AccordionDetails>\n\t\t\t<Grid container  item={12}>\n\t\t\t\t{\n\t\t\t\t\tthis.state.userBoxes.length > 0\n\t\t\t\t?\n\t\t\t\t\t<BoxSearch \n\t\t\t\t\t\tuser = {this.state.user}\n\t\t\t\t\t\tuserMD = {this.state.userMD}\n\t\t\t\t\t\tallBoxes = {this.state.userBoxes}\n\t\t\t\t\t\thandleRemoveBox={this.handleRemoveBox.bind(this)}\n\t\t\t\t\t\tisOwner = {true}\n\t\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t\t<Grid item zeroMinWidth xs={6}>\n\t\t\t\t\t\t<Paper elevation={4} style={{padding: \"1vw\"}}>\n\t\t\t\t\t\t\t<Typography noWrap align=\"left\">No boxes Found!</Typography>\n\t\t\t\t\t\t</Paper>\n\t\t\t\t\t</Grid>\n\t\t\t\t}\n\t\t\t</Grid>\n\t\t</AccordionDetails>\n\t\t<Modal\n\t        open={this.state.showRemoveAlert}\n\t        onClose={this.handleModalClose.bind(this)}\n\t        aria-labelledby=\"simple-modal-title\"\n\t        aria-describedby=\"simple-modal-description\"\n\t    >\n\t    \t<div style={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: \"50%\",\n\t\t\t\tleft: \"50%\",\n\t\t\t\twidth: \"80vw\",\n\t\t\t    transform: \"translate(-50%, -50%)\",\n\t\t\t}}>\n\t\t\t\t<Grid item align=\"center\" xs={12}>\n\t    \t\t<Paper style={{height:\"25vh\", display: \"flex\", flexDirection: \"column\",justifyContent: \"center\"}}>\n\t    \t\t\t<Typography style={{position: \"\"}}>\n\t    \t\t\t\t Remove {this.state.curRemoveBoxTitle} ({this.state.curRemoveBoxID})\n\t    \t\t\t</Typography>\n\t    \t\t\t\n\t    \t\t\t<Button color=\"primary\" variant=\"outlined\" onClick={()=>{ this.deleteBox()}}>Delete</Button>\n\t    \t\t</Paper>\n\t    \t\t</Grid>\n\t    \t</div>\n\t    </Modal>\n\t</Accordion>\t\t\n\t)\n  }\n}\n  \nexport default BoxListAccordion = withTheme(BoxListAccordion);\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress\n} \nfrom '@material-ui/core';\n\nimport { setWod } from \"../../utils/firestore/wods\"\n\n\nvar db = firebase.database();\n\nexport default class AddWod extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tuserBoxes: props.userBoxes,\n\t\t\thasBoxes: props.hasBoxes\n\t\t}\n\t}\n\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\n\tcreateWOD(){\n\t  \tlet boxID = document.getElementById(\"ownerBoxAddWodBoxID\").value\n\t  \tlet title = document.getElementById(\"ownerBoxAddWodTitle\").value\n\t  \tlet scoreType = document.getElementById(\"ownerBoxAddWodScoreType\").value\n\t  \tlet wodText = document.getElementById(\"ownerBoxAddWodWodText\").value\n\n\t  \tif(!boxID || !title || !scoreType || !wodText){\n\t  \t\tconsole.log(\"Error with input createWod\")\n\t  \t\tconsole.log(boxID, title, scoreType, wodText)\n\t  \t\treturn\n\t  \t}\n\n\t  \tsetWod(boxID, title, wodText, scoreType)\n\t  \t.then(()=> {console.log(\"Successfully added wod.\")})\n\t  \t.catch((err)=>{console.log(err)})\n\n\t  }\n\n\n\trender(){\n\t\treturn(\n\t\t\t<Grid item container xs={12}>\n\t\t\t\t<Grid item xs={6}>\n\t\t\t\t    <Select\n\t\t\t          native\n\t\t\t          inputProps={{\n\t\t\t            name: 'Box',\n\t\t\t            id: 'ownerBoxAddWodBoxID',\n\t\t\t          }}\n\t\t\t        >\n\t\t\t          { this.state.hasBoxes ?\n\t\t\t          \tthis.state.userBoxes\n\t\t        \t\t.map((box, i) => {\n\t\t\t        \t\treturn (<option key={i} value={box[\"boxID\"]} >{box[\"title\"]}</option>)\n\t\t\t        \t})\n\t\t\t        \t:\n\t\t\t        \t<option aria-label=\"None\" value=\"\" >No boxes!</option>\n\t\t\t          }\n\t\t\t      </Select>\n\t\t\t    </Grid>\n\t\t\t    <Grid item xs={6}>\n\t\t\t\t\t<Select\n\t\t\t\t\t  native\n\t\t\t\t\t  \n\t\t\t\t\t  inputProps={{\n\t\t\t\t\t    name: 'Score Type',\n\t\t\t\t\t    id: 'ownerBoxAddWodScoreType',\n\t\t\t\t\t  }}\n\t\t\t\t\t>\n\t\t\t\t\t      <option value={\"time\"}>Time</option>\n\t\t\t\t\t      <option value={\"reps\"}>Reps</option>\n\t\t\t\t\t  </Select>\n\t\t\t    </Grid>\n\t\t\t    <Grid item xs={12}>\n\t\t          <TextField\n\t\t              id=\"ownerBoxAddWodTitle\"\n\t\t              type=\"text\"\n\t\t              style={{ margin: 8}}\n\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t              inputProps={{\n\t\t                title: \"Letters only, max length 35\",\n\t\t                placeholder: \"Title\"\n\t\t              }}\n\t\t              margin=\"normal\"\n\t\t              color=\"primary\"\n\t\t              InputLabelProps={{\n\t\t                shrink: true,\n\t\t              }}\n\t\t            />\n\t\t        </Grid>\n\t\t        <Grid item xs={12}>\n\t\t             <TextField\n\t\t              id=\"ownerBoxAddWodWodText\"\n\t\t              type=\"text\"\n\t\t              style={{ margin: 8}}\n\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t              inputProps={{\n\t\t                title: \"Letters only, max length 35\",\n\t\t                placeholder: \"Workout here\"\n\t\t              }}\n\t\t              margin=\"normal\"\n\t\t              color=\"primary\"\n\t\t              multiline\n  \t\t\t\t\t  rows={10}\n\t\t              InputLabelProps={{\n\t\t                shrink: true,\n\t\t              }}\n\t\t            />\n\t\t        </Grid>\n\t\t        \n\t\t\t      <Grid item xs={12}>\n\t\t\t\t      <Button \n\t\t\t\t      \tvariant=\"outlined\" \n\t\t\t\t      \tcolor=\"primary\" \n\t\t\t\t      \tonClick={this.createWOD.bind(this)}\n\t\t\t\t      >\n\t\t\t\t      \tEnter WOD\n\t\t\t\t      </Button>\n\t\t\t      </Grid>\n\t\t\t</Grid>\n\t\t)\n\t}\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress\n} \nfrom '@material-ui/core';\n\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\n\nimport BoxListAccordion from \"./boxListAccordion\"\n\nimport { setBox } from \"../../utils/firestore/boxes\"\n\nimport AddWod from \"../wods/addWod\"\n\nimport \"../../styles.css\"\n\n\nlet db = firebase.database();\nlet fs = firebase.firestore();\n\n\n\n/*\nAccordion for:\nAdd Box\nShow Boxes\n\n\n*/\n\n\n\nclass OwnerBox extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userBoxes: [],\n      hasBoxes: false,\n      addBoxProgress: true,\n      scoreTypeSelectVal: \"\",\n      boxIDSelectVal: \"\"\n    }\n  }\n  \n\n\n  componentDidMount(){\n  \tthis.listenForBoxes()\n  }\n\n \n  componentWillReceiveProps(newProps){\n\tthis.setState({...newProps})\n\t\tif(newProps.userMD.accountType === \"owner\"){\n\t\t\tthis.listenForBoxes()\n\t\t}\n  }\n\n  componentWillUnmount(){\n  \tif(this.boxListener !== undefined){\n    \tthis.boxListener()\n  \t}\n  }\n\n  listenForBoxes(){\n\t\tfs.collection(\"boxes\").where(\"uid\", \"==\", this.state.user.uid)\n\t\t.onSnapshot(ss => {\n\t\t\tlet data = []\n\t\t\tss.forEach(doc => {\n\t\t\t\tdata.push(doc.data())\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\thasBoxes: true, \n\t\t\t\tuserBoxes: data\n\t\t\t})  \t\t\t\n\t\t},\n\t\terr => {\n  \t\tthis.setState({\n\t\t\t\thasBoxes: false, \n\t\t\t\tuserBoxes: []\n\t\t\t})  \t\t\t\n\t\t})\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n        let a = document.getElementById(\"ownerBoxAddBoxTitle\")\n        let title = a.value\n        this.setState({showAddBoxProgress: true})\n        this.createBox(title)\n    }\n  }\n\n  // import setBox from \"\"\n  createBox(title){\n\tsetBox(title, this.props.user.uid)\n\t.then(res => {console.log(res)})\n\t.catch(err => {console.log(err)})\n  }\n\n\n  handleSelectValChange(ev){\n\tconst name = ev.target.name;\n\tconsole.log(name)\n    this.setState({\n      [name]: ev.target.value\n  \t})\n  }\n \n  render () {\n    return (\n    \t<Grid item xs={12} id=\"ownerBox\" >\n\t\t\t<Typography variant=\"h3\">\n\t\t\t\tWelcome, {this.state.userMD.accountType}!\n\t\t\t</Typography>\n\t\t\t\n\t\t\t<Accordion>\n\t\t        <AccordionSummary\n\t\t\t\t  style={{background: this.props.theme.palette.primary.mainGrad}}\n\t\t          expandIcon={<ExpandMoreIcon />}\n\t\t          aria-label=\"Expand\"\n\t\t          aria-controls=\"additional-actions1-content\"\n\t\t          id=\"additional-actions1-header\"\n\t\t        >\n\t\t        \t<Typography >\n\t\t        \t\tAdd Box\n\t\t        \t</Typography>\t        \n\t\t        </AccordionSummary>\n\t\t        <AccordionDetails>\n\t\t          <TextField\n\t\t              id=\"ownerBoxAddBoxTitle\"\n\t\t              type=\"text\"\n\t\t              style={{ margin: 8}}\n\t\t              pattern=\"[\\sA-Za-z0-9]{35}\"\n\t\t              inputProps={{\n\t\t                title: \"Letters only, max length 35\",\n\t\t                placeholder: \"Name of box\"\n\t\t              }}\n\t\t              onKeyUp={this.onKeyUp.bind(this) }\n\t\t              margin=\"normal\"\n\t\t              color=\"primary\"\n\t\t              InputLabelProps={{\n\t\t                shrink: true,\n\t\t              }}\n\t\t            />\n\t\t        </AccordionDetails>\n\t\t    </Accordion>\n\t\n\t\t\t<Accordion>\n\t\t        <AccordionSummary\n\t\t\t\t  style={{background: this.props.theme.palette.primary.mainGrad}}\n\t\t          expandIcon={<ExpandMoreIcon />}\n\t\t          aria-label=\"Expand\"\n\t\t          aria-controls=\"additional-actions0-content\"\n\t\t          id=\"additional-actions0-header\"\n\t\t        >\n\t        \t<Typography >\n\t        \t\tAdd WOD\n\t        \t</Typography>\t        \n\t\t        </AccordionSummary>\n\t\t        <AccordionDetails>\n\t\t        {this.state.hasBoxes ?\n\t\t          \t<AddWod\n  \t\t          \tuid={this.state.user.uid}\n  \t\t          \tuserMD={this.state.userMD}\n  \t\t          \tuserBoxes={this.state.userBoxes}\n  \t\t          \thasBoxes={this.state.hasBoxes}\n  \t\t          />\n  \t\t          :\n  \t\t          <span>No boxes</span>\n  \t\t      \t}\n\t\t        </AccordionDetails>\n\t\t    </Accordion>\n\n\t\t  \t<BoxListAccordion \n\t\t  \t\tuser = {this.state.user}\n\t\t\t\tuserMD = {this.state.userMD}\n\t\t\t\tuserBoxes = {this.state.userBoxes}\n\t\t\t\thasBoxes = {this.state.hasBoxes}\n\t\t  \t/>\n\t\t  \n    \t\n  \t\t</Grid>\n    );\n  }\n}\n\n\n\n\nexport default OwnerBox = withTheme(OwnerBox);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/firestore\";\n\nlet fs = firebase.firestore();\n\nexport default function mTea(){}\n\n\nexport function setUsername(uid, username){\n\tlet data = {username: username}\n\tlet promises = [fs.collection(\"users\").doc(uid).update(data)]\n\n\tfs.collection(\"scores\").where(\"uid\", \"==\", uid)\n\t.get().then(ss => {\n\t\tlet promises = ss.docs.map(doc => {\n\t\t\tconsole.log(doc.data())\n\t\t\treturn fs.collection(\"scores\").doc(doc.data().scoreID).update(data)\n\t\t})\n\t})\n\t\n\treturn new Promise((res, rej) => {\n\t\tPromise.all(promises)\n\t\t.then(() => {res(\"Updated!\")})\n\t\t.catch(err => {rej(err)})\n\t})\n}","// Add the Firebase services that you want to use\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Grid, TextField, Button, Typography } from '@material-ui/core';\n\nimport { setUsername } from '../../utils/firestore/users'\n\nimport \"../../styles.css\"\n\nvar db = firebase.database();\n\nconst usernameMaxLength = 12\nconst usernameMaxLengthErrMsg = \"Username cannot be longer than 12 characters\"\nconst usernameErrMsg = \"Username can only contain letters & numbers\" \n\nexport default class UsernamePanel extends Component {\n  \n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD\n    }\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  componentDidMount(){\n    this.hideUsernameInput()\n  }\n  componentDidUpdate(){\n    this.hideUsernameInput()\n  }\n\n  // <!-- TODO: Add SDKs for Firebase products that you want to use\n  //      https://firebase.google.com/docs/web/setup#available-libraries -->\n\n  updateUsername(ev){\n    let usernameInput = document.getElementById('updateUsernameInput')\n    \n    if(usernameInput.style.display === \"none\"){\n      usernameInput.style.display = \"block\"\n    }else{\n      let re = /\\W/g  // match non word characters ^[A-Za-z0-9]\n    \n      if(usernameInput.value.length > 12){\n        alert(usernameMaxLengthErrMsg)\n        return\n      } \n      if(re.exec(usernameInput.value) !== null ){\n        alert(usernameErrMsg)\n        return\n      }\n      //update \n      if(usernameInput.value.length <= 0){ \n        this.hideUsernameInput()     \n        return \n      }\n\n      setUsername(this.state.user.uid, usernameInput.value)\n      .then((res) => {\n        console.log(res)\n        this.hideUsernameInput()\n      })\n      .catch(err => { console.log(err) })\n    }\n  }\n\n  onKeyUp(data){\n    if((data.keyCode || data.which) == 13){\n        this.updateUsername()\n    }\n  }\n\n  hideUsernameInput(){\n    try{\n      let usernameInput = document.getElementById('updateUsernameInput')\n      usernameInput.value = \"\"\n      usernameInput.style.display = \"none\"\n    }catch{return}\n  }\n\n  render () {    \n    return (\n    <Grid container id=\"usernamePanel\" >\n    {\n      !this.state.userMD\n      ? \n        <h1> Loading </h1>\n      :\n        <React.Fragment>\n          <Grid item xs={12} >\n            <Typography gutterBottom variant=\"h4\">\n              Username\n            </Typography>\n            <Typography gutterBottom variant=\"h5\">\n              {this.state.userMD.username}\n            </Typography>\n          </Grid>\n\n          <Grid item xs={12} >\n            <Button  \n                variant=\"outlined\" \n                color=\"primary\" \n                onClick={this.updateUsername.bind(this)}\n            >\n              <Typography>\n                  Update Username\n              </Typography>\n            </Button>\n          </Grid>\n          <Grid item xs={12} >\n            <TextField\n              id=\"updateUsernameInput\"\n              type=\"text\"\n              style={{ margin: 8}}\n              pattern=\"[A-Za-z]{12}\"\n              inputProps={{\n                title: \"Letters only, max length 12\",\n                placeholder: \"New username\"\n              }}\n              onKeyUp={this.onKeyUp.bind(this) }\n              margin=\"normal\"\n              color=\"primary\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n            />    \n          </Grid>\n        </React.Fragment>\n    }\n    </Grid>\n    );\n  }\n}\n\n\n\n","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport ReactMarkdown from 'react-markdown'\n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport \n{ \tGrid, Paper, Button, Typography, Collapse, TextField, Select,\n\tAccordion, AccordionSummary, AccordionDetails, FormControlLabel,\n\tCircularProgress, LinearProgress, CardActions, Card, CardContent,\n\tListItem, List, ListItemText, TableRow, TableHead, TableContainer,\n\tTableCell, TableBody, Table, Modal\n} \nfrom '@material-ui/core';\n\nimport { DeleteOutlined, LooksOneOutlined, AddBoxOutlined } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport ActionCancelModal from \"../actionCancelModal\"\nimport { removeScore } from \"../../utils/firebase/scores\"\nimport \"../../styles.css\"\n\n\nvar db = firebase.database();\n\nclass UserScoreList extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tscores: props.scores,\n\t\t\tuid: props.uid,\n\t\t\tshowRemoveAlert: false,\n\t\t\tremoveScoreID: \"\"\n\t\t}\n\t}\n\n\thandleViewWod(wodID){\n\t\tconsole.log(`Go to wodID: ${wodID}`)\n\t}\n\n\thandleViewBox(boxID){\n\t\tconsole.log(`Go to boxID: ${boxID}`)\n\t}\n\n\tshowRemoveAlert(scoreID){\n\t\tthis.setState({showRemoveAlert: true, removeScoreID: scoreID})\n\t}\n\n\tonRemove(){\n    removeScore(this.state.removeScoreID)\n    .then((res)=>{\n      this.hideRemoveAlert()\n    })\n    .catch((err)=>{console.log(err)})\n\t}\n\n\thideRemoveAlert(){\n\t\tthis.setState({showRemoveAlert: false})\n\t}\n\n\tcomponentWillReceiveProps(newProps){\n\t\tthis.setState({...newProps})\n\t}\n\t\n  \trender(){\n\t\treturn(\n\t\t\t<React.Fragment>\n\t\t\t{this.state.scores.length > 0?\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t<Table aria-label=\"score table\">\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableCell>Username</TableCell>\n\t\t\t\t\t<TableCell>Score</TableCell>\n\t\t\t\t\t<TableCell>Box</TableCell>\n\t\t\t\t\t<TableCell>Wod</TableCell>\n\t\t\t\t\t<TableCell>Remove</TableCell>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{\n\t\t\t\t\tthis.state.scores.map(score => {\n\t\t\t\t\t\treturn <ScoreRow \n\t\t\t\t\t\t\tinfo={score}\n\t\t\t\t\t\t\tonViewBox={this.handleViewBox.bind(this)}\n\t\t\t\t\t\t\tonViewWod={this.handleViewWod.bind(this)}\n\t\t\t\t\t\t\tonRemove = {this.showRemoveAlert.bind(this)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t    </TableBody>\n\t\t\t    </Table>\n\t\t\t</TableContainer>\n\t\t\t:\n\t\t\t<Grid item xs={12}>\n\t\t\t\t<Card variant=\"outlined\" color=\"primary\">\n\t\t\t\t  <CardContent>\n\t\t\t\t    <Typography variant=\"h5\" component=\"h2\"gutterBottom>\n\t\t\t\t   \tNo Scores!\n\t\t\t\t    </Typography>\n\t\t\t\t   </CardContent>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t\t}\n\t\t\t<ActionCancelModal\n\t\t\t\topen={this.state.showRemoveAlert}\n\t\t\t\tactionText=\"Remove\"\n\t\t\t\tcancelText=\"Cancel\"\n\t\t\t\tmodalText=\"Remove score?\"\n\t\t\t\tonAction={this.onRemove.bind(this)}\n\t\t\t\tonClose={this.hideRemoveAlert.bind(this)}\n\t\t\t/>\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\n  \nexport default UserScoreList = withTheme(UserScoreList);\n\n/*\nShow details of Box and its WODS\n*/\nfunction ScoreRow(props){\n\tlet score = props.info[\"score\"]\n\tlet username = props.info[\"username\"]\n\tlet wodID = props.info[\"wodID\"]\n\tlet uid = props.info[\"uid\"]\n\tlet scoreID = props.info[\"scoreID\"]\n\tlet boxID = props.info[\"boxID\"]\n\treturn(\n\t\t<TableRow>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{username}\n\t\t\t\t</TableCell>\n\t\t\t\t<TableCell>\n\t\t\t\t\t{score} \n\t\t\t\t</TableCell>\n\t\t\t\t<TableCell>\n\t\t\t    <Link to={`box/${boxID}`}>\n\t\t\t    \t<AddBoxOutlined />\n\t\t\t    </Link>\n\t  \t\t</TableCell>\n\t  \t\t<TableCell>\n\t\t\t    <Link to={`wod/${boxID}/${wodID}`}>\n\t\t\t    \t<LooksOneOutlined />\n\t\t\t    </Link>\n\t  \t\t</TableCell>\n\t  \t\t<TableCell>\n\t\t\t    <Button size=\"small\"\n\t\t\t    \tcolor=\"error\" \n\t\t\t    \tonClick={() => props.onRemove(scoreID)}>\n\t\t\t    \t<DeleteOutlined />\n\t\t\t    </Button>\n\t  \t\t</TableCell>\n\t\t</TableRow>\n\t)\n}\n","/*\n\tFollowers\n*/\nimport firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\"; \nimport \"firebase/storage\";\nimport \"firebase/database\"; \nvar storage = firebase.storage()\nvar db = firebase.database();\n\nexport default function mTea(){}\n\nexport function isFollowing(uid, boxID){\n\treturn new Promise((res, rej) => {\n\t\tdb.ref(`users/${uid}/following`).orderByChild(boxID).equalTo(boxID)\n\t\t.once(\"value\", following =>{\n\t\t\tif(following && following.exists()){\n\t\t\t\tres(true)\n\t\t\t}\n\t\t\tres(false)\n\t\t})\n\t\t.catch(err => {rej(err)})\n\t})\n}\n\nexport function setFollow(uid, boxID){\n\tlet key = db.ref(\"followers\").push().key\n\tlet updates = {}\n\tlet data = {\n\t\tuid: uid,\n\t\tboxID: boxID,\n\t\tfollowID: key,\n\t\tdate: Date.now()\n\t}\n\tupdates[`followers/${key}`] = data\n\tupdates[`users/${uid}/following/${key}`] = data\n\treturn new Promise((res, rej) => {\n\t\t db.ref().update(updates)\n\t\t .then(() => {\n\t\t \tres(true)\n\t\t })\n\t\t .catch(error => {rej(error)})\n\t})\n}\n\n\nexport function removeFollow(uid, followID){\n\tlet updates = {}\n\tlet data = {}\n\tupdates[`followers/${followID}`] = data\n\tupdates[`users/${uid}/following/${followID}`] = data\n\treturn new Promise((res, rej) => {\n\t\tdb.ref().update(updates)\n\t\t.then(() => {res(true)})\n\t\t.catch(err => rej(err))\n\t})\n}\n\n\nexport function getUserFollowers(uid){\n\treturn db.ref(`users/${uid}/following`)\n}\n\nexport function getBoxFollowers(boxID){\n\treturn db.ref(\"followers\").orderByChild(\"boxID\").equalTo(boxID)\n\t\t\t\t\n}","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport {isFollowing, setFollow, getUserFollowers, getBoxFollowers}\nfrom \"../../utils/firebase/followers\"\n\nvar db = firebase.database();\n\nclass UserFollows extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userFollowing: []\n    }\n  }\n\n  toList(value){\n    return Object.keys(value).map(key => {\n      return value[key]\n    })\n\n  }\n\n  componentDidMount(){\n    getUserFollowers(this.state.user.uid)\n    .on(\"value\", followingSS => {\n      if(followingSS && followingSS.exists()){\n        this.setState({\n          userFollowing: this.toList(followingSS.val())\n        })\n      }else{\n        this.setState({userFollowing: {}})\n      }\n    })\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  render(){\n    return(\n      <Grid xs={12}>\n        <Grid xs={12}>\n          <Grid xs={12}>\n          <Typography>Following</Typography>\n          </Grid>\n          {this.state.userFollowing.length > 0 ?\n            this.state.userFollowing.map(follow => {\n              return (\n                <Link\n                  to={`box/${follow.boxID}`}\n                  component={Button}\n                >\n                  {follow.boxID}\n                </Link>)\n            })\n          :\n          <React.Fragment>Not following anyone!</React.Fragment>\n          }\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default UserFollows = withTheme(UserFollows);","import firebase from \"../../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport UserScoreList from '../scores/userScoreList'\nimport UserFollows from '../followers/userFollows'\n\nvar db = firebase.database();\n\nclass Athlete extends Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      userScores: []\n    }\n  }\n\n  componentDidMount(){\n    this.listenForUserScores()\n  }\n\n  listenForUserScores(){\n    db.ref(`scores`).orderByChild(\"uid\").equalTo(this.state.user.uid)\n    .on(\"value\", userScoresSS => {\n      if(userScoresSS && userScoresSS.exists()){\n        let value = userScoresSS.val()\n        let userScores = Object.keys(value).map(wodID => {\n          return value[wodID]\n        })\n        console.log(userScores)\n        this.setState({userScores: userScores})\n      }\n    })\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  render(){\n    return(\n      <Grid xs={12}>\n        <Grid xs={12}>\n          <Grid xs={12}>\n            <UserFollows\n              user={this.state.user}\n              userMD={this.state.userMD}\n            />\n          </Grid>\n          <Grid xs={12}>\n            <Typography>Scores</Typography>\n            <UserScoreList\n              uid={this.state.user.uid}\n              scores={this.state.userScores}\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default Athlete = withTheme(Athlete);","import firebase from \"../context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/database\"; \n\nimport React, { Component } from 'react'\nimport { Route, Link } from 'react-router-dom';\n\nimport { Grid, Paper, Button, Typography, Collapse } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { withTheme } from '@material-ui/core/styles';\n\nimport Login from \"../comps/profile/login\"\nimport OwnerBox from \"../comps/boxes/ownerBox\"\n\nimport UsernamePanel from \"../comps/profile/usernamePanel\"\nimport Athlete from '../comps/profile/athlete'\nimport \"../styles.css\"\n\nvar db = firebase.database();\n\nexport class PageContent extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD,\n      emailAlertOpen: false\n    }\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n  \n  sendVerificationEmail(){\n    this.state.user.sendEmailVerification()\n    .then( () => {\n        this.setState({emailAlertOpen: true})\n    })\n    .catch( err => {console.log(err)})\n  }\n\n  render(){\n    return (\n      <Grid container align=\"center\">\n      <Grid item xs={12}>\n        <Collapse in={this.state.emailAlertOpen}>\n          <Alert onClose={() => {this.setState({emailAlertOpen: false})}}>\n            Email sent!\n          </Alert>\n        </Collapse>\n      </Grid>\n      <Grid item xs={12}>\n          <Paper elevation={2} >\n          </Paper>\n          {!this.state.user.emailVerified ?\n            <Paper elevation={2}>\n              <Button variant=\"outline\" \n                onClick={this.sendVerificationEmail.bind(this)} >\n                <Typography  variant=\"h5\" component=\"h3\">\n                  Send Verification Email\n                </Typography>\n              </Button>\n            </Paper>\n          :\n            <React.Fragment></React.Fragment>\n          }\n          <Paper elevation={4}>\n            <UsernamePanel user={this.state.user} userMD={this.state.userMD} />\n          </Paper>\n          <Paper elevation={2}>\n          {this.state.userMD.accountType === \"owner\" ?\n            <OwnerBox user={this.state.user} userMD={this.state.userMD} />\n          :\n            <Athlete user={this.state.user} userMD={this.state.userMD} />\n          }\n          </Paper>\n      </Grid>\n      <Grid item xs={12}>\n        <Grid item xs={12} className=\"compBorderOutline\">\n          <Paper elevation={2}>\n            <Button variant=\"outlined\" color=\"secondary\"\n                      onClick={this.props.onLogout}>\n                  <Typography variant=\"h6\" component=\"h6\">\n                    Logout\n                  </Typography>\n            </Button>\n          </Paper>\n          \n        </Grid>\n      </Grid>\n    </Grid>\n    )\n  }\n}\n\n\nclass ProfilePage extends Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      user: props.user,\n      userMD: props.userMD\n    }  \n  }\n \n  handleLogout(){\n    firebase.auth().signOut().then(() => {\n      alert('Signed Out');\n      this.setState({user: null})\n    }, (error) => {\n      console.error('Sign Out Error', error )\n    });\n  }\n\n  /*\n    login.js has the form and does the login, calls this with the user obj\n  */\n  handleLogIn(user){\n      this.setState({user: user} )\n  }\n\n  componentWillReceiveProps(newProps){\n    this.setState({...newProps})\n  }\n\n  render () {\n    return (\n    \t<Grid item xs={12} id=\"profilepage\">\n        {\n          this.state.user !== null\n          ? <PageContent \n                onLogout={this.handleLogout.bind(this)} \n                user= {this.state.user}\n                userMD={this.state.userMD}\n            />\n          : <Login \n            onLogin={this.handleLogIn.bind(this)} />\n        }\n  \t\t</Grid>\n    );\n  }\n}\n\nexport default ProfilePage = withTheme(ProfilePage);","import React, { Component } from \"react\";\n\nimport { AppBar, Toolbar, IconButton, Button, Typography} from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { withTheme } from '@material-ui/core/styles';\n\n\nclass Header extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<AppBar position=\"static\" \n\t\t\t\t\tstyle={{background:this.props.theme.palette.background.toolbar}}>\n\t\t\t<Toolbar disableGutters={false}>\n\t\t\t    <Typography gutterBottom variant=\"h3\" style={{\"margin\": \"0 auto\"}}>\n\t\t            WodTrackrr\n\t\t          </Typography>\n\t\t        </Toolbar>\n\t\t\t</AppBar>\n\t\t)\n\t}\n}\n\n\nexport default Header = withTheme(Header);","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();","let apptheme = {\n   \"palette\":{\n      \"common\":{\n         \"black\":\"#000\",\n         \"white\":\"#fff\"\n      },\n      \"background\":{\n         \"paper\":\"#2e3134\",\n         \"toolbar\": \"#0d0e0e\",\n         \"tableHeader\": \"#1b1d1e\",\n         \"default\":\"rgba(48, 48, 48, 1)\"\n      },\n      \"primary\":{\n         \"main\":\"#03ceec\",\n         \"mainGrad\": 'linear-gradient(90deg,#0890fd,#01d3fe)',\n         \"contrastText\":\"rgba(255, 255, 255, 1)\"\n      },\n      \"secondary\":{\n         \"light\":\"#6C30FF\",\n         \"main\":\"#6C30FF\",\n         \"dark\":\"#6C30FF\",\n         \"contrastText\":\"#fff\"\n      },\n      \"error\":{\n         \"light\":\"#ea4331\",\n         \"main\":\"#c43627\",\n         \"dark\":\"#2d0d0b\",\n         \"contrastText\":\"rgba(255, 255, 255, 1)\"\n      },\n      \"text\":{\n         \"primary\":\"#ffffff\",\n         \"secondary\":\"#e0dfdf\",\n         \"disabled\":\"#bdbdbd\",\n         \"hint\":\"#afafaf\"\n      }\n   },\n   \n};\n\nexport default apptheme = apptheme;","import firebase, { FirebaseAuthContext } from \"./context/firebaseContext\"\nimport \"firebase/auth\";\nimport \"firebase/storage\"; \nimport \"firebase/database\";\nimport \"firebase/firestore\";\n\n\nimport React from \"react\";\nimport { HashRouter, Switch, Route, Link } from 'react-router-dom';\n\n\nimport { Paper, Button, BottomNavigation, BottomNavigationAction ,Grid, Container} from '@material-ui/core';\n\n\nimport HomeIcon from '@material-ui/icons/Home';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LiveTvIcon from '@material-ui/icons/LiveTv';\nimport PanoramaIcon from '@material-ui/icons/Panorama';\n\nimport \"./styles.css\";\n\n\nimport BoxSearchPage from \"./pages/boxSearchPage\"\nimport BoxView from \"./comps/boxes/boxView\"\nimport RegisterUser from \"./comps/profile/registerUser\"\nimport ScoreView from \"./comps/scores/scoreView\"\nimport Profile from \"./pages/profile\"\nimport Header from \"./comps/header\"\n\n\nimport history from \"./history\"\n\nimport { createMuiTheme, ThemeProvider, responsiveFontSizes } from '@material-ui/core/styles';\nimport blueGrey from '@material-ui/core/colors/blueGrey';\nimport lightBlue from '@material-ui/core/colors/lightBlue';\nimport pink from '@material-ui/core/colors/pink';\nimport teal from '@material-ui/core/colors/teal';\n\nimport apptheme from \"./css/apptheme\"\n\n// Needs to move to its own file\nlet theme = createMuiTheme(apptheme);\ntheme = responsiveFontSizes(theme)\n\n\n\nexport default class App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state={\n      btmnav: 0,\n      user: firebase.auth().currentUser,\n      userMD: false\n    }\n\n  }\n\n  componentWillMount(){\n    this.firebaseAuthListener = firebase.auth()\n    .onAuthStateChanged(user => {\n      let fs = firebase.firestore();\n      let metadata = false\n      if(user){\n        let doc = fs.collection(\"users\").doc(user.uid)\n        this.userMDListener = doc.onSnapshot(metadata => {\n          if(metadata.exists){\n            this.setState({ user: user, userMD: metadata.data() })\n          }else{\n            this.setState({ user: user, userMD: false })\n          }\n        }, err => {console.log(err)})\n\n      }\n    })\n\n  }\n\n  componentWillUnmount(){\n    if(this.firebaseAuthListener !== undefined)\n      this.firebaseAuthListener && this.firebaseAuthListener()\n    if(this.userMDListener !== null)\n      this.userMDListener && this.userMDListener()\n  }\n\n  render(){\n    return(\n    <FirebaseAuthContext.Provider>\n    <HashRouter history={history} >\n    <ThemeProvider theme={theme}>\n      <Grid container>\n        <Grid item xs={12} id=\"page-header\">\n          <Header className=\"header\" />\n        </Grid>\n        <Grid item xs={11} id=\"page-container\" className=\"page-content\">\n          <Switch>\n            <Route exact path=\"/boxSearch\">\n              <BoxSearchPage user={this.state.user}\n                userMD={this.state.userMD} />\n            </Route>     \n            <Route exact path=\"/profile\">\n              <Profile user={this.state.user}\n                userMD={this.state.userMD} />\n            </Route>\n            <Route path=\"/box/:boxID\"\n              render= { props =>(\n                <BoxView\n                  userMD={this.state.userMD}\n                  boxID={props.match.params.boxID}/>\n                )\n              } \n            />\n           <Route path=\"/wod/:boxID/:wodID\"\n            render= { props =>(\n              <ScoreView userMD={this.state.userMD}\n                boxID={props.match.params.boxID}\n                wodID={props.match.params.wodID}\n                isReadOnly={true}/>\n              )\n            } \n          />\n          <Route exact path=\"/register\"\n            render= { props =>(\n              <RegisterUser />\n              )\n            } \n          />\n          </Switch>\n          <div style={{\"margin\": \"10vh\"}}></div>\n        </Grid>\n        <Grid item xs={12} className=\"footer\">\n          <BottomNavigation \n            value = {this.state.btmnav}\n            onChange = {(event, newValue) => {\n                this.setState({btmnav: newValue})\n              }}\n              style={{background: theme.palette.background.toolbar}}\n            showLabels\n          >\n            <BottomNavigationAction label=\"Search\" component={Link} to=\"/boxSearch\" icon={<PersonIcon />}  />\n            <BottomNavigationAction label=\"Profile\" component={Link} to=\"/profile\" icon={<PersonIcon />}  />\n          </BottomNavigation>\n        </Grid>\n      </Grid>\n      </ThemeProvider>\n      </HashRouter>\n      </FirebaseAuthContext.Provider>\n  \n    );\n  }\n}\nApp.contextType = FirebaseAuthContext;\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app\";\n\n\n\n\n\nReactDOM.render( <App />, document.getElementById('root'));"],"sourceRoot":""}