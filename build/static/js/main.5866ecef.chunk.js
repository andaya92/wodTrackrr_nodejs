(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{171:function(e,t,a){e.exports=a(277)},18:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),i=a(5),l=a(6),c=a(8),u=a(7),m=a(130),h=(a(15),m),d=r.a.createContext(m.initializeApp({apiKey:"AIzaSyCGE8_j8cfIBmIzcvP6CVgG2yC6EE1Ep1U",authDomain:"wodtrackrr.firebaseapp.com",databaseURL:"https://wodtrackrr.firebaseio.com",projectId:"wodtrackrr",storageBucket:"wodtrackrr.appspot.com",messagingSenderId:"743601990099",appId:"1:743601990099:web:5937e9151eaad13e93a726",measurementId:"G-39CF0BRPMH"})),p=(a(24),a(17)),f=a(19),v=a(311),g=a(341),b=a(342),y=a(133),E=a.n(y),x=(a(18),a(31),a(159)),w=a(352),D=(a(86),a(279)),C=a(33),k=a(43),O=a(67),M=a(60),I=a(104),S=a.n(I),j=a(74);function A(e){var t=e.split(":"),a=Object(k.a)(t,2),n=a[0],r=a[1];return 60*parseInt(n)+parseInt(r)}function T(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return a<10&&(a="0".concat(a)),"".concat(t,":").concat(a)}h.database();var B=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scoreType:e.scoreType,data:e.data,values:e.values,stats:e.stats},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.createChart()}},{key:"createChart",value:function(){var e=this;this.ctx=document.getElementById("lineChart");var t=this.ctx.getContext("2d").createLinearGradient(200,0,200,400);t.addColorStop(0,"#01d3fe"),t.addColorStop(1,"#0890fd"),this.lineChart&&this.lineChart.destroy(),this.lineChart=new S.a(this.ctx,{type:"line",data:{label:"Scores",datasets:[{label:"Score",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,backgroundColor:t,data:this.state.data}]},options:{scales:{yAxes:[{ticks:{callback:function(t,a,n){return"time"===e.state.scoreType?T(t):"reps"===e.state.scoreType?t:void 0}}}]},tooltips:{callbacks:{title:function(e,t){},label:function(t,a){var n=a.datasets[t.datasetIndex].label||"";return n&&(n+=": "),"time"===e.state.scoreType?n+=T(t.yLabel):"reps"===e.state.scoreType&&(n+=t.yLabel),n}}},maintainAspectRatio:!1},plugins:[{beforeInit:function(e){e.data.datasets[0].data}}]})}},{key:"componentDidUpdate",value:function(){this.createChart()}},{key:"componentWillUnmount",value:function(){console.log("Component will unmount")}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement("div",{style:{width:"92vw",padding:"8px"}},r.a.createElement("canvas",{id:"lineChart"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),L=B=Object(w.a)(B),P=(h.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scoreType:e.scoreType,data:e.data,values:e.values,stats:{}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.createChart(this.binData(this.state.values))}},{key:"componentDidUpdate",value:function(){console.log(this.state),this.createChart(this.binData(this.state.values))}},{key:"createChart",value:function(e){var t=Object(k.a)(e,2),a=t[0],n=t[1];this.ctx=document.getElementById("barChart");var r=this.ctx.getContext("2d").createLinearGradient(200,0,200,400);r.addColorStop(0,"#01d3fe"),r.addColorStop(1,"#0890fd"),this.barChart&&this.barChart.destroy(),this.barChart=new S.a(this.ctx,{type:"bar",data:{labels:a,datasets:[{label:"Scores (Standard Deviation)",minBarLength:1,backgroundColor:r,data:n}]},options:{maintainAspectRatio:!1}}),this.barChart.update()}},{key:"format",value:function(e){return"time"===this.state.scoreType?e<=0?0:T(e):"reps"===this.state.scoreType?parseFloat(e):void 0}},{key:"createLabels",value:function(e,t){for(var a=[],n=0;n<3;n++){var r="".concat(this.format(e-t*(n+1))," - ").concat(this.format(e-t*n)),o="".concat(this.format(e+t*n)," - ").concat(this.format(e+t*(n+1)));a.unshift(r),a.push(o)}return a}},{key:"binData",value:function(e){var t,a=Object(M.standardDeviation)(e),n=Object(M.mean)(e),r=this.createLabels(n,a),o=[0,0,0,0,0,0],s=Object(j.a)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value-n,l=Math.floor(i/a);Math.abs(l)<=1?i>0?o[3]++:o[2]++:Math.abs(l)<=2?i>0?o[4]++:o[1]++:i>0?o[5]++:o[0]++}}catch(c){s.e(c)}finally{s.f()}return[r,o]}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement("div",{style:{width:"92vw",padding:"8px"}},r.a.createElement("canvas",{id:"barChart"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log(e),console.log(t),e}}]),a}(n.Component)),U=P=Object(w.a)(P);function F(e){return console.log(e),{min:Math.min.apply(Math,Object(O.a)(e)),max:Math.max.apply(Math,Object(O.a)(e)),mean:Object(M.mean)(e),median:Object(M.median)(e),sd:Object(M.standardDeviation)(e)}}var R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scores:e.scores,graphData:[],rawScores:[],scoreType:"",stats:{}},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){console.log("Component will unmount")}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,container:!0,align:"center",spacing:1,xs:12},r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,null,"Low: ","time"===this.state.scoreType?T(this.state.stats.min):this.state.stats.min))),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,null,"High: ","time"===this.state.scoreType?T(this.state.stats.max):this.state.stats.max))),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,null,"Avg: ","time"===this.state.scoreType?T(this.state.stats.mean):this.state.stats.mean)))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(L,{data:this.state.graphData,values:this.state.rawScores,scoreType:this.state.scoreType,stats:this.state.stats})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(U,{data:this.state.graphData,values:this.state.rawScores,scoreType:this.state.scoreType,stats:this.state.stats})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=function(e){for(var t=[],a="",n=e.map((function(e){return a=e.scoreType,"time"===e.scoreType?A(e.score):parseFloat(e.score)})),r=0;r<n.length;r++)t.push({x:r,y:n[r],c:0});return[t,n,a,F(n)]}(e.scores),n=Object(k.a)(a,4),r=n[0],o=n[1],s=n[2],i=n[3];return Object(C.a)(Object(C.a)({},e),{},{graphData:r,rawScores:o,scoreType:s,stats:i})}}]),a}(n.Component),W=R=Object(w.a)(R),N=a(314),V=a(315),G=a(316),z=a(317),K=a(318),H=a(319),J=a(320),Z=a(321),_=a(322),q=a(40),Q=a.n(q),X=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scores:e.scores,uid:e.uid},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.scores.length>0?r.a.createElement(N.a,{component:x.a},r.a.createElement(V.a,{"aria-label":"score table"},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,null,"Username"),r.a.createElement(K.a,null,"Score"),r.a.createElement(K.a,null))),r.a.createElement(H.a,null,this.state.scores.map((function(t,a){var n=e.state.uid==t.uid;return r.a.createElement($,{key:a,info:t,onRemove:e.props.onRemove,isUserScore:n})}))))):r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(J.a,{variant:"outlined",color:"primary"},r.a.createElement(Z.a,null,r.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},"No Scores!")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Y=X=Object(w.a)(X);var $=Object(w.a)((function(e){var t=e.info.score,a=e.info.username,n=(e.info.wodID,e.info.uid,e.info.scoreID);return e.isUserScore,r.a.createElement(z.a,{selected:e.isUserScore},r.a.createElement(K.a,null,a),r.a.createElement(K.a,null,t),e.isUserScore?r.a.createElement(K.a,{align:"right"},r.a.createElement(_.a,{size:"small",onClick:function(){return e.onRemove(n)}},r.a.createElement(Q.a,{color:"error"}))):r.a.createElement(K.a,null))})),ee=a(16),te=a(25),ae=a.n(te),ne=a(354),re=a(324),oe=a(325),se=a(348),ie=a(4),le=h.firestore();function ce(e){return new Promise((function(t,a){le.collection("scores").doc(e).delete().then((function(){t("Successfully removed score: ".concat(e))})).catch((function(t){a("Failed to remove score: ".concat(e))}))}))}var ue=Object(ie.a)({root:{borderBottom:"none"}})(K.a),me=(h.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,wodMD:e.wodMD},n}return Object(l.a)(a,[{key:"objListToArray",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"isNumInSane",value:function(e){return-1===e.search(/\D/)}},{key:"handleAddScore",value:function(){if(this.state.userMD){var e="";if("time"===this.state.wodMD.scoreType){var t=document.getElementById("scoreViewUserScoreMins").value,a=document.getElementById("scoreViewUserScoreSecs").value;if(!this.isNumInSane(t)||!this.isNumInSane(a))return void alert("Time must only contain numbers, entered: ".concat(t,":").concat(a));if(parseInt(a)>59)return void alert("Seconds must be 59 or below, entered: ".concat(a));if(parseInt(a)<10&&1===a.length&&(a="0".concat(a)),isNaN(parseInt(a))||isNaN(parseInt(t)))return void alert("Missing field, entered: ".concat(t,":").concat(a));if(t.length>2)return void alert("Minutes must be 99 or below, entered: ".concat(t));0===t.length&&(t="0"),0===a.length&&(a="0"),e="".concat(t,":").concat(a)}else{if((e=document.getElementById("scoreViewUserScore").value).length>3)return void alert("Score must be 3 digits or less, entered: ".concat(e));if(!e)return void alert("Must enter score.");if(!this.isNumInSane(e))return void alert("Score must be digits only, entered: ".concat(e))}var n=this.state.userMD.username,r=this.state.userMD.uid,o=this.state.wodMD.wodID,s=this.state.wodMD.gymClassID,i=this.state.wodMD.boxID;(function(e,t,a,n,r,o,s,i){return new Promise((function(l,c){var u={uid:a,wodID:r,gymClassID:o,boxID:s,username:t,title:e,score:n,scoreType:i,date:Date.now()};le.collection("scores").where("uid","==",a).where("wodID","==",r).get().then((function(e){var t="";if(console.log(e),e.empty){var a=le.collection("scores").doc();u.scoreID=a.id,a.set(u).then((function(){l("Added new score.")})).catch((function(e){c(e)}))}else e.forEach((function(e){t=e.data().scoreID})),u.scoreID=t,le.collection("scores").doc(t).set(u).then((function(){l("Updated score.")})).catch((function(e){c(e)}))}),(function(e){c(e)}))}))})(this.state.wodMD.title,n,r,e,o,s,i,this.state.wodMD.scoreType).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}},{key:"render",value:function(){var e,t,a;return r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"0px 0px 8px 0px"}},r.a.createElement(ne.a,null,r.a.createElement(re.a,{style:{background:this.props.theme.palette.primary.mainGrad},expandIcon:r.a.createElement(ae.a,null),"aria-label":"Expand","aria-controls":"additional-actions2-content",id:"additional-actions2-header"},r.a.createElement(D.a,null,"Add Score")),r.a.createElement(oe.a,null,r.a.createElement(v.a,{item:!0,container:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,null,this.state.wodMD.scoreType.replace(this.state.wodMD.scoreType[0],this.state.wodMD.scoreType[0].toUpperCase()))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(N.a,null,r.a.createElement(V.a,null,r.a.createElement(H.a,null,r.a.createElement(z.a,null,"time"===this.state.wodMD.scoreType?r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{align:"center"},r.a.createElement(se.a,(e={id:"scoreViewUserScoreMins",type:"number",style:{margin:8},pattern:"[0-9]{3}",inputProps:{title:"Numbers only, max length 3",placeholder:"Minutes"}},Object(ee.a)(e,"style",{width:"100%"}),Object(ee.a)(e,"margin","normal"),Object(ee.a)(e,"color","primary"),Object(ee.a)(e,"InputLabelProps",{shrink:!0}),e))),r.a.createElement(ue,{align:"center"},r.a.createElement(se.a,(t={id:"scoreViewUserScoreSecs",type:"number",style:{margin:8},pattern:"[0-9]{2}",inputProps:{title:"Numbers only, max length 2",placeholder:"Seconds"}},Object(ee.a)(t,"style",{width:"100%"}),Object(ee.a)(t,"margin","normal"),Object(ee.a)(t,"color","primary"),Object(ee.a)(t,"InputLabelProps",{shrink:!0}),t)))):r.a.createElement(ue,{align:"center",colSpan:2},r.a.createElement(se.a,(a={id:"scoreViewUserScore",type:"number",style:{margin:8},pattern:"[0-9]{4}",inputProps:{title:"Numbers only, max length 4",placeholder:"Score"},margin:"normal"},Object(ee.a)(a,"style",{width:"100%"}),Object(ee.a)(a,"color","primary"),Object(ee.a)(a,"InputLabelProps",{shrink:!0}),a)))),r.a.createElement(z.a,null,r.a.createElement(ue,{colSpan:3,align:"center"},r.a.createElement(_.a,{color:"primary",style:{width:"100%"},variant:"outlined",onClick:this.handleAddScore.bind(this)},"Add")))))))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component)),he=me=Object(w.a)(me),de=a(349),pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={open:e.open},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(de.a,{open:this.state.open,onClose:this.props.onClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",width:"80vw",transform:"translate(-50%, -50%)"}},r.a.createElement(v.a,{item:!0,align:"center",xs:12},r.a.createElement(x.a,{style:{height:"25vh",display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(v.a,{item:!0,container:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,{style:{marginTop:"32px"}},this.props.modalText)),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{variant:"outlined",onClick:function(){e.props.onClose()}},this.props.cancelText)),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{color:"primary",variant:"outlined",onClick:function(){e.props.onAction()}},this.props.actionText)))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),fe=pe=Object(w.a)(pe);h.database();function ve(e){var t=e.wodText.split("\n");return r.a.createElement(v.a,{item:!0,xs:12},t.map((function(e,t){return r.a.createElement(v.a,{item:!0,xs:12,key:t},r.a.createElement(D.a,null,e||r.a.createElement("br",null)))})))}Object(w.a)(ve);var ge=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,boxID:e.boxID,wodID:e.wodID,wodMD:{},scores:[],userScore:{},curRemoveScoreID:"",showRemoveAlert:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=h.firestore();this.wodListener=t.collection("wods").doc(this.state.wodID).onSnapshot((function(t){e.setState({wodMD:t.data()})}),(function(e){console.log(e)})),this.scoreListener=t.collection("scores").where("wodID","==",this.state.wodID).onSnapshot((function(t){if(t.empty)e.setState({scores:[],userScore:{}});else{var a=[],n={},r="";t.forEach((function(t){var o=t.data();a.push(o),r=o.scoreType,o.uid===e.state.uid&&(n=o)}));var o=r&&"time"===r?1:0;a.sort((function(e,t){return o?parseFloat(e.score)<parseFloat(t.score)?-1:1:parseFloat(e.score)>parseFloat(t.score)?1:-1})),e.setState({scores:a,userScore:n})}}),(function(e){}))}},{key:"componentWillUnmount",value:function(){void 0!==this.scoreListener&&this.scoreListener(),void 0!==this.wodListener&&this.wodListener()}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"handleRemoveScore",value:function(e){this.setState({curRemoveScoreID:e,showRemoveAlert:!0})}},{key:"removeScore",value:function(){var e=this,t=this.state.curRemoveScoreID;""===t||t.length<=0?this.props.onAlert({type:"warning",message:"Invalid scoreID!"}):(this.setState({showRemoveAlert:!1}),ce(t).then((function(t){e.props.onAlert({type:"success",message:t})})).catch((function(t){e.props.onAlert({type:"error",message:t})})))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,Object.keys(this.state.wodMD).length>0?r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,align:"center",xs:12},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,null,this.state.wodMD.title),r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},"For ",this.state.wodMD.scoreType))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:6,style:{margin:"8px 0px 8px 0px",padding:"8px"}},r.a.createElement(v.a,{item:!0,xs:12,align:"center"},r.a.createElement(D.a,{variant:"subtitle2",color:"primary"},"Workout")),r.a.createElement(v.a,{item:!0,container:!0,xs:12},r.a.createElement(ve,{wodText:this.state.wodMD.wodText})))),Object.keys(this.state.userMD).length>0?r.a.createElement(he,{userMD:this.state.userMD,wodMD:this.state.wodMD}):r.a.createElement(r.a.Fragment,null),r.a.createElement(v.a,{item:!0,xs:12,margin:{marginTop:"16px"}},this.state.scores&&this.state.scores.length>0?r.a.createElement(W,{scores:this.state.scores}):r.a.createElement(r.a.Fragment,null)),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:6},r.a.createElement(Y,{scores:this.state.scores,uid:this.state.userMD.uid,onRemove:this.handleRemoveScore.bind(this)}))),r.a.createElement(fe,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.removeScore.bind(this),modalText:"Remove score?",actionText:"Remove",cancelText:"Cancel"})):r.a.createElement(r.a.Fragment,null,"Wod not found!"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),be=ge=Object(w.a)(ge),ye=a(328),Ee=a(26),xe=a.n(Ee),we=h.firestore();function De(e){return we.collection("gymClasses").doc(e).collection("classes")}function Ce(e,t){var a=["wods","scores","gymClasses/".concat(e,"/classes"),"classMembers","classAdmins"].map((function(e){return new Promise((function(a,n){!function e(t,a,n,r,o){var s=we.batch();we.collection(t).where(a,"==",n).get().then((function(i){var l=0;i.size,i.forEach((function(e){s.delete(e.ref),l++})),s.commit().then((function(){l>=500&&e(t,a,n,r,o)})).catch((function(e){return o(0)}))})),r(1)}(e,"gymClassID",t,a,n)}))}));return Promise.all(a)}h.firestore();var ke=Object(w.a)((function(e){var t=e.info.title,a=e.info.boxID,n=e.info.gymClassID;return r.a.createElement(z.a,{id:"class/".concat(n),name:"GymClassRow",onClick:function(t){e.onRowClick(t,"/class/".concat(a,"/").concat(n))}},r.a.createElement(K.a,{align:"left"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},t)),r.a.createElement(K.a,{align:"right"},e.isOwner?r.a.createElement(_.a,{onClick:function(){e.onRemove(e.info)}},r.a.createElement(Q.a,{color:"error"})):r.a.createElement(r.a.Fragment,null)))}));var Oe=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(K.a,{colSpan:3,align:"center"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},"No Classes!")))})),Me=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,isOwner:e.isOwner,boxID:e.boxID,redirect:!1,redirectTo:"",filteredGymClasses:[],gymClasses:[],removeClassID:"",removeClassTitle:"",openModal:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log(this.state),this.getGymClasses(this.state.boxID)}},{key:"getGymClasses",value:function(e){var t=this;e&&!this.gymClassListener&&(this.gymClassListener=De(this.state.boxID).onSnapshot((function(e){if(console.log(e),e.empty)t.setState({gymClasses:[],filteredGymClasses:[]});else{var a=[];e.forEach((function(e){a.push(e.data())})),t.setState({gymClasses:a,filteredGymClasses:a})}}),(function(e){console.log(e)})))}},{key:"componentDidUpdate",value:function(){this.getGymClasses(this.state.boxID)}},{key:"componentWillUnmount",value:function(){this.gymClassListener&&this.gymClassListener()}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.gymClasses.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredGymClasses:a})}},{key:"onRowClick",value:function(e,t){var a=e.target.tagName;["span","svg","path"].indexOf(a)<0&&this.setState({redirect:!0,redirectTo:t})}},{key:"handleRemoveGymClass",value:function(){var e=this;this.closeModal(),this.state.boxID||this.state.removeClassID?Ce(this.state.boxID,this.state.removeClassID).then((function(t){console.log(t),e.props.onAlert({type:"success",message:"Deleted class!"})})).catch((function(e){console.log(e)})):this.props.onAlert({type:"error",message:"Class info missing!"})}},{key:"onRemove",value:function(e){this.setState({openModal:!0,removeClassID:e.gymClassID,removeClassTitle:e.title})}},{key:"closeModal",value:function(){this.setState({openModal:!1})}},{key:"render",value:function(){var e=this;return console.log(this.state.gymClasses),r.a.createElement(v.a,{item:!0,xs:12},this.state.redirect?r.a.createElement(f.a,{to:this.state.redirectTo}):r.a.createElement(r.a.Fragment,null),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"0px 0px 8px 0px"}},r.a.createElement(x.a,{elevation:2,component:"form"},r.a.createElement(se.a,{fullWidth:!0,variant:"outlined",onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search Classes",InputProps:{startAdornment:r.a.createElement(ye.a,{position:"start"},r.a.createElement(xe.a,{color:"primary"}))}}))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(N.a,null,r.a.createElement(V.a,{stickyHeader:!0},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,null,"Classes"),r.a.createElement(K.a,null))),r.a.createElement(H.a,null,this.state.filteredGymClasses.length>0?this.state.filteredGymClasses.map((function(t,a){return r.a.createElement(ke,{key:a,info:t,onRemove:e.onRemove.bind(e),isOwner:e.props.isOwner,onRowClick:e.onRowClick.bind(e)})})):r.a.createElement(Oe,null)))))),r.a.createElement(fe,{open:this.state.openModal,actionText:"Remove",cancelText:"Cancel",modalText:"Remove Class (".concat(this.state.removeClassTitle,")?"),onAction:this.handleRemoveGymClass.bind(this),onClose:this.closeModal.bind(this)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Ie=Me=Object(w.a)(Me);function Se(e){var t=["wods","scores"].map((function(t){return new Promise((function(a,n){!function e(t,a,n,r,o){var s=h.firestore(),i=s.batch();s.collection(t).where(a,"==",n).get().then((function(s){var l=0;0==s.size&&r(1),s.forEach((function(e){console.log("delete"),console.log(e.data()),i.delete(e.ref),l++})),i.commit().then((function(){l>=500&&e(t,a,n,r,o)})).catch((function(e){return o(0)}))})),r(1)}(t,"wodID",e,a,n)}))}));return Promise.all(t)}var je=a(351),Ae=a(358),Te=a(129),Be=a.n(Te),Le=Object(ie.a)({root:{padding:"4px 0px 4px 4px"}})(K.a);var Pe=Object(w.a)((function(e){var t=e.info.title,a=(e.info.scoreType,e.info.wodText,e.info.wodID),n=e.info.boxID,o=e.info.date;return r.a.createElement(z.a,{onClick:function(t){var r=t.target.tagName;console.log("Clcick"),["path","svg"].indexOf(r)>-1||e.onViewScores("/wod/".concat(n,"/").concat(a))}},r.a.createElement(Le,null,r.a.createElement(D.a,{variant:"subtitle2",component:"h2",gutterBottom:!0},new Date(o).toLocaleDateString("en-US"))),r.a.createElement(Le,{colSpan:2},r.a.createElement(D.a,{variant:"subtitle2",component:"h2",gutterBottom:!0},t)),r.a.createElement(Le,{align:"right"},e.showOwnerBtns?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{size:"small",color:"secondary",onClick:function(){return e.handleEdit(e.info)}},r.a.createElement(Be.a,null)),r.a.createElement(_.a,{size:"small",onClick:function(){return e.handleRemove(e.info)}},r.a.createElement(Q.a,{color:"error"}))):r.a.createElement(r.a.Fragment,null)))}));var Ue=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(Le,{colSpan:3,align:"center"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},"No Workouts!")))})),Fe=Object(ie.a)({root:{overflow:"hidden"},actions:{margin:"0px"}})(je.a),Re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={headers:e.headers,rows:e.rows,filteredRows:e.filteredRows,orderTableBy:"date",orderTable:"asc",pageNum:0,rowsPerPage:5,pageStart:0,pageEnd:5,redirectUrl:"",redirect:!1},n}return Object(l.a)(a,[{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value;console.log(t);var a=this.state.rows.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredRows:a})}},{key:"descendingComparator",value:function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}},{key:"getComparator",value:function(e,t){var a=this;return"desc"===e?function(e,n){return a.descendingComparator(e,n,t)}:function(e,n){return-a.descendingComparator(e,n,t)}}},{key:"stableSort",value:function(e){var t=this.state.filteredRows.map((function(e,t){return[e,t]}));return t.sort((function(t,a){var n=e(t[0],a[0]);return 0!==n?n:t[1]-a[1]})),t.map((function(e){return e[0]}))}},{key:"createSortHandler",value:function(e){var t=this.state.orderTableBy===e&&"asc"===this.state.orderTable;this.setState({orderTableBy:e,orderTable:t?"desc":"asc"})}},{key:"handleChangePage",value:function(e,t){var a=t*this.state.rowsPerPage,n=t*this.state.rowsPerPage+this.state.rowsPerPage;this.setState({pageNum:t,pageStart:a,pageEnd:n})}},{key:"handleChangeRowsPerPage",value:function(e){var t=parseInt(e.target.value);console.log(t),this.setState({pageNum:0,rowsPerPage:t,pageStart:0,pageEnd:t})}},{key:"onViewScores",value:function(e){this.setState({redirectUrl:e,redirect:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12,align:"center"},this.state.redirect?r.a.createElement(f.a,{to:this.state.redirectUrl}):r.a.createElement(r.a.Fragment,null),r.a.createElement(x.a,{style:{margin:"16px 0px 0px 0px"},component:"form"},r.a.createElement(se.a,{fullWidth:!0,variant:"outlined",onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search",InputProps:{startAdornment:r.a.createElement(ye.a,{position:"start"},r.a.createElement(xe.a,{color:"primary"}))}})),r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(N.a,{style:{margin:"8px 0px 0px 0px"}},r.a.createElement(V.a,null,r.a.createElement(G.a,null,r.a.createElement(z.a,null,this.state.headers.map((function(t,a){return r.a.createElement(Le,{key:a},t.sortable?r.a.createElement(Ae.a,{active:t.id===e.state.orderTableBy,direction:t.id===e.state.orderTableBy?e.state.orderTable:"asc",onClick:function(){e.createSortHandler(t.id)}},t.label):r.a.createElement(r.a.Fragment,null,t.label))})))),r.a.createElement(H.a,null,this.state.filteredRows.length>0?this.stableSort(this.getComparator(this.state.orderTable,this.state.orderTableBy)).slice(this.state.pageStart,this.state.pageEnd).map((function(t,a){return r.a.createElement(Pe,{key:a,handleView:e.props.handleView,handleRemove:e.props.handleRemove,handleEdit:e.props.handleEdit,info:t,showOwnerBtns:e.props.showOwnerBtns,onViewScores:e.onViewScores.bind(e)})})):r.a.createElement(Ue,null))),r.a.createElement(Fe,{rowsPerPageOptions:[5,10,25],component:v.a,count:this.state.filteredRows.length,rowsPerPage:this.state.rowsPerPage,page:this.state.pageNum,onChangePage:this.handleChangePage.bind(this),onChangeRowsPerPage:this.handleChangeRowsPerPage.bind(this)}))),r.a.createElement(v.a,{item:!0,xs:12}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.rows.length>0?t:e}}]),a}(n.Component),We=Re=Object(w.a)(Re),Ne=h.firestore(),Ve=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),console.log(e),n.state={userMD:e.userMD,boxID:e.boxID,boxMD:{}},n}return Object(l.a)(a,[{key:"getBoxListener",value:function(){var e=this;this.boxListener||(this.boxListener=Ne.collection("boxes").doc(this.state.boxID).onSnapshot((function(t){console.log(t),console.log(e.state.boxID),console.log(t.data()),t.exists?e.setState({boxMD:t.data()}):e.setState({boxMD:{}})}),(function(e){console.log(e)})))}},{key:"checkListeners",value:function(){void 0===this.boxListener&&this.getBoxListener()}},{key:"componentDidMount",value:function(){this.checkListeners()}},{key:"componentDidUpdate",value:function(){this.checkListeners()}},{key:"componentWillUnmount",value:function(){this.boxListener&&this.boxListener()}},{key:"render",value:function(){var e=this.state.userMD.uid===this.state.boxMD.uid;return r.a.createElement(v.a,{item:!0,xs:12},Object.keys(this.state.boxMD).length>0?r.a.createElement(Ie,{user:this.state.user,userMD:this.state.userMD,boxID:this.state.boxID,isOwner:e,onAlert:this.props.onAlert}):r.a.createElement(r.a.Fragment,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Ge=Ve=Object(w.a)(Ve),ze=a(280),Ke=a(83),He=a.n(Ke);function Je(e){var t=h.firestore();return new Promise((function(a,n){t.collection("following").doc(e).delete().then((function(){a("Finished delete.")})).catch((function(e){n(e)}))}))}function Ze(e,t,a,n){var r=h.firestore();return new Promise((function(o,s){r.collection("following").where("uid","==",e).get().then((function(i){var l=!1;if(i.empty||i.forEach((function(e){e.data().boxID===a&&(l=!0)})),!l){var c=r.collection("following").doc(),u={followID:c.id,uid:e,username:t,boxID:a,title:n,date:Date.now()};c.set(u).then((function(){o("Followed.")})).catch((function(e){s(e)}))}}))}))}var _e=h.firestore();var qe=Object(w.a)((function(e){var t=e.info.title,a=e.info.boxID;return r.a.createElement(z.a,{id:"box/".concat(a),onClick:function(t){return e.onRowClick(t,"box/".concat(a))}},r.a.createElement(K.a,{align:"left"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},t)),r.a.createElement(K.a,{align:"right"},e.isUserFollowing?r.a.createElement(ze.a,{variant:"outlined",onClick:function(){e.handleUnfollow(a)}},r.a.createElement(He.a,{color:"primary"})):r.a.createElement(ze.a,{onClick:function(){e.handleFollow(e.info)}},r.a.createElement(He.a,{style:{fill:e.theme.palette.text.primary}})),e.isOwner?r.a.createElement(_.a,{onClick:function(){e.handleRemoveBox(a,t)}},r.a.createElement(Q.a,{color:"error"})):r.a.createElement(r.a.Fragment,null)))}));var Qe=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(K.a,{colSpan:3,align:"center"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},"No Gyms!")))})),Xe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,isOwner:e.isOwner,allBoxes:e.allBoxes,filteredBoxes:e.filteredBoxes,userFollowing:{},redirect:!1,redirectTo:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.listenForFollowing()}},{key:"componentWillUnmount",value:function(){this.followListener&&this.followListener()}},{key:"componentDidUpdate",value:function(){this.listenForFollowing()}},{key:"listenForFollowing",value:function(){var e=this;this.state.user&&!this.followListener&&(this.followListener=_e.collection("following").where("uid","==",this.state.user.uid).onSnapshot((function(t){var a={};t.empty||t.forEach((function(e){var t=e.data();a[t.boxID]=t.followID})),e.setState({userFollowing:a})}),(function(e){return console.log(e)})))}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.allBoxes.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));console.log("filteredBoxes"),console.log(a),this.setState({filteredBoxes:a})}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"isUserFollowing",value:function(e){return!!this.state.userFollowing[e]}},{key:"handleFollow",value:function(e){Ze(this.state.user.uid,this.state.userMD.username,e.boxID,e.title).then((function(e){console.log("Succefully followed.")})).catch((function(e){console.log(e)}))}},{key:"handleUnfollow",value:function(e){Je(this.state.userFollowing[e]).then((function(e){e&&console.log("Succefully unfollowed.")})).catch((function(e){console.log(e)}))}},{key:"onRowClick",value:function(e,t){var a=e.target.tagName;["span","svg","path","BUTTON","SPAN"].indexOf(a)<0&&this.setState({redirect:!0,redirectTo:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12,style:{marginTop:"3vh"}},this.state.redirect?r.a.createElement(f.a,{to:this.state.redirectTo}):r.a.createElement(r.a.Fragment,null),r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"0px 0px 8px 0px"}},r.a.createElement(x.a,{elevation:2,component:"form"},r.a.createElement(se.a,{fullWidth:!0,variant:"outlined",onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search Boxes",InputProps:{startAdornment:r.a.createElement(ye.a,{position:"start"},r.a.createElement(xe.a,{color:"primary"}))}}))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(N.a,null,r.a.createElement(V.a,{stickyHeader:!0},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,null,"Boxes"),r.a.createElement(K.a,null))),r.a.createElement(H.a,null,this.state.filteredBoxes.length>0?this.state.filteredBoxes.map((function(t,a){return r.a.createElement(qe,{key:a,theme:e.props.theme,info:t,color:e.props.theme.palette.primary.mainGrad,handleBoxView:e.props.handleBoxView,handleRemoveBox:e.props.handleRemoveBox,isOwner:e.props.isOwner,isUserFollowing:e.isUserFollowing(t.boxID),handleFollow:e.handleFollow.bind(e),handleUnfollow:e.handleUnfollow.bind(e),onRowClick:e.onRowClick.bind(e)})})):r.a.createElement(Qe,null))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.user?t:e}}]),a}(n.Component),Ye=Xe=Object(w.a)(Xe),$e=h.firestore(),et=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,allBoxes:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.allBoxesListener=$e.collection("boxes").onSnapshot((function(t){if(!t.empty){var a=[];t.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.title.toLowerCase()>t.title.toLowerCase()?-1:1})),e.setState({allBoxes:a})}}))}},{key:"componentWillUnmount",value:function(){this.allBoxesListener&&this.allBoxesListener()}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},this.state.allBoxes.length>0?r.a.createElement(Ye,{user:this.state.user,userMD:this.state.userMD,allBoxes:this.state.allBoxes,filteredBoxes:this.state.allBoxes,isOwner:!1,isReadOnly:!1,handleRemoveBox:this.props.handleRemoveBox}):r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:2},"No boxes!")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),tt=et=Object(w.a)(et),at=a(330),nt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,currentPassword:"",newPassword:"",confirmPassword:""},n}return Object(l.a)(a,[{key:"handleSubmit",value:function(e){var t=this,a=this.state.currentPassword,n=this.state.newPassword,r=this.state.confirmPassword;if(console.log(this.state),console.log(a,n,r),n===r){var o=h.auth.EmailAuthProvider.credential(this.state.user.email,a);this.state.user.reauthenticateWithCredential(o).then((function(){t.state.user.updatePassword(n).then((function(e){console.log("Changed password.")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),console.log("Incorrect password.")}))}else console.log("New passwords do not match.")}},{key:"onChange",value:function(e){console.log(e),e.persist();var t=e.target,a=t.name,n=t.value;this.setState(Object(ee.a)({},a,n))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.user?r.a.createElement(x.a,{elevation:6},r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12,align:"center"},r.a.createElement(D.a,{variant:"h3"},"Change Password")),r.a.createElement(v.a,{item:!0,xs:12,align:"center"},r.a.createElement(se.a,{id:"currentPassword",type:"password",name:"currentPassword",onChange:this.onChange.bind(this),style:{margin:8},placeholder:"Current Password",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(se.a,{id:"password",type:"password",name:"newPassword",color:"primary",onChange:this.onChange.bind(this),style:{margin:8},placeholder:"New Password",margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(v.a,{item:!0,xs:12,align:"center"},r.a.createElement(se.a,{id:"passwordConfirm",name:"confirmPassword",onChange:this.onChange.bind(this),type:"password",style:{margin:8},placeholder:"Confirm Password",margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(v.a,{item:!0,xs:12,align:"center",style:{margin:"16px 0px 16px 0px"}},r.a.createElement(_.a,{variant:"outlined",color:"primary",onClick:this.handleSubmit.bind(this)},"Change Password")))):r.a.createElement("h1",null,"Loading"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.user?t:e}}]),a}(n.Component),rt=nt=Object(w.a)(nt),ot=(h.firestore(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userConfirmText:"",redirectUrl:"",redirect:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"confirmText",value:function(){return this.state.user.uid.slice(-5)}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({userConfirmText:t})}},{key:"removeUser",value:function(){this.state.userConfirmText===this.confirmText()?(console.log("Deleting user, actual code commented out."),this.setState({redirect:!0,redirectUrl:"/boxSearch"})):console.log("User entered incorrect confirmation.")}},{key:"render",value:function(){return r.a.createElement(x.a,{elevation:6},this.state.redirect?r.a.createElement(f.a,{to:this.state.redirectUrl}):r.a.createElement(r.a.Fragment,null),r.a.createElement(v.a,{item:!0,container:!0,align:"center",xs:12,style:{marginTop:"16px"}},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,null,"Type to Confirm Delete: ",this.confirmText())),r.a.createElement(v.a,{item:!0,xs:12,style:{marginTop:"16px"}},r.a.createElement(se.a,{type:"text",placeholder:"Type username to confirm delete",onChange:this.onChange.bind(this)})),r.a.createElement(v.a,{item:!0,xs:12,style:{marginTop:"32px"}},r.a.createElement(_.a,{size:"small",fullWidth:!0,variant:"outlined",onClick:this.removeUser.bind(this),style:{color:this.props.theme.palette.error.main}},"Confirm Remove"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.user?t:e}}]),a}(n.Component)),st=ot=Object(w.a)(ot),it=h.firestore();var lt=Object(ie.a)({root:{borderBottom:"none"}})(K.a),ct=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD},n}return Object(l.a)(a,[{key:"updateUsername",value:function(e){var t=document.getElementById("updateUsernameInput");if("none"===t.style.display)t.style.display="block";else{if(t.value.length>12)return void this.props.onAlert({type:"warning",message:"Username cannot be longer than 12 characters"});if(null!==/\W/g.exec(t.value))return void this.props.onAlert({type:"warning",message:"Username can only contain letters & numbers"});if(t.value.length<=0)return;(function(e,t){var a={username:t},n=[it.collection("users").doc(e).update(a)];return it.collection("scores").where("uid","==",e).get().then((function(e){e.docs.map((function(e){return console.log(e.data()),it.collection("scores").doc(e.data().scoreID).update(a)}))})),it.collection("following").where("uid","==",e).get().then((function(e){e.docs.map((function(e){return console.log(e.data()),it.collection("following").doc(e.data().followID).update(a)}))})),new Promise((function(e,t){Promise.all(n).then((function(){e("Updated!")})).catch((function(e){t(e)}))}))})(this.state.userMD.uid,t.value).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},{key:"onKeyUp",value:function(e){13==(e.keyCode||e.which)&&this.updateUsername()}},{key:"render",value:function(){return r.a.createElement(v.a,{container:!0,id:"usernamePanel"},this.state.userMD?r.a.createElement(N.a,null,r.a.createElement(V.a,null,r.a.createElement(H.a,null,r.a.createElement(z.a,null,r.a.createElement(lt,{align:"left"},"Username"),r.a.createElement(lt,{colSpan:2,align:"left"},r.a.createElement(D.a,{gutterBottom:!0,variant:"h5"},this.state.userMD.username))),r.a.createElement(z.a,null,r.a.createElement(lt,null,r.a.createElement(se.a,{id:"updateUsernameInput",type:"text",pattern:"[A-Za-z]{12}",inputProps:{title:"Letters only, max length 12",placeholder:"New username"},onKeyUp:this.onKeyUp.bind(this),margin:"normal",color:"primary",InputLabelProps:{shrink:!0}})),r.a.createElement(lt,{align:"left"},r.a.createElement(D.a,{gutterBottom:!0,variant:"h5"},r.a.createElement(_.a,{size:"small",variant:"outlined",color:"primary",onClick:this.updateUsername.bind(this)},"Update"))))))):r.a.createElement("h1",null," Loading "))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),ut=ct=Object(w.a)(ct);h.firestore();var mt=Object(w.a)((function(e){return r.a.createElement(z.a,{onClick:function(){e.openSetting(e.info.id)}},r.a.createElement(K.a,{align:"left",colSpan:2},e.info.title))})),ht=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,currentPage:"home"},n.settings=[{id:"change username",title:"Change Username"},{id:"change password",title:"Change Password"},{id:"delete account",title:"Delete Account"}],n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"openSetting",value:function(e){console.log("clicked ",e),this.setState({currentPage:e})}},{key:"handleBack",value:function(){this.setState({currentPage:"home"})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12},"home"===this.state.currentPage?r.a.createElement(V.a,null,r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,{align:"center",colSpan:2},r.a.createElement(D.a,{gutterBottom:!0,variant:"h3"},"Settings")))),r.a.createElement(H.a,null,this.settings.map((function(t,a){return r.a.createElement(mt,{key:a,info:t,openSetting:e.openSetting.bind(e)})})))):"change password"===this.state.currentPage?r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(ze.a,{style:{color:this.props.theme.palette.text.primary},onClick:this.handleBack.bind(this)},r.a.createElement(at.a,null))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(rt,{user:this.state.user}))):"delete account"==this.state.currentPage?r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(ze.a,{style:{color:this.props.theme.palette.text.primary},onClick:this.handleBack.bind(this)},r.a.createElement(at.a,null))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(st,{user:this.state.user}))):"change username"===this.state.currentPage?r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(ze.a,{style:{color:this.props.theme.palette.text.primary},onClick:this.handleBack.bind(this)},r.a.createElement(at.a,null))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(ut,{userMD:this.state.userMD,onAlert:this.props.onAlert}))):r.a.createElement("span",null,"Default"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.userMD.currentPage!==t.userMD.currentPage?t:e}}]),a}(n.Component),dt=ht=Object(w.a)(ht),pt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={redirect:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleSubmit",value:function(e){var t=document.getElementById("email"),a=document.getElementById("password"),n=document.getElementById("passwordConfirm");console.log(t.value,a.value),a.value===n.value?h.auth().createUserWithEmailAndPassword(t.value,a.value).then((function(e){console.log(e);var t=h.firestore(),a={username:"",admin:!1,uid:e.user.uid,accountType:"athlete"};t.collection("users").doc(e.user.uid).set(a)})).catch((function(e){console.log(e)})):alert("Passwords do not match")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.redirect?r.a.createElement(f.a,{to:"/"}):r.a.createElement(v.a,{container:!0,xs:12,id:"login",align:"center",justify:"center"},r.a.createElement(x.a,{elevation:2},r.a.createElement("br",null),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement("h1",null,"Register")),r.a.createElement("br",null),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(se.a,{id:"email",style:{margin:8},placeholder:"Email",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(se.a,{id:"password",type:"password",style:{margin:8},placeholder:"Password",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(se.a,{id:"passwordConfirm",type:"password",style:{margin:8},placeholder:"Confirm Password",margin:"normal",InputLabelProps:{shrink:!0}})," ",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(_.a,{variant:"outlined",color:"primary",onClick:this.handleSubmit.bind(this)},"Submit")))))}}]),a}(n.Component),ft=pt=Object(w.a)(pt),vt=a(345),gt=(h.database(),Object(ie.a)((function(e){return{root:{marginTop:"2.5vh",marginBottom:"2.5vh"}}}))(v.a)),bt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n,r;return Object(i.a)(this,a),(r=t.call(this,e)).state=(n={open:e.open,wodInfo:e.wodInfo,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes},Object(ee.a)(n,"open",e.open),Object(ee.a)(n,"onClose",e.onClose),n),r}return Object(l.a)(a,[{key:"editWOD",value:function(){var e=this,t=document.getElementById("editOwnerBoxAddWodBoxID").value,a=document.getElementById("editOwnerBoxAddWodTitle").value,n=document.getElementById("editOwnerBoxAddWodScoreType").value,r=document.getElementById("editOwnerBoxAddWodWodText").value,o=this.state.wodInfo.wodID;if(!t||!a||!n||!r||!o)return console.log("Error with input in editWod."),void console.log(t,a,n,r);this.props.onClose(),function(e,t,a,n,r){var o=h.firestore();return new Promise((function(s,i){o.collection("wods").doc(t).update({boxID:e,title:a,wodText:n,scoreType:r}).then((function(){s("Finished updating.")})).catch((function(e){i(e)}))}))}(t,o,a,r,n).then((function(t){e.props.onAlert({type:"success",message:t})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}},{key:"handleValChange",value:function(e){var t=this.state.wodInfo,a=e.target,n=a.name,r=a.value;t[n]=r,this.setState({wodInfo:t})}},{key:"render",value:function(){return r.a.createElement(de.a,{open:this.state.open,onClose:this.props.onClose,"aria-labelledby":"edit-wod-modal","aria-describedby":"edit-wod"},r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",width:"80vw",transform:"translate(-50%, -50%)"}},r.a.createElement(v.a,{item:!0,align:"center",xs:12},r.a.createElement(x.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(D.a,{variant:"h6"},"Edit Wod (",this.state.wodInfo.wodID,")"),r.a.createElement(gt,{item:!0,container:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(vt.a,{native:!0,value:this.state.wodInfo.wodID,name:"wodID",onChange:this.handleValChange.bind(this),inputProps:{name:"Box",id:"editOwnerBoxAddWodBoxID"}},this.state.hasBoxes?this.state.userBoxes.map((function(e,t){var a=e.boxID;return r.a.createElement("option",{key:t,value:a},e.title)})):r.a.createElement("option",{"aria-label":"None",value:""},"No boxes!"))),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(vt.a,{native:!0,inputProps:{name:"Score Type",id:"editOwnerBoxAddWodScoreType"},name:"scoreType",value:this.state.wodInfo.scoreType,onChange:this.handleValChange.bind(this)},["time","reps"].map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(gt,{item:!0,xs:12},r.a.createElement(se.a,{id:"editOwnerBoxAddWodTitle",type:"text",name:"title",style:{margin:8},value:this.state.wodInfo.title,onChange:this.handleValChange.bind(this),pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Title"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}})),r.a.createElement(gt,{item:!0,xs:12},r.a.createElement(se.a,{id:"editOwnerBoxAddWodWodText",type:"text",name:"wodText",style:{margin:8},value:this.state.wodInfo.wodText,onChange:this.handleValChange.bind(this),pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Workout here"},margin:"normal",color:"primary",multiline:!0,rows:5,InputLabelProps:{shrink:!0}})),r.a.createElement(gt,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{variant:"outlined",color:"primary",onClick:this.props.onClose},"Cancel")),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{variant:"outlined",color:"primary",onClick:this.editWOD.bind(this)},"Update")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("Edit woood"),console.log(e),console.log(t),e}}]),a}(n.Component),yt=bt=Object(w.a)(bt),Et=h.firestore();function xt(e,t){var a=Et.collection("notifications").doc("admins").collection("invites");return new Promise((function(n,r){wt(e,t.gymClassID).then((function(o){o?n("Already an admin."):function(e,t){return new Promise((function(a,n){Et.collection("notifications").doc("admins").collection("invites").where("uid","==",e).where("gymClassID","==",t).get().then((function(n){console.log(e,t),console.log(n.docs),n.empty?a(!1):a(!0)}),(function(e){n(e)}))}))}(e,t.gymClassID).then((function(e){if(e)n("Admin notified already.");else{var o=a.doc();o.set(Object(C.a)(Object(C.a)({},t),{},{adminInviteID:o.id})).then((function(){n("Sent admin invite.")})).catch((function(e){r(e)}))}})).catch((function(e){r(e)}))}))}))}function wt(e,t){return new Promise((function(a,n){Et.collection("classAdmins").where("gymClassID","==",t).get().then((function(t){console.log(t),t.empty||t.forEach((function(t){t.data().uid==e&&a(!0)})),a(!1)}),(function(e){n(e)}))}))}h.firestore();var Dt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={filteredUsers:e.filteredUsers},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement(de.a,{open:this.props.modalOpen,onClose:this.props.onModalClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",width:"90vw",transform:"translate(-50%, -50%)"}},r.a.createElement(x.a,{style:{padding:"8px",display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(v.a,{item:!0,container:!0,align:"center",xs:12},r.a.createElement(v.a,{item:!0,xs:12,style:{marginTop:"16px"}},r.a.createElement(D.a,{variant:"h6"},this.props.title)),r.a.createElement(v.a,{item:!0,xs:12,style:{marginTop:"16px"}},r.a.createElement(se.a,{fullWidth:!0,variant:"outlined",onChange:this.props.onChange.bind(this),placeholder:"Search Users",style:{margin:"0px 0px 8px 0px"},InputProps:{endAdornment:r.a.createElement(ye.a,{position:"end"},r.a.createElement(xe.a,{color:"primary"}))}})),r.a.createElement(v.a,{item:!0,xs:12,style:{marginTop:"16px"}},r.a.createElement(vt.a,{native:!0,style:{width:"100%",margin:"0px 0px 8px 0px",padding:"4px"},color:"primary",onChange:this.props.onSelectChange.bind(this)},this.state.filteredUsers?this.state.filteredUsers.map((function(e,t){return r.a.createElement("option",{key:t,value:JSON.stringify(e)},e.username)})):r.a.createElement("option",{"aria-label":"None",value:""},"No users!"))),r.a.createElement(v.a,{item:!0,xs:6,style:{margin:"16px 0px 16px 0px"}},r.a.createElement(_.a,{fullWidth:!0,style:{borderColor:this.props.theme.palette.text.primary},size:"small",onClick:this.props.onModalClose},"Cancel")),r.a.createElement(v.a,{item:!0,xs:6,style:{marginTop:"16px"}},r.a.createElement(_.a,{fullWidth:!0,color:"primary",size:"small",onClick:this.props.sendInvite.bind(this)},"Invite"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Ct=Dt=Object(w.a)(Dt),kt=h.firestore(),Ot=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,gymClassMD:e.gymClassMD,allUsers:[],filteredUsers:[],selectedUser:{}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=kt.collection("users").onSnapshot((function(t){var a=[];t.empty?e.setState({allUsers:a,filteredUsers:a,selectedUser:{}}):(t.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.username>t.username?1:-1})),e.setState({allUsers:a,filteredUsers:a,selectedUser:a[0]}))}))}},{key:"componentWillUnmount",value:function(){this.listener&&this.listener()}},{key:"onChange",value:function(e){var t=e.target.value;console.log(t);var a=this.state.allUsers.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredUsers:a,selectedUser:a[0]})}},{key:"sendInvite",value:function(){var e=this;if(this.state.selectedUser){console.log("Send invite to ".concat(this.state.selectedUser.uid," from ").concat(this.state.userMD.uid));var t={msg:"Accept invite?",gymClassID:this.state.gymClassMD.gymClassID,senderUID:this.state.userMD.uid,senderUsername:this.state.userMD.username,gymClassTitle:this.state.gymClassMD.title,boxTitle:this.state.gymClassMD.boxTitle,boxID:this.state.gymClassMD.boxID,uid:this.state.selectedUser.uid,date:Date.now()};this.props.onModalClose(),xt(this.state.selectedUser.uid,t).then((function(t){e.props.onAlert({type:"success",message:t})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}}},{key:"onSelectChange",value:function(e){var t=JSON.parse(e.target.value);this.setState({selectedUser:t})}},{key:"render",value:function(){return r.a.createElement(Ct,Object(ee.a)({modalOpen:this.state.open,title:"Invite Admin",onChange:this.onChange.bind(this),onSelectChange:this.onSelectChange.bind(this),onModalClose:this.props.onModalClose,sendInvite:this.sendInvite.bind(this),filteredUsers:this.state.filteredUsers},"modalOpen",this.props.modalOpen))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Mt=Ot=Object(w.a)(Ot),It=h.firestore();function St(e,t){var a=It.collection("notifications").doc("members").collection("invites");return new Promise((function(n,r){jt(e,t.gymClassID).then((function(o){o?n("Already a member."):function(e,t){return new Promise((function(a,n){It.collection("notifications").doc("members").collection("invites").where("uid","==",e).where("gymClassID","==",t).get().then((function(n){console.log(e,t),console.log(n.docs),n.empty?a(!1):a(!0)}),(function(e){n(e)}))}))}(e,t.gymClassID).then((function(e){if(e)n("Member notified already.");else{var o=a.doc();o.set(Object(C.a)(Object(C.a)({},t),{},{memberInviteID:o.id})).then((function(){n("Sent member invite.")})).catch((function(e){r(e)}))}})).catch((function(e){r(e)}))}))}))}function jt(e,t){return new Promise((function(a,n){It.collection("classMembers").where("gymClassID","==",t).get().then((function(t){console.log(t),t.empty||t.forEach((function(t){t.data().uid==e&&a(!0)})),a(!1)}),(function(e){n(e)}))}))}var At=h.firestore(),Tt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,gymClassMD:e.gymClassMD,allUsers:[],filteredUsers:[],selectedUser:{}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;At.collection("users").onSnapshot((function(t){var a=[];t.empty?e.setState({allUsers:a,filteredUsers:a,selectedUser:{}}):(t.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.username>t.username?1:-1})),e.setState({allUsers:a,filteredUsers:a,selectedUser:a[0]}))}))}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.allUsers.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredUsers:a,selectedUser:a[0]})}},{key:"sendInvite",value:function(){var e=this;if(this.state.selectedUser){var t={msg:"Accept invite?",gymClassID:this.state.gymClassMD.gymClassID,senderUID:this.state.userMD.uid,senderUsername:this.state.userMD.username,gymClassTitle:this.state.gymClassMD.title,boxTitle:this.state.gymClassMD.boxTitle,boxID:this.state.gymClassMD.boxID,uid:this.state.selectedUser.uid,date:Date.now()};this.props.onModalClose(),console.log("Send invite to ".concat(this.state.selectedUser.uid," from ").concat(this.state.userMD.uid)),St(this.state.selectedUser.uid,t).then((function(t){e.props.onAlert({type:"success",message:t})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}}},{key:"onSelectChange",value:function(e){var t=JSON.parse(e.target.value);console.log(t),this.setState({selectedUser:t})}},{key:"render",value:function(){return r.a.createElement(Ct,Object(ee.a)({modalOpen:this.state.open,title:"Invite Member",onChange:this.onChange.bind(this),onSelectChange:this.onSelectChange.bind(this),onModalClose:this.props.onModalClose,sendInvite:this.sendInvite.bind(this),filteredUsers:this.state.filteredUsers},"modalOpen",this.props.modalOpen))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Bt=Tt=Object(w.a)(Tt);h.firestore();var Lt=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(K.a,{align:"left"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},e.info.username)),r.a.createElement(K.a,{align:"right"},e.isOwner?r.a.createElement(_.a,{onClick:function(){e.handleRemoveAdmin(e.info.classAdminID,e.info.username)}},r.a.createElement(Q.a,{color:"error"})):r.a.createElement(r.a.Fragment,null)))}));var Pt=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(K.a,{colSpan:3,align:"center"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},"No Admins!")))})),Ut=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={gymClassID:e.gymClassID,isOwner:e.isOwner,filteredAdmins:e.filteredAdmins,admins:e.admins,showRemoveAlert:!1,removeUsername:"",removeClassAdminID:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.admins.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredAdmins:a})}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"handleRemoveAdmin",value:function(e,t){console.log("remove member w/ uid: ",e),this.setState({removeClassAdminID:e,removeUsername:t,showRemoveAlert:!0})}},{key:"onRemoveAdmin",value:function(){var e,t=this;this.setState({showRemoveAlert:!1}),(e=this.state.removeClassAdminID,Et.collection("classAdmins").doc(e).delete()).then((function(e){t.props.onAlert({type:"success",message:"Removed admin!"})})).catch((function(e){t.props.onAlert({type:"error",message:e})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"0px 0px 8px 0px"}},r.a.createElement(x.a,{elevation:2,component:"form"},r.a.createElement(se.a,{fullWidth:!0,variant:"outlined",inputProps:{style:{fontSize:"0.8em"}},onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search Admins",InputProps:{startAdornment:r.a.createElement(ye.a,{position:"start"},r.a.createElement(xe.a,{color:"primary"}))}}),r.a.createElement(N.a,null,r.a.createElement(V.a,{stickyHeader:!0,size:"small"},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,null,"Admin Username"),r.a.createElement(K.a,null))),r.a.createElement(H.a,null,this.state.filteredAdmins.length>0?this.state.filteredAdmins.map((function(t,a){return r.a.createElement(Lt,{key:a,info:t,handleRemoveAdmin:e.handleRemoveAdmin.bind(e),isOwner:e.props.isOwner})})):r.a.createElement(Pt,null))))))),r.a.createElement(fe,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.onRemoveAdmin.bind(this),modalText:"Remove admin, ".concat(this.state.removeUsername,"?"),actionText:"Remove",cancelText:"Cancel"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.admins.length>0?t:e}}]),a}(n.Component),Ft=Ut=Object(w.a)(Ut);h.firestore();var Rt=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(K.a,{align:"left"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},e.info.username)),r.a.createElement(K.a,{align:"right"},e.isOwner?r.a.createElement(_.a,{onClick:function(){e.handleRemoveMember(e.info.classMemberID,e.info.username)}},r.a.createElement(Q.a,{color:"error"})):r.a.createElement(r.a.Fragment,null)))}));var Wt=Object(w.a)((function(e){return r.a.createElement(z.a,null,r.a.createElement(K.a,{colSpan:3,align:"center"},r.a.createElement(D.a,{variant:"subtitle1",color:"primary"},"No Members!")))})),Nt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={gymClassID:e.gymClassID,isOwner:e.isOwner,filteredMembers:e.filteredMembers,members:e.members,showRemoveAlert:!1,removeUsername:"",classMemberID:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.members.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredMembers:a})}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"handleRemoveMember",value:function(e,t){this.setState({classMemberID:e,removeUsername:t,showRemoveAlert:!0})}},{key:"onRemoveMember",value:function(){var e,t=this;this.setState({showRemoveAlert:!1}),(e=this.state.classMemberID,It.collection("classMembers").doc(e).delete()).then((function(e){t.props.onAlert({type:"success",message:"Removed member!"})})).catch((function(e){t.props.onAlert({type:"error",message:e})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"0px 0px 8px 0px"}},r.a.createElement(x.a,{elevation:2,component:"form"},r.a.createElement(se.a,{fullWidth:!0,variant:"outlined",inputProps:{style:{fontSize:"0.8em"}},onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search Members",InputProps:{startAdornment:r.a.createElement(ye.a,{position:"start"},r.a.createElement(xe.a,{color:"primary"}))}}),r.a.createElement(N.a,null,r.a.createElement(V.a,{stickyHeader:!0,size:"small"},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,null,"Member Username"),r.a.createElement(K.a,null))),r.a.createElement(H.a,null,this.state.filteredMembers.length>0?this.state.filteredMembers.map((function(t,a){return r.a.createElement(Rt,{key:a,info:t,handleRemoveMember:e.handleRemoveMember.bind(e),isOwner:e.props.isOwner})})):r.a.createElement(Wt,null))))))),r.a.createElement(fe,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.onRemoveMember.bind(this),modalText:"Remove member, ".concat(this.state.removeUsername,"?"),actionText:"Remove",cancelText:"Cancel"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.members.length>0?t:e}}]),a}(n.Component),Vt=Nt=Object(w.a)(Nt),Gt=h.firestore(),zt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,boxID:e.boxID,gymClassID:e.gymClassID,gymClassMD:{},gymClasses:[],userBoxes:[],hasBoxes:!1,wods:[],currentWodID:"",currentWodMD:{},showRemoveAlert:!1,showEditModal:!1,editWodInfo:{},curRemoveWodBoxID:"",curRemoveWodID:"",curRemoveWodTitle:"",inviteModalOpen:!1,inviteMemberModalOpen:!1,admins:[],adminUids:[],members:[],memberUids:[],showAdminList:!1,showMemberList:!1,isAdmin:!1,isMember:!1},n}return Object(l.a)(a,[{key:"getGymClassListener",value:function(){var e=this;this.gymClassListener||(this.gymClassListener=Gt.collection("gymClasses").doc(this.state.boxID).collection("classes").doc(this.state.gymClassID).onSnapshot((function(t){t.exists&&e.setState({gymClassMD:t.data()})})))}},{key:"getUserBoxListener",value:function(){var e=this;this.state.userMD.uid&&!this.userBoxesListener&&(this.userBoxesListener=Gt.collection("boxes").where("uid","==",this.state.userMD.uid).onSnapshot((function(t){var a=[];t.empty||t.forEach((function(e){a.push(e.data())})),e.setState({userBoxes:a,hasBoxes:!!a.length})})))}},{key:"getAdminListener",value:function(){var e,t=this;this.state.userMD.uid&&!this.adminListener&&(this.adminListener=(e=this.state.gymClassID,Et.collection("classAdmins").where("gymClassID","==",e)).onSnapshot((function(e){var a=[],n=[];if(e.empty)t.setState({admins:a,adminUids:n,isAdmin:!1});else{e.docs.forEach((function(e){a.push(e.data()),n.push(e.data().uid)}));var r=n.indexOf(t.state.userMD.uid)>=0;t.setState({admins:a,adminUids:n,isAdmin:r})}}),(function(e){console.log(e)})))}},{key:"getMemberListener",value:function(){var e,t=this;this.state.userMD.uid&&!this.memberListener&&(this.memberListener=(e=this.state.gymClassID,It.collection("classMembers").where("gymClassID","==",e)).onSnapshot((function(e){var a=[],n=[];if(e.empty)t.setState({members:a,memberUids:n,isMember:!1});else{e.docs.forEach((function(e){a.push(e.data()),n.push(e.data().uid)}));var r=n.indexOf(t.state.userMD.uid)>=0;t.setState({members:a,memberUids:n,isMember:r})}}),(function(e){console.log(e)})))}},{key:"getWodListener",value:function(){var e=this;this.wodListener||(this.wodListener=Gt.collection("wods").where("gymClassID","==",this.state.gymClassID).onSnapshot((function(t){if(t.empty)e.setState({wods:[]});else{var a=[];t.forEach((function(e){a.push(e.data())})),e.setState({wods:a})}}),(function(e){console.log(e)})))}},{key:"checkListeners",value:function(){this.userBoxesListener||this.getUserBoxListener(),this.adminListener||this.getAdminListener(),this.memberListener||this.getMemberListener()}},{key:"componentDidMount",value:function(){this.checkListeners(),this.getGymClassListener(),this.getWodListener()}},{key:"componentDidUpdate",value:function(){this.checkListeners()}},{key:"componentWillUnmount",value:function(){this.adminListener&&this.adminListener(),this.memberListener&&this.memberListener(),this.userBoxesListener&&this.userBoxesListener(),this.wodListener&&this.wodListener(),this.gymClassListener&&this.gymClassListener()}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"handleRemoveWod",value:function(e){this.setState({showRemoveAlert:!0,curRemoveWodBoxID:e.boxID,curRemoveWodID:e.wodID,curRemoveWodTitle:e.title})}},{key:"deleteWod",value:function(){var e=this;this.setState({showRemoveAlert:!1}),Se(this.state.curRemoveWodID).then((function(t){e.props.onAlert({type:"success",message:"Deleted workout!"})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.wods.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));this.setState({filteredWods:a})}},{key:"handleEdit",value:function(e){this.userBoxesListener||this.getUserBoxListener(),this.setState({editWodInfo:e,showEditModal:!0})}},{key:"handleEditModalClose",value:function(){this.setState({showEditModal:!1})}},{key:"isOwner",value:function(){return this.state.gymClassMD.uid===this.state.userMD.uid}},{key:"openAdminInvite",value:function(){this.setState({inviteModalOpen:!0})}},{key:"openMemberInvite",value:function(){this.setState({inviteMemberModalOpen:!0})}},{key:"onInviteModalClose",value:function(){this.setState({inviteModalOpen:!1})}},{key:"onInviteMemberModalClose",value:function(){this.setState({inviteMemberModalOpen:!1})}},{key:"empty",value:function(e){return e&&0===Object.keys(e).length&&e.constructor===Object}},{key:"openViewAdmins",value:function(){this.setState({showAdminList:!0})}},{key:"openViewMembers",value:function(){this.setState({showMemberList:!0})}},{key:"closeViewLists",value:function(){this.setState({showAdminList:!1,showMemberList:!1})}},{key:"isAdmin",value:function(){return(this.state.isAdmin||this.isOwner())&&this.state.userMD}},{key:"isMember",value:function(){return(this.state.isMember||this.isAdmin())&&this.state.userMD}},{key:"render",value:function(){return this.empty(this.state.userMD)||this.empty(this.state.gymClassMD)?r.a.createElement(r.a.Fragment,null,"Loading"):this.state.gymClassMD.isPrivate&&!this.isMember()?r.a.createElement(D.a,null,"Private Class"):this.state.showAdminList&&this.isAdmin()?r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(ze.a,{onClick:this.closeViewLists.bind(this),style:{color:this.props.theme.palette.text.primary}},r.a.createElement(at.a,null))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(Ft,{gymClassID:this.state.gymClassID,filteredAdmins:this.state.admins,admins:this.state.admins,isOwner:this.isOwner(),onAlert:this.props.onAlert}))):this.state.showMemberList&&this.isMember()?r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(ze.a,{onClick:this.closeViewLists.bind(this),style:{color:this.props.theme.palette.text.primary}},r.a.createElement(at.a,null))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(Vt,{gymClassID:this.state.gymClassID,filteredMembers:this.state.members,members:this.state.members,isOwner:this.isOwner(),onAlert:this.props.onAlert}))):r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,align:"center",xs:12},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,{align:"center",variant:"h3"},this.state.gymClassMD.title),r.a.createElement(D.a,{align:"center",variant:"h6"},this.state.gymClassMD.boxTitle))),r.a.createElement(v.a,{item:!0,container:!0,spacing:1,xs:12,style:{marginTop:"16px"}},this.isAdmin()?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{color:"primary",variant:"outlined",style:{width:"100%"},onClick:this.openAdminInvite.bind(this)},"Invite Admin")),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{color:"primary",variant:"outlined",style:{width:"100%"},onClick:this.openViewAdmins.bind(this)},"View Admins")),r.a.createElement(Mt,{userMD:this.state.userMD,gymClassMD:this.state.gymClassMD,onModalClose:this.onInviteModalClose.bind(this),modalOpen:this.state.inviteModalOpen,onAlert:this.props.onAlert})):r.a.createElement(r.a.Fragment,null),this.isMember()?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{color:"secondary",variant:"outlined",style:{width:"100%"},onClick:this.openMemberInvite.bind(this)},"Invite Member")),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(_.a,{color:"secondary",variant:"outlined",style:{width:"100%"},onClick:this.openViewMembers.bind(this)},"View Members")),r.a.createElement(Bt,{userMD:this.state.userMD,gymClassMD:this.state.gymClassMD,onModalClose:this.onInviteMemberModalClose.bind(this),modalOpen:this.state.inviteMemberModalOpen,onAlert:this.props.onAlert})):r.a.createElement(r.a.Fragment,null)),r.a.createElement(We,{rows:this.state.wods,filteredRows:this.state.wods,headers:(this.isOwner(),[{id:"date",sortable:!0,label:"Date"},{id:"title",sortable:!0,label:"Title"},{id:"title2",sortable:!0,label:""},{id:"btns",sortable:!1,label:""}]),handleRemove:this.handleRemoveWod.bind(this),handleEdit:this.handleEdit.bind(this),showOwnerBtns:this.isOwner()}),r.a.createElement(fe,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.deleteWod.bind(this),modalText:"Remove ".concat(this.state.curRemoveWodTitle," (").concat(this.state.curRemoveWodID,")?"),actionText:"Delete",cancelText:"Cancel"}),r.a.createElement(yt,{open:this.state.showEditModal,onClose:this.handleEditModalClose.bind(this),userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes,wodInfo:this.state.editWodInfo,onAlert:this.props.onAlert}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log(e),console.log(t),t.userMD?t:e}}]),a}(n.Component),Kt=zt=Object(w.a)(zt),Ht=a(323),Jt=a(347),Zt=a(157),_t=a(331),qt=a(346),Qt=a(332),Xt=a(154),Yt=a.n(Xt),$t=h.firestore();function ea(e){var t=["notifications/admins/invites","notifications/members/invites","classAdmins","classMembers","gymClasses/".concat(e,"/classes"),"wods","scores","boxes"].map((function(t){return new Promise((function(a,n){!function e(t,a,n,r,o){var s=$t.batch();$t.collection(t).where(a,"==",n).get().then((function(i){var l=0;i.forEach((function(e){s.delete(e.ref),l++})),s.commit().then((function(){l>=500&&e(t,a,n,r,o)})).catch((function(e){return o(0)}))})),r(1)}(t,"boxID",e,a,n)}))}));return t.push(new Promise((function(t,a){!function e(t,a,n,r,o){var s=$t.batch();$t.collection(t).where(a,"==",n).get().then((function(i){var l=0;i.forEach((function(e){s.update(e.ref,{boxID:""}),l++})),s.commit().then((function(){l>=500&&e(t,a,n,r,o)})).catch((function(e){return o(0)}))})),r(1)}("following","boxID",e,t,a)}))),Promise.all(t)}var ta=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes,currentBoxID:"",showRemoveAlert:!1,curRemoveBoxID:"",curRemoveBoxTitle:""},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){console.log("Component will unmount")}},{key:"handleRemoveBox",value:function(e,t){this.setState({showRemoveAlert:!0,curRemoveBoxID:e,curRemoveBoxTitle:t})}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"deleteBox",value:function(){var e=this;this.handleModalClose(),ea(this.state.curRemoveBoxID).then((function(t){e.props.onAlert({type:"success",message:"Removed gym!"})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},this.state.userBoxes.length>0?r.a.createElement(Ye,{user:this.state.user,userMD:this.state.userMD,allBoxes:this.state.userBoxes,filteredBoxes:this.state.userBoxes,handleRemoveBox:this.handleRemoveBox.bind(this),isOwner:!0,onAlert:this.props.onAlert}):r.a.createElement(v.a,{item:!0,zeroMinWidth:!0,xs:12},r.a.createElement(x.a,{elevation:4,style:{padding:"1vw"}},r.a.createElement(D.a,{noWrap:!0,align:"left"},"No gyms Found!")))),r.a.createElement(fe,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.deleteBox.bind(this),modalText:"Remove ".concat(this.state.curRemoveBoxTitle," (").concat(this.state.curRemoveBoxID,")"),actionText:"Remove",cancelText:"Cancel"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log(e),e}}]),a}(n.Component),aa=ta=Object(w.a)(ta),na=a(350),ra=(h.firestore(),Object(ie.a)({root:{borderBottom:"none"}})(K.a)),oa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes,title:"",box:{},isPrivate:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onKeyUp",value:function(e){13==(e.keyCode||e.which)&&this.createGymClass()}},{key:"createGymClass",value:function(){var e=this,t=this.state.title,a=this.state.box,n=this.state.isPrivate;console.log("Creating class"),console.log(t,a,n),t&&a&&null!==n&&function(e,t,a,n,r){return new Promise((function(o,s){we.collection("gymClasses").doc(a).collection("classes").where("title","==",e).get().then((function(i){if(console.log(i),i.empty){var l,c=we.collection("gymClasses").doc(a).collection("classes").doc();c.set((l={gymClassID:c.id,boxID:a,boxTitle:n,title:e,uid:t},Object(ee.a)(l,"uid",t),Object(ee.a)(l,"isPrivate",r),Object(ee.a)(l,"date",Date.now()),l)).then((function(){o("Added gymClass")})).catch((function(e){s(e)}))}else o("Name Taken")})).catch((function(e){s(e)}))}))}(t,this.props.user.uid,a.boxID,a.title,n).then((function(t){e.props.onAlert({type:"success",message:"Added class!"})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}},{key:"handleCheckboxChange",value:function(e){var t=e.target.checked;this.setState({isPrivate:t})}},{key:"onTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"onSelectChange",value:function(e){this.setState({box:JSON.parse(e.target.value)})}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(V.a,null,r.a.createElement(H.a,null,r.a.createElement(z.a,null,r.a.createElement(ra,null,"Gym"),r.a.createElement(ra,null,r.a.createElement(vt.a,{native:!0,style:{width:"100%"},onChange:this.onSelectChange.bind(this),inputProps:{name:"Box",id:"addGymClassBox"}},this.state.hasBoxes?this.state.userBoxes.map((function(e,t){return r.a.createElement("option",{key:t,value:JSON.stringify(e)},e.title)})):r.a.createElement("option",{"aria-label":"None",value:""},"No boxes!")))),r.a.createElement(z.a,null,r.a.createElement(ra,null,"Title"),r.a.createElement(ra,null,r.a.createElement(se.a,{id:"addGymClassTitle",type:"text",pattern:"[\\sA-Za-z0-9]{35}",onChange:this.onTitleChange.bind(this),inputProps:{title:"Letters only, max length 35",placeholder:"Name of class"},onKeyUp:this.onKeyUp.bind(this),margin:"normal",color:"primary",style:{width:"100%"},InputLabelProps:{shrink:!0}}))),r.a.createElement(z.a,null,r.a.createElement(ra,null,"Private"),r.a.createElement(ra,null,r.a.createElement(na.a,{checked:this.state.isPrivate,onChange:this.handleCheckboxChange.bind(this)}))),r.a.createElement(z.a,null,r.a.createElement(ra,{align:"center",colSpan:2},r.a.createElement(_.a,{size:"small",variant:"outlined",color:"primary",onClick:this.createGymClass.bind(this)},"Submit"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.userBoxes.length>0?Object(C.a)(Object(C.a)({},e),{},{box:e.userBoxes[0]}):e}}]),a}(n.Component),sa=oa=Object(w.a)(oa),ia=(h.firestore(),["reps","rounds","time","total"]),la=Object(ie.a)({root:{borderBottom:"none"}})(K.a),ca=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes,gymClasses:[],boxIDForm:e.userBoxes[0].boxID,gymClassIDForm:{},titleForm:"",scoreTypeForm:ia[0],wodTextForm:""},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){!this.gymClassListener&&this.state.userBoxes&&this.setGymClassListner(this.state.userBoxes[0].boxID)}},{key:"setGymClassListner",value:function(e){var t=this;this.gymClassListener=De(e).onSnapshot((function(e){if(e.empty)t.setState({gymClasses:[]});else{var a=[];e.forEach((function(e){a.push(e.data())}));var n=a[0];console.log("Inint class"),console.log(n),t.setState({gymClasses:a,gymClassIDForm:n.gymClassID})}}),(function(e){console.log(e)}))}},{key:"onBoxSelectChange",value:function(e){var t=e.target.value;console.log(e.target.value),this.setGymClassListner(t),this.setState({boxIDForm:t})}},{key:"onClassSelectChange",value:function(e){console.log(e.target.value);var t=JSON.parse(e.target.value);this.setState({gymClassIDForm:t.gymClassID})}},{key:"onTitleChange",value:function(e){console.log(e.target.value);var t=e.target.value;this.setState({titleForm:t})}},{key:"onScoreTypeSelectChange",value:function(e){console.log(e.target.value);var t=e.target.value;this.setState({scoreTypeForm:t})}},{key:"onWodTextChange",value:function(e){var t=e.target.value;this.setState({wodTextForm:t})}},{key:"createWOD",value:function(){var e=this,t=this.state.boxIDForm,a=this.state.gymClassIDForm,n=this.state.titleForm,r=this.state.scoreTypeForm,o=this.state.wodTextForm;if(!t||!a||!n||!r||!o)return console.log("Error with input createWod"),void console.log(t,a,n,r,o);console.log(a),function(e,t,a,n,r){var o=h.firestore().collection("wods").doc(),s={wodID:o.id,boxID:e,gymClassID:t,title:a,scoreType:r,wodText:n,date:Date.now()};return o.set(s)}(t,a,n,o,r).then((function(t){e.props.onAlert({type:"success",message:"Added workout!"})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,container:!0,xs:12},r.a.createElement(N.a,null,r.a.createElement(V.a,null,r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(la,null),r.a.createElement(la,null))),r.a.createElement(H.a,null,r.a.createElement(z.a,null,r.a.createElement(la,null,r.a.createElement(D.a,{color:"primary",variant:"caption"},"Box")),r.a.createElement(la,null,r.a.createElement(vt.a,{native:!0,style:{width:"100%"},onChange:this.onBoxSelectChange.bind(this),inputProps:{name:"Box",id:"ownerBoxAddWodBoxID"}},this.state.hasBoxes?this.state.userBoxes.map((function(e,t){return r.a.createElement("option",{key:t,value:e.boxID},e.title)})):r.a.createElement("option",{"aria-label":"None",value:""},"No boxes!")))),r.a.createElement(z.a,null,r.a.createElement(la,null,r.a.createElement(D.a,{color:"primary",variant:"caption"},"Class")),r.a.createElement(la,null,r.a.createElement(vt.a,{native:!0,style:{width:"100%"},onChange:this.onClassSelectChange.bind(this),inputProps:{name:"gymClass",id:"AddWodGymClassID"}},this.state.gymClasses.length>0?this.state.gymClasses.map((function(e,t){return r.a.createElement("option",{key:t,value:JSON.stringify(e)},e.title)})):r.a.createElement("option",{"aria-label":"None",value:""},"No Classes!")))),r.a.createElement(z.a,null,r.a.createElement(la,null,r.a.createElement(D.a,{color:"primary",variant:"caption"},"Score Type")),r.a.createElement(la,null,r.a.createElement(vt.a,{native:!0,style:{width:"100%"},onChange:this.onScoreTypeSelectChange.bind(this),inputProps:{name:"Score Type",id:"ownerBoxAddWodScoreType"}},ia.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e.replace(e[0],e[0].toUpperCase()))}))))),r.a.createElement(z.a,null,r.a.createElement(la,null,r.a.createElement(D.a,{color:"primary",variant:"caption"},"Title")),r.a.createElement(la,null,r.a.createElement(se.a,{id:"ownerBoxAddWodTitle",type:"text",onChange:this.onTitleChange.bind(this),style:{width:"100%"},pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Title"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}}))),r.a.createElement(z.a,null,r.a.createElement(la,{colSpan:2,align:"center"},r.a.createElement(D.a,{color:"primary",variant:"caption"},"Workout"))),r.a.createElement(z.a,null,r.a.createElement(la,{colSpan:2},r.a.createElement(se.a,{id:"wodText",type:"text",style:{width:"100%"},onChange:this.onWodTextChange.bind(this),inputProps:{title:"Enter workout",placeholder:"workout"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0},multiline:!0,rows:12}))),r.a.createElement(z.a,null,r.a.createElement(la,{colSpan:2,align:"center"},r.a.createElement(_.a,{variant:"outlined",color:"primary",size:"small",onClick:this.createWOD.bind(this)},"Submit")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.userMD?e:t}}]),a}(n.Component),ua=ca=Object(w.a)(ca),ma=(h.firestore(),Object(ie.a)({root:{borderBottom:"none"}})(K.a)),ha=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onKeyUp",value:function(e){if(13==(e.keyCode||e.which)){var t=document.getElementById("ownerBoxAddBoxTitle").value;this.createBox(t)}}},{key:"createBox",value:function(e){var t=this;e&&function(e,t){return new Promise((function(a,n){$t.collection("boxes").where("title","==",e).get().then((function(r){if(r.empty){var o,s=$t.collection("boxes").doc();s.set((o={boxID:s.id,title:e,uid:t},Object(ee.a)(o,"uid",t),Object(ee.a)(o,"date",Date.now()),o)).then((function(){a("Added box")}))}else n("Name Taken")}))}))}(e,this.props.user.uid).then((function(e){t.props.onAlert({type:"success",message:"Added gym!"})})).catch((function(e){t.props.onAlert({type:"error",message:e})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(V.a,null,r.a.createElement(H.a,null,r.a.createElement(z.a,null,r.a.createElement(ma,null,"Title"),r.a.createElement(ma,null,r.a.createElement(se.a,{id:"ownerBoxAddBoxTitle",type:"text",pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Name of gym"},onKeyUp:this.onKeyUp.bind(this),margin:"normal",color:"primary",style:{width:"100%"},InputLabelProps:{shrink:!0}}))),r.a.createElement(z.a,null,r.a.createElement(ma,{align:"center",colSpan:2},r.a.createElement(_.a,{size:"small",variant:"outlined",color:"primary",onClick:function(){var t=document.getElementById("ownerBoxAddBoxTitle");e.createBox(t.value)}},"Submit"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),da=ha=Object(w.a)(ha),pa=h.firestore();function fa(e){var t=e.children,a=e.value,n=e.index,o=Object(Zt.a)(e,["children","value","index"]);return r.a.createElement(v.a,Object.assign({item:!0,xs:12,role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(v.a,{item:!0,xs:12},t))}var va=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,userBoxes:[],hasBoxes:!1,addBoxProgress:!0,value:0},console.log(e),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.listenForBoxes()}},{key:"componentDidUpdate",value:function(){"owner"===this.state.userMD.accountType&&this.listenForBoxes()}},{key:"componentWillUnmount",value:function(){this.boxListener&&this.boxListener()}},{key:"listenForBoxes",value:function(){var e=this;this.state.user&&!this.boxListener&&(this.boxListener=pa.collection("boxes").where("uid","==",this.state.user.uid).onSnapshot((function(t){var a=[];t.forEach((function(e){a.push(e.data())})),console.log("Setting new state for userBoxes"),e.setState({hasBoxes:!0,userBoxes:a})}),(function(t){e.setState({hasBoxes:!1,userBoxes:[]})})))}},{key:"a11yProps",value:function(e){return{id:"ownerbox-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}},{key:"handleChange",value:function(e,t){this.setState({value:t})}},{key:"handleChangeIndex",value:function(e){this.setState({value:e})}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12,id:"ownerBox"},r.a.createElement(_t.a,{position:"static"},r.a.createElement(qt.a,{value:this.state.value,variant:"fullWidth",selectionFollowsFocus:!0,onChange:this.handleChange.bind(this),"aria-label":"simple tabs example"},r.a.createElement(Qt.a,Object.assign({label:"View Gyms"},this.a11yProps(0))),r.a.createElement(Qt.a,Object.assign({label:"Add Workout"},this.a11yProps(1))),r.a.createElement(Qt.a,Object.assign({label:"Add Class"},this.a11yProps(2))),r.a.createElement(Qt.a,Object.assign({label:"Add Gym"},this.a11yProps(3))))),r.a.createElement(Yt.a,{axis:"rtl"===this.props.theme.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex.bind(this)},r.a.createElement(fa,{value:this.state.value,index:0},r.a.createElement(aa,{user:this.state.user,userMD:this.state.userMD,userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes,onAlert:this.props.onAlert})),r.a.createElement(fa,{value:this.state.value,index:1},r.a.createElement(ua,{uid:this.state.user.uid,userMD:this.state.userMD,userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes,onAlert:this.props.onAlert})),r.a.createElement(fa,{value:this.state.value,index:2},r.a.createElement(sa,{user:this.state.user,userMD:this.state.userMD,userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes,onAlert:this.props.onAlert})),r.a.createElement(fa,{value:this.state.value,index:3},r.a.createElement(da,{user:this.state.user,userMD:this.state.userMD,onAlert:this.props.onAlert}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),ga=Object(w.a)(va),ba=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,userFollows:[],userFollowing:{}},n}return Object(l.a)(a,[{key:"extractData",value:function(e){var t=[],a={};return e.forEach((function(e){var n=e.data();t.push(n),a[n.boxID]=n.followID})),[t,a]}},{key:"componentDidMount",value:function(){var e,t=this;this.getFollowers=(e=this.state.user.uid,h.firestore().collection("following").where("uid","==",e)).onSnapshot((function(e){var a=t.extractData(e),n=Object(k.a)(a,2),r=n[0],o=n[1];e.docChanges().forEach((function(e){switch(e.type){case"added":console.log("Case Added!"),t.setState({userFollows:r,userFollowing:o});break;case"modified":console.log("modififed");var a=e.doc.data();console.log(a),t.setState({userFollows:r,userFollowing:o});break;case"removed":console.log("case Removed");var n=e.doc.data(),s=t.state.userFollowing;s[n.boxID]=void 0,t.setState({userFollowing:s});break;default:console.log("Uncaught change.")}}))}))}},{key:"componentWillUnmount",value:function(){this.getFollowers&&this.getFollowers()}},{key:"handleFollow",value:function(e){console.log(e),""!==e.boxID&&Ze(this.state.user.uid,this.state.userMD.username,e.boxID,e.title).then((function(e){console.log("Succefully followed.")})).catch((function(e){console.log(e)}))}},{key:"handleUnfollow",value:function(e){var t=this;Je(this.state.userFollowing[e]).then((function(a){if(a){var n=t.state.userFollowing;n[e]=void 0,t.setState({userFollowing:n}),console.log("Succefully unfollowed.")}})).catch((function(e){console.log(e)}))}},{key:"isUserFollowing",value:function(e){return!!this.state.userFollowing[e]}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:6},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,null,"Following")),r.a.createElement(v.a,{item:!0,xs:12},this.state.userFollows.length>0?r.a.createElement(N.a,null,r.a.createElement(V.a,null,r.a.createElement(H.a,null,this.state.userFollows.map((function(t,a){return r.a.createElement(z.a,{key:a},r.a.createElement(K.a,null,""===t.boxID?r.a.createElement(_.a,null,t.title," ",r.a.createElement(D.a,{variant:"caption",component:"span"},"\xa0(deleted)")):r.a.createElement(_.a,{to:"box/".concat(t.boxID),component:p.b},t.title)),r.a.createElement(K.a,{align:"right"},e.isUserFollowing(t.boxID)?r.a.createElement(ze.a,{onClick:function(){e.handleUnfollow(t.boxID)}},r.a.createElement(He.a,{color:"primary"})):r.a.createElement(ze.a,{onClick:function(){e.handleFollow(t)}},r.a.createElement(He.a,{style:{fill:e.props.theme.palette.text.primary}}))))}))))):r.a.createElement(r.a.Fragment,null,"Not following anyone!"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),ya=ba=Object(w.a)(ba),Ea=a(333),xa=(h.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scores:e.scores,uid:e.uid,showRemoveAlert:!1,removeScoreID:"",redirectUrl:"",redirect:!1},n}return Object(l.a)(a,[{key:"handleViewWod",value:function(e){console.log("Go to wodID: ".concat(e))}},{key:"handleViewBox",value:function(e){console.log("Go to boxID: ".concat(e))}},{key:"showRemoveAlert",value:function(e){this.setState({showRemoveAlert:!0,removeScoreID:e})}},{key:"onRemove",value:function(){var e=this;this.hideRemoveAlert(),ce(this.state.removeScoreID).then((function(t){e.props.onAlert({type:"success",message:t})})).catch((function(t){e.props.onAlert({type:"error",message:t})}))}},{key:"hideRemoveAlert",value:function(){this.setState({showRemoveAlert:!1})}},{key:"onView",value:function(e){this.setState({redirectUrl:e,redirect:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.scores.length>0?r.a.createElement(N.a,{component:x.a},this.state.redirect?r.a.createElement(f.a,{to:this.state.redirectUrl}):r.a.createElement(r.a.Fragment,null),r.a.createElement(V.a,{"aria-label":"score table"},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(K.a,null,"Title"),r.a.createElement(K.a,null,"Score"),r.a.createElement(K.a,null))),r.a.createElement(H.a,null,this.state.scores.map((function(t,a){return r.a.createElement(Da,{key:a,info:t,onViewBox:e.handleViewBox.bind(e),onViewWod:e.handleViewWod.bind(e),onRemove:e.showRemoveAlert.bind(e),onView:e.onView.bind(e)})}))))):r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(J.a,{variant:"outlined",color:"primary"},r.a.createElement(Z.a,null,r.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},"No Scores!")))),r.a.createElement(fe,{open:this.state.showRemoveAlert,actionText:"Remove",cancelText:"Cancel",modalText:"Remove score?",onAction:this.onRemove.bind(this),onClose:this.hideRemoveAlert.bind(this)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component)),wa=xa=Object(w.a)(xa);function Da(e){var t=e.info.score,a=e.info.title,n=e.info.wodID,o=(e.info.uid,e.info.scoreID),s=e.info.boxID;return r.a.createElement(z.a,{onClick:function(t){var a=t.target.tagName;["path","svg"].indexOf(a)>-1||e.onView("wod/".concat(s,"/").concat(n))}},r.a.createElement(K.a,null,a),r.a.createElement(K.a,null,t),r.a.createElement(K.a,{align:"right"},r.a.createElement(_.a,{size:"small",onClick:function(){return e.onRemove(o)}},r.a.createElement(Ea.a,{color:"error"}))))}var Ca=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,scores:e.scores},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:6},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,null,"Scores")),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(wa,{uid:this.state.user.uid,scores:this.state.scores,onAlert:this.props.onAlert})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),ka=Ca=Object(w.a)(Ca),Oa=a(334),Ma=a(335);h.firestore();var Ia=Object(w.a)((function(e){var t=e.info.senderUsername,a=e.info.adminInviteID,n=e.info.gymClassTitle,o=e.info.boxTitle;return r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:8},r.a.createElement(D.a,{variant:"caption"},t," wants you to be an Admin of ",n," at ",o)),r.a.createElement(v.a,{item:!0,xs:2},r.a.createElement(ze.a,{size:"small",onClick:function(){e.acceptInvite(e.info)},color:"secondary"},r.a.createElement(Oa.a,null))),r.a.createElement(v.a,{item:!0,xs:2},r.a.createElement(ze.a,{size:"small",onClick:function(){e.removeNotification(a)}},r.a.createElement(Ma.a,{color:"error"}))))})),Sa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,notifications:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getListener()}},{key:"componentWillUnmount",value:function(){this.notificationsListener&&this.notificationsListener()}},{key:"componentDidUpdate",value:function(){this.getListener()}},{key:"getListener",value:function(){var e,t=this;this.state.userMD&&!this.notificationsListener&&(this.notificationsListener=(e=this.state.userMD.uid,Et.collection("notifications").doc("admins").collection("invites").where("uid","==",e)).onSnapshot((function(e){var a=[];console.log(e),e.empty||(e.docs.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.date>t.date?1:-1}))),t.setState({notifications:a})})))}},{key:"onRemoveNotification",value:function(e){console.log("Remove ",e),function(e){return new Promise((function(t,a){Et.collection("notifications").doc("admins").collection("invites").where("adminInviteID","==",e).get().then((function(e){e.empty||(e.docs.forEach((function(e){e.ref.delete()})),t("Removed notifications.")),t("No notifications found.")}),(function(e){a(e)}))}))}(e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"acceptInvite",value:function(e){var t=this,a=e.gymClassID,n=e.gymClassTitle,r=e.boxTitle,o=e.boxID,s=e.adminInviteID,i={gymClassID:a,gymClassTitle:n,boxTitle:r,boxID:o,uid:this.state.userMD.uid,username:this.state.userMD.username,date:Date.now()};console.log("Accept Data"),console.log(i),function(e,t,a){return new Promise((function(n,r){wt(e,t).then((function(e){if(e)n("User is an admin.");else{var t=Et.collection("classAdmins").doc();t.set(Object(C.a)(Object(C.a)({},a),{},{classAdminID:t.id})).then((function(){n("Added user as an admin.")})).catch((function(e){r(e)}))}})).catch((function(e){r(e)}))}))}(this.state.userMD.uid,a,i).then((function(e){console.log(e),t.onRemoveNotification(s)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return console.log(this.state.notifications.length),r.a.createElement(v.a,{item:!0,xs:12},this.state.notifications.length>0?r.a.createElement(x.a,{style:{margin:"16px 0px 0px 0px "}},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"subtitle2"},"Admin Notifications")),r.a.createElement(v.a,{item:!0,xs:12},this.state.notifications.map((function(t,a){return r.a.createElement(Ia,{key:a,info:t,removeNotification:e.onRemoveNotification.bind(e),acceptInvite:e.acceptInvite.bind(e)})})))):r.a.createElement(r.a.Fragment,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),ja=Sa=Object(w.a)(Sa);h.firestore();var Aa=Object(w.a)((function(e){var t=e.info.senderUsername,a=e.info.memberInviteID,n=e.info.gymClassTitle,o=e.info.boxTitle;return r.a.createElement(v.a,{container:!0,item:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:8},r.a.createElement(D.a,{variant:"caption"},t," wants you to be a Member of ",n," at ",o)),r.a.createElement(v.a,{item:!0,xs:2},r.a.createElement(ze.a,{size:"small",onClick:function(){e.acceptInvite(e.info)},color:"secondary"},r.a.createElement(Oa.a,null))),r.a.createElement(v.a,{item:!0,xs:2},r.a.createElement(ze.a,{size:"small",onClick:function(){e.removeNotification(a)}},r.a.createElement(Ma.a,{color:"error"}))))})),Ta=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,notifications:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getListener()}},{key:"componentWillUnmount",value:function(){this.notificationsListener&&this.notificationsListener()}},{key:"componentDidUpdate",value:function(){this.getListener()}},{key:"getListener",value:function(){var e,t=this;this.state.userMD.uid&&!this.notificationsListener&&(this.notificationsListener=(e=this.state.userMD.uid,It.collection("notifications").doc("members").collection("invites").where("uid","==",e)).onSnapshot((function(e){var a=[];e.empty||(e.docs.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.date>t.date?1:-1}))),t.setState({notifications:a})})))}},{key:"onRemoveNotification",value:function(e){(function(e){return new Promise((function(t,a){It.collection("notifications").doc("members").collection("invites").where("memberInviteID","==",e).get().then((function(e){e.empty||(e.docs.forEach((function(e){e.ref.delete()})),t("Removed notifications.")),t("No notifications found.")}),(function(e){a(e)}))}))})(e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"acceptInvite",value:function(e){var t=this,a=e.gymClassID,n=e.gymClassTitle,r=e.boxTitle,o=e.boxID,s=e.memberInviteID,i={gymClassID:a,gymClassTitle:n,boxTitle:r,uid:this.state.userMD.uid,boxID:o,username:this.state.userMD.username,date:Date.now()};(function(e,t,a){return new Promise((function(n,r){jt(e,t).then((function(e){if(e)r("User is a member.");else{var t=It.collection("classMembers").doc();t.set(Object(C.a)(Object(C.a)({},a),{},{classMemberID:t.id})).then((function(e){n("Added user as a member.")}))}})).catch((function(e){r(e)}))}))})(this.state.userMD.uid,a,i).then((function(e){console.log(e),t.onRemoveNotification(s)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px "}},this.state.notifications.length>0?r.a.createElement(x.a,{elevation:6},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(D.a,{variant:"subtitle2"},"Member Notifications")),r.a.createElement(v.a,{item:!0,xs:12},this.state.notifications.map((function(t,a){return r.a.createElement(Aa,{key:a,info:t,removeNotification:e.onRemoveNotification.bind(e),acceptInvite:e.acceptInvite.bind(e)})})))):r.a.createElement(r.a.Fragment,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Ba=Ta=Object(w.a)(Ta),La=(h.firestore(),Object(ie.a)({root:{borderBottom:"none"}})(K.a));var Pa=Object(w.a)((function(e){var t=e.info.gymClassTitle,a=e.info.boxTitle,n=e.info.boxID,o="class/".concat(n,"/").concat(e.info.gymClassID);return r.a.createElement(z.a,{onClick:function(t){return e.onView(o)}},r.a.createElement(La,null,r.a.createElement(D.a,{color:"primary"},a)),r.a.createElement(La,null,r.a.createElement(D.a,{color:"primary"},t)))})),Ua=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,classes:[],redirect:!1,redirectUrl:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getListener()}},{key:"componentDidUpdate",value:function(){this.getListener()}},{key:"getListener",value:function(){var e,t=this;this.state.userMD.uid&&!this.userClassAdminsListener&&(this.userClassAdminsListener=(e=this.state.userMD.uid,Et.collection("classAdmins").where("uid","==",e)).onSnapshot((function(e){var a=[];e.empty||(e.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.date>t.date?1:-1}))),t.setState({classes:a})})))}},{key:"componentWillUnmount",value:function(){this.userClassAdminsListener&&this.userClassAdminsListener()}},{key:"onView",value:function(e){this.setState({redirect:!0,redirectUrl:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.redirect?r.a.createElement(f.a,{to:this.state.redirectUrl}):r.a.createElement(r.a.Fragment,null),this.state.classes.length>0?r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px"}},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,{variant:"subtitle1"},"Admin Roles"),r.a.createElement(V.a,{size:"small"},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(La,{align:"center"},"Gym"),r.a.createElement(La,{align:"center"},"Class"))),r.a.createElement(H.a,null,this.state.classes.map((function(t,a){return r.a.createElement(Pa,{key:a,info:t,onView:e.onView.bind(e)})})))))):r.a.createElement(r.a.Fragment,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Fa=Ua=Object(w.a)(Ua),Ra=(h.firestore(),Object(ie.a)({root:{borderBottom:"none"}})(K.a));var Wa=Object(w.a)((function(e){var t=e.info.gymClassTitle,a=e.info.boxTitle,n=e.info.boxID,o="class/".concat(n,"/").concat(e.info.gymClassID);return r.a.createElement(z.a,{onClick:function(t){return e.onView(o)}},r.a.createElement(Ra,null,r.a.createElement(D.a,{color:"primary"},a)),r.a.createElement(Ra,null,r.a.createElement(D.a,{color:"primary"},t)))})),Na=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,classes:[],redirect:!1,redirectUrl:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getListener()}},{key:"componentDidUpdate",value:function(){this.getListener()}},{key:"componentWillUnmount",value:function(){this.userClassMembersListener&&this.userClassMembersListener()}},{key:"getListener",value:function(){var e,t=this;this.state.userMD&&!this.userClassMembersListener&&(this.userClassMembersListener=(e=this.state.userMD.uid,It.collection("classMembers").where("uid","==",e)).onSnapshot((function(e){var a=[];e.empty||(e.forEach((function(e){a.push(e.data())})),a.sort((function(e,t){return e.date>t.date?1:-1}))),t.setState({classes:a})})))}},{key:"onView",value:function(e){this.setState({redirect:!0,redirectUrl:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.redirect?r.a.createElement(f.a,{key:"redirectClassMemberView",to:this.state.redirectUrl}):r.a.createElement(r.a.Fragment,null),this.state.classes.length>0?r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px"}},r.a.createElement(x.a,{elevation:6},r.a.createElement(D.a,{variant:"subtitle1"},"Membership"),r.a.createElement(V.a,{size:"small"},r.a.createElement(G.a,null,r.a.createElement(z.a,null,r.a.createElement(Ra,{align:"center"},"Gym"),r.a.createElement(Ra,{align:"center"},"Class"))),r.a.createElement(H.a,null,this.state.classes.map((function(t,a){return r.a.createElement(Wa,{key:a,info:t,onView:e.onView.bind(e)})})))))):r.a.createElement(r.a.Fragment,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),Va=Na=Object(w.a)(Na),Ga=a(344),za=a(93);h.database();function Ka(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grey",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{color:e,valid:t}}var Ha=Object(ie.a)((function(e){return{root:{background:"transparent",display:"block",borderRadius:"4px",padding:"0px 0px 0px 2px",margin:"1px auto",width:"12%",height:"6px"}}}))(Ga.a),Ja=Object(ie.a)((function(e){return{root:{borderRadius:"4px",height:"5px"}}}))(x.a),Za=Object(ie.a)((function(e){return{root:{display:"flex"}}}))(v.a),_a=Object(ie.a)((function(e){return{root:{background:"linear-gradient(45deg, transparent, #ff0b0b, #6700c5)"}}}))(Ja),qa=Object(ie.a)({root:{background:"linear-gradient(45deg, transparent, grey, #6700c5)"}})(Ja),Qa=Object(ie.a)((function(e){return{root:{background:"linear-gradient(45deg, transparent,  ".concat(e.palette.primary.main,", #6700c5)")}}}))(Ja),Xa=Object(ie.a)((function(e){return{root:{background:"linear-gradient(45deg, transparent, #00fb42, #00fb42, #6700c5)"}}}))(Ja),Ya=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=za.DateTime.now();return n.state={userMD:e.userMD,scores:e.scores,calendar:n.createCalendar(r),today:r,fakeScores:[{date:16148448e5},{date:16150176e5},{date:16151904e5},{date:16153632e5},{date:1615536e6}]},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"getFirstOfMonth",value:function(e){return za.DateTime.local(e.year,e.month,1,0,0,0,0)}},{key:"getEndOfMonth",value:function(e){return za.DateTime.local(e.year,e.month,e.daysInMonth,0,0,0,0)}},{key:"getFirstAndLast",value:function(e){var t=this.getFirstOfMonth(e),a=this.getEndOfMonth(e);return console.log(a),[t,a]}},{key:"createCalendar",value:function(e){for(var t,a,n=this.getFirstAndLast(e),r=Object(k.a)(n,2),o=r[0],s=r[1],i=[],l=[],c=[],u=0;u<7;u++)l.push(Ka("white",!0));t=[].concat(l),a=[].concat(l);for(var m=0;m<o.weekday;m++)i.push(Ka());for(var h=o.weekday;h<7;h++)i.push(Ka("white",!0));for(var d=0;d<=s.weekday;d++)c.push(Ka("white",!0));for(var p=s.weekday+1;p<7;p++)c.push(Ka());for(var f=[[].concat(i),[].concat(l),Object(O.a)(t),Object(O.a)(a),[].concat(c)],v=this.getOffsetDayOfMonthFromTs(o.ts),g=this.getOffsetDayOfMonthFromTs(e.ts),b=v[0]*v[1]+v[1],y=g[0]*g[1]+g[1],E=b;E<y;E++){var x=E%7;f[parseInt(E/7)][x]=Ka("red",!0)}return f}},{key:"getOffsetDayOfMonthFromTs",value:function(e){var t=za.DateTime.fromMillis(e),a=this.getFirstOfMonth(t).weekday+t.day-1;return[parseInt(a/7),a%7]}},{key:"fillCalendar",value:function(){var e,t=Object(O.a)(this.state.calendar),a=Object(j.a)(this.state.scores);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=this.getOffsetDayOfMonthFromTs(n.date),o=Object(k.a)(r,2),s=o[0],i=o[1];console.log(n.date),t[s][i]=Ka("green",!0)}}catch(l){a.e(l)}finally{a.f()}return console.log(t),t}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,container:!0,xs:12},r.a.createElement(v.a,{item:!0,xs:12},this.state.today.monthLong),r.a.createElement(v.a,{item:!0,xs:3}),r.a.createElement(v.a,{item:!0,container:!0,xs:6},this.fillCalendar().map((function(e,t){var a=t%2==0?"flip-right":"flip-left";return r.a.createElement(Za,{className:a,item:!0,xs:12,key:t},e.map((function(e,t){return"green"===e.color?r.a.createElement(Ha,{key:t}," ",r.a.createElement(Qa,null)):"white"===e.color?r.a.createElement(Ha,{key:t}," ",r.a.createElement(Xa,null)):"red"===e.color?r.a.createElement(Ha,{key:t}," ",r.a.createElement(_a,null)):r.a.createElement(Ha,{key:t}," ",r.a.createElement(qa,null))})))}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),$a=Ya=Object(w.a)(Ya);var en=h.firestore(),tn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,emailAlertOpen:!1,scores:[]},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.cancelablePromise&&(console.log("email cancelled"),this.cancelablePromise.cancel()),this.listener&&this.listener()}},{key:"componentDidMount",value:function(){this.listenForUserScores()}},{key:"listenForUserScores",value:function(){var e=this;this.listener||(this.listener=en.collection("scores").where("uid","==",this.state.user.uid).onSnapshot((function(t){if(console.log(t),t.empty)e.setState({scores:[]});else{var a=[];t.forEach((function(e){a.push(e.data())})),console.log(a[0]),a.sort((function(e,t){return e.date>t.date?1:-1})),e.setState({scores:a})}}),(function(e){console.log(e)})))}},{key:"sendVerificationEmail",value:function(){var e=this,t=new Promise((function(t,a){e.state.user.sendEmailVerification().then((function(){return e.setState({emailAlertOpen:!0})})).catch((function(e){a(e)}))}));this.cancelablePromise=function(e){var t=!1;return{promise:new Promise((function(a,n){e.then((function(e){return t?n({isCanceled:!0}):a(e)}),(function(e){return n(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}}(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{item:!0,container:!0,align:"center"},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(Ht.a,{in:this.state.emailAlertOpen},r.a.createElement(Jt.a,{onClose:function(){e.setState({emailAlertOpen:!1})}},"Email sent!"))),r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px "}},r.a.createElement(x.a,{elevation:4},r.a.createElement(D.a,{gutterBottom:!0,variant:"h5"},this.state.userMD.username))),r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px "}},r.a.createElement(x.a,{elevation:4},r.a.createElement($a,{userMD:this.state.userMD,scores:this.state.scores}))),r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px "}},r.a.createElement(x.a,{elevation:4})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(v.a,{item:!0,container:!0,xs:12},this.state.user.emailVerified?r.a.createElement(r.a.Fragment,null):r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px "}},r.a.createElement(x.a,{elevation:4},r.a.createElement(D.a,null,"Verification"),r.a.createElement(_.a,{color:"secondary",style:{margin:"0px 0px 4px 0px "},onClick:this.sendVerificationEmail.bind(this)},r.a.createElement(D.a,{variant:"subtitle2"},"Send Verification Email")))),r.a.createElement(ja,{userMD:this.state.userMD}),r.a.createElement(Ba,{userMD:this.state.userMD}),r.a.createElement(Fa,{userMD:this.state.userMD}),r.a.createElement(Va,{userMD:this.state.userMD}),r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"16px 0px 0px 0px "}},r.a.createElement(x.a,{elevation:4},r.a.createElement(ya,{user:this.state.user,userMD:this.state.userMD})))),r.a.createElement(x.a,{elevation:2,style:{margin:"16px 0px 0px 0px"}},"owner"===this.state.userMD.accountType?r.a.createElement(ga,{user:this.state.user,userMD:this.state.userMD,onAlert:this.props.onAlert}):r.a.createElement(ka,{user:this.state.user,userMD:this.state.userMD,onAlert:this.props.onAlert,scores:this.state.scores}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),an=Object(w.a)(tn),nn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD},n}return Object(l.a)(a,[{key:"handleLogIn",value:function(e){this.setState({user:e})}},{key:"render",value:function(){return r.a.createElement(v.a,{item:!0,xs:12,id:"profilepage"},r.a.createElement(an,{user:this.state.user,userMD:this.state.userMD,onAlert:this.props.onAlert}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),rn=nn=Object(w.a)(nn),on=a(357),sn=a(329),ln=a(337),cn=a(338),un=a(339),mn=a(356),hn=a(336),dn=Object(ie.a)((function(e){return{root:{"&:hover":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(on.a),pn=Object(ie.a)((function(e){return{root:{color:e.palette.text.primary}}}))(D.a),fn=Object(ie.a)((function(e){return{root:{border:"1px solid",borderColor:e.palette.text.primary}}}))(x.a);var vn=Object(w.a)((function(e){return r.a.createElement(Jt.a,{severity:e.alertInfo.type,onClose:e.onCloseAlert},e.alertInfo.message)})),gn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).menuRef=Object(n.createRef)(),r.state={user:e.user,userMD:e.userMD,open:!1,alertOpen:e.alertOpen,alertInfo:e.alertInfo},r}return Object(l.a)(a,[{key:"handleToggle",value:function(){this.setState({open:!this.state.open})}},{key:"handleClose",value:function(e){console.log("Should close"),this.setState({open:!1})}},{key:"handleListKeyDown",value:function(e){"Tab"===e.key&&(e.preventDefault(),this.setState({open:!1}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(_t.a,{position:"sticky",ref:this.menuRef,style:{background:this.props.theme.palette.background.toolbar}},r.a.createElement(sn.a,{disableGutters:!1},r.a.createElement(pn,{variant:"h3"},"WodTrackrr"),r.a.createElement("section",{style:{marginLeft:"auto",marginRight:-12}},r.a.createElement(ze.a,{color:"primary",onClick:this.handleToggle.bind(this)},r.a.createElement(hn.a,null)),r.a.createElement(ln.a,{open:this.state.open,anchorEl:this.menuRef.current,placement:"bottom-end",transition:!0,disablePortal:!0,className:t.popper},(function(t){var a=t.TransitionProps,n=t.placement;return r.a.createElement(cn.a,Object.assign({},a,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(fn,null,r.a.createElement(un.a,{onClickAway:e.handleClose.bind(e)},r.a.createElement(mn.a,{id:"menu-list-grow",onKeyDown:e.handleListKeyDown.bind(e)},r.a.createElement(dn,{onClick:e.props.changeTheme},"Change Theme"),r.a.createElement(dn,{onClick:e.handleClose.bind(e),component:p.b,to:"/settings/"},"Settings"),e.state.user?r.a.createElement(dn,{onClick:function(t){e.handleClose.bind(e)(t),e.props.handleLogout()}},"Logout"):r.a.createElement(dn,{component:p.b,to:"/login",onClick:e.handleClose.bind(e)},"Login")))))})))),r.a.createElement(Ht.a,{in:this.props.alertOpen},this.state.alertInfo?r.a.createElement(vn,{alertInfo:this.state.alertInfo,onCloseAlert:this.props.onCloseAlert}):r.a.createElement(r.a.Fragment,null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),a}(n.Component),bn=Object(ie.a)((function(e){return{popper:{zIndex:100}}}),{withTheme:!0})(gn),yn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"handleSubmit",value:function(e){var t=this,a=document.getElementById("email"),n=document.getElementById("password");document.getElementById("passwordConfirm");console.log(a.value,n),h.auth().signInWithEmailAndPassword(a.value,n.value).then((function(e){console.log("Firebase res"),console.log(e),t.props.onLogin(e.user)})).catch((function(e){console.log(e);e.code,e.message}))}},{key:"render",value:function(){return r.a.createElement(v.a,{container:!0,id:"login",align:"center",justify:"center"},r.a.createElement("br",null),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:2},r.a.createElement(D.a,{variant:"h4"},"Login"),r.a.createElement("br",null),r.a.createElement(se.a,{id:"email",style:{margin:8},placeholder:"Email",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(se.a,{id:"password",type:"password",style:{margin:8},placeholder:"Password",margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(x.a,{elevation:2},r.a.createElement(_.a,{variant:"outlined",color:"primary",onClick:this.handleSubmit.bind(this)},"Login"),r.a.createElement(p.b,{to:"/register",className:"no-line",style:{paddingLeft:"10px"}},r.a.createElement(_.a,{variant:"outlined",color:"secondary"},"Register")))))}}]),a}(n.Component),En=a(38),xn=Object(En.a)(),wn=a(156),Dn=a(353),Cn=a(340),kn={overrides:{MuiContainer:{root:{"background-color":"#212121"}},MuiSelect:{icon:{color:"white"}},MuiInputBase:{root:{}},MuiInput:{underline:{"&:before":{borderBottomColor:"white"}}}},palette:{common:{black:"#000",white:"#fff"},appBackground:{main:"black"},background:{paper:"#212121",toolbar:"#333333",tableHeader:"#2e3134",default:"rgba(48, 48, 48, 1)"},primary:{main1:"#0072fff7",main:"#4ec5ff",mainGrad:"linear-gradient(90deg,#0890fd,#01d3fe)",contrastText:"rgba(255, 255, 255, 1)"},secondary:{light:"#14eac3",main:"#14eac3",dark:"#14eac3",contrastText:"#fff"},error:{light:"#ea4331",main:"#c43627",dark:"#2d0d0b",contrastText:"rgba(255, 255, 255, 1)"},text:{primary:"#ffffff",secondary:"#e0dfdf",disabled:"#bdbdbd",hint:"#afafaf"}}},On=kn=kn,Mn={overrides:{MuiContainer:{root:{"background-color":"#ffffff"}},MuiSelect:{icon:{color:"black"}}},palette:{common:{black:"#000",white:"#fff"},background:{paper:"#ffffff",toolbar:"#fffffff5",tableHeader:"#f1f1f1",default:"#f1f1f1"},primary:{main1:"#0072fff7",main:"#4ec5ff",mainGrad:"linear-gradient(90deg,#0890fd,#01d3fe)",contrastText:"rgba(255, 255, 255, 1)"},secondary:{light:"#14eac3",main:"#14eac3",dark:"#14eac3",contrastText:"#fff"},error:{light:"#ea4331",main:"#c43627",dark:"#2d0d0b",contrastText:"rgba(255, 255, 255, 1)"},follow:{main:"#09e073"},unfollow:{main:"#e07609"},text:{primary:"#000000",secondary:"#e0dfdf",disabled:"#bdbdbd",hint:"#afafaf"}}},In=Mn=Mn,Sn=Object(wn.a)(On);Sn=Object(Dn.a)(Sn);var jn=Object(wn.a)(In);jn=Object(Dn.a)(jn);var An=Object(ie.a)((function(e){return{root:{backgroundColor:e.palette.background.paper}}}))(v.a),Tn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={btmnav:0,user:h.auth().currentUser,userMD:!1,theme:Sn,darkTheme:!0,alertOpen:!1,alertInfo:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.firebaseAuthListener=h.auth().onAuthStateChanged((function(t){var a=h.firestore();if(t){var n=a.collection("users").doc(t.uid);e.userMDListener=n.onSnapshot((function(a){a.exists?e.setState({user:t,userMD:a.data()}):e.setState({user:t,userMD:!1})}),(function(e){console.log(e)}))}else e.setState({user:null,userMD:!1})}))}},{key:"handleLogin",value:function(e){this.setState({user:e})}},{key:"handleLogout",value:function(){var e=this;h.auth().signOut().then((function(){e.setState({user:null})}),(function(e){console.error("Sign Out Error",e)}))}},{key:"componentWillUnmount",value:function(){void 0!==this.firebaseAuthListener&&this.firebaseAuthListener&&this.firebaseAuthListener(),null!==this.userMDListener&&this.userMDListener&&this.userMDListener()}},{key:"changeTheme",value:function(){var e=this.state.darkTheme?jn:Sn;this.setState({theme:e,darkTheme:!this.state.darkTheme})}},{key:"onAlert",value:function(e){console.log(e),this.setState({alertInfo:e,alertOpen:!0})}},{key:"onCloseAlert",value:function(){this.setState({alertOpen:!1,alertInfo:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(d.Provider,null,r.a.createElement(p.a,{history:xn},r.a.createElement(Cn.a,{theme:this.state.theme},r.a.createElement(bn,{className:"header",user:this.state.user,userMD:this.state.userMD,changeTheme:this.changeTheme.bind(this),handleLogout:this.handleLogout.bind(this),alertOpen:this.state.alertOpen,alertInfo:this.state.alertInfo,onCloseAlert:this.onCloseAlert.bind(this)}),r.a.createElement(An,{container:!0,id:"testCont"},r.a.createElement(v.a,{item:!0,container:!0,xs:12,style:{minHeight:"100vh",paddingTop:"8px"}},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/boxSearch"},r.a.createElement(tt,{user:this.state.user,userMD:this.state.userMD,onAlert:this.onAlert.bind(this)})),r.a.createElement(f.b,{exact:!0,path:"/profile"},this.state.user?r.a.createElement(rn,{user:this.state.user,userMD:this.state.userMD,onAlert:this.onAlert.bind(this)}):r.a.createElement(f.a,{to:"/login"})),r.a.createElement(f.b,{path:"/box/:boxID",render:function(t){return r.a.createElement(Ge,{userMD:e.state.userMD,boxID:t.match.params.boxID,onAlert:e.onAlert.bind(e)})}}),r.a.createElement(f.b,{path:"/class/:boxID/:gymClassID",render:function(t){return r.a.createElement(Kt,{userMD:e.state.userMD,gymClassID:t.match.params.gymClassID,boxID:t.match.params.boxID,onAlert:e.onAlert.bind(e)})}}),r.a.createElement(f.b,{path:"/wod/:boxID/:wodID",render:function(t){return r.a.createElement(be,{userMD:e.state.userMD,boxID:t.match.params.boxID,wodID:t.match.params.wodID,isReadOnly:!0,onAlert:e.onAlert.bind(e)})}}),r.a.createElement(f.b,{exact:!0,path:"/register",render:function(t){return e.state.user?r.a.createElement(f.a,{to:"/profile"}):r.a.createElement(ft,{onAlert:e.onAlert.bind(e)})}}),r.a.createElement(f.b,{exact:!0,path:"/settings",render:function(t){return r.a.createElement(dt,{user:e.state.user,userMD:e.state.userMD,onAlert:e.onAlert.bind(e)})}}),r.a.createElement(f.b,{exact:!0,path:"/login"},this.state.user?r.a.createElement(f.a,{to:"/boxSearch"}):r.a.createElement(yn,{onLogin:this.handleLogin.bind(this),onAlert:this.onAlert.bind(this)}))),r.a.createElement("div",{style:{margin:"5vh"}}))),r.a.createElement(g.a,{className:"footer",value:this.state.btmnav,onChange:function(t,a){e.setState({btmnav:a})},style:{background:this.state.theme.palette.primary.mainGrad},showLabels:!0},r.a.createElement(b.a,{label:"Search",component:p.b,to:"/boxSearch",icon:r.a.createElement(E.a,null)}),r.a.createElement(b.a,{label:"Profile",component:p.b,to:"/profile",icon:r.a.createElement(E.a,null)})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t}}]),a}(r.a.Component);Tn.contextType=d,s.a.render(r.a.createElement(Tn,null),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.5866ecef.chunk.js.map