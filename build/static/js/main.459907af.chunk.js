(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{150:function(e,t,a){e.exports=a(240)},238:function(e,t,a){},240:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),s=a.n(r),i=a(6),l=a(7),c=a(9),u=a(8),m=a(114),d=(a(17),m),h=o.a.createContext(m.initializeApp({apiKey:"AIzaSyCGE8_j8cfIBmIzcvP6CVgG2yC6EE1Ep1U",authDomain:"wodtrackrr.firebaseapp.com",databaseURL:"https://wodtrackrr.firebaseio.com",projectId:"wodtrackrr",storageBucket:"wodtrackrr.appspot.com",messagingSenderId:"743601990099",appId:"1:743601990099:web:5937e9151eaad13e93a726",measurementId:"G-39CF0BRPMH"})),p=(a(113),a(21),a(16)),v=a(18),f=a(281),b=a(303),x=a(304),y=a(118),g=a.n(y),E=(a(26),a(11)),w=a(310),B=a(144),D=a(241),k=a(293),O=a(59),j=a.n(O),S=a(119),C=a(48),I=a(50),M=a(85),T=a.n(M);function R(e){console.log("Split",e);var t=e.split(":"),a=Object(C.a)(t,2),n=a[0],o=a[1];return 60*parseInt(n)+parseInt(o)}function W(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return a<10&&(a="0".concat(a)),"".concat(t,":").concat(a)}a(115),a(139),d.storage(),d.database();d.database();var L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scoreType:e.scoreType,data:e.data,values:e.values,stats:new Map},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"createChart",value:function(){var e=this;console.log("LineChart____________"),console.log(this.state),this.ctx=document.getElementById("lineChart");var t=this.ctx.getContext("2d").createLinearGradient(200,0,200,400);t.addColorStop(0,"#01d3fe"),t.addColorStop(1,"#0890fd"),this.lineChart&&this.lineChart.destroy(),this.lineChart=new T.a(this.ctx,{type:"line",data:{label:"Scores",datasets:[{label:"Score",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,backgroundColor:t,data:this.state.data}]},options:{scales:{yAxes:[{ticks:{callback:function(t,a,n){return"time"===e.state.scoreType?W(t):"reps"===e.state.scoreType?t:void 0}}}]},tooltips:{callbacks:{title:function(e,t){},label:function(t,a){var n=a.datasets[t.datasetIndex].label||"";return n&&(n+=": "),"time"===e.state.scoreType?n+=W(t.yLabel):"reps"===e.state.scoreType&&(n+=t.yLabel),n}}},maintainAspectRatio:!1},plugins:[{beforeInit:function(e){e.data.datasets[0].data}}]})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState(Object(E.a)({},e),(function(){t.createChart()}))}},{key:"componentWillUnmount",value:function(){console.log("Component will unmount")}},{key:"objListToArray",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement("div",{style:{height:"25vh","max-width":"50vw"}},o.a.createElement("canvas",{id:"lineChart"})))}}]),a}(n.Component),A=L=Object(w.a)(L),P=a(140),V=(d.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scoreType:e.scoreType,data:e.data,values:e.values,stats:new Map},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState(Object(E.a)({},e),(function(){t.state.values.length>0&&t.createChart(t.binData(t.state.values))}))}},{key:"createChart",value:function(e){var t=Object(C.a)(e,2),a=t[0],n=t[1];this.ctx=document.getElementById("barChart");var o=this.ctx.getContext("2d").createLinearGradient(200,0,200,400);o.addColorStop(0,"#01d3fe"),o.addColorStop(1,"#0890fd"),this.barChart&&this.barChart.destroy(),this.barChart=new T.a(this.ctx,{type:"bar",data:{labels:a,datasets:[{label:"Scores (Standard Deviation)",minBarLength:1,backgroundColor:o,data:n}]},options:{maintainAspectRatio:!1}})}},{key:"format",value:function(e){return"time"===this.state.scoreType?e<=0?0:W(e):"reps"===this.state.scoreType?parseFloat(e):void 0}},{key:"createLabels",value:function(e,t){for(var a=[],n=0;n<3;n++){var o="".concat(this.format(e-t*(n+1))," - ").concat(this.format(e-t*n)),r="".concat(this.format(e+t*n)," - ").concat(this.format(e+t*(n+1)));a.unshift(o),a.push(r)}return a}},{key:"binData",value:function(e){console.log(e);var t,a=Object(I.standardDeviation)(e),n=Object(I.mean)(e),o=this.createLabels(n,a),r=[0,0,0,0,0,0],s=Object(P.a)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value,l=i-n,c=Math.floor(l/a);console.log("SD: ".concat(a,", x: ").concat(i,", mean: ").concat(n," Diff: ").concat(l,", sdAway: ").concat(c)),Math.abs(c)<=1?l>0?r[3]++:r[2]++:Math.abs(c)<=2?l>0?r[4]++:r[1]++:l>0?r[5]++:r[0]++}}catch(u){s.e(u)}finally{s.f()}return[o,r]}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement("div",{style:{height:"25vh","max-width":"50vw"}},o.a.createElement("canvas",{id:"barChart"})))}}]),a}(n.Component)),U=V=Object(w.a)(V),F=d.database(),N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={wodID:e.wodID,graphData:new Array,rawScores:new Array,scoreType:"",stats:new Map},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="scores/".concat(this.state.wodID);this.scoreListener=F.ref(t).on("value",(function(t){if(t&&t.exists()){var a=e.getData(t.val()),n=Object(C.a)(a,3),o=n[0],r=n[1],s=n[2],i=e.getDescStats(r),l=r.length>1;e.setState({graphData:o,rawScores:r,scoreType:s,stats:i,showCharts:l})}}))}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"componentWillUnmount",value:function(){console.log("Component will unmount")}},{key:"getData",value:function(e){for(var t=[],a=[],n="",o=0,r=Object.values(e);o<r.length;o++){var s=r[o];n=s.scoreType,"time"===s.scoreType?a.push(R(s.score)):"reps"===s.scoreType&&a.push(parseFloat(s.score))}a.sort((function(e,t){return"time"===n?e-t:"reps"===n?parseFloat(e)-parseFloat(t):1}));for(var i=0;i<a.length;i++)t.push({x:i,y:a[i],c:0});return[t,a,n]}},{key:"getDescStats",value:function(e){var t=[["min",Math.min.apply(Math,Object(S.a)(e))],["max",Math.max.apply(Math,Object(S.a)(e))],["mean",Object(I.mean)(e)],["median",Object(I.median)(e)],["sd",Object(I.standardDeviation)(e)]];return new Map(t)}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(f.a,{item:!0,container:!0,align:"center",xs:12},o.a.createElement(f.a,{item:!0,xs:4},o.a.createElement(B.a,{elevation:6},o.a.createElement(D.a,null,"Low: ","time"===this.state.scoreType?W(this.state.stats.get("min")):this.state.stats.get("min")))),o.a.createElement(f.a,{item:!0,xs:4},o.a.createElement(B.a,{elevation:6},o.a.createElement(D.a,null,"High: ","time"===this.state.scoreType?W(this.state.stats.get("max")):this.state.stats.get("max")))),o.a.createElement(f.a,{item:!0,xs:4},o.a.createElement(B.a,{elevation:6},o.a.createElement(D.a,null,"Avg: ","time"===this.state.scoreType?W(this.state.stats.get("mean")):this.state.stats.get("mean"))))),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(A,{data:this.state.graphData,values:this.state.rawScores,scoreType:this.state.scoreType})),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(U,{data:this.state.graphData,values:this.state.rawScores,scoreType:this.state.scoreType})))}}]),a}(n.Component),z=N=Object(w.a)(N),_=a(285),K=a(286),G=a(287),H=a(288),Z=a(289),J=a(290),q=a(291),Q=a(292),X=(d.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scores:e.scores,uid:e.uid},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,this.state.scores.length>0?o.a.createElement(_.a,{component:B.a},o.a.createElement(K.a,{"aria-label":"score table"},o.a.createElement(G.a,null,o.a.createElement(H.a,null,"Username"),o.a.createElement(H.a,null,"Score"),o.a.createElement(H.a,null)),o.a.createElement(Z.a,null,this.state.scores.map((function(t){var a=e.state.uid==t.get("uid");return o.a.createElement($,{info:t,onRemove:e.props.onRemove,isUserScore:a})}))))):o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(J.a,{variant:"outlined",color:"primary"},o.a.createElement(q.a,null,o.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},"No Scores!")))))}}]),a}(n.Component)),Y=X=Object(w.a)(X);function $(e){var t=e.info.get("score"),a=e.info.get("username"),n=e.info.get("wodID"),r=e.info.get("uid"),s="".concat(n,"/").concat(r);e.isUserScore;return o.a.createElement(Q.a,{selected:e.isUserScore},o.a.createElement(H.a,null,a),o.a.createElement(H.a,null,t),e.isUserScore?o.a.createElement(H.a,null,o.a.createElement(k.a,{size:"small",color:"error",onClick:function(){return e.onRemove(s)}},"Remove")):o.a.createElement(H.a,null))}var ee=a(24),te=a.n(ee),ae=a(312),ne=a(295),oe=a(296),re=a(309),se=(d.storage(),d.database());function ie(e,t,a,n,o,r,s,i){return new Promise((function(l,c){se.ref(e).set({username:a,uid:n,title:t,score:o,wodID:r,boxID:s,scoreType:i,date:Date.now()}).then((function(){return l("Success added score")})).catch((function(){return c("Failed to add score")}))}))}d.database();var le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var o=e.wodMD.get("wodID"),r=e.wodMD.get("scoreType"),s=e.wodMD.get("boxID");return n.state={userMD:e.userMD,wodMD:e.wodMD,wodID:o,boxID:s,scoreType:r},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"objListToArray",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"isNumInSane",value:function(e){return-1===e.search(/\D/)}},{key:"handleAddScore",value:function(){if(this.state.userMD){var e="";if("time"===this.state.scoreType){var t=document.getElementById("scoreViewUserScoreMins").value,a=document.getElementById("scoreViewUserScoreSecs").value;if(!this.isNumInSane(t)||!this.isNumInSane(a))return void alert("Time must only contain numbers, entered: ".concat(t,":").concat(a));if(parseInt(a)>59)return void alert("Seconds must be 59 or below, entered: ".concat(a));if(parseInt(a)<10&&1===a.length&&(a="0".concat(a)),t.length>2)return void alert("Minutes must be 99 or below, entered: ".concat(t));0===t.length&&(t="0"),0===a.length&&(a="0"),e="".concat(t,":").concat(a)}else{if((e=document.getElementById("scoreViewUserScore").value).length>3)return void alert("Score must be 3 digits or less, entered: ".concat(e));if(!this.isNumInSane(e))return void alert("Score must be digits only, entered: ".concat(e))}var n=this.state.userMD.username,o=this.state.userMD.uid,r=this.state.wodMD.get("wodID"),s=this.state.wodMD.get("boxID"),i=this.state.wodMD.get("title"),l="scores/".concat(r,"/").concat(o),c="users/".concat(o,"/scores/").concat(s,"/").concat(r);ie(l,i,n,o,e,r,s,this.state.wodMD.get("scoreType")).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),ie(c,i,n,o,e,r,s,this.state.wodMD.get("scoreType")).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(ae.a,null,o.a.createElement(ne.a,{style:{background:this.props.theme.palette.primary.main},expandIcon:o.a.createElement(te.a,null),"aria-label":"Expand","aria-controls":"additional-actions2-content",id:"additional-actions2-header"},o.a.createElement(D.a,null,"Add Score")),o.a.createElement(oe.a,null,o.a.createElement(f.a,{container:!0},o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(D.a,null,this.state.scoreType.replace(this.state.scoreType[0],this.state.scoreType[0].toUpperCase()))),"reps"===this.state.scoreType?o.a.createElement(f.a,{item:!0,xs:10},o.a.createElement(re.a,{id:"scoreViewUserScore",type:"number",style:{margin:8},pattern:"[0-9]{4}",inputProps:{title:"Numbers only, max length 4",placeholder:"Score"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}})):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{item:!0,xs:5},o.a.createElement(re.a,{id:"scoreViewUserScoreMins",type:"number",style:{margin:8},pattern:"[0-9]{3}",inputProps:{title:"Numbers only, max length 3",placeholder:"Minutes"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}})),o.a.createElement(f.a,{item:!0,xs:5},o.a.createElement(re.a,{id:"scoreViewUserScoreSecs",type:"number",style:{margin:8},pattern:"[0-9]{2}",inputProps:{title:"Numbers only, max length 2",placeholder:"Seconds"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}}))),o.a.createElement(f.a,{item:!0,xs:2},o.a.createElement(k.a,{variant:"outline",color:"primary",onClick:this.handleAddScore.bind(this)},"Add"))))))}}]),a}(n.Component),ce=le=Object(w.a)(le),ue=a(84),me=a(307),de=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={open:e.open},console.log("Modal"),console.log(Object(ue.a)(n)),n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"render",value:function(){var e=this;return o.a.createElement(me.a,{open:this.state.open,onClose:this.props.onClose,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",width:"80vw",transform:"translate(-50%, -50%)"}},o.a.createElement(f.a,{item:!0,align:"center",xs:12},o.a.createElement(B.a,{style:{height:"25vh",display:"flex",flexDirection:"column",justifyContent:"center"}},o.a.createElement(D.a,{style:{position:""}},this.props.modalText),o.a.createElement(k.a,{color:"primary",variant:"outlined",onClick:function(){e.props.onAction()}},this.props.actionText),o.a.createElement(k.a,{color:"error",variant:"outlined",onClick:function(){e.props.onClose()}},this.props.cancelText)))))}}]),a}(n.Component),he=d.database(),pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var o=e.wodMD.get("wodID"),r=e.wodMD.get("scoreType"),s=e.wodMD.get("boxID");return n.state={userMD:e.userMD,wodID:o,wodMD:e.wodMD,boxID:s,scoreType:r,scores:new Array,userScore:{},curRemoveScoreID:"",showRemoveAlert:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="scores/".concat(this.state.wodID),a="users/".concat(this.state.userMD.uid,"/scores/")+"".concat(this.state.boxID,"/").concat(this.state.wodID);this.userScoreListener=he.ref(a).on("value",(function(t){t&&t.exists()&&(console.log("userScoreListener"),e.setState({userScore:t.val()}))})),this.scoreListener=he.ref(t).on("value",(function(t){if(t&&t.exists()){var a=e.objListToArray(t.val()),n=e.state.scoreType&&"time"===e.state.scoreType?1:0;a.sort((function(e,t){return n?parseFloat(e.get("score"))<parseFloat(t.get("score"))?-1:1:parseFloat(e.get("score"))>parseFloat(t.get("score"))?1:-1})),e.setState({scores:a})}}))}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"componentWillUnmount",value:function(){void 0!==this.scoreListener()&&this.scoreListener(),void 0!==this.userScoreListener()&&this.userScoreListener()}},{key:"objListToArray",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"handleRemoveScore",value:function(e){console.log("Remove score with ID: ".concat(e)),this.setState({curRemoveScoreID:e,showRemoveAlert:!0})}},{key:"removeScore",value:function(){var e=this,t=this.state.curRemoveScoreID;""===t||t.length<=0||(this.setState({showRemoveAlert:!1}),function(e){return new Promise((function(t,a){se.ref("scores/".concat(e)).remove().then((function(){t("Successfully removed score: ".concat(e))})).catch((function(t){a("Failed to remove score: ".concat(e))}))}))}(t).then((function(t){console.log(t),e.setState({showRemoveAlert:!1})})).catch((function(e){console.log(e)})))}},{key:"render",value:function(){var e=this;return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(f.a,{item:!0,align:"center",xs:12},o.a.createElement(D.a,null,this.state.wodMD.get("title")),o.a.createElement(D.a,null,"Type: ",this.state.wodMD.get("scoreType"))),o.a.createElement(f.a,{item:!0,container:!0,xs:12},o.a.createElement(f.a,{item:!0,xs:1},o.a.createElement("span",null)),o.a.createElement(f.a,{item:!0,xs:11},o.a.createElement(j.a,null,this.state.wodMD.get("wodText")))),o.a.createElement(ce,{userMD:this.state.userMD,wodMD:this.state.wodMD}),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(z,{wodID:this.state.wodMD.get("wodID")})),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,null,o.a.createElement(Y,{scores:this.state.scores,uid:this.state.userMD.uid,onRemove:this.handleRemoveScore.bind(this)}))),o.a.createElement(f.a,{item:!0,xs:12,align:"center"},o.a.createElement(k.a,{variant:"outlined",color:"secondary",onClick:function(){e.props.handleBack()}},"Back")),o.a.createElement(de,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.removeScore.bind(this),modalText:"Remove score?",actionText:"Remove",cancelText:"Cancel"}))}}]),a}(n.Component),ve=pe=Object(w.a)(pe),fe=a(60),be=a(305),xe=(d.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={wodInfo:e.wodInfo,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes,open:e.open,onClose:e.onClose,title:e.title,wodText:e.wodText},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"editWOD",value:function(){var e=this,t=document.getElementById("editOwnerBoxAddWodBoxID").value,a=document.getElementById("editOwnerBoxAddWodTitle").value,n=document.getElementById("editOwnerBoxAddWodScoreType").value,o=document.getElementById("editOwnerBoxAddWodWodText").value,r=this.state.wodInfo.get("wodID");if(!t||!a||!n||!o||!r)return console.log("Error with input editWod"),void console.log(t,a,n,o);(function(e,t,a,n,o){var r="wods/".concat(e,"/").concat(t);return se.ref(r).update({title:a,wodText:n,scoreType:o})})(t,r,a,o,n).then((function(t){console.log(t),e.props.onClose()})).catch((function(e){console.log(e)}))}},{key:"handleValChange",value:function(e,t){var a=e.target.name;console.log(a,t),this.setState(Object(fe.a)({},a,e.target.value))}},{key:"render",value:function(){var e=this.state.wodInfo.get("scoreType"),t=this.state.wodInfo.get("boxID");return o.a.createElement(me.a,{open:this.state.open,onClose:this.props.onClose,"aria-labelledby":"edit-wod-modal","aria-describedby":"edit-wod"},o.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",width:"80vw",transform:"translate(-50%, -50%)"}},o.a.createElement(f.a,{item:!0,align:"center",xs:12},o.a.createElement(B.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},o.a.createElement(D.a,{style:{position:""}},"Edit Wod(",this.state.wodInfo.get("wodID"),")"),o.a.createElement(f.a,{item:!0,container:!0,xs:12},o.a.createElement(f.a,{item:!0,xs:6},o.a.createElement(be.a,{native:!0,inputProps:{name:"Box",id:"editOwnerBoxAddWodBoxID"}},this.state.hasBoxes?this.state.userBoxes.map((function(e,a){var n=e.get("boxID");return o.a.createElement("option",{key:a,value:n,selected:t===n},e.get("title"))})):o.a.createElement("option",{"aria-label":"None",value:""},"No boxes!"))),o.a.createElement(f.a,{item:!0,xs:6},o.a.createElement(be.a,{native:!0,inputProps:{name:"Score Type",id:"editOwnerBoxAddWodScoreType"}},["time","reps"].map((function(t){return o.a.createElement("option",{value:t,selected:e===t},t)})))),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(re.a,{id:"editOwnerBoxAddWodTitle",type:"text",name:"title",style:{margin:8},value:this.state.title,onChange:this.handleValChange.bind(this),pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Title"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}})),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(re.a,{id:"editOwnerBoxAddWodWodText",type:"text",name:"wodText",style:{margin:8},value:this.state.wodText,onChange:this.handleValChange.bind(this),pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Workout here"},margin:"normal",color:"primary",multiline:!0,rows:5,InputLabelProps:{shrink:!0}})),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:this.editWOD.bind(this)},"Update")),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:this.props.onClose},"Cancel")))))))}}]),a}(n.Component)),ye=a(299),ge=a(314),Ee=a(306),we=a(52),Be=a.n(we),De=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={headers:e.headers,rows:e.rows,filteredRows:e.filteredRows,orderTableBy:"date",orderTable:"asc",pageNum:0,rowsPerPage:5,pageStart:0,pageEnd:5},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value;console.log(t);var a=this.state.rows.filter((function(e){return e.get("title").toLowerCase().includes(t.toLowerCase())}));this.setState({filteredRows:a})}},{key:"descendingComparator",value:function(e,t,a){return t.get(a)<e.get(a)?-1:t.get(a)>e.get(a)?1:0}},{key:"getComparator",value:function(e,t){var a=this;return"desc"===e?function(e,n){return a.descendingComparator(e,n,t)}:function(e,n){return-a.descendingComparator(e,n,t)}}},{key:"stableSort",value:function(e){var t=this.state.filteredRows.map((function(e,t){return[e,t]}));return t.sort((function(t,a){var n=e(t[0],a[0]);return 0!==n?n:t[1]-a[1]})),t.map((function(e){return e[0]}))}},{key:"createSortHandler",value:function(e){var t=this.state.orderTableBy===e&&"asc"===this.state.orderTable;this.setState({orderTableBy:e,orderTable:t?"desc":"asc"})}},{key:"handleChangePage",value:function(e,t){var a=t*this.state.rowsPerPage,n=t*this.state.rowsPerPage+this.state.rowsPerPage;this.setState({pageNum:t,pageStart:a,pageEnd:n})}},{key:"handleChangeRowsPerPage",value:function(e){var t=parseInt(e.target.value);console.log(t),this.setState({pageNum:0,rowsPerPage:t,pageStart:0,pageEnd:t})}},{key:"render",value:function(){var e=this;return o.a.createElement(f.a,{item:!0,xs:12,align:"center"},o.a.createElement(B.a,{elevation:2},o.a.createElement(B.a,{elevation:2,component:"form"},o.a.createElement(re.a,{fullWidth:!0,variant:"outlined",onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search",InputProps:{startAdornment:o.a.createElement(ye.a,{position:"start"},o.a.createElement(Be.a,{color:"primary"}))}})),o.a.createElement(f.a,{container:!0,item:!0,xs:12},o.a.createElement(_.a,null,o.a.createElement(K.a,null,o.a.createElement(G.a,null,o.a.createElement(Q.a,null,this.state.headers.map((function(t){return o.a.createElement(H.a,null,t.sortable?o.a.createElement(ge.a,{active:t.id===e.state.orderTableBy,direction:t.id===e.state.orderTableBy?e.state.orderTable:"asc",onClick:function(){e.createSortHandler(t.id)}},t.label):o.a.createElement(o.a.Fragment,null,t.label))})))),o.a.createElement(Z.a,null,this.state.filteredRows.length>0?this.stableSort(this.getComparator(this.state.orderTable,this.state.orderTableBy)).slice(this.state.pageStart,this.state.pageEnd).map((function(t){return o.a.createElement(ke,{handleView:e.props.handleView,handleRemove:e.props.handleRemove,handleEdit:e.props.handleEdit,info:t,showOwnerBtns:e.props.showOwnerBtns})})):o.a.createElement("span",null,"No data!")))),o.a.createElement(Ee.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.state.filteredRows.length,rowsPerPage:this.state.rowsPerPage,page:this.state.pageNum,onChangePage:this.handleChangePage.bind(this),onChangeRowsPerPage:this.handleChangeRowsPerPage.bind(this)}))))}}]),a}(n.Component);function ke(e){var t=e.info.get("title"),a=e.info.get("scoreType"),n=e.info.get("wodText"),r=e.info.get("date");return o.a.createElement(Q.a,null,o.a.createElement(H.a,null,o.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},new Date(r).toLocaleDateString("en-US"))),o.a.createElement(H.a,null,o.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},t)),o.a.createElement(H.a,null,o.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},a)),o.a.createElement(H.a,null,o.a.createElement(D.a,{variant:"h5",component:"h2",gutterBottom:!0},o.a.createElement(j.a,null,n))),o.a.createElement(H.a,null,o.a.createElement(k.a,{size:"small",color:"primary",onClick:function(){return e.handleView(e.info)}},"View Scores")),o.a.createElement(o.a.Fragment,null,e.showOwnerBtns?o.a.createElement(H.a,null,o.a.createElement(k.a,{size:"small",color:"secondary",onClick:function(){return e.handleEdit(e.info)}},"Edit")):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,e.showOwnerBtns?o.a.createElement(H.a,null,o.a.createElement(k.a,{size:"small",color:"error",onClick:function(){return e.handleRemove(e.info)}},"Remove")):o.a.createElement(o.a.Fragment,null)))}var Oe=De=Object(w.a)(De),je=d.database(),Se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userMD:e.userMD,boxID:e.boxID,boxMD:new Map,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes,wods:new Array,showWodList:!0,currentWodID:"",currentWodMD:new Map,showRemoveAlert:!1,showEditModal:!1,editWodInfo:new Map,curRemoveWodBoxID:"",curRemoveWodID:"",curRemoveWodTitle:""},n.wodPath="wods/".concat(n.props.boxID),n.boxPath="boxes/".concat(n.props.boxID),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.boxListener=je.ref(this.boxPath).on("value",(function(t){if(t&&t.exists()){var a=new Map(Object.entries(t.val()));e.setState({boxMD:a})}})),this.wodListener=je.ref(this.wodPath).on("value",(function(t){if(t&&t.exists()){var a=e.objListToArray(t.val());e.setState({wods:a})}}))}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"componentWillUnmount",value:function(){this.wodListener(),this.boxListener()}},{key:"objListToArray",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"handleScoreView",value:function(e){this.setState({showWodList:!1,currentWodMD:e})}},{key:"handleBack",value:function(){this.setState({showWodList:!0})}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"handleRemoveWod",value:function(e){console.log(e),this.setState({showRemoveAlert:!0,curRemoveWodBoxID:e.get("boxID"),curRemoveWodID:e.get("wodID"),curRemoveWodTitle:e.get("title")})}},{key:"deleteWod",value:function(){var e=this;(function(e,t){return new Promise((function(a,n){try{se.ref(e).remove().then((function(){se.ref(t).remove().then((function(){a("Deleting complete")}))}))}catch(o){n("error while deleting Wod")}}))})("wods/".concat(this.state.curRemoveWodBoxID,"/").concat(this.state.curRemoveWodID),"scores/".concat(this.state.curRemoveWodID)).then((function(t){console.log(t),e.setState({showRemoveAlert:!1})}))}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.wods.filter((function(e){return e.get("title").toLowerCase().includes(t.toLowerCase())}));this.setState({filteredWods:a})}},{key:"handleEdit",value:function(e){console.log("Populate with info, show in modal with form"),console.log(e),this.setState({editWodInfo:e,showEditModal:!0})}},{key:"handleEditModalClose",value:function(){this.setState({showEditModal:!1})}},{key:"render",value:function(){var e=this,t=this.state.boxMD.get("ownerUID")===this.state.userMD.uid&&!this.props.isReadOnly;return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,{elevation:2},o.a.createElement(f.a,{item:!0,align:"center",xs:12},o.a.createElement(D.a,{align:"center",variant:"h3"},this.state.boxMD.get("title"))),this.state.showWodList?o.a.createElement(o.a.Fragment,null,this.state.wods.length>0?o.a.createElement(Oe,{rows:this.state.wods,filteredRows:this.state.wods,headers:t?[{id:"date",sortable:!0,label:"Date"},{id:"title",sortable:!0,label:"Title"},{id:"scoreType",sortable:!0,label:"Scoring"},{id:"wodText",sortable:!1,label:"Wod"},{id:"view",sortable:!1,label:""},{id:"edit",sortable:!1,label:""},{id:"remove",sortable:!1,label:""}]:[{id:"date",sortable:!0,label:"Date"},{id:"title",sortable:!0,label:"Title"},{id:"scoreType",sortable:!0,label:"Scoring"},{id:"wodText",sortable:!1,label:"Wod"},{id:"view",sortable:!1,label:""}],handleView:this.handleScoreView.bind(this),handleRemove:this.handleRemoveWod.bind(this),handleEdit:this.handleEdit.bind(this),showOwnerBtns:t}):o.a.createElement(o.a.Fragment,null)):o.a.createElement(ve,{userMD:this.state.userMD,wodMD:this.state.currentWodMD,handleBack:this.handleBack.bind(this)})),o.a.createElement(f.a,{item:!0,xs:12,align:"center"},o.a.createElement(k.a,{variant:"outlined",color:"secondary",onClick:function(){e.props.handleBack()}},"Back")),o.a.createElement(de,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),onAction:this.deleteWod.bind(this),modalText:"Remove ".concat(this.state.curRemoveWodTitle," (").concat(this.state.curRemoveWodID,")?"),actionText:"Delete",cancelText:"Cancel"}),o.a.createElement(xe,{open:this.state.showEditModal,onClose:this.handleEditModalClose.bind(this),userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes,wodInfo:this.state.editWodInfo,title:this.state.editWodInfo.get("title"),wodText:this.state.editWodInfo.get("wodText")}))}}]),a}(n.Component),Ce=Se=Object(w.a)(Se),Ie=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,isOwner:e.isOwner,allBoxes:e.allBoxes,filteredBoxes:e.allBoxes},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({filteredBoxes:this.props.allBoxes})}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"onKeyUp",value:function(e){e.keyCode||e.which}},{key:"onChange",value:function(e){var t=e.target.value,a=this.state.allBoxes.filter((function(e){return e.get("title").toLowerCase().includes(t.toLowerCase())}));this.setState({filteredBoxes:a})}},{key:"render",value:function(){var e=this;return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,{elevation:2,component:"form"},o.a.createElement(re.a,{fullWidth:!0,variant:"outlined",onKeyUp:this.onKeyUp.bind(this),onChange:this.onChange.bind(this),placeholder:"Search Boxes",InputProps:{startAdornment:o.a.createElement(ye.a,{position:"start"},o.a.createElement(Be.a,{color:"primary"}))}})),o.a.createElement(f.a,{item:!0,xs:12},this.state.filteredBoxes.map((function(t,a){return o.a.createElement(Me,{key:a,info:t,color:e.props.theme.palette.primary.mainGrad,handleBoxView:e.props.handleBoxView,handleRemoveBox:e.props.handleRemoveBox,isOwner:e.props.isOwner})}))))}}]),a}(n.Component);function Me(e){var t=e.info.get("title"),a=e.info.get("boxID");return o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,null,o.a.createElement(f.a,{container:!0,itemxs:12},o.a.createElement(f.a,{item:!0,xs:10},o.a.createElement(D.a,{align:"left",style:{padding:"2.5vw"},variant:"body1"},t)),o.a.createElement(f.a,{container:!0,item:!0,xs:2,align:"center",alignItems:"center"},o.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:function(){e.handleBoxView(a)}},"View"),e.isOwner?o.a.createElement(k.a,{variant:"outlined",color:"error",onClick:function(){e.handleRemoveBox(a,t)}},"Remove"):o.a.createElement(o.a.Fragment,null)))))}var Te=Ie=Object(w.a)(Ie),Re=d.database(),We=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,showBoxView:!1,allBoxes:[],currentBoxID:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.allBoxesListener=Re.ref("boxes").on("value",(function(t){if(t&&t.exists()){var a=e.objectsToArray(t.val());a.sort((function(e,t){return e.get("title").toLowerCase()>t.get("title").toLowerCase()?-1:1})),e.setState({allBoxes:a})}}))}},{key:"componentWillUnmount",value:function(){void 0!==this.allBoxesListener&&this.allBoxesListener()}},{key:"objectsToArray",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"handleBoxView",value:function(e){this.setState({showBoxView:!0,currentBoxID:e})}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"handleBack",value:function(){this.setState({showBoxView:!1})}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12},this.state.showBoxView?o.a.createElement(Ce,{userMD:this.state.userMD,handleBack:this.handleBack.bind(this),boxID:this.state.currentBoxID,isReadOnly:!0}):o.a.createElement(o.a.Fragment,null,this.state.allBoxes.length>0?o.a.createElement(Te,{handleBoxView:this.handleBoxView.bind(this),allBoxes:this.state.allBoxes,isOwner:!1,handleRemoveBox:this.props.handleRemoveBox}):o.a.createElement(o.a.Fragment,null)))}}]),a}(n.Component),Le=We=Object(w.a)(We),Ae=a(294),Pe=a(308),Ve=(a(238),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"handleSubmit",value:function(e){var t=this,a=document.getElementById("email"),n=document.getElementById("password");document.getElementById("passwordConfirm");console.log(a.value,n),d.auth().signInWithEmailAndPassword(a.value,n.value).then((function(e){console.log("Firebase res"),console.log(e),t.props.onLogin(e.user)})).catch((function(e){console.log(e);e.code,e.message}))}},{key:"render",value:function(){return o.a.createElement(f.a,{container:!0,id:"login",align:"center",justify:"center"},o.a.createElement("br",null),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,{elevation:"2"},o.a.createElement(D.a,{variant:"h4"},"Login"),o.a.createElement("br",null),o.a.createElement(re.a,{id:"email",style:{margin:8},placeholder:"Email",margin:"normal",InputLabelProps:{shrink:!0}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(re.a,{id:"password",type:"password",style:{margin:8},placeholder:"Passowrd",margin:"normal",InputLabelProps:{shrink:!0}}),o.a.createElement("br",null),o.a.createElement("br",null))),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,{elevation:"2"},o.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:this.handleSubmit.bind(this)},"Login"),o.a.createElement(p.b,{to:"/register",className:"no-line",style:{"padding-left":"10px"}},o.a.createElement(k.a,{variant:"outlined",color:"secondary"},"Register")))))}}]),a}(n.Component)),Ue=(d.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,userBoxes:e.userBoxes,hasBoxes:e.hasBoxes,showBoxList:!0,currentBoxID:"",showRemoveAlert:!1,curRemoveBoxID:"",curRemoveBoxTitle:""},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"componentWillUnmount",value:function(){console.log("Component will unmount")}},{key:"handleBoxView",value:function(e){this.setState({showBoxList:!1,currentBoxID:e})}},{key:"handleRemoveBox",value:function(e,t){this.setState({showRemoveAlert:!0,curRemoveBoxID:e,curRemoveBoxTitle:t})}},{key:"handleBack",value:function(){this.setState({showBoxList:!0})}},{key:"handleModalClose",value:function(){this.setState({showRemoveAlert:!1})}},{key:"deleteBox",value:function(){var e=this;(function(e,t,a){var n="boxNames/".concat(t),o="users/".concat(a,"/boxes/").concat(e),r="boxes/".concat(e),s="wods/".concat(e);return Promise.all([se.ref(r).set({}),se.ref(s).set({}),se.ref(n).set({}),se.ref(o).set({})])})(this.state.curRemoveBoxID,this.state.curRemoveBoxTitle,this.state.userMD.uid).then((function(t){e.handleModalClose()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(ae.a,{id:"BoxListAccordion"},o.a.createElement(ne.a,{style:{background:this.props.theme.palette.primary.main},expandIcon:o.a.createElement(te.a,null),"aria-label":"Expand","aria-controls":"additional-actions2-content",id:"additional-actions2-header"},o.a.createElement(D.a,null,"Boxes and Wods")),o.a.createElement(oe.a,null,this.state.showBoxList?o.a.createElement(f.a,{container:!0,item:12},this.state.userBoxes.length>0?o.a.createElement(Te,{user:this.state.user,userMD:this.state.userMD,allBoxes:this.state.userBoxes,handleRemoveBox:this.handleRemoveBox.bind(this),handleBoxView:this.handleBoxView.bind(this),isOwner:!0}):o.a.createElement(f.a,{item:!0,zeroMinWidth:!0,xs:6},o.a.createElement(B.a,{elevation:4,style:{padding:"1vw"}},o.a.createElement(D.a,{noWrap:!0,align:"left"},"No boxes Found!")))):o.a.createElement(Ce,{handleBack:this.handleBack.bind(this),userMD:this.state.userMD,boxID:this.state.currentBoxID,userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes,isReadOnly:!1})),o.a.createElement(me.a,{open:this.state.showRemoveAlert,onClose:this.handleModalClose.bind(this),"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",width:"80vw",transform:"translate(-50%, -50%)"}},o.a.createElement(f.a,{item:!0,align:"center",xs:12},o.a.createElement(B.a,{style:{height:"25vh",display:"flex",flexDirection:"column",justifyContent:"center"}},o.a.createElement(D.a,{style:{position:""}},"Remove ",this.state.curRemoveBoxTitle," (",this.state.curRemoveBoxID,")"),o.a.createElement(k.a,{color:"primary",variant:"outlined",onClick:function(){e.deleteBox()}},"Delete"))))))}}]),a}(n.Component)),Fe=Ue=Object(w.a)(Ue),Ne=(d.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userBoxes:e.userBoxes,hasBoxes:e.hasBoxes},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"createWOD",value:function(){var e=document.getElementById("ownerBoxAddWodBoxID").value,t=document.getElementById("ownerBoxAddWodTitle").value,a=document.getElementById("ownerBoxAddWodScoreType").value,n=document.getElementById("ownerBoxAddWodWodText").value;if(!e||!t||!a||!n)return console.log("Error with input createWod"),void console.log(e,t,a,n);(function(e,t,a,n){var o="wods/".concat(e),r=se.ref(o).push().key,s="".concat(o,"/").concat(r),i={};return i["shallow/".concat(o,"/").concat(r)]=!0,i[s]={boxID:e,wodID:r,title:t,scoreType:n,wodText:a,date:Date.now()},se.ref().update(i)})(e,t,n,a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,container:!0,xs:12},o.a.createElement(f.a,{item:!0,xs:6},o.a.createElement(be.a,{native:!0,inputProps:{name:"Box",id:"ownerBoxAddWodBoxID"}},this.state.hasBoxes?this.state.userBoxes.map((function(e,t){return o.a.createElement("option",{key:t,value:e.get("boxID")},e.get("title"))})):o.a.createElement("option",{"aria-label":"None",value:""},"No boxes!"))),o.a.createElement(f.a,{item:!0,xs:6},o.a.createElement(be.a,{native:!0,inputProps:{name:"Score Type",id:"ownerBoxAddWodScoreType"}},o.a.createElement("option",{value:"time"},"Time"),o.a.createElement("option",{value:"reps"},"Reps"))),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(re.a,{id:"ownerBoxAddWodTitle",type:"text",style:{margin:8},pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Title"},margin:"normal",color:"primary",InputLabelProps:{shrink:!0}})),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(re.a,{id:"ownerBoxAddWodWodText",type:"text",style:{margin:8},pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Workout here"},margin:"normal",color:"primary",multiline:!0,rows:10,InputLabelProps:{shrink:!0}})),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:this.createWOD.bind(this)},"Enter WOD")))}}]),a}(n.Component)),ze=d.database(),_e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD,userBoxes:[],hasBoxes:!1,addBoxProgress:!0,scoreTypeSelectVal:"",boxIDSelectVal:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.listenForBoxes()}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e)),"owner"===e.userMD.accountType&&this.listenForBoxes()}},{key:"componentWillUnmount",value:function(){void 0!==this.boxListener&&this.boxListener()}},{key:"getArrayOfBoxes",value:function(e){return Array.from(Object.entries(e),(function(e){return new Map(Object.entries(e[1]))}))}},{key:"listenForBoxes",value:function(){var e=this;if(null!==this.state.user.uid){var t="users/".concat(this.state.user.uid,"/boxes");this.boxListener=ze.ref(t).on("value",(function(t){null!=t&&t.exists()?e.setState({hasBoxes:!0,userBoxes:e.getArrayOfBoxes(t.val())}):e.setState({hasBoxes:!1,userBoxes:[]})}))}}},{key:"onKeyUp",value:function(e){if(13==(e.keyCode||e.which)){var t=document.getElementById("ownerBoxAddBoxTitle").value;this.setState({showAddBoxProgress:!0}),this.createBox(t)}}},{key:"createBox",value:function(e){(function(e,t){var a="boxNames/".concat(e),n="users/".concat(t,"/boxes");return new Promise((function(o,r){se.ref(a).once("value",(function(s){if(s.exists())r("Title exists");else{var i=se.ref("boxes").push().key,l={title:e,ownerUID:t,boxID:i,date:Date.now()};Promise.all([se.ref("".concat("boxes","/").concat(i)).set(l),se.ref(a).set(l),se.ref("".concat(n,"/").concat(i)).set(l)]).then((function(e){o("Succefully created box ".concat(e.toString()))}))}}))}))})(e,this.props.user.uid).then((function(e){console.log(e)}))}},{key:"handleSelectValChange",value:function(e){var t=e.target.name;console.log(t),this.setState(Object(fe.a)({},t,e.target.value))}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12,id:"ownerBox"},o.a.createElement(D.a,{variant:"h3"},"Welcome, ",this.state.userMD.accountType,"!"),o.a.createElement(ae.a,null,o.a.createElement(ne.a,{style:{background:this.props.theme.palette.primary.mainGrad},expandIcon:o.a.createElement(te.a,null),"aria-label":"Expand","aria-controls":"additional-actions1-content",id:"additional-actions1-header"},o.a.createElement(D.a,null,"Add Box")),o.a.createElement(oe.a,null,o.a.createElement(re.a,{id:"ownerBoxAddBoxTitle",type:"text",style:{margin:8},pattern:"[\\sA-Za-z0-9]{35}",inputProps:{title:"Letters only, max length 35",placeholder:"Name of box"},onKeyUp:this.onKeyUp.bind(this),margin:"normal",color:"primary",InputLabelProps:{shrink:!0}}))),o.a.createElement(ae.a,null,o.a.createElement(ne.a,{style:{background:this.props.theme.palette.primary.mainGrad},expandIcon:o.a.createElement(te.a,null),"aria-label":"Expand","aria-controls":"additional-actions0-content",id:"additional-actions0-header"},o.a.createElement(D.a,null,"Add WOD")),o.a.createElement(oe.a,null,this.state.hasBoxes?o.a.createElement(Ne,{uid:this.state.user.uid,userMD:this.state.userMD,userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes}):o.a.createElement("span",null,"No boxes"))),o.a.createElement(Fe,{user:this.state.user,userMD:this.state.userMD,userBoxes:this.state.userBoxes,hasBoxes:this.state.hasBoxes}))}}]),a}(n.Component),Ke=_e=Object(w.a)(_e),Ge=d.database(),He=(n.Component,d.database(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD},n}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"sendVerificationEmail",value:function(){var e=this;this.state.user.sendEmailVerification().then((function(){e.setState({emailAlertOpen:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(f.a,{container:!0,align:"center"},o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(Ae.a,{in:this.state.emailAlertOpen},o.a.createElement(Pe.a,{onClose:function(){e.setState({emailAlertOpen:!1})}},"Email sent!"))),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(B.a,{elevation:2}),this.state.user.emailVerified?o.a.createElement(o.a.Fragment,null):o.a.createElement(B.a,{elevation:2},o.a.createElement(k.a,{variant:"outline",onClick:this.sendVerificationEmail.bind(this)},o.a.createElement(D.a,{variant:"h5",component:"h3"},"Send Verification Email"))),o.a.createElement(B.a,{elevation:2},o.a.createElement(Ke,{user:this.state.user,userMD:this.state.userMD}))),o.a.createElement(f.a,{item:!0,xs:12},o.a.createElement(f.a,{item:!0,xs:12,className:"compBorderOutline"},o.a.createElement(B.a,{elevation:2},o.a.createElement(k.a,{variant:"outlined",color:"secondary",onClick:this.props.onLogout},o.a.createElement(D.a,{variant:"h6",component:"h6"},"Logout"))))))}}]),a}(n.Component)),Ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:e.user,userMD:e.userMD},n}return Object(l.a)(a,[{key:"handleLogout",value:function(){var e=this;d.auth().signOut().then((function(){alert("Signed Out"),e.setState({user:null})}),(function(e){console.error("Sign Out Error",e)}))}},{key:"handleLogIn",value:function(e){this.setState({user:e})}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(E.a)({},e))}},{key:"render",value:function(){return o.a.createElement(f.a,{item:!0,xs:12,id:"profilepage"},null!==this.state.user?o.a.createElement(He,{onLogout:this.handleLogout.bind(this),user:this.state.user,userMD:this.state.userMD}):o.a.createElement(Ve,{onLogin:this.handleLogIn.bind(this)}))}}]),a}(n.Component),Je=a(301),qe=a(300),Qe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement(Je.a,{position:"static",style:{background:this.props.theme.palette.background.toolbar}},o.a.createElement(qe.a,{disableGutters:!1},o.a.createElement(D.a,{gutterBottom:!0,variant:"h3",style:{margin:"0 auto"}},"WodTrackrr")))}}]),a}(n.Component),Xe=Qe=Object(w.a)(Qe),Ye=a(30),$e=Object(Ye.a)(),et=a(141),tt=a(311),at=a(302),nt={palette:{common:{black:"#000",white:"#fff"},background:{paper:"#2e3134",toolbar:"#0d0e0e",tableHeader:"#1b1d1e",default:"rgba(48, 48, 48, 1)"},primary:{main:"#03ceec",mainGrad:"linear-gradient(90deg,#0890fd,#01d3fe)",contrastText:"rgba(255, 255, 255, 1)"},secondary:{light:"#6C30FF",main:"#6C30FF",dark:"#6C30FF",contrastText:"#fff"},error:{light:"#ea4331",main:"#c43627",dark:"#2d0d0b",contrastText:"rgba(255, 255, 255, 1)"},text:{primary:"#ffffff",secondary:"#e0dfdf",disabled:"#bdbdbd",hint:"#afafaf"}}},ot=nt=nt,rt=d.database(),st=Object(et.a)(ot);st=Object(tt.a)(st);var it=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={btmnav:0,user:d.auth().currentUser,userMD:!1},n.firebaseAuthListener=d.auth().onAuthStateChanged((function(e){e&&(n.setState({user:e}),n.userMDListener=rt.ref("users/"+e.uid).on("value",(function(e){e.val()&&n.setState({userMD:e.val()})})))})),n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){void 0!==this.firebaseAuthListener&&this.firebaseAuthListener&&this.firebaseAuthListener(),null!==this.userMDListener&&this.userMDListener&&this.userMDListener()}},{key:"render",value:function(){var e=this;return o.a.createElement(h.Provider,null,o.a.createElement(p.a,{history:$e},o.a.createElement(at.a,{theme:st},o.a.createElement(f.a,{container:!0},o.a.createElement(f.a,{item:!0,xs:12,id:"page-header"},o.a.createElement(Xe,{className:"header"})),o.a.createElement(f.a,{item:!0,xs:11,id:"page-container",className:"page-content"},o.a.createElement(v.c,null,o.a.createElement(v.a,{exact:!0,path:"/boxSearch"},o.a.createElement(Le,{user:this.state.user,userMD:this.state.userMD})),o.a.createElement(v.a,{exact:!0,path:"/profile"},o.a.createElement(Ze,{user:this.state.user,userMD:this.state.userMD})))),o.a.createElement(f.a,{item:!0,xs:12,className:"footer"},o.a.createElement(b.a,{className:"footer",value:this.state.btmnav,onChange:function(t,a){e.setState({btmnav:a})},style:{background:st.palette.background.toolbar},showLabels:!0},o.a.createElement(x.a,{label:"Search",component:p.b,to:"/boxSearch",icon:o.a.createElement(g.a,null)}),o.a.createElement(x.a,{label:"Profile",component:p.b,to:"/profile",icon:o.a.createElement(g.a,null)})))))))}}]),a}(o.a.Component);it.contextType=h,s.a.render(o.a.createElement(it,null),document.getElementById("root"))},26:function(e,t,a){}},[[150,1,2]]]);
//# sourceMappingURL=main.459907af.chunk.js.map